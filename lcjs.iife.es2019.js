/* LightningChart JS v4.0.0 */
var lcjs=function(t){"use strict";class i{constructor(){this.o=!0}u(){return this.o}}class s extends i{constructor(t,i){super(),this.l=t,this.o=i}S(t){return t!==this.l&&(this.l=t,this.o=!0),this}M(){return this.l}u(){return super.u()}}const e=(t,i)=>({x:t,y:i}),h=(t,i)=>({x:t,y:i}),r=(t,i,s)=>({position:t,high:i,low:s}),n=(t,i,s)=>({x:t,y:i,z:s}),o=t=>{const i=Array(0),s=Array(0);return t.length>0&&t.forEach((t=>{i.push(e(t.position,t.high)),s.push(e(t.position,t.low))})),[i,s]},a=(t,i)=>({min:t,max:i}),u=(t,i,s,e)=>({x:Math.ceil(t),y:Math.ceil(i),width:Math.ceil(s),height:Math.ceil(e)}),l=(t,i=!0)=>new s(t,i),c=(t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}),f=c,d=(t,i)=>({left:void 0!==i.left?i.left:t.left,top:void 0!==i.top?i.top:t.top,right:void 0!==i.right?i.right:t.right,bottom:void 0!==i.bottom?i.bottom:t.bottom});var g=32,m=31,y={};function p(t){t&&(t.value=!0)}function S(){}function v(t){return void 0===t.size&&(t.size=t._(x)),t.size}function b(t,i){if("number"!=typeof i){var s=i>>>0;if(""+s!==i||4294967295===s)return NaN;i=s}return i<0?v(t)+i:i}function x(){return!0}function M(t,i,s){return(0===t&&!k(t)||void 0!==s&&t<=-s)&&(void 0===i||void 0!==s&&i>=s)}function _(t,i){return A(t,i,0)}function w(t,i){return A(t,i,i)}function A(t,i,s){return void 0===t?s:k(t)?i===1/0?i:0|Math.max(0,i+t):void 0===i||i===t?t:0|Math.min(i,t)}function k(t){return t<0||0===t&&1/t==-1/0}var C="@@__IMMUTABLE_ITERABLE__@@";function T(t){return Boolean(t&&t[C])}var I="@@__IMMUTABLE_KEYED__@@";function F(t){return Boolean(t&&t[I])}var P="@@__IMMUTABLE_INDEXED__@@";function D(t){return Boolean(t&&t[P])}function B(t){return F(t)||D(t)}var O=function(t){return T(t)?t:st(t)},L=function(t){function i(t){return F(t)?t:et(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(O),E=function(t){function i(t){return D(t)?t:ht(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(O),R=function(t){function i(t){return T(t)&&!B(t)?t:rt(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(O);O.Keyed=L,O.Indexed=E,O.Set=R;var z="@@__IMMUTABLE_SEQ__@@";function V(t){return Boolean(t&&t[z])}var N="@@__IMMUTABLE_RECORD__@@";function G(t){return Boolean(t&&t[N])}function H(t){return T(t)||G(t)}var W="@@__IMMUTABLE_ORDERED__@@";function U(t){return Boolean(t&&t[W])}var j="function"==typeof Symbol&&Symbol.iterator,$=j||"@@iterator",Y=function(t){this.next=t};function X(t,i,s,e){var h=0===t?i:1===t?s:[i,s];return e?e.value=h:e={value:h,done:!1},e}function Z(){return{value:void 0,done:!0}}function K(t){return!!Array.isArray(t)||!!Q(t)}function q(t){return t&&"function"==typeof t.next}function J(t){var i=Q(t);return i&&i.call(t)}function Q(t){var i=t&&(j&&t[j]||t["@@iterator"]);if("function"==typeof i)return i}Y.prototype.toString=function(){return"[Iterator]"},Y.KEYS=0,Y.VALUES=1,Y.ENTRIES=2,Y.prototype.inspect=Y.prototype.toSource=function(){return this.toString()},Y.prototype[$]=function(){return this};var tt=Object.prototype.hasOwnProperty;function it(t){return!(!Array.isArray(t)&&"string"!=typeof t)||t&&"object"==typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}var st=function(t){function i(t){return null==t?lt():H(t)?t.toSeq():function(t){var i,s,e=dt(t);if(e)return(s=Q(i=t))&&s===i.entries?e.fromEntrySeq():function(t){var i=Q(t);return i&&i===t.keys}(t)?e.toSetSeq():e;if("object"==typeof t)return new ot(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.toSeq=function(){return this},i.prototype.toString=function(){return this.C("Seq {","}")},i.prototype.cacheResult=function(){return!this.T&&this.I&&(this.T=this.entrySeq().toArray(),this.size=this.T.length),this},i.prototype._=function(t,i){var s=this.T;if(s){for(var e=s.length,h=0;h!==e;){var r=s[i?e-++h:h++];if(!1===t(r[1],r[0],this))break}return h}return this.I(t,i)},i.prototype.F=function(t,i){var s=this.T;if(s){var e=s.length,h=0;return new Y((function(){if(h===e)return{value:void 0,done:!0};var r=s[i?e-++h:h++];return X(t,r[0],r[1])}))}return this.P(t,i)},i}(O),et=function(t){function i(t){return null==t?lt().toKeyedSeq():T(t)?F(t)?t.toSeq():t.fromEntrySeq():G(t)?t.toSeq():ct(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.toKeyedSeq=function(){return this},i}(st),ht=function(t){function i(t){return null==t?lt():T(t)?F(t)?t.entrySeq():t.toIndexedSeq():G(t)?t.toSeq().entrySeq():ft(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return i(arguments)},i.prototype.toIndexedSeq=function(){return this},i.prototype.toString=function(){return this.C("Seq [","]")},i}(st),rt=function(t){function i(t){return(T(t)&&!B(t)?t:ht(t)).toSetSeq()}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return i(arguments)},i.prototype.toSetSeq=function(){return this},i}(st);st.isSeq=V,st.Keyed=et,st.Set=rt,st.Indexed=ht,st.prototype[z]=!0;var nt=function(t){function i(t){this.D=t,this.size=t.length}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.get=function(t,i){return this.has(t)?this.D[b(this,t)]:i},i.prototype._=function(t,i){for(var s=this.D,e=s.length,h=0;h!==e;){var r=i?e-++h:h++;if(!1===t(s[r],r,this))break}return h},i.prototype.F=function(t,i){var s=this.D,e=s.length,h=0;return new Y((function(){if(h===e)return{value:void 0,done:!0};var r=i?e-++h:h++;return X(t,r,s[r])}))},i}(ht),ot=function(t){function i(t){var i=Object.keys(t);this.O=t,this.L=i,this.size=i.length}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.get=function(t,i){return void 0===i||this.has(t)?this.O[t]:i},i.prototype.has=function(t){return tt.call(this.O,t)},i.prototype._=function(t,i){for(var s=this.O,e=this.L,h=e.length,r=0;r!==h;){var n=e[i?h-++r:r++];if(!1===t(s[n],n,this))break}return r},i.prototype.F=function(t,i){var s=this.O,e=this.L,h=e.length,r=0;return new Y((function(){if(r===h)return{value:void 0,done:!0};var n=e[i?h-++r:r++];return X(t,n,s[n])}))},i}(et);ot.prototype[W]=!0;var at,ut=function(t){function i(t){this.R=t,this.size=t.length||t.size}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.I=function(t,i){if(i)return this.cacheResult()._(t,i);var s=J(this.R),e=0;if(q(s))for(var h;!(h=s.next()).done&&!1!==t(h.value,e++,this););return e},i.prototype.P=function(t,i){if(i)return this.cacheResult().F(t,i);var s=J(this.R);if(!q(s))return new Y(Z);var e=0;return new Y((function(){var i=s.next();return i.done?i:X(t,e++,i.value)}))},i}(ht);function lt(){return at||(at=new nt([]))}function ct(t){var i=dt(t);if(i)return i.fromEntrySeq();if("object"==typeof t)return new ot(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function ft(t){var i=dt(t);if(i)return i;throw new TypeError("Expected Array or collection object of values: "+t)}function dt(t){return it(t)?new nt(t):K(t)?new ut(t):void 0}var gt="@@__IMMUTABLE_MAP__@@";function mt(t){return Boolean(t&&t[gt])}function yt(t){return mt(t)&&U(t)}function pt(t){return Boolean(t&&"function"==typeof t.equals&&"function"==typeof t.hashCode)}function St(t,i){if(t===i||t!=t&&i!=i)return!0;if(!t||!i)return!1;if("function"==typeof t.valueOf&&"function"==typeof i.valueOf){if((t=t.valueOf())===(i=i.valueOf())||t!=t&&i!=i)return!0;if(!t||!i)return!1}return!!(pt(t)&&pt(i)&&t.equals(i))}var vt="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,i){var s=65535&(t|=0),e=65535&(i|=0);return s*e+((t>>>16)*e+s*(i>>>16)<<16>>>0)|0};function bt(t){return t>>>1&1073741824|3221225471&t}var xt=Object.prototype.valueOf;function Mt(t){if(null==t)return _t(t);if("function"==typeof t.hashCode)return bt(t.hashCode(t));var i,s,e,h=(i=t).valueOf!==xt&&"function"==typeof i.valueOf?i.valueOf(i):i;if(null==h)return _t(h);switch(typeof h){case"boolean":return h?1108378657:1108378656;case"number":return function(t){if(t!=t||t===1/0)return 0;var i=0|t;for(i!==t&&(i^=4294967295*t);t>4294967295;)i^=t/=4294967295;return bt(i)}(h);case"string":return h.length>Bt?(void 0===(e=Et[s=h])&&(e=wt(s),Lt===Ot&&(Lt=0,Et={}),Lt++,Et[s]=e),e):wt(h);case"object":case"function":return function(t){var i;if(It&&void 0!==(i=Tt.get(t)))return i;if(void 0!==(i=t[Dt]))return i;if(!kt){if(void 0!==(i=t.propertyIsEnumerable&&t.propertyIsEnumerable[Dt]))return i;if(void 0!==(i=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return i}if(i=Ct(),It)Tt.set(t,i);else{if(void 0!==At&&!1===At(t))throw new Error("Non-extensible objects are not allowed as keys.");if(kt)Object.defineProperty(t,Dt,{enumerable:!1,configurable:!1,writable:!1,value:i});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Dt]=i;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Dt]=i}}return i}(h);case"symbol":return function(t){var i=Ft[t];return void 0!==i||(i=Ct(),Ft[t]=i),i}(h);default:if("function"==typeof h.toString)return wt(h.toString());throw new Error("Value type "+typeof h+" cannot be hashed.")}}function _t(t){return null===t?1108378658:1108378659}function wt(t){for(var i=0,s=0;s<t.length;s++)i=31*i+t.charCodeAt(s)|0;return bt(i)}var At=Object.isExtensible,kt=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();function Ct(){var t=++Pt;return 1073741824&Pt&&(Pt=0),t}var Tt,It="function"==typeof WeakMap;It&&(Tt=new WeakMap);var Ft=Object.create(null),Pt=0,Dt="__immutablehash__";"function"==typeof Symbol&&(Dt=Symbol(Dt));var Bt=16,Ot=255,Lt=0,Et={},Rt=function(t){function i(t,i){this.V=t,this.N=i,this.size=t.size}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.get=function(t,i){return this.V.get(t,i)},i.prototype.has=function(t){return this.V.has(t)},i.prototype.valueSeq=function(){return this.V.valueSeq()},i.prototype.reverse=function(){var t=this,i=Wt(this,!0);return this.N||(i.valueSeq=function(){return t.V.toSeq().reverse()}),i},i.prototype.map=function(t,i){var s=this,e=Ht(this,t,i);return this.N||(e.valueSeq=function(){return s.V.toSeq().map(t,i)}),e},i.prototype._=function(t,i){var s=this;return this.V._((function(i,e){return t(i,e,s)}),i)},i.prototype.F=function(t,i){return this.V.F(t,i)},i}(et);Rt.prototype[W]=!0;var zt=function(t){function i(t){this.V=t,this.size=t.size}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.includes=function(t){return this.V.includes(t)},i.prototype._=function(t,i){var s=this,e=0;return i&&v(this),this.V._((function(h){return t(h,i?s.size-++e:e++,s)}),i)},i.prototype.F=function(t,i){var s=this,e=this.V.F(1,i),h=0;return i&&v(this),new Y((function(){var r=e.next();return r.done?r:X(t,i?s.size-++h:h++,r.value,r)}))},i}(ht),Vt=function(t){function i(t){this.V=t,this.size=t.size}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.has=function(t){return this.V.includes(t)},i.prototype._=function(t,i){var s=this;return this.V._((function(i){return t(i,i,s)}),i)},i.prototype.F=function(t,i){var s=this.V.F(1,i);return new Y((function(){var i=s.next();return i.done?i:X(t,i.value,i.value,i)}))},i}(rt),Nt=function(t){function i(t){this.V=t,this.size=t.size}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.entrySeq=function(){return this.V.toSeq()},i.prototype._=function(t,i){var s=this;return this.V._((function(i){if(i){ti(i);var e=T(i);return t(e?i.get(1):i[1],e?i.get(0):i[0],s)}}),i)},i.prototype.F=function(t,i){var s=this.V.F(1,i);return new Y((function(){for(;;){var i=s.next();if(i.done)return i;var e=i.value;if(e){ti(e);var h=T(e);return X(t,h?e.get(0):e[0],h?e.get(1):e[1],i)}}}))},i}(et);function Gt(t){var i=si(t);return i.V=t,i.size=t.size,i.flip=function(){return t},i.reverse=function(){var i=t.reverse.apply(this);return i.flip=function(){return t.reverse()},i},i.has=function(i){return t.includes(i)},i.includes=function(i){return t.has(i)},i.cacheResult=ei,i.I=function(i,s){var e=this;return t._((function(t,s){return!1!==i(s,t,e)}),s)},i.P=function(i,s){if(2===i){var e=t.F(i,s);return new Y((function(){var t=e.next();if(!t.done){var i=t.value[0];t.value[0]=t.value[1],t.value[1]=i}return t}))}return t.F(1===i?0:1,s)},i}function Ht(t,i,s){var e=si(t);return e.size=t.size,e.has=function(i){return t.has(i)},e.get=function(e,h){var r=t.get(e,y);return r===y?h:i.call(s,r,e,t)},e.I=function(e,h){var r=this;return t._((function(t,h,n){return!1!==e(i.call(s,t,h,n),h,r)}),h)},e.P=function(e,h){var r=t.F(2,h);return new Y((function(){var h=r.next();if(h.done)return h;var n=h.value,o=n[0];return X(e,o,i.call(s,n[1],o,t),h)}))},e}function Wt(t,i){var s=this,e=si(t);return e.V=t,e.size=t.size,e.reverse=function(){return t},t.flip&&(e.flip=function(){var i=Gt(t);return i.reverse=function(){return t.flip()},i}),e.get=function(s,e){return t.get(i?s:-1-s,e)},e.has=function(s){return t.has(i?s:-1-s)},e.includes=function(i){return t.includes(i)},e.cacheResult=ei,e._=function(s,e){var h=this,r=0;return e&&v(t),t._((function(t,n){return s(t,i?n:e?h.size-++r:r++,h)}),!e)},e.F=function(e,h){var r=0;h&&v(t);var n=t.F(2,!h);return new Y((function(){var t=n.next();if(t.done)return t;var o=t.value;return X(e,i?o[0]:h?s.size-++r:r++,o[1],t)}))},e}function Ut(t,i,s,e){var h=si(t);return e&&(h.has=function(e){var h=t.get(e,y);return h!==y&&!!i.call(s,h,e,t)},h.get=function(e,h){var r=t.get(e,y);return r!==y&&i.call(s,r,e,t)?r:h}),h.I=function(h,r){var n=this,o=0;return t._((function(t,r,a){if(i.call(s,t,r,a))return o++,h(t,e?r:o-1,n)}),r),o},h.P=function(h,r){var n=t.F(2,r),o=0;return new Y((function(){for(;;){var r=n.next();if(r.done)return r;var a=r.value,u=a[0],l=a[1];if(i.call(s,l,u,t))return X(h,e?u:o++,l,r)}}))},h}function jt(t,i,s,e){var h=t.size;if(M(i,s,h))return t;var r=_(i,h),n=w(s,h);if(r!=r||n!=n)return jt(t.toSeq().cacheResult(),i,s,e);var o,a=n-r;a==a&&(o=a<0?0:a);var u=si(t);return u.size=0===o?o:t.size&&o||void 0,!e&&V(t)&&o>=0&&(u.get=function(i,s){return(i=b(this,i))>=0&&i<o?t.get(i+r,s):s}),u.I=function(i,s){var h=this;if(0===o)return 0;if(s)return this.cacheResult()._(i,s);var n=0,a=!0,u=0;return t._((function(t,s){if(!a||!(a=n++<r))return u++,!1!==i(t,e?s:u-1,h)&&u!==o})),u},u.P=function(i,s){if(0!==o&&s)return this.cacheResult().F(i,s);if(0===o)return new Y(Z);var h=t.F(i,s),n=0,a=0;return new Y((function(){for(;n++<r;)h.next();if(++a>o)return{value:void 0,done:!0};var t=h.next();return e||1===i||t.done?t:X(i,a-1,0===i?void 0:t.value[1],t)}))},u}function $t(t,i,s,e){var h=si(t);return h.I=function(h,r){var n=this;if(r)return this.cacheResult()._(h,r);var o=!0,a=0;return t._((function(t,r,u){if(!o||!(o=i.call(s,t,r,u)))return a++,h(t,e?r:a-1,n)})),a},h.P=function(h,r){var n=this;if(r)return this.cacheResult().F(h,r);var o=t.F(2,r),a=!0,u=0;return new Y((function(){var t,r,l;do{if((t=o.next()).done)return e||1===h?t:X(h,u++,0===h?void 0:t.value[1],t);var c=t.value;r=c[0],l=c[1],a&&(a=i.call(s,l,r,n))}while(a);return 2===h?t:X(h,r,l,t)}))},h}function Yt(t,i){var s=F(t),e=[t].concat(i).map((function(t){return T(t)?s&&(t=L(t)):t=s?ct(t):ft(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===e.length)return t;if(1===e.length){var h=e[0];if(h===t||s&&F(h)||D(t)&&D(h))return h}var r=new nt(e);return s?r=r.toKeyedSeq():D(t)||(r=r.toSetSeq()),(r=r.flatten(!0)).size=e.reduce((function(t,i){if(void 0!==t){var s=i.size;if(void 0!==s)return t+s}}),0),r}function Xt(t,i,s){var e=si(t);return e.I=function(h,r){if(r)return this.cacheResult()._(h,r);var n=0,o=!1;return function t(a,u){a._((function(r,a){return(!i||u<i)&&T(r)?t(r,u+1):(n++,!1===h(r,s?a:n-1,e)&&(o=!0)),!o}),r)}(t,0),n},e.P=function(e,h){if(h)return this.cacheResult().F(e,h);var r=t.F(e,h),n=[],o=0;return new Y((function(){for(;r;){var t=r.next();if(!1===t.done){var a=t.value;if(2===e&&(a=a[1]),i&&!(n.length<i)||!T(a))return s?t:X(e,o++,a,t);n.push(r),r=a.F(e,h)}else r=n.pop()}return{value:void 0,done:!0}}))},e}function Zt(t,i,s){i||(i=hi);var e=F(t),h=0,r=t.toSeq().map((function(i,e){return[e,i,h++,s?s(i,e,t):i]})).valueSeq().toArray();return r.sort((function(t,s){return i(t[3],s[3])||t[2]-s[2]})).forEach(e?function(t,i){r[i].length=2}:function(t,i){r[i]=t[1]}),e?et(r):D(t)?ht(r):rt(r)}function Kt(t,i,s){if(i||(i=hi),s){var e=t.toSeq().map((function(i,e){return[i,s(i,e,t)]})).reduce((function(t,s){return qt(i,t[1],s[1])?s:t}));return e&&e[0]}return t.reduce((function(t,s){return qt(i,t,s)?s:t}))}function qt(t,i,s){var e=t(s,i);return 0===e&&s!==i&&(null==s||s!=s)||e>0}function Jt(t,i,s,e){var h=si(t),r=new nt(s).map((function(t){return t.size}));return h.size=e?r.max():r.min(),h._=function(t,i){for(var s,e=this.F(1,i),h=0;!(s=e.next()).done&&!1!==t(s.value,h++,this););return h},h.P=function(t,h){var r=s.map((function(t){return t=O(t),J(h?t.reverse():t)})),n=0,o=!1;return new Y((function(){var s;return o||(s=r.map((function(t){return t.next()})),o=e?s.every((function(t){return t.done})):s.some((function(t){return t.done}))),o?{value:void 0,done:!0}:X(t,n++,i.apply(null,s.map((function(t){return t.value}))))}))},h}function Qt(t,i){return t===i?t:V(t)?i:t.constructor(i)}function ti(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function ii(t){return F(t)?L:D(t)?E:R}function si(t){return Object.create((F(t)?et:D(t)?ht:rt).prototype)}function ei(){return this.V.cacheResult?(this.V.cacheResult(),this.size=this.V.size,this):st.prototype.cacheResult.call(this)}function hi(t,i){return void 0===t&&void 0===i?0:void 0===t?1:void 0===i?-1:t>i?1:t<i?-1:0}function ri(t,i){i=i||0;for(var s=Math.max(0,t.length-i),e=new Array(s),h=0;h<s;h++)e[h]=t[h+i];return e}function ni(t,i){if(!t)throw new Error(i)}function oi(t){ni(t!==1/0,"Cannot perform this action with an infinite size.")}function ai(t){if(it(t)&&"string"!=typeof t)return t;if(U(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}zt.prototype.cacheResult=Rt.prototype.cacheResult=Vt.prototype.cacheResult=Nt.prototype.cacheResult=ei;var ui=Object.prototype.toString;function li(t){return"object"==typeof t&&(H(t)||Array.isArray(t)||function(t){if(!t||"object"!=typeof t||"[object Object]"!==ui.call(t))return!1;var i=Object.getPrototypeOf(t);if(null===i)return!0;for(var s=i,e=Object.getPrototypeOf(i);null!==e;)s=e,e=Object.getPrototypeOf(s);return s===i}(t))}function ci(t){try{return"string"==typeof t?JSON.stringify(t):String(t)}catch(i){return JSON.stringify(t)}}function fi(t,i,s){return H(t)?t.get(i,s):function(t,i){return H(t)?t.has(i):li(t)&&tt.call(t,i)}(t,i)?"function"==typeof t.get?t.get(i):t[i]:s}function di(t){if(Array.isArray(t))return ri(t);var i={};for(var s in t)tt.call(t,s)&&(i[s]=t[s]);return i}function gi(t,i,s,e){e||(e=s,s=void 0);var h=mi(H(t),t,ai(i),0,s,e);return h===y?s:h}function mi(t,i,s,e,h,r){var n=i===y;if(e===s.length){var o=n?h:i,a=r(o);return a===o?i:a}if(!n&&!li(i))throw new TypeError("Cannot update within non-data-structure value in path ["+s.slice(0,e).map(ci)+"]: "+i);var u=s[e],l=n?y:fi(i,u,y),c=mi(l===y?t:H(l),l,s,e+1,h,r);return c===l?i:c===y?function(t,i){if(!li(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(H(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(i)}if(!tt.call(t,i))return t;var s=di(t);return Array.isArray(s)?s.splice(i,1):delete s[i],s}(i,u):function(t,i,s){if(!li(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(H(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(i,s)}if(tt.call(t,i)&&s===t[i])return t;var e=di(t);return e[i]=s,e}(n?t?$i():{}:i,u,c)}function yi(t,i){return function(t,i,s){return gi(t,i,y,(function(){return s}))}(this,t,i)}function pi(t){return function(t,i){return gi(t,i,(function(){return y}))}(this,t)}function Si(t,i,s,e){return gi(t,[i],s,e)}function vi(t,i,s){return 1===arguments.length?t(this):Si(this,t,i,s)}function bi(t,i,s){return gi(this,t,i,s)}function xi(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return _i(this,t)}function Mi(t){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];if("function"!=typeof t)throw new TypeError("Invalid merger function: "+t);return _i(this,i,t)}function _i(t,i,s){for(var e=[],h=0;h<i.length;h++){var r=L(i[h]);0!==r.size&&e.push(r)}return 0===e.length?t:0!==t.toSeq().size||t.G||1!==e.length?t.withMutations((function(t){for(var i=s?function(i,e){Si(t,e,y,(function(t){return t===y?i:s(t,i,e)}))}:function(i,s){t.set(s,i)},h=0;h<e.length;h++)e[h].forEach(i)})):t.constructor(e[0])}function wi(t,i,s){return Ai(t,i,function(t){return function i(s,e,h){return li(s)&&li(e)&&(r=e,n=st(s),o=st(r),D(n)===D(o)&&F(n)===F(o))?Ai(s,[e],i):t?t(s,e,h):e;var r,n,o}}(s))}function Ai(t,i,s){if(!li(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(H(t))return"function"==typeof s&&t.mergeWith?t.mergeWith.apply(t,[s].concat(i)):t.merge?t.merge.apply(t,i):t.concat.apply(t,i);for(var e=Array.isArray(t),h=t,r=e?E:L,n=e?function(i){h===t&&(h=di(h)),h.push(i)}:function(i,e){var r=tt.call(h,e),n=r&&s?s(h[e],i,e):i;r&&n===h[e]||(h===t&&(h=di(h)),h[e]=n)},o=0;o<i.length;o++)r(i[o]).forEach(n);return h}function ki(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return wi(this,t)}function Ci(t){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];return wi(this,i,t)}function Ti(t){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];return gi(this,t,$i(),(function(t){return Ai(t,i)}))}function Ii(t){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];return gi(this,t,$i(),(function(t){return wi(t,i)}))}function Fi(t){var i=this.asMutable();return t(i),i.wasAltered()?i.H(this.G):this}function Pi(){return this.G?this:this.H(new S)}function Di(){return this.H()}function Bi(){return this.W}var Oi=function(t){function i(i){return null==i?$i():mt(i)&&!U(i)?i:$i().withMutations((function(s){var e=t(i);oi(e.size),e.forEach((function(t,i){return s.set(i,t)}))}))}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return $i().withMutations((function(i){for(var s=0;s<t.length;s+=2){if(s+1>=t.length)throw new Error("Missing value for key: "+t[s]);i.set(t[s],t[s+1])}}))},i.prototype.toString=function(){return this.C("Map {","}")},i.prototype.get=function(t,i){return this.U?this.U.get(0,void 0,t,i):i},i.prototype.set=function(t,i){return Yi(this,t,i)},i.prototype.remove=function(t){return Yi(this,t,y)},i.prototype.deleteAll=function(t){var i=O(t);return 0===i.size?this:this.withMutations((function(t){i.forEach((function(i){return t.remove(i)}))}))},i.prototype.clear=function(){return 0===this.size?this:this.G?(this.size=0,this.U=null,this.j=void 0,this.W=!0,this):$i()},i.prototype.sort=function(t){return Ss(Zt(this,t))},i.prototype.sortBy=function(t,i){return Ss(Zt(this,i,t))},i.prototype.map=function(t,i){var s=this;return this.withMutations((function(e){e.forEach((function(h,r){e.set(r,t.call(i,h,r,s))}))}))},i.prototype.F=function(t,i){return new Hi(this,t,i)},i.prototype._=function(t,i){var s=this,e=0;return this.U&&this.U.iterate((function(i){return e++,t(i[1],i[0],s)}),i),e},i.prototype.H=function(t){return t===this.G?this:t?ji(this.size,this.U,t,this.j):0===this.size?$i():(this.G=t,this.W=!1,this)},i}(L);Oi.isMap=mt;var Li=Oi.prototype;Li[gt]=!0,Li.delete=Li.remove,Li.removeAll=Li.deleteAll,Li.setIn=yi,Li.removeIn=Li.deleteIn=pi,Li.update=vi,Li.updateIn=bi,Li.merge=Li.concat=xi,Li.mergeWith=Mi,Li.mergeDeep=ki,Li.mergeDeepWith=Ci,Li.mergeIn=Ti,Li.mergeDeepIn=Ii,Li.withMutations=Fi,Li.wasAltered=Bi,Li.asImmutable=Di,Li["@@transducer/init"]=Li.asMutable=Pi,Li["@@transducer/step"]=function(t,i){return t.set(i[0],i[1])},Li["@@transducer/result"]=function(t){return t.asImmutable()};var Ei=function(t,i){this.ownerID=t,this.entries=i};Ei.prototype.get=function(t,i,s,e){for(var h=this.entries,r=0,n=h.length;r<n;r++)if(St(s,h[r][0]))return h[r][1];return e},Ei.prototype.update=function(t,i,s,e,h,r,n){for(var o=h===y,a=this.entries,u=0,l=a.length;u<l&&!St(e,a[u][0]);u++);var c=u<l;if(c?a[u][1]===h:o)return this;if(p(n),(o||!c)&&p(r),!o||1!==a.length){if(!c&&!o&&a.length>=Qi)return function(t,i,s,e){t||(t=new S);for(var h=new Ni(t,Mt(s),[s,e]),r=0;r<i.length;r++){var n=i[r];h=h.update(t,0,void 0,n[0],n[1])}return h}(t,a,e,h);var f=t&&t===this.ownerID,d=f?a:ri(a);return c?o?u===l-1?d.pop():d[u]=d.pop():d[u]=[e,h]:d.push([e,h]),f?(this.entries=d,this):new Ei(t,d)}};var Ri=function(t,i,s){this.ownerID=t,this.bitmap=i,this.nodes=s};Ri.prototype.get=function(t,i,s,e){void 0===i&&(i=Mt(s));var h=1<<((0===t?i:i>>>t)&m),r=this.bitmap;return 0==(r&h)?e:this.nodes[qi(r&h-1)].get(t+5,i,s,e)},Ri.prototype.update=function(t,i,s,e,h,r,n){void 0===s&&(s=Mt(e));var o=(0===i?s:s>>>i)&m,a=1<<o,u=this.bitmap,l=0!=(u&a);if(!l&&h===y)return this;var c=qi(u&a-1),f=this.nodes,d=l?f[c]:void 0,p=Xi(d,t,i+5,s,e,h,r,n);if(p===d)return this;if(!l&&p&&f.length>=ts)return function(t,i,s,e,h){for(var r=0,n=new Array(g),o=0;0!==s;o++,s>>>=1)n[o]=1&s?i[r++]:void 0;return n[e]=h,new zi(t,r+1,n)}(t,f,u,o,p);if(l&&!p&&2===f.length&&Zi(f[1^c]))return f[1^c];if(l&&p&&1===f.length&&Zi(p))return p;var S=t&&t===this.ownerID,v=l?p?u:u^a:u|a,b=l?p?Ji(f,c,p,S):function(t,i,s){var e=t.length-1;if(s&&i===e)return t.pop(),t;for(var h=new Array(e),r=0,n=0;n<e;n++)n===i&&(r=1),h[n]=t[n+r];return h}(f,c,S):function(t,i,s,e){var h=t.length+1;if(e&&i+1===h)return t[i]=s,t;for(var r=new Array(h),n=0,o=0;o<h;o++)o===i?(r[o]=s,n=-1):r[o]=t[o+n];return r}(f,c,p,S);return S?(this.bitmap=v,this.nodes=b,this):new Ri(t,v,b)};var zi=function(t,i,s){this.ownerID=t,this.count=i,this.nodes=s};zi.prototype.get=function(t,i,s,e){void 0===i&&(i=Mt(s));var h=(0===t?i:i>>>t)&m,r=this.nodes[h];return r?r.get(t+5,i,s,e):e},zi.prototype.update=function(t,i,s,e,h,r,n){void 0===s&&(s=Mt(e));var o=(0===i?s:s>>>i)&m,a=h===y,u=this.nodes,l=u[o];if(a&&!l)return this;var c=Xi(l,t,i+5,s,e,h,r,n);if(c===l)return this;var f=this.count;if(l){if(!c&&--f<is)return function(t,i,s,e){for(var h=0,r=0,n=new Array(s),o=0,a=1,u=i.length;o<u;o++,a<<=1){var l=i[o];void 0!==l&&o!==e&&(h|=a,n[r++]=l)}return new Ri(t,h,n)}(t,u,f,o)}else f++;var d=t&&t===this.ownerID,g=Ji(u,o,c,d);return d?(this.count=f,this.nodes=g,this):new zi(t,f,g)};var Vi=function(t,i,s){this.ownerID=t,this.keyHash=i,this.entries=s};Vi.prototype.get=function(t,i,s,e){for(var h=this.entries,r=0,n=h.length;r<n;r++)if(St(s,h[r][0]))return h[r][1];return e},Vi.prototype.update=function(t,i,s,e,h,r,n){void 0===s&&(s=Mt(e));var o=h===y;if(s!==this.keyHash)return o?this:(p(n),p(r),Ki(this,t,i,s,[e,h]));for(var a=this.entries,u=0,l=a.length;u<l&&!St(e,a[u][0]);u++);var c=u<l;if(c?a[u][1]===h:o)return this;if(p(n),(o||!c)&&p(r),o&&2===l)return new Ni(t,this.keyHash,a[1^u]);var f=t&&t===this.ownerID,d=f?a:ri(a);return c?o?u===l-1?d.pop():d[u]=d.pop():d[u]=[e,h]:d.push([e,h]),f?(this.entries=d,this):new Vi(t,this.keyHash,d)};var Ni=function(t,i,s){this.ownerID=t,this.keyHash=i,this.entry=s};Ni.prototype.get=function(t,i,s,e){return St(s,this.entry[0])?this.entry[1]:e},Ni.prototype.update=function(t,i,s,e,h,r,n){var o=h===y,a=St(e,this.entry[0]);return(a?h===this.entry[1]:o)?this:(p(n),o?void p(r):a?t&&t===this.ownerID?(this.entry[1]=h,this):new Ni(t,this.keyHash,[e,h]):(p(r),Ki(this,t,i,Mt(e),[e,h])))},Ei.prototype.iterate=Vi.prototype.iterate=function(t,i){for(var s=this.entries,e=0,h=s.length-1;e<=h;e++)if(!1===t(s[i?h-e:e]))return!1},Ri.prototype.iterate=zi.prototype.iterate=function(t,i){for(var s=this.nodes,e=0,h=s.length-1;e<=h;e++){var r=s[i?h-e:e];if(r&&!1===r.iterate(t,i))return!1}},Ni.prototype.iterate=function(t,i){return t(this.entry)};var Gi,Hi=function(t){function i(t,i,s){this.$=i,this.Y=s,this.X=t.U&&Ui(t.U)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.next=function(){for(var t=this.$,i=this.X;i;){var s=i.node,e=i.index++,h=void 0;if(s.entry){if(0===e)return Wi(t,s.entry)}else if(s.entries){if(e<=(h=s.entries.length-1))return Wi(t,s.entries[this.Y?h-e:e])}else if(e<=(h=s.nodes.length-1)){var r=s.nodes[this.Y?h-e:e];if(r){if(r.entry)return Wi(t,r.entry);i=this.X=Ui(r,i)}continue}i=this.X=this.X.Z}return{value:void 0,done:!0}},i}(Y);function Wi(t,i){return X(t,i[0],i[1])}function Ui(t,i){return{node:t,index:0,Z:i}}function ji(t,i,s,e){var h=Object.create(Li);return h.size=t,h.U=i,h.G=s,h.j=e,h.W=!1,h}function $i(){return Gi||(Gi=ji(0))}function Yi(t,i,s){var e,h;if(t.U){var r={value:!1},n={value:!1};if(e=Xi(t.U,t.G,0,void 0,i,s,r,n),!n.value)return t;h=t.size+(r.value?s===y?-1:1:0)}else{if(s===y)return t;h=1,e=new Ei(t.G,[[i,s]])}return t.G?(t.size=h,t.U=e,t.j=void 0,t.W=!0,t):e?ji(h,e):$i()}function Xi(t,i,s,e,h,r,n,o){return t?t.update(i,s,e,h,r,n,o):r===y?t:(p(o),p(n),new Ni(i,e,[h,r]))}function Zi(t){return t.constructor===Ni||t.constructor===Vi}function Ki(t,i,s,e,h){if(t.keyHash===e)return new Vi(i,e,[t.entry,h]);var r,n=(0===s?t.keyHash:t.keyHash>>>s)&m,o=(0===s?e:e>>>s)&m,a=n===o?[Ki(t,i,s+5,e,h)]:(r=new Ni(i,e,h),n<o?[t,r]:[r,t]);return new Ri(i,1<<n|1<<o,a)}function qi(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,127&(t+=t>>8)+(t>>16)}function Ji(t,i,s,e){var h=e?t:ri(t);return h[i]=s,h}var Qi=8,ts=16,is=8,ss="@@__IMMUTABLE_LIST__@@";function es(t){return Boolean(t&&t[ss])}var hs=function(t){function i(i){var s=cs();if(null==i)return s;if(es(i))return i;var e=t(i),h=e.size;return 0===h?s:(oi(h),h>0&&h<g?ls(0,h,5,null,new ns(e.toArray())):s.withMutations((function(t){t.setSize(h),e.forEach((function(i,s){return t.set(s,i)}))})))}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return this(arguments)},i.prototype.toString=function(){return this.C("List [","]")},i.prototype.get=function(t,i){if((t=b(this,t))>=0&&t<this.size){var s=gs(this,t+=this.K);return s&&s.array[t&m]}return i},i.prototype.set=function(t,i){return function(t,i,s){if((i=b(t,i))!=i)return t;if(i>=t.size||i<0)return t.withMutations((function(t){i<0?ms(t,i).set(0,s):ms(t,0,i+1).set(i,s)}));i+=t.K;var e=t.q,h=t.U,r={value:!1};return i>=ys(t.J)?e=fs(e,t.G,0,i,s,r):h=fs(h,t.G,t.tt,i,s,r),r.value?t.G?(t.U=h,t.q=e,t.j=void 0,t.W=!0,t):ls(t.K,t.J,t.tt,h,e):t}(this,t,i)},i.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},i.prototype.insert=function(t,i){return this.splice(t,0,i)},i.prototype.clear=function(){return 0===this.size?this:this.G?(this.size=this.K=this.J=0,this.tt=5,this.U=this.q=this.j=void 0,this.W=!0,this):cs()},i.prototype.push=function(){var t=arguments,i=this.size;return this.withMutations((function(s){ms(s,0,i+t.length);for(var e=0;e<t.length;e++)s.set(i+e,t[e])}))},i.prototype.pop=function(){return ms(this,0,-1)},i.prototype.unshift=function(){var t=arguments;return this.withMutations((function(i){ms(i,-t.length);for(var s=0;s<t.length;s++)i.set(s,t[s])}))},i.prototype.shift=function(){return ms(this,1)},i.prototype.concat=function(){for(var i=arguments,s=[],e=0;e<arguments.length;e++){var h=i[e],r=t("string"!=typeof h&&K(h)?h:[h]);0!==r.size&&s.push(r)}return 0===s.length?this:0!==this.size||this.G||1!==s.length?this.withMutations((function(t){s.forEach((function(i){return i.forEach((function(i){return t.push(i)}))}))})):this.constructor(s[0])},i.prototype.setSize=function(t){return ms(this,0,t)},i.prototype.map=function(t,i){var s=this;return this.withMutations((function(e){for(var h=0;h<s.size;h++)e.set(h,t.call(i,e.get(h),h,s))}))},i.prototype.slice=function(t,i){var s=this.size;return M(t,i,s)?this:ms(this,_(t,s),w(i,s))},i.prototype.F=function(t,i){var s=i?this.size:0,e=us(this,i);return new Y((function(){var h=e();return h===as?{value:void 0,done:!0}:X(t,i?--s:s++,h)}))},i.prototype._=function(t,i){for(var s,e=i?this.size:0,h=us(this,i);(s=h())!==as&&!1!==t(s,i?--e:e++,this););return e},i.prototype.H=function(t){return t===this.G?this:t?ls(this.K,this.J,this.tt,this.U,this.q,t,this.j):0===this.size?cs():(this.G=t,this.W=!1,this)},i}(E);hs.isList=es;var rs=hs.prototype;rs[ss]=!0,rs.delete=rs.remove,rs.merge=rs.concat,rs.setIn=yi,rs.deleteIn=rs.removeIn=pi,rs.update=vi,rs.updateIn=bi,rs.mergeIn=Ti,rs.mergeDeepIn=Ii,rs.withMutations=Fi,rs.wasAltered=Bi,rs.asImmutable=Di,rs["@@transducer/init"]=rs.asMutable=Pi,rs["@@transducer/step"]=function(t,i){return t.push(i)},rs["@@transducer/result"]=function(t){return t.asImmutable()};var ns=function(t,i){this.array=t,this.ownerID=i};ns.prototype.removeBefore=function(t,i,s){if(s===i?1<<i:0===this.array.length)return this;var e=s>>>i&m;if(e>=this.array.length)return new ns([],t);var h,r=0===e;if(i>0){var n=this.array[e];if((h=n&&n.removeBefore(t,i-5,s))===n&&r)return this}if(r&&!h)return this;var o=ds(this,t);if(!r)for(var a=0;a<e;a++)o.array[a]=void 0;return h&&(o.array[e]=h),o},ns.prototype.removeAfter=function(t,i,s){if(s===(i?1<<i:0)||0===this.array.length)return this;var e,h=s-1>>>i&m;if(h>=this.array.length)return this;if(i>0){var r=this.array[h];if((e=r&&r.removeAfter(t,i-5,s))===r&&h===this.array.length-1)return this}var n=ds(this,t);return n.array.splice(h+1),e&&(n.array[h]=e),n};var os,as={};function us(t,i){var s=t.K,e=t.J,h=ys(e),r=t.q;return function t(n,o,a){return 0===o?function(t,n){var o=n===h?r&&r.array:t&&t.array,a=n>s?0:s-n,u=e-n;return u>g&&(u=g),function(){if(a===u)return as;var t=i?--u:a++;return o&&o[t]}}(n,a):function(h,r,n){var o,a=h&&h.array,u=n>s?0:s-n>>r,l=1+(e-n>>r);return l>g&&(l=g),function(){for(;;){if(o){var s=o();if(s!==as)return s;o=null}if(u===l)return as;var e=i?--l:u++;o=t(a&&a[e],r-5,n+(e<<r))}}}(n,o,a)}(t.U,t.tt,0)}function ls(t,i,s,e,h,r,n){var o=Object.create(rs);return o.size=i-t,o.K=t,o.J=i,o.tt=s,o.U=e,o.q=h,o.G=r,o.j=n,o.W=!1,o}function cs(){return os||(os=ls(0,0,5))}function fs(t,i,s,e,h,r){var n,o=e>>>s&m,a=t&&o<t.array.length;if(!a&&void 0===h)return t;if(s>0){var u=t&&t.array[o],l=fs(u,i,s-5,e,h,r);return l===u?t:((n=ds(t,i)).array[o]=l,n)}return a&&t.array[o]===h?t:(r&&p(r),n=ds(t,i),void 0===h&&o===n.array.length-1?n.array.pop():n.array[o]=h,n)}function ds(t,i){return i&&t&&i===t.ownerID?t:new ns(t?t.array.slice():[],i)}function gs(t,i){if(i>=ys(t.J))return t.q;if(i<1<<t.tt+5){for(var s=t.U,e=t.tt;s&&e>0;)s=s.array[i>>>e&m],e-=5;return s}}function ms(t,i,s){void 0!==i&&(i|=0),void 0!==s&&(s|=0);var e=t.G||new S,h=t.K,r=t.J,n=h+i,o=void 0===s?r:s<0?r+s:h+s;if(n===h&&o===r)return t;if(n>=o)return t.clear();for(var a=t.tt,u=t.U,l=0;n+l<0;)u=new ns(u&&u.array.length?[void 0,u]:[],e),l+=1<<(a+=5);l&&(n+=l,h+=l,o+=l,r+=l);for(var c=ys(r),f=ys(o);f>=1<<a+5;)u=new ns(u&&u.array.length?[u]:[],e),a+=5;var d=t.q,g=f<c?gs(t,o-1):f>c?new ns([],e):d;if(d&&f>c&&n<r&&d.array.length){for(var y=u=ds(u,e),p=a;p>5;p-=5){var v=c>>>p&m;y=y.array[v]=ds(y.array[v],e)}y.array[c>>>5&m]=d}if(o<r&&(g=g&&g.removeAfter(e,0,o)),n>=f)n-=f,o-=f,a=5,u=null,g=g&&g.removeBefore(e,0,n);else if(n>h||f<c){for(l=0;u;){var b=n>>>a&m;if(b!==f>>>a&m)break;b&&(l+=(1<<a)*b),a-=5,u=u.array[b]}u&&n>h&&(u=u.removeBefore(e,a,n-l)),u&&f<c&&(u=u.removeAfter(e,a,f-l)),l&&(n-=l,o-=l)}return t.G?(t.size=o-n,t.K=n,t.J=o,t.tt=a,t.U=u,t.q=g,t.j=void 0,t.W=!0,t):ls(n,o,a,u,g)}function ys(t){return t<g?0:t-1>>>5<<5}var ps,Ss=function(t){function i(t){return null==t?bs():yt(t)?t:bs().withMutations((function(i){var s=L(t);oi(s.size),s.forEach((function(t,s){return i.set(s,t)}))}))}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return this(arguments)},i.prototype.toString=function(){return this.C("OrderedMap {","}")},i.prototype.get=function(t,i){var s=this.it.get(t);return void 0!==s?this.st.get(s)[1]:i},i.prototype.clear=function(){return 0===this.size?this:this.G?(this.size=0,this.it.clear(),this.st.clear(),this.W=!0,this):bs()},i.prototype.set=function(t,i){return xs(this,t,i)},i.prototype.remove=function(t){return xs(this,t,y)},i.prototype._=function(t,i){var s=this;return this.st._((function(i){return i&&t(i[1],i[0],s)}),i)},i.prototype.F=function(t,i){return this.st.fromEntrySeq().F(t,i)},i.prototype.H=function(t){if(t===this.G)return this;var i=this.it.H(t),s=this.st.H(t);return t?vs(i,s,t,this.j):0===this.size?bs():(this.G=t,this.W=!1,this.it=i,this.st=s,this)},i}(Oi);function vs(t,i,s,e){var h=Object.create(Ss.prototype);return h.size=t?t.size:0,h.it=t,h.st=i,h.G=s,h.j=e,h.W=!1,h}function bs(){return ps||(ps=vs($i(),cs()))}function xs(t,i,s){var e,h,r=t.it,n=t.st,o=r.get(i),a=void 0!==o;if(s===y){if(!a)return t;n.size>=g&&n.size>=2*r.size?(e=(h=n.filter((function(t,i){return void 0!==t&&o!==i}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.G&&(e.G=h.G=t.G)):(e=r.remove(i),h=o===n.size-1?n.pop():n.set(o,void 0))}else if(a){if(s===n.get(o)[1])return t;e=r,h=n.set(o,[i,s])}else e=r.set(i,n.size),h=n.set(n.size,[i,s]);return t.G?(t.size=e.size,t.it=e,t.st=h,t.j=void 0,t.W=!0,t):vs(e,h)}Ss.isOrderedMap=yt,Ss.prototype[W]=!0,Ss.prototype.delete=Ss.prototype.remove;var Ms="@@__IMMUTABLE_STACK__@@";function _s(t){return Boolean(t&&t[Ms])}var ws=function(t){function i(t){return null==t?Ts():_s(t)?t:Ts().pushAll(t)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return this(arguments)},i.prototype.toString=function(){return this.C("Stack [","]")},i.prototype.get=function(t,i){var s=this.et;for(t=b(this,t);s&&t--;)s=s.next;return s?s.value:i},i.prototype.peek=function(){return this.et&&this.et.value},i.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var i=this.size+arguments.length,s=this.et,e=arguments.length-1;e>=0;e--)s={value:t[e],next:s};return this.G?(this.size=i,this.et=s,this.j=void 0,this.W=!0,this):Cs(i,s)},i.prototype.pushAll=function(i){if(0===(i=t(i)).size)return this;if(0===this.size&&_s(i))return i;oi(i.size);var s=this.size,e=this.et;return i._((function(t){s++,e={value:t,next:e}}),!0),this.G?(this.size=s,this.et=e,this.j=void 0,this.W=!0,this):Cs(s,e)},i.prototype.pop=function(){return this.slice(1)},i.prototype.clear=function(){return 0===this.size?this:this.G?(this.size=0,this.et=void 0,this.j=void 0,this.W=!0,this):Ts()},i.prototype.slice=function(i,s){if(M(i,s,this.size))return this;var e=_(i,this.size);if(w(s,this.size)!==this.size)return t.prototype.slice.call(this,i,s);for(var h=this.size-e,r=this.et;e--;)r=r.next;return this.G?(this.size=h,this.et=r,this.j=void 0,this.W=!0,this):Cs(h,r)},i.prototype.H=function(t){return t===this.G?this:t?Cs(this.size,this.et,t,this.j):0===this.size?Ts():(this.G=t,this.W=!1,this)},i.prototype._=function(t,i){var s=this;if(i)return new nt(this.toArray())._((function(i,e){return t(i,e,s)}),i);for(var e=0,h=this.et;h&&!1!==t(h.value,e++,this);)h=h.next;return e},i.prototype.F=function(t,i){if(i)return new nt(this.toArray()).F(t,i);var s=0,e=this.et;return new Y((function(){if(e){var i=e.value;return e=e.next,X(t,s++,i)}return{value:void 0,done:!0}}))},i}(E);ws.isStack=_s;var As,ks=ws.prototype;function Cs(t,i,s,e){var h=Object.create(ks);return h.size=t,h.et=i,h.G=s,h.j=e,h.W=!1,h}function Ts(){return As||(As=Cs(0))}ks[Ms]=!0,ks.shift=ks.pop,ks.unshift=ks.push,ks.unshiftAll=ks.pushAll,ks.withMutations=Fi,ks.wasAltered=Bi,ks.asImmutable=Di,ks["@@transducer/init"]=ks.asMutable=Pi,ks["@@transducer/step"]=function(t,i){return t.unshift(i)},ks["@@transducer/result"]=function(t){return t.asImmutable()};var Is="@@__IMMUTABLE_SET__@@";function Fs(t){return Boolean(t&&t[Is])}function Ps(t){return Fs(t)&&U(t)}function Ds(t,i){if(t===i)return!0;if(!T(i)||void 0!==t.size&&void 0!==i.size&&t.size!==i.size||void 0!==t.j&&void 0!==i.j&&t.j!==i.j||F(t)!==F(i)||D(t)!==D(i)||U(t)!==U(i))return!1;if(0===t.size&&0===i.size)return!0;var s=!B(t);if(U(t)){var e=t.entries();return i.every((function(t,i){var h=e.next().value;return h&&St(h[1],t)&&(s||St(h[0],i))}))&&e.next().done}var h=!1;if(void 0===t.size)if(void 0===i.size)"function"==typeof t.cacheResult&&t.cacheResult();else{h=!0;var r=t;t=i,i=r}var n=!0,o=i._((function(i,e){if(s?!t.has(i):h?!St(i,t.get(e,y)):!St(t.get(e,y),i))return n=!1,!1}));return n&&t.size===o}function Bs(t,i){var s=function(s){t.prototype[s]=i[s]};return Object.keys(i).forEach(s),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(i).forEach(s),t}function Os(t){if(!t||"object"!=typeof t)return t;if(!T(t)){if(!li(t))return t;t=st(t)}if(F(t)){var i={};return t._((function(t,s){i[s]=Os(t)})),i}var s=[];return t._((function(t){s.push(Os(t))})),s}var Ls=function(t){function i(i){return null==i?Ns():Fs(i)&&!U(i)?i:Ns().withMutations((function(s){var e=t(i);oi(e.size),e.forEach((function(t){return s.add(t)}))}))}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return this(arguments)},i.fromKeys=function(t){return this(L(t).keySeq())},i.intersect=function(t){return(t=O(t).toArray()).length?Rs.intersect.apply(i(t.pop()),t):Ns()},i.union=function(t){return(t=O(t).toArray()).length?Rs.union.apply(i(t.pop()),t):Ns()},i.prototype.toString=function(){return this.C("Set {","}")},i.prototype.has=function(t){return this.it.has(t)},i.prototype.add=function(t){return zs(this,this.it.set(t,t))},i.prototype.remove=function(t){return zs(this,this.it.remove(t))},i.prototype.clear=function(){return zs(this,this.it.clear())},i.prototype.map=function(t,i){var s=this,e=!1,h=zs(this,this.it.mapEntries((function(h){var r=h[1],n=t.call(i,r,r,s);return n!==r&&(e=!0),[n,n]}),i));return e?h:this},i.prototype.union=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return 0===(i=i.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.G||1!==i.length?this.withMutations((function(s){for(var e=0;e<i.length;e++)t(i[e]).forEach((function(t){return s.add(t)}))})):this.constructor(i[0])},i.prototype.intersect=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];if(0===i.length)return this;i=i.map((function(i){return t(i)}));var e=[];return this.forEach((function(t){i.every((function(i){return i.includes(t)}))||e.push(t)})),this.withMutations((function(t){e.forEach((function(i){t.remove(i)}))}))},i.prototype.subtract=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];if(0===i.length)return this;i=i.map((function(i){return t(i)}));var e=[];return this.forEach((function(t){i.some((function(i){return i.includes(t)}))&&e.push(t)})),this.withMutations((function(t){e.forEach((function(i){t.remove(i)}))}))},i.prototype.sort=function(t){return he(Zt(this,t))},i.prototype.sortBy=function(t,i){return he(Zt(this,i,t))},i.prototype.wasAltered=function(){return this.it.wasAltered()},i.prototype._=function(t,i){var s=this;return this.it._((function(i){return t(i,i,s)}),i)},i.prototype.F=function(t,i){return this.it.F(t,i)},i.prototype.H=function(t){if(t===this.G)return this;var i=this.it.H(t);return t?this.ht(i,t):0===this.size?this.rt():(this.G=t,this.it=i,this)},i}(R);Ls.isSet=Fs;var Es,Rs=Ls.prototype;function zs(t,i){return t.G?(t.size=i.size,t.it=i,t):i===t.it?t:0===i.size?t.rt():t.ht(i)}function Vs(t,i){var s=Object.create(Rs);return s.size=t?t.size:0,s.it=t,s.G=i,s}function Ns(){return Es||(Es=Vs($i()))}Rs[Is]=!0,Rs.delete=Rs.remove,Rs.merge=Rs.concat=Rs.union,Rs.withMutations=Fi,Rs.asImmutable=Di,Rs["@@transducer/init"]=Rs.asMutable=Pi,Rs["@@transducer/step"]=function(t,i){return t.add(i)},Rs["@@transducer/result"]=function(t){return t.asImmutable()},Rs.rt=Ns,Rs.ht=Vs;var Gs,Hs=function(t){function i(t,s,e){if(!(this instanceof i))return new i(t,s,e);if(ni(0!==e,"Cannot step a Range by 0"),t=t||0,void 0===s&&(s=1/0),e=void 0===e?1:Math.abs(e),s<t&&(e=-e),this.nt=t,this.ot=s,this.ut=e,this.size=Math.max(0,Math.ceil((s-t)/e-1)+1),0===this.size){if(Gs)return Gs;Gs=this}}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this.nt+"..."+this.ot+(1!==this.ut?" by "+this.ut:"")+" ]"},i.prototype.get=function(t,i){return this.has(t)?this.nt+b(this,t)*this.ut:i},i.prototype.includes=function(t){var i=(t-this.nt)/this.ut;return i>=0&&i<this.size&&i===Math.floor(i)},i.prototype.slice=function(t,s){return M(t,s,this.size)?this:(t=_(t,this.size),(s=w(s,this.size))<=t?new i(0,0):new i(this.get(t,this.ot),this.get(s,this.ot),this.ut))},i.prototype.indexOf=function(t){var i=t-this.nt;if(i%this.ut==0){var s=i/this.ut;if(s>=0&&s<this.size)return s}return-1},i.prototype.lastIndexOf=function(t){return this.indexOf(t)},i.prototype._=function(t,i){for(var s=this.size,e=this.ut,h=i?this.nt+(s-1)*e:this.nt,r=0;r!==s&&!1!==t(h,i?s-++r:r++,this);)h+=i?-e:e;return r},i.prototype.F=function(t,i){var s=this.size,e=this.ut,h=i?this.nt+(s-1)*e:this.nt,r=0;return new Y((function(){if(r===s)return{value:void 0,done:!0};var n=h;return h+=i?-e:e,X(t,i?s-++r:r++,n)}))},i.prototype.equals=function(t){return t instanceof i?this.nt===t.nt&&this.ot===t.ot&&this.ut===t.ut:Ds(this,t)},i}(ht);function Ws(t,i,s){for(var e=ai(i),h=0;h!==e.length;)if((t=fi(t,e[h++],y))===y)return s;return t}function Us(t,i){return Ws(this,t,i)}function js(){oi(this.size);var t={};return this._((function(i,s){t[s]=i})),t}O.isIterable=T,O.isKeyed=F,O.isIndexed=D,O.isAssociative=B,O.isOrdered=U,O.Iterator=Y,Bs(O,{toArray:function(){oi(this.size);var t=new Array(this.size||0),i=F(this),s=0;return this._((function(e,h){t[s++]=i?[h,e]:e})),t},toIndexedSeq:function(){return new zt(this)},toJS:function(){return Os(this)},toKeyedSeq:function(){return new Rt(this,!0)},toMap:function(){return Oi(this.toKeyedSeq())},toObject:js,toOrderedMap:function(){return Ss(this.toKeyedSeq())},toOrderedSet:function(){return he(F(this)?this.valueSeq():this)},toSet:function(){return Ls(F(this)?this.valueSeq():this)},toSetSeq:function(){return new Vt(this)},toSeq:function(){return D(this)?this.toIndexedSeq():F(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return ws(F(this)?this.valueSeq():this)},toList:function(){return hs(F(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},C:function(t,i){return 0===this.size?t+i:t+" "+this.toSeq().map(this.ct).join(", ")+" "+i},concat:function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return Qt(this,Yt(this,t))},includes:function(t){return this.some((function(i){return St(i,t)}))},entries:function(){return this.F(2)},every:function(t,i){oi(this.size);var s=!0;return this._((function(e,h,r){if(!t.call(i,e,h,r))return s=!1,!1})),s},filter:function(t,i){return Qt(this,Ut(this,t,i,!0))},find:function(t,i,s){var e=this.findEntry(t,i);return e?e[1]:s},forEach:function(t,i){return oi(this.size),this._(i?t.bind(i):t)},join:function(t){oi(this.size),t=void 0!==t?""+t:",";var i="",s=!0;return this._((function(e){s?s=!1:i+=t,i+=null!=e?e.toString():""})),i},keys:function(){return this.F(0)},map:function(t,i){return Qt(this,Ht(this,t,i))},reduce:function(t,i,s){return Ks(this,t,i,s,arguments.length<2,!1)},reduceRight:function(t,i,s){return Ks(this,t,i,s,arguments.length<2,!0)},reverse:function(){return Qt(this,Wt(this,!0))},slice:function(t,i){return Qt(this,jt(this,t,i,!0))},some:function(t,i){return!this.every(Qs(t),i)},sort:function(t){return Qt(this,Zt(this,t))},values:function(){return this.F(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,i){return v(t?this.toSeq().filter(t,i):this)},countBy:function(t,i){return function(t,i,s){var e=Oi().asMutable();return t._((function(h,r){e.update(i.call(s,h,r,t),0,(function(t){return t+1}))})),e.asImmutable()}(this,t,i)},equals:function(t){return Ds(this,t)},entrySeq:function(){var t=this;if(t.T)return new nt(t.T);var i=t.toSeq().map(Js).toIndexedSeq();return i.fromEntrySeq=function(){return t.toSeq()},i},filterNot:function(t,i){return this.filter(Qs(t),i)},findEntry:function(t,i,s){var e=s;return this._((function(s,h,r){if(t.call(i,s,h,r))return e=[h,s],!1})),e},findKey:function(t,i){var s=this.findEntry(t,i);return s&&s[0]},findLast:function(t,i,s){return this.toKeyedSeq().reverse().find(t,i,s)},findLastEntry:function(t,i,s){return this.toKeyedSeq().reverse().findEntry(t,i,s)},findLastKey:function(t,i){return this.toKeyedSeq().reverse().findKey(t,i)},first:function(t){return this.find(x,null,t)},flatMap:function(t,i){return Qt(this,function(t,i,s){var e=ii(t);return t.toSeq().map((function(h,r){return e(i.call(s,h,r,t))})).flatten(!0)}(this,t,i))},flatten:function(t){return Qt(this,Xt(this,t,!0))},fromEntrySeq:function(){return new Nt(this)},get:function(t,i){return this.find((function(i,s){return St(s,t)}),void 0,i)},getIn:Us,groupBy:function(t,i){return function(t,i,s){var e=F(t),h=(U(t)?Ss():Oi()).asMutable();t._((function(r,n){h.update(i.call(s,r,n,t),(function(t){return(t=t||[]).push(e?[n,r]:r),t}))}));var r=ii(t);return h.map((function(i){return Qt(t,r(i))})).asImmutable()}(this,t,i)},has:function(t){return this.get(t,y)!==y},hasIn:function(t){return Ws(this,t,y)!==y},isSubset:function(t){return t="function"==typeof t.includes?t:O(t),this.every((function(i){return t.includes(i)}))},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:O(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(i){return St(i,t)}))},keySeq:function(){return this.toSeq().map(qs).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Kt(this,t)},maxBy:function(t,i){return Kt(this,i,t)},min:function(t){return Kt(this,t?te(t):se)},minBy:function(t,i){return Kt(this,i?te(i):se,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,i){return Qt(this,$t(this,t,i,!0))},skipUntil:function(t,i){return this.skipWhile(Qs(t),i)},sortBy:function(t,i){return Qt(this,Zt(this,i,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,i){return Qt(this,function(t,i,s){var e=si(t);return e.I=function(e,h){var r=this;if(h)return this.cacheResult()._(e,h);var n=0;return t._((function(t,h,o){return i.call(s,t,h,o)&&++n&&e(t,h,r)})),n},e.P=function(e,h){var r=this;if(h)return this.cacheResult().F(e,h);var n=t.F(2,h),o=!0;return new Y((function(){if(!o)return{value:void 0,done:!0};var t=n.next();if(t.done)return t;var h=t.value,a=h[0],u=h[1];return i.call(s,u,a,r)?2===e?t:X(e,a,u,t):(o=!1,{value:void 0,done:!0})}))},e}(this,t,i))},takeUntil:function(t,i){return this.takeWhile(Qs(t),i)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.j||(this.j=function(t){if(t.size===1/0)return 0;var i=U(t),s=F(t),e=i?1:0;return function(t,i){return i=vt(i,3432918353),i=vt(i<<15|i>>>-15,461845907),i=vt(i<<13|i>>>-13,5),i=vt((i=(i+3864292196|0)^t)^i>>>16,2246822507),bt((i=vt(i^i>>>13,3266489909))^i>>>16)}(t._(s?i?function(t,i){e=31*e+ee(Mt(t),Mt(i))|0}:function(t,i){e=e+ee(Mt(t),Mt(i))|0}:i?function(t){e=31*e+Mt(t)|0}:function(t){e=e+Mt(t)|0}),e)}(this))}});var $s=O.prototype;$s[C]=!0,$s[$]=$s.values,$s.toJSON=$s.toArray,$s.ct=ci,$s.inspect=$s.toSource=function(){return this.toString()},$s.chain=$s.flatMap,$s.contains=$s.includes,Bs(L,{flip:function(){return Qt(this,Gt(this))},mapEntries:function(t,i){var s=this,e=0;return Qt(this,this.toSeq().map((function(h,r){return t.call(i,[r,h],e++,s)})).fromEntrySeq())},mapKeys:function(t,i){var s=this;return Qt(this,this.toSeq().flip().map((function(e,h){return t.call(i,e,h,s)})).flip())}});var Ys=L.prototype;Ys[I]=!0,Ys[$]=$s.entries,Ys.toJSON=js,Ys.ct=function(t,i){return ci(i)+": "+ci(t)},Bs(E,{toKeyedSeq:function(){return new Rt(this,!1)},filter:function(t,i){return Qt(this,Ut(this,t,i,!1))},findIndex:function(t,i){var s=this.findEntry(t,i);return s?s[0]:-1},indexOf:function(t){var i=this.keyOf(t);return void 0===i?-1:i},lastIndexOf:function(t){var i=this.lastKeyOf(t);return void 0===i?-1:i},reverse:function(){return Qt(this,Wt(this,!1))},slice:function(t,i){return Qt(this,jt(this,t,i,!1))},splice:function(t,i){var s=arguments.length;if(i=Math.max(i||0,0),0===s||2===s&&!i)return this;t=_(t,t<0?this.count():this.size);var e=this.slice(0,t);return Qt(this,1===s?e:e.concat(ri(arguments,2),this.slice(t+i)))},findLastIndex:function(t,i){var s=this.findLastEntry(t,i);return s?s[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return Qt(this,Xt(this,t,!1))},get:function(t,i){return(t=b(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?i:this.find((function(i,s){return s===t}),void 0,i)},has:function(t){return(t=b(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Qt(this,function(t,i){var s=si(t);return s.size=t.size&&2*t.size-1,s.I=function(s,e){var h=this,r=0;return t._((function(t){return(!r||!1!==s(i,r++,h))&&!1!==s(t,r++,h)}),e),r},s.P=function(s,e){var h,r=t.F(1,e),n=0;return new Y((function(){return(!h||n%2)&&(h=r.next()).done?h:n%2?X(s,n++,i):X(s,n++,h.value,h)}))},s}(this,t))},interleave:function(){var t=[this].concat(ri(arguments)),i=Jt(this.toSeq(),ht.of,t),s=i.flatten(!0);return i.size&&(s.size=i.size*t.length),Qt(this,s)},keySeq:function(){return Hs(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,i){return Qt(this,$t(this,t,i,!1))},zip:function(){var t=[this].concat(ri(arguments));return Qt(this,Jt(this,ie,t))},zipAll:function(){var t=[this].concat(ri(arguments));return Qt(this,Jt(this,ie,t,!0))},zipWith:function(t){var i=ri(arguments);return i[0]=this,Qt(this,Jt(this,t,i))}});var Xs=E.prototype;Xs[P]=!0,Xs[W]=!0,Bs(R,{get:function(t,i){return this.has(t)?t:i},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}});var Zs=R.prototype;function Ks(t,i,s,e,h,r){return oi(t.size),t._((function(t,r,n){h?(h=!1,s=t):s=i.call(e,s,t,r,n)}),r),s}function qs(t,i){return i}function Js(t,i){return[i,t]}function Qs(t){return function(){return!t.apply(this,arguments)}}function te(t){return function(){return-t.apply(this,arguments)}}function ie(){return ri(arguments)}function se(t,i){return t<i?1:t>i?-1:0}function ee(t,i){return t^i+2654435769+(t<<6)+(t>>2)|0}Zs.has=$s.includes,Zs.contains=Zs.includes,Zs.keys=Zs.values,Bs(et,Ys),Bs(ht,Xs),Bs(rt,Zs);var he=function(t){function i(t){return null==t?ae():Ps(t)?t:ae().withMutations((function(i){var s=R(t);oi(s.size),s.forEach((function(t){return i.add(t)}))}))}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return this(arguments)},i.fromKeys=function(t){return this(L(t).keySeq())},i.prototype.toString=function(){return this.C("OrderedSet {","}")},i}(Ls);he.isOrderedSet=Ps;var re,ne=he.prototype;function oe(t,i){var s=Object.create(ne);return s.size=t?t.size:0,s.it=t,s.G=i,s}function ae(){return re||(re=oe(bs()))}ne[W]=!0,ne.zip=Xs.zip,ne.zipWith=Xs.zipWith,ne.zipAll=Xs.zipAll,ne.rt=ae,ne.ht=oe;var ue=function(t,i){var s;!function(t){if(G(t))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(H(t))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(null===t||"object"!=typeof t)throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}(t);var e=function(r){var n=this;if(r instanceof e)return r;if(!(this instanceof e))return new e(r);if(!s){s=!0;var o=Object.keys(t),a=h.ft={};h.dt=i,h.L=o,h.yt=t;for(var u=0;u<o.length;u++){var l=o[u];a[l]=u,h[l]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+fe(this)+' with property "'+l+'" since that property name is part of the Record API.'):ge(h,l)}}return this.G=void 0,this.St=hs().withMutations((function(t){t.setSize(n.L.length),L(r).forEach((function(i,s){t.set(n.ft[s],i===n.yt[s]?void 0:i)}))})),this},h=e.prototype=Object.create(le);return h.constructor=e,i&&(e.displayName=i),e};ue.prototype.toString=function(){for(var t,i=fe(this)+" { ",s=this.L,e=0,h=s.length;e!==h;e++)i+=(e?", ":"")+(t=s[e])+": "+ci(this.get(t));return i+" }"},ue.prototype.equals=function(t){return this===t||t&&de(this).equals(de(t))},ue.prototype.hashCode=function(){return de(this).hashCode()},ue.prototype.has=function(t){return this.ft.hasOwnProperty(t)},ue.prototype.get=function(t,i){if(!this.has(t))return i;var s=this.ft[t],e=this.St.get(s);return void 0===e?this.yt[t]:e},ue.prototype.set=function(t,i){if(this.has(t)){var s=this.St.set(this.ft[t],i===this.yt[t]?void 0:i);if(s!==this.St&&!this.G)return ce(this,s)}return this},ue.prototype.remove=function(t){return this.set(t)},ue.prototype.clear=function(){var t=this.St.clear().setSize(this.L.length);return this.G?this:ce(this,t)},ue.prototype.wasAltered=function(){return this.St.wasAltered()},ue.prototype.toSeq=function(){return de(this)},ue.prototype.toJS=function(){return Os(this)},ue.prototype.entries=function(){return this.F(2)},ue.prototype.F=function(t,i){return de(this).F(t,i)},ue.prototype._=function(t,i){return de(this)._(t,i)},ue.prototype.H=function(t){if(t===this.G)return this;var i=this.St.H(t);return t?ce(this,i,t):(this.G=t,this.St=i,this)},ue.isRecord=G,ue.getDescriptiveName=fe;var le=ue.prototype;function ce(t,i,s){var e=Object.create(Object.getPrototypeOf(t));return e.St=i,e.G=s,e}function fe(t){return t.constructor.displayName||t.constructor.name||"Record"}function de(t){return ct(t.L.map((function(i){return[i,t.get(i)]})))}function ge(t,i){try{Object.defineProperty(t,i,{get:function(){return this.get(i)},set:function(t){ni(this.G,"Cannot set on an immutable record."),this.set(i,t)}})}catch(t){}}le[N]=!0,le.delete=le.remove,le.deleteIn=le.removeIn=pi,le.getIn=Us,le.hasIn=$s.hasIn,le.merge=xi,le.mergeWith=Mi,le.mergeIn=Ti,le.mergeDeep=ki,le.mergeDeepWith=Ci,le.mergeDeepIn=Ii,le.setIn=yi,le.update=vi,le.updateIn=bi,le.withMutations=Fi,le.asMutable=Pi,le.asImmutable=Di,le[$]=le.entries,le.toJSON=le.toObject=$s.toObject,le.inspect=le.toSource=function(){return this.toString()};const me=ue({r:1,g:1,b:1,a:1});class ye extends me{constructor(t){super(t)}toString(){return`color:${this.r},${this.g},${this.b},${this.a}`}setA(t){return this.set("a",t/255)}setR(t){return this.set("r",t/255)}setG(t){return this.set("g",t/255)}setB(t){return this.set("b",t/255)}getA(){return 255*this.get("a")}getR(){return 255*this.get("r")}getG(){return 255*this.get("g")}getB(){return 255*this.get("b")}getHighlight(){return this.vt||(this.vt=new ye({r:this.r+.45*(1-this.r),g:this.g+.45*(1-this.g),b:this.b+.45*(1-this.b),a:this.a<1?this.a+.45*(1-this.a):1})),this.vt}getLighter(){return this.bt||(this.bt=new ye({r:this.r+.4*(1-this.r),g:this.g+.4*(1-this.g),b:this.b+.4*(1-this.b),a:this.a})),this.bt}getDarker(){return this.xt||(this.xt=new ye({r:this.r-.4*(1-this.r),g:this.g-.4*(1-this.g),b:this.b-.4*(1-this.b),a:this.a})),this.xt}toRGBAString(){return`rgba( ${255*this.r}, ${255*this.g}, ${255*this.b}, ${255*this.a} )`}}const pe=(t,i,s,e=255)=>new ye({r:t/255,g:i/255,b:s/255,a:e/255}),Se=t=>{const i=t.startsWith("#")?t.substring(1):t.startsWith("0x")?t.substr(2):t;switch(i.length){case 8:return new ye({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255,a:Number(`0x${i.substring(6,8)}`)/255});case 6:return new ye({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255});case 4:return new ye({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255,a:Number(`0x${i.charAt(3)}${i.charAt(3)}`)/255});case 3:return new ye({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255});default:throw new Error(`ColorHEX parsing error | input: ${t}`)}},ve=(t,i=1,s=1)=>{let e,h,r;t/=360;const n=Math.floor(6*t),o=6*t-n,a=s*(1-i),u=s*(1-o*i),l=s*(1-(1-o)*i);switch(n%6){case 0:e=s,h=l,r=a;break;case 1:e=u,h=s,r=a;break;case 2:e=a,h=s,r=l;break;case 3:e=a,h=u,r=s;break;case 4:e=l,h=a,r=s;break;default:e=s,h=a,r=u}return new ye({r:e,g:h,b:r})},be={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},xe=new ye({}),Me=pe(0,0,0,0),_e=(t,i)=>t.value-i.value,we=ue({steps:[],title:"",units:"",interpolate:!0,color:pe(0,0,0,255),length:0,min:0,max:0,subranges:[],isValid:!1}),Ae=t=>{const{steps:i}=t,s=i.length;i.sort(_e);const[e,h]=s>0?[i[0].value,i[s-1].value]:[0,0],r=s>0?s-1:0,n=Array(r);for(let t=0;t<r;t+=1)n[t]={min:i[t],max:i[t+1]};return{min:e,max:h,length:s,steps:i,subranges:n,isValid:s>0&&e!==h}};class ke extends we{constructor(t){super(((t,i)=>({steps:t.steps,title:t.title,units:t.units,interpolate:t.interpolate,color:t.color,length:i.length,min:i.min,max:i.max,subranges:i.subranges,isValid:i.isValid}))(t,Ae(t)))}toString(){return`LUT:interpolate=${this.interpolate},steps=${this.steps.map((t=>`${t.value},${t.color.toString()}`)).join(",")}`}setSteps(t){return this.merge(Ae({...this,steps:t}))}getSteps(){return this.get("steps")}setTitle(t){return this.set("title",t)}getTitle(){return this.get("title")}setUnits(t){return this.set("units",t)}getUnits(){return this.get("units")}setInterpolation(t){return this.set("interpolate",t)}getInterpolation(){return this.get("interpolate")}setFallbackColor(t){return this.set("color",t)}getFallbackColor(){return this.get("color")}getColors(t){if(Array.isArray(t)){if(Array.isArray(t[0])){const i=t,s=i.length,e=i[0].length,h=[...Array(s)].map((()=>Array(e)));for(let t=0;t<s;t+=1)for(let s=0;s<e;s+=1)h[t][s]=this.Mt(i[t][s]);return h}const i=t,s=i.length,e=Array(s);for(let t=0;t<s;t+=1)e[t]=this.Mt(i[t]);return e}return this.Mt(t)}Mt(t){const{steps:i}=this,s=i.length;if(0===s)return this.getFallbackColor();if(1===s)return i[0].color||this.color;if(this.interpolate){for(let n=0;n<s-1;n+=1){const s=i[n],o=i[n+1],a=Math.min(s.value,o.value),u=Math.max(s.value,o.value);if(t>=a&&t<=u){if(a===u)return s.color;const i=(t-s.value)/(o.value-s.value);return e=s.color,h=o.color,r=i,new ye({r:e.r+(h.r-e.r)*r,g:e.g+(h.g-e.g)*r,b:e.b+(h.b-e.b)*r,a:e.a+(h.a-e.a)*r})}}return t<i[0].value?i[0].color:i[s-1].color}var e,h,r;for(let e=s-1;e>=0;e-=1)if(t>=i[e].value)return i[e].color;return i[0].color}}const Ce=ue({});class Te extends Ce{constructor(){super(...arguments),this.type="fillstyle"}toString(){return"emptyFill"}}const Ie=new Te,Fe=ue({color:pe(255,255,255)});class Pe extends Fe{constructor(){super(...arguments),this.type="fillstyle"}}class De extends Pe{constructor(t){super(t)}toString(){return`solidFill:${this.color.toString()}`}setColor(t){return t instanceof ye?this.set("color",t):this.set("color",t(this.get("color")))}getColor(){return this.get("color")}setA(t){return this.setColor(this.getColor().setA(t))}setR(t){return this.setColor(this.getColor().setR(t))}setG(t){return this.setColor(this.getColor().setG(t))}setB(t){return this.setColor(this.getColor().setB(t))}}class Be extends Pe{constructor(t){super(t)}toString(){return`individualPointFill:${this.color.toString()}`}setFallbackColor(t){return t instanceof ye?this.set("color",t):this.set("color",t(this.get("color")))}getFallbackColor(){return this.get("color")}}const Oe=ue({lut:new ke({steps:[]}),lookUpProperty:"value"});class Le extends Oe{constructor(t){super(t),this.type="fillstyle"}toString(){return`palettedFill:lut=${this.lut.toString()},lookUpProperty=${this.lookUpProperty}`}getPalette(){return this.get("lut")}setLookUpProperty(t){return"function"==typeof t?this.set("lookUpProperty",t(this.get("lookUpProperty"))):this.set("lookUpProperty",t)}getLookUpProperty(){return this.get("lookUpProperty")}}var Ee=function(t,i){return Ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])},Ee(t,i)};function Re(t){var i="function"==typeof Symbol&&Symbol.iterator,s=i&&t[i],e=0;if(s)return s.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function ze(t,i){var s="function"==typeof Symbol&&t[Symbol.iterator];if(!s)return t;var e,h,r=s.call(t),n=[];try{for(;(void 0===i||i-- >0)&&!(e=r.next()).done;)n.push(e.value)}catch(t){h={error:t}}finally{try{e&&!e.done&&(s=r.return)&&s.call(r)}finally{if(h)throw h.error}}return n}function Ve(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(ze(arguments[i]));return t}var Ne=function(t){function i(s){var e,h="EventError: "+s+"}";return e=t.call(this,h)||this,Object.setPrototypeOf(e,i.prototype),e}return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=t}Ee(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}(i,t),i}(Error),Ge=0,He=function(t,i){return new Ne("Event listener with "+t.token+" id does not exist at Eventer with "+i+" id.")},We=function(){function t(){this.id=++Ge,this.lastEventIndex=0,this.topics=new Map}return t.prototype.on=function(t,i,s){var e,h,r=this.topics.get(t),n=s||{token:(e=this.id)+"-"+(h=++this.lastEventIndex),ownerIndex:e,id:h};return r?r.set(n,i):this.topics.set(t,new Map([[n,i]])),n},t.prototype.has=function(t,i){var s,e;if(i)return(n=this.topics.get(i))?(o=n.get(t))||He(t,this.id):new Ne("Eventer with "+t.ownerIndex+" does not have "+i+".");try{for(var h=Re(this.topics),r=h.next();!r.done;r=h.next()){var n,o,a=ze(r.value,2);if(a[0],o=(n=a[1]).get(t))return o}}catch(t){s={error:t}}finally{try{r&&!r.done&&(e=h.return)&&e.call(h)}finally{if(s)throw s.error}}return He(t,this.id)},t.prototype.off=function(t,i){var s,e;if(i)return!(!(n=this.topics.get(i))||!n.delete(t));try{for(var h=Re(this.topics),r=h.next();!r.done;r=h.next()){var n,o=ze(r.value,2);if(o[0],(n=o[1]).delete(t))return!0}}catch(t){s={error:t}}finally{try{r&&!r.done&&(e=h.return)&&e.call(h)}finally{if(s)throw s.error}}return!1},t.prototype.allOff=function(){return this.topics.clear(),this},t.prototype.topicOff=function(t){return this.topics.delete(t)},t.prototype.emit=function(t){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];var e=this.topics.get(t),h=0;if(e){var r=new Map(e);r.forEach((function(t){t.apply(void 0,Ve(i)),h++}))}return h},t.prototype.listeners=function(t){return this.topics.get(t)||new Map},t}();const Ue={linear:(t,i,s)=>{const e=i-t;return h=>h<s?t+e/s*h:i},easeIn:(t,i,s)=>e=>e<s?t+Math.abs(2*(Math.sqrt(.5)*e/s)**2)*(i-t):i,easeOut:(t,i,s)=>e=>e<s?t+Math.abs(1-2*(Math.sqrt(.5)*(1-e/s))**2)*(i-t):i,ease:(t,i,s)=>e=>e<s?t+(e<s/2?.5*(e/s*2)**2.5:.5+.5*(1-(1-2*(e/s-.5))**2.5))*(i-t):i,logarithmic:t=>{const i=tr(t);return(s,e,h)=>{const r=i(s),n=i(e);return i=>i<h?t**(r+Math.abs(1-2*(Math.sqrt(.5)*(1-i/h))**2)*(n-r)):e}}};class je{constructor(t,i,s,e=Ue.linear,h){this.delta=0,this.nextAnimations=new Array,this._t=!1,this.easing=Ue.linear,this.wt=new We,this.isOver=()=>(this.delta===this.duration||this._t)&&0===this.nextAnimations.length,this.values=t,this.action=i,this.duration=s,this.easing=e,this.At=h,this.eases=t.map((([t,i])=>e(t,i,s)))}kt(){this.wt.emit("start")}start(){return this.At.includes(this)||this.At.push(this),this}addNextAnimations(t){return t instanceof Array?t.forEach((t=>this.nextAnimations.push(t))):this.nextAnimations.push(t),this}NextAnimation(t,i,s=this.duration,e=this.easing){const h=new je(t,i,s,e,this.At);return this.nextAnimations.push(h),h}onAnimationStart(t,i){return this.wt.on("start",t,i)}onAnimationEnd(t,i){return this.wt.on("end",t,i)}onEveryAnimationEnd(t,i){return this.wt.on("everyEnd",t,i)}onAllAnimationEnd(t,i){return this.wt.on("allEnd",t,i)}allOffAnimationEnd(){return this.wt.topicOff("end"),this}allOffEveryAnimationEnd(){return this.wt.topicOff("everyEnd"),this}allOffAllAnimationEnd(){return this.wt.topicOff("allEnd"),this}offAnimationEnd(t){return this.wt.off(t,"end")}offEveryAnimationEnd(t){return this.wt.off(t,"everyEnd")}offAllAnimationEnd(t){return this.wt.off(t,"allEnd")}finish(t=!0){if(this._t=!0,this.At.splice(this.At.indexOf(this),1),this.nextAnimations.length>0){const i=this.nextAnimations[0];return t&&(this.wt.listeners("allEnd").forEach(((t,s)=>i.onAllAnimationEnd(t,s))),this.wt.listeners("everyEnd").forEach(((t,s)=>i.onEveryAnimationEnd(t,s)))),i.addNextAnimations(this.nextAnimations.slice(1)),i.start(),t&&(this.wt.emit("end",i),this.wt.emit("everyEnd",i)),i}t&&(this.wt.emit("end",void 0),this.wt.emit("everyEnd",void 0),this.wt.emit("allEnd"))}finishAll(t=!0){let i=this;for(;i;)i=i.finish(t)}getFinalValues(){return this.nextAnimations.length>0?this.nextAnimations[this.nextAnimations.length-1].values.map(xh):this.values.map(xh)}getTimeUntilFinish(){let t=this.duration-this.delta;for(let i=0;i<this.nextAnimations.length;i+=1)t+=this.nextAnimations[i].duration-this.nextAnimations[i].delta;return t}}const $e=(t,i=60)=>{i>60&&console.log("Note: Animator FPS is usually capped at 60 by the browser!");const s=[];let e,h,r=0;const n=()=>{e=void 0;const o=Date.now();h=h||o,r=o-h,r/1e3>=1/i&&(h=Date.now()-r%(1e3/i),s.forEach((t=>{0===t.delta&&t.kt(),t.delta+=r-r%(1e3/i),t.delta>t.duration&&(t.delta=t.duration),t.action(t.eases.map((i=>i(t.delta)))),t.delta===t.duration&&t.finish()})),t()),s.length>0?e=yh.requestAnimationFrame(n):(e=void 0,h=void 0)};return(t=1e3,i=Ue.linear)=>(h,r,o=t)=>{const a=new je(h,r,o,i,s).start();return e||(e=yh.requestAnimationFrame(n)),a}};var Ye,Xe;t.GradientShape=void 0,(Ye=t.GradientShape||(t.GradientShape={})).circle="circle",Ye.ellipse="ellipse",t.GradientExtent=void 0,(Xe=t.GradientExtent||(t.GradientExtent={})).closestSide="closest-side",Xe.closestCorner="closest-corner",Xe.farthestSide="farthest-side",Xe.farthestCorner="farthest-corner";const Ze=ue({stops:[{color:Se("#f00"),offset:0},{color:Se("#0f0"),offset:1}],position:e(.5,.5),shape:t.GradientShape.ellipse,extent:t.GradientExtent.farthestCorner});class Ke extends Ze{constructor(t){if(super(t),this.type="fillstyle",null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("RadialGradientFill requires minimum two color stops to be defined.")}toString(){return`radialGradientFill:${this.shape},${this.extent},${this.position.x},${this.position.y},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");return this.set("stops",t)}getColorStops(){return this.get("stops")}setPosition(t){return this.set("position",t)}getPosition(){return this.get("position")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}setExtent(t){return this.set("extent",t)}getExtent(){return this.get("extent")}}const qe=ue({stops:[{color:Se("#f00"),offset:0},{color:Se("#0f0"),offset:1}],angle:0});class Je extends qe{constructor(t){if(super(t),this.type="fillstyle",null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("LinearGradientFill requires minimum two color stops to be defined.")}toString(){return`linearGradientFill:${this.angle},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");const i=t.sort(((t,i)=>t.offset-i.offset));return this.set("stops",i)}getColorStops(){return this.get("stops")}setAngle(t,i){return this.set("angle",i?un(t):t)}getAngle(t){return t?an(this.get("angle")):this.get("angle")}}const Qe=ue({}),th=new class extends Qe{constructor(){super(...arguments),this.type="linestyle",this.lineType="empty",this.thickness=0}setThickness(t){return this}getThickness(){return 0}Ct(){return 0}setFillStyle(t){return this}getFillStyle(){return Ie}},ih=ue({fillStyle:new De({color:pe(255,255,255)}),thickness:1});class sh extends ih{constructor(t){super(t),this.type="linestyle",this.lineType="solid"}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}Ct(){const t=this.getThickness();return t<0?1:t}}class eh{constructor(t,i,s,e){this.cellIndex=t,this.cellSpan=i,this.cellsAmount=s,this.observedAmount=e,this.x=new hh,this.y=new hh,this.z=new hh,this.wt=new We;const h={...t},r={...i};if(e){const t=t=>{this.cellsAmount.x=t.reduce(Dr,0),this.cellIndex.x=t.reduce(((t,i,s)=>s>=h.x?t:t+i),0),this.cellSpan.x=t.reduce(((t,i,s)=>s>=h.x&&s<h.x+r.x?t+i:t),0),this.wt.emit("cell-resize")},i=e.x.Tt(t);t(e.x.M());const s=t=>{this.cellsAmount.y=t.reduce(Dr,0),this.cellIndex.y=t.reduce(((t,i,s)=>s>=h.y?t:t+i),0),this.cellSpan.y=t.reduce(((t,i,s)=>s>=h.y&&s<h.y+r.y?t+i:t),0),this.wt.emit("cell-resize")},n=e.y.Tt(s);s(e.y.M()),this.It=()=>{e.x.Ft(i),e.y.Ft(n)}}}Pt(){return this.It&&(this.It(),this.It=void 0),this}Dt(t){return this.wt.on("cell-resize",t)}Bt(t){return this.wt.off(t,"cell-resize")}}class hh extends i{constructor(){super(...arguments),this.Ot=0,this.Lt=10,this.Et=1}Rt(){return this.o=!1,this}zt(){return this.o=!0,this}getInnerStart(){return this.Ot}getInnerEnd(){return this.Lt}getInnerInterval(){return Math.abs(this.getInnerEnd()-this.getInnerStart())}Vt(t,i){return this.Ot=t,this.Lt=i,this.Nt(),this}Gt(t){return this.Et=t,this.Nt(),this}Ht(t){return t/this.Et}Nt(){const t=this.Ht(this.Lt-this.Ot),i=this.Et;void 0!==this.Wt&&!1!==wh(t,this.Wt)||(this.o=!0,this.Ut=i,this.Wt=t)}jt(){return this.Wt}$t(){return this.Ut}Yt(){return this.Lt<this.Ot}Xt(t,i){return!0}}const rh={d1:t=>new t.scale1DConstructor(0,1,1,void 0),d2:t=>(new t.scaleXYConstructor).Zt({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0),d3:()=>new eh({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0)},nh=(t,i,s)=>i===s?t:s.Kt(i.qt(t)),oh=(t,i,s)=>{if(i===s)return t;const e=i instanceof Tn?i.x:i.x instanceof Tn?i.x.x:i.x.Jt,h=i instanceof Tn?i.y:i.y instanceof Tn?i.y.y:i.y.Jt,r=s instanceof Tn?s.x:s.x instanceof Tn?s.x.x:s.x.Jt,n=s instanceof Tn?s.y:s.y instanceof Tn?s.y.y:s.y.Jt;return{...t,x:nh(t.x,e,r),y:nh(t.y,h,n)}},ah=(...t)=>{if(0===t.length)return{remove:_h};let i=!1;const s=t.map((s=>s.onIntervalChange(((e,h,r)=>((s,e,h)=>{i||(i=!0,t.filter((t=>t!==s)).forEach((t=>t.Qt(e,h,!1,!1,"synchronizedAxis"))),i=!1)})(s,h,r)))));let e=!1;const h=t.map((i=>i.onStoppedStateChanged(((s,h)=>((i,s)=>{e||(e=!0,t.filter((t=>t!==i)).forEach((t=>t.setStopped(s))),e=!1)})(i,h)))));return{remove:()=>{t.forEach(((t,i)=>{t.offIntervalChange(s[i]),t.offStoppedStateChanged(h[i])}))}}};class uh extends Error{constructor(t,i){super(`ChartError: ${t} ${i?`in ${i.constructor.name}`:""}`),Object.setPrototypeOf(this,uh.prototype)}}class lh extends Error{constructor(t,i,s=!1){const e=`EngineError: ${t} ${i?`in ${i.constructor.name}`:""}`;super(e),s&&yh.alert(e),Object.setPrototypeOf(this,lh.prototype)}}class ch extends lh{constructor(t){super(t),Object.setPrototypeOf(this,ch.prototype)}}var fh,dh,gh,mh;t.UISpace=void 0,(fh=t.UISpace||(t.UISpace={}))[fh.Content=0]="Content",fh[fh.PaddedContent=1]="PaddedContent",fh[fh.PaddedBackground=2]="PaddedBackground",fh[fh.Everything=3]="Everything",t.UIVisibilityModes=void 0,(dh=t.UIVisibilityModes||(t.UIVisibilityModes={}))[dh.never=0]="never",dh[dh.always=1]="always",dh[dh.whenHovered=2]="whenHovered",dh[dh.whenDragged=3]="whenDragged",dh[dh.whenNotDragged=4]="whenNotDragged",dh[dh.whenHoveredOrDragged=5]="whenHoveredOrDragged",t.UIDraggingModes=void 0,(gh=t.UIDraggingModes||(t.UIDraggingModes={}))[gh.notDraggable=0]="notDraggable",gh[gh.draggable=1]="draggable",gh[gh.onlyHorizontal=2]="onlyHorizontal",gh[gh.onlyVertical=3]="onlyVertical",t.UIDirections=void 0,(mh=t.UIDirections||(t.UIDirections={}))[mh.Up=0]="Up",mh[mh.Right=1]="Right",mh[mh.Down=2]="Down",mh[mh.Left=3]="Left";const yh="undefined"!=typeof window?window:"undefined"!=typeof global&&global._lcjs?global._lcjs:{},ph=(t,i)=>t.x===i.x&&t.y===i.y,Sh=t=>t!==wr&&t!==Ar&&!Number.isNaN(t)&&Number.isFinite(t)&&t!==1/0&&t!==-1/0,vh=(t,i)=>Math.min(t,i.y),bh=(t,i)=>Math.max(t,i.y),xh=t=>t[1],Mh=t=>t.dispose(),_h=()=>{},wh=(t,i)=>t===i,Ah=(t,i,s)=>s>i?Math.min(Math.max(t,i),s):Math.min(Math.max(t,s),i),kh=t=>Array.prototype.concat.apply([],t),Ch=(t,i)=>{const{x:s,y:e}={x:t[0].length,y:t.length},{column:h,row:r}=i,n=Math.max(0,h.start),o=Math.min(s,h.end),a=Math.max(0,r.start),u=Math.min(e,r.end),l=o-n,c=u-a,f=Array.from(Array(c)).map((()=>Array(l)));for(let i=a,s=0;i<u;i+=1,s+=1)for(let e=n,h=0;e<o;e+=1,h+=1)f[s][h]=t[i][e];return{sliced:f,rows:c,columns:l}},Th=(t,i)=>{const s=i&&void 0!==i.row.start?i.row.start:0,e=i&&void 0!==i.row.end?i.row.end:t.y,h=i&&void 0!==i.column.start?i.column.start:0,r=i&&void 0!==i.column.end?i.column.end:t.x;return[Math.min(s,e),Math.max(s,e),Math.min(h,r),Math.max(h,r)]},Ih=(t,i)=>{for(;i;)t.push(t.shift()),i-=1},Fh=t=>{const i=[];for(const s of t)i.push(s.slice());return i},Ph=(t,i)=>void 0!==t?t:i,Dh=t=>t.ti(),Bh=t=>t.ii(),Oh=t=>t.si(),Lh=t=>t.ei(),Eh=t=>t.min.x,Rh=t=>t.max.x,zh=t=>t.min.y,Vh=t=>t.max.y,Nh=(t,i,s,e,h)=>{if(t.length>0){let r=h?e(h):void 0;for(let e=0;e<t.length;e+=1){const h=i(t[e]);void 0!==h&&(r=void 0!==r?s(r,h):h)}return r}if(h)return e(h)},Gh=(t,i)=>t.position===i.position&&t.high===i.high&&t.low===i.low,Hh=e(0,1),Wh=e(1,0),Uh=e(0,-1),jh=e(-1,0),$h=e(0,0),Yh=i=>{switch(i){case t.UIDirections.Up:return Hh;case t.UIDirections.Right:return Wh;case t.UIDirections.Down:return Uh;case t.UIDirections.Left:return jh;default:return $h}},Xh=i=>i===t.UIDirections.Left||i===t.UIDirections.Right,Zh=t=>{t.stopPropagation(),t.preventDefault()},Kh=(t,i)=>{if(!i){const i=t.length,s=new Float32Array(2*i);let e=0;for(let h=0;h<i;h+=1){const i=t[h];s[e+0]=i.x,s[e+1]=i.y,e+=2}return s}const s=t.length,e=new Float32Array(4*s);let h=0;for(let i=0;i<s;i+=1){const s=t[i],r=Math.fround(s.x),n=Math.fround(s.y);e[h+0]=r,e[h+1]=n,e[h+2]=s.x-r,e[h+3]=s.y-n,h+=4}return e},qh=t=>{const i=t.length,s=new Float32Array(3*i);let e=0;for(let h=0;h<i;h+=1){const i=t[h];s[e+0]=i.x,s[e+1]=i.y,s[e+2]=i.z,e+=3}return s},Jh=t=>i=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)},Qh=t=>{let i=t.length;for(let s=0;s<i-1;s+=1)t[s].x===t[s+1].x&&t[s].y===t[s+1].y&&(t.splice(s,1),s-=1,i-=1);return t},tr=t=>{const i=Math.log(t);return t=>Math.log(t)/i},ir=tr(Math.E),sr=(t,i)=>{const s=i[t];return s?s():void 0},er=(t,i)=>{let s;if(i)s=i;else{const i={x:0,y:0};for(let s=0;s<t.length;s+=1)i.x+=t[s].x/t.length,i.y+=t[s].y/t.length;s=i}return t.sort(((t,i)=>ln(tn(t,s))-ln(tn(i,s))))},hr=(t,i,s)=>{if(0===t.length)return!1===s.canReturnB?i.slice():i;const e=i.length;if(e<1e5)return t.push.apply(t,i),t;for(let s=0;s<e;s+=1)t.push(i[s]);return t},rr=(t,i,s)=>s<0?t:s>1?i:pe(t.getR()+s*(i.getR()-t.getR()),t.getG()+s*(i.getG()-t.getG()),t.getB()+s*(i.getB()-t.getB()),t.getA()+s*(i.getA()-t.getA())),nr=t=>255===t.getA()?t:t.setA(255),or=(()=>{const i=pe(0,0,0);return s=>(s=nr(s),new Ke({shape:t.GradientShape.circle,extent:t.GradientExtent.farthestCorner,position:{x:.2,y:.8},stops:[{offset:0,color:s},{offset:1,color:rr(s,i,.5)}]}))})(),ar=(()=>{const t=t=>{var i;if(t){if(t instanceof De){if(0===t.getColor().getA())return;return t.getColor()}if(t instanceof Ke||t instanceof Je){const s=t.getColorStops();return 3===s.length?s[1].color:null===(i=s[0])||void 0===i?void 0:i.color}}};return(i,s,e)=>{const h=[];if(e.fill&&h.push(e.fill),e.fill2&&h.push(e.fill2),e.stroke){const t=e.stroke;t instanceof sh&&h.push(t.getFillStyle())}if(e.point3D){const t=e.point3D;h.push(t.getFillStyle())}let r;if(e.behavior&&!0===e.behavior.colorStep){const[i,e]=h.reduce(((i,s)=>{if(i[0]&&i[1])return i;const e=t(s);return e&&(void 0===i[0]?i[0]=e:i[1]=e),i}),[void 0,void 0]);r=i&&e?(n=i)===(o=e)||n.getR()===o.getR()&&n.getG()===o.getG()&&n.getB()===o.getB()?or(n):(n=nr(n),o=nr(o),new Je({angle:0,stops:[{offset:0,color:o},{offset:.5,color:o},{offset:.5,color:n},{offset:1,color:n}]})):s.uiButtonFillStyle}else{const i=h.reduce(((i,s)=>i||t(s)),void 0);r=i?or(i):s.uiButtonFillStyle}var n,o;i.setButtonOffFillStyle(new De({color:pe(255,255,255,0)})).setButtonOffStrokeStyle(s.uiButtonStrokeStyle).setButtonOnFillStyle(r).setButtonOnStrokeStyle(th)}})(),ur=t=>{const i=t;if(i instanceof Le)return{lut:i.getPalette(),lookUpProperty:i.getLookUpProperty()}},lr=t=>{let i=0;return()=>(i+=1,`${t}-${i}`)},cr=(t,i)=>{let s="string"==typeof t?t:String(t);const e=s.indexOf(".");let h=e>=0?e:s.length;for(;h<i;h+=1)s=`0${s}`;return s},fr=(t,i)=>"function"==typeof t?t(i):t,dr=t=>t.ctrlKey?Math.sign(t.deltaY)*Math.min(.05*Math.abs(t.deltaY),1):Math.sign(t.deltaY),gr=(t,i)=>i(),mr=()=>new Error("LightningChart JS encountered an unexpected error.\nPlease report this issue to support@lightningchart.com or Stack Overflow with tag [lightningchart]");new De({color:pe(255,255,255,1)});const yr=t=>t===kr||t.min.x===kr.min.x&&t.max.x===kr.max.x&&t.min.y===kr.min.y&&t.max.y===kr.max.y,pr=t=>"boolean"==typeof t?t?1:0:t>1?1:t<0?0:t,Sr=(t,i)=>{throw new Error(i)},vr=()=>{const t=$e((()=>{}));let i;return(s,e,h,r)=>{const n=null==r?void 0:r.onStart,o=null==r?void 0:r.onCompleted,a=(null==r?void 0:r.easing)||Ue.ease,u=(null==r?void 0:r.durationMs)||1e3;let l;if(i)if(0===i.nextAnimations.length){const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),u,a);l=t}else{s=i.nextAnimations.pop().values[0][0];const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),u,a);l=t}else l=t(u,a)([[s,e]],(([t])=>{h(t)})),i=l;l.onAnimationEnd((()=>{i=void 0})),n&&l.onAnimationStart(n),o&&l.onAnimationEnd(o)}},br=t=>{let i;return()=>i||(i=t(),i)},xr=t=>{if(t===th)return 0;const i=t.getThickness();return i<0?1:1*i},Mr=(t,i,s,e)=>{const h=`LightningChart JS Resources not found.\nresourcesBaseUrl: "${t}"\ninitiator: ${s}\nresource url: ${i}\nFor more information, please find the FAQ from API documentation at below link:\nhttps://lightningchart.com/lightningchart-js-api-documentation/\nand read section "What is LightningChart JS Resources not found error?"`;if(e.shouldCrash)throw yh.alert(h),new Error(h);yh.console.warn(h)},_r={add:(t,i)=>n(t.x+i,t.y+i,t.z+i),addVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x+=t.x,s.y+=t.y,s.z+=t.z;return s},subtract:(t,i)=>n(t.x-i,t.y-i,t.z-i),subtractVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x-=t.x,s.y-=t.y,s.z-=t.z;return s},multiply:(t,i)=>n(t.x*i,t.y*i,t.z*i),divide:(t,i)=>n(t.x/i,t.y/i,t.z/i),multiplyVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x*=t.x,s.y*=t.y,s.z*=t.z;return s},divideVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x/=t.x,s.y/=t.y,s.z/=t.z;return s},length:t=>Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),normalize:t=>_r.divide(t,_r.length(t)),dot:(t,i)=>t.x*i.x+t.y*i.y+t.z*i.z,cross:(t,i)=>n(t.y*i.z-t.z*i.y,t.z*i.x-t.x*i.z,t.x*i.y-t.y*i.x),angle:(t,i)=>Math.acos(_r.dot(t,i)/(_r.length(t)*_r.length(i))),rotateAroundAxis(t,i,s){const e=Math.cos(s),h=Math.sin(s),r=_r.dot(i,t),n=_r.cross(i,t);return _r.addVec(_r.multiply(t,e),_r.addVec(_r.multiply(i,(1-e)*r),_r.multiply(n,h)))},lerp:(t,i,s)=>(s=Ah(s,0,1),_r.addVec(_r.multiply(t,1-s),_r.multiply(i,s))),equals:(t,i)=>wh(t.x,i.x)&&wh(t.y,i.y)&&wh(t.z,i.z),abs:t=>({x:Math.abs(t.x),y:Math.abs(t.y),z:Math.abs(t.z)}),sign:t=>({x:Math.sign(t.x),y:Math.sign(t.y),z:Math.sign(t.z)})},wr=Number.MAX_SAFE_INTEGER,Ar=-Number.MAX_SAFE_INTEGER,kr=a(e(wr,wr),e(Ar,Ar)),Cr=a(n(wr,wr,wr),n(Ar,Ar,Ar)),Tr=(t,i)=>{const s=Math.log(t)/Math.log(i);return Math.floor((t=>(Math.ceil(t)-t<1e-4?t=Math.ceil(t):t-Math.floor(t)<1e-4&&(t=Math.floor(t)),t))(s))},Ir=(t,i)=>!(i.min.x>t.max.x||i.max.x<t.min.x||i.min.y>t.max.y||i.max.y<t.min.y),Fr=(t,i)=>!(t[1].x<i[0].x||t[0].x>i[1].x||t[3].y<i[0].y||t[0].y>i[3].y),Pr=(t,i)=>a(e(Math.max(Math.min(t[0].x,t[2].x),Math.min(i[0].x,i[2].x)),Math.max(Math.min(t[0].y,t[2].y),Math.min(i[0].y,i[2].y))),e(Math.min(Math.max(t[0].x,t[2].x),Math.max(i[0].x,i[2].x)),Math.min(Math.max(t[0].y,t[2].y),Math.max(i[0].y,i[2].y)))),Dr=(t,i)=>i+t,Br=(t,i,s)=>{const h=tn(i,t),r=h.x*h.x+h.y*h.y;if(0===r)return t;const n=tn(s,t),o=(n.x*h.x+n.y*h.y)/r;return o<=0?t:o>=1?i:e(t.x+o*h.x,t.y+o*h.y)},Or=(t,i,s)=>s>i?t>=i&&t<=s:t>=s&&t<=i,Lr=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)},Er=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return s*s+e*e},Rr=(t,i,s)=>{const h=Er(i,s);if(0===h)return[Er(t,i),i];let r=rn(tn(t,i),tn(s,i))/h;r=Math.max(0,Math.min(1,r));const n=e(i.x+r*(s.x-i.x),i.y+r*(s.y-i.y));return[Er(t,n),n]},zr=(t,i,s)=>Qr(t,Jr(tn(i,t),s)),Vr=(t,i,s)=>_r.addVec(t,_r.multiply(_r.subtractVec(i,t),s));function Nr(t){const i=t.length;if(i>0){let s=t[0].x,h=t[0].x,r=t[0].y,n=t[0].y;for(let e=0;e<i;e+=1){const i=t[e];i.x>s&&(s=i.x),i.x<h&&(h=i.x),i.y>r&&(r=i.y),i.y<n&&(n=i.y)}return a(e(h,n),e(s,r))}return kr}function Gr(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,h=t[0].y,r=t[0].y,o=t[0].z,u=t[0].z;for(let n=0;n<i;n+=1){const i=t[n];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>h&&(h=i.y),i.y<r&&(r=i.y),i.z>o&&(o=i.z),i.z<u&&(u=i.z)}return a(n(e,r,u),n(s,h,o))}return Cr}const Hr=(t,i)=>a(e(t.min.x<i.min.x?t.min.x:i.min.x,t.min.y<i.min.y?t.min.y:i.min.y),e(t.max.x>i.max.x?t.max.x:i.max.x,t.max.y>i.max.y?t.max.y:i.max.y)),Wr=(t,i)=>a(n(t.min.x<i.min.x?t.min.x:i.min.x,t.min.y<i.min.y?t.min.y:i.min.y,t.min.z<i.min.z?t.min.z:i.min.z),n(t.max.x>i.max.x?t.max.x:i.max.x,t.max.y>i.max.y?t.max.y:i.max.y,t.max.z>i.max.z?t.max.z:i.max.z));function Ur(t,i,s,e){const h=t.x-e.x,r=t.y-e.y,n=e.x-s.x,o=s.y-e.y,a=o*h+n*r,u=(e.y-i.y)*h+(i.x-e.x)*r,l=o*(i.x-e.x)+n*(i.y-e.y);return l<0?a<=0&&u<=0&&a+u>=l:a>=0&&u>=0&&a+u<=l}const jr=(t,i,s,h)=>e((t.x+i.x+s.x+h.x)/4,(t.y+i.y+s.y+h.y)/4),$r=(t,i,s,e,h)=>{if(i.x>s.x)if(i.x>e.x)if(i.x>h.x){if(t.x>i.x)return!1;if(h.x<e.x){if(h.x<s.x){if(t.x<h.x)return!1}else if(t.x<s.x)return!1}else if(e.x<s.x){if(t.x<e.x)return!1}else if(t.x<s.x)return!1}else{if(t.x>h.x)return!1;if(e.x<s.x){if(t.x<e.x)return!1}else if(t.x<s.x)return!1}else if(e.x>h.x){if(t.x>e.x)return!1;if(h.x<s.x){if(t.x<h.x)return!1}else if(t.x<s.x)return!1}else{if(t.x>h.x)return!1;if(t.x<s.x)return!1}else if(s.x>e.x)if(s.x>h.x){if(t.x>s.x)return!1;if(h.x<e.x){if(h.x<i.x){if(t.x<h.x)return!1}else if(t.x<i.x)return!1}else if(e.x<i.x){if(t.x<e.x)return!1}else if(t.x<i.x)return!1}else{if(t.x>h.x)return!1;if(e.x<i.x){if(t.x<e.x)return!1}else if(t.x<i.x)return!1}else if(e.x>h.x){if(t.x>e.x)return!1;if(h.x<i.x){if(t.x<h.x)return!1}else if(t.x<i.x)return!1}else{if(t.x>h.x)return!1;if(e.x<i.x){if(t.x<e.x)return!1}else if(t.x<i.x)return!1}if(i.y>s.y)if(i.y>e.y)if(i.y>h.y){if(t.y>i.y)return!1;if(h.y<e.y){if(h.y<s.y){if(t.y<h.y)return!1}else if(t.y<s.y)return!1}else if(e.y<s.y){if(t.y<e.y)return!1}else if(t.y<s.y)return!1}else{if(t.y>h.y)return!1;if(e.y<s.y){if(t.y<e.y)return!1}else if(t.y<s.y)return!1}else if(e.y>h.y){if(t.y>e.y)return!1;if(h.y<s.y){if(t.y<h.y)return!1}else if(t.y<s.y)return!1}else{if(t.y>h.y)return!1;if(t.y<s.y)return!1}else if(s.y>e.y)if(s.y>h.y){if(t.y>s.y)return!1;if(h.y<e.y){if(h.y<i.y){if(t.y<h.y)return!1}else if(t.y<i.y)return!1}else if(e.y<i.y){if(t.y<e.y)return!1}else if(t.y<i.y)return!1}else{if(t.y>h.y)return!1;if(e.y<i.y){if(t.y<e.y)return!1}else if(t.y<i.y)return!1}else if(e.y>h.y){if(t.y>e.y)return!1;if(h.y<i.y){if(t.y<h.y)return!1}else if(t.y<i.y)return!1}else{if(t.y>h.y)return!1;if(e.y<i.y){if(t.y<e.y)return!1}else if(t.y<i.y)return!1}return!0};function Yr(t,i,s){return e(Math.cos(s)*(t.x-i.x)+Math.sin(s)*(t.y-i.y)+i.x,-Math.sin(s)*(t.x-i.x)+Math.cos(s)*(t.y-i.y)+i.y)}function Xr(t,i){return e(t.x-i.x,t.y-i.y)}function Zr(t){const i=qr(t);return 0===i?e(0,0):e(t.x/i,t.y/i)}function Kr(t,i){let s={x:i.x-t.x,y:i.y-t.y};s=Zr(s);const e=Math.PI/2,h=s.x;return s.x=-Math.sin(e)*s.y,s.y=h*Math.sin(e),s}function qr(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function Jr(t,i){return e(t.x*i,t.y*i)}function Qr(t,i){return e(t.x+i.x,t.y+i.y)}function tn(t,i){return e(t.x-i.x,t.y-i.y)}function sn(t,i){return e(t.x*i.x,t.y*i.y)}function en(t,i){return e(t.x/i.x,t.y/i.y)}function hn(t){return Jr(t,-1)}function rn(t,i){return t.x*i.x+t.y*i.y}const nn=(t,i,s)=>{const h=(s.y-i.y)/(s.x-i.x),r=i.y+(t-i.x)*h;return e(t,r)},on=(t,i,s)=>{const h=(s.y-i.y)/(s.x-i.x),r=i.x+(t-i.y)/h;return e(r,t)};function an(t){return t*Math.PI/180}function un(t){return 180*t/Math.PI}function ln(t){return 180*Math.atan2(t.y,t.x)/Math.PI}function cn(t){return e(Math.cos(t),Math.sin(t))}function fn(t){let i=-1;const s=Math.cos(t),e=Math.sin(t);return s>0&&s<1&&e>0&&e<1?i=1:s<0&&s>-1&&e>0&&e<1?i=2:s<0&&s>-1&&e<0&&e>-1?i=3:s>0&&s<1&&e<0&&e>-1&&(i=4),i}const dn=(t,i,s,h)=>{let r,n,o,a;if(i.x-t.x!=0||h.x-s.x!=0)return i.x-t.x==0?(o=i.x,n=(h.y-s.y)/(h.x-s.x),a=n*(o-s.x)+s.y):h.x-s.x==0?(o=h.x,r=(i.y-t.y)/(i.x-t.x),a=r*(o-t.x)+t.y):(r=(i.y-t.y)/(i.x-t.x),n=(h.y-s.y)/(h.x-s.x),o=(s.y-n*s.x+r*t.x-t.y)/(r-n),a=r*(o-t.x)+t.y),e(o,a)},gn=(t,i)=>{const s=t.length,e=i.length,h=new Uint16Array(s+e);return h.set(t,0),h.set(i,s),h};class mn{constructor(){this.hi=!0}getInnerStart(){return this.Ot}getInnerEnd(){return this.Lt}getInnerInterval(){return Math.abs(this.Lt-this.Ot)}Vt(t,i){return this.Ot=t,this.Lt=i,this}Rt(){return this.hi=!1,this}zt(){return this.hi=!0,this}}class yn extends mn{constructor(t,i,s,e){if(super(),this.ri=!0,this.ni=!0,this.oi=[0,0],this.ai=!0,this.ui=t,this.li=i,this.ci=s,this.fi=t,this.di=i,e){const t=e.Tt(this.gi.bind(this));this.gi(e.M()),this.mi=()=>e.Ft(t)}}Gt(t){return this.Et=t,this.ni=!0,this}yi(t){return this.oi=t.map(Math.abs),this.ai=!0,this}pi(){return this.ui/this.ci*this.Et+this.oi[0]}Si(){return(this.ui+this.li)/this.ci*this.Et-this.oi[1]}vi(){return this.getCellSize()-this.bi()}xi(){return this.Et}getCellSize(){return this.Mi(this.Et)}bi(){return this.oi[0]+this.oi[1]}_i(){return this.oi}gi(t){this.ci=t.reduce(Dr,0),this.ui=t.reduce(((t,i,s)=>s>=this.fi?t:t+i),0),this.li=t.reduce(((t,i,s)=>s>=this.fi&&s<this.fi+this.di?t+i:t),0),this.ri=!0,this.wi()}Mi(t){return t*this.li/this.ci}Rt(){return super.Rt(),this.ni=!1,this.ai=!1,this.ri=!1,this}zt(){return super.zt(),this.ni=!0,this.ai=!0,this.ri=!0,this}}class pn extends yn{constructor(t,i,s,e){super(t,i,s,e),this.Ai={internal:10,function:Sn(10),number:10},this.Et=1e3,this.Vt(1,1e3),this.ki=this.Ci()}Xt(t,i,s,e,h){if(t===i)return!1;const r=Math.min(t,i)<bn,n=Math.max(t,i)>xn;return!r&&!n||!!h&&(i>t?{start:r?bn:t,end:n?xn:i}:{start:n?xn:t,end:r?bn:i})}qt(t){const i=this.pi(),s=this.Si(),e=Math.max(t,bn);return i+(this.Ai.function(e)-this.ki.scaleStartLog)/this.ki.scaleIntervalLog*(s-i)}Kt(t){const i=this.pi(),s=(t-i)/(this.Si()-i),e=this.ki.scaleStartLog+s*this.ki.scaleIntervalLog;return this.Ai.number**e}wi(){this.Ai&&this.Ci()}Vt(t,i){return super.Vt(t,i),this.Ai&&this.Ci(),this}yi(t){return super.yi(t),this.Ai&&this.Ci(),this}Gt(t){return super.Gt(t),this.Ai&&this.Ci(),this}Ti(t){return this.Ai={internal:t,function:Sn(t),number:vn(t)},this}Ii(){return this.Ai.internal}Fi(t,i){const s=this.qt(t)+i;return this.Kt(s)}get Pi(){return this.ni||this.hi||this.ai||this.ri}Ci(){const t=this.Ai.function(this.Ot),i=this.Ai.function(this.Lt)-t,s=2*this.pi()/this.Et-1,e=2*this.Si()/this.Et-1-s;return this.ki={scaleStartLog:t,scaleIntervalLog:i,viewportStart:s,viewportSize:e},this.ki}Di(){return this.ki}}const Sn=t=>"e"===t?ir:tr(t),vn=t=>"e"===t?Math.E:t,bn=.9*1e-9,xn=1.1*10**32,Mn=["K","M","B","T"],_n=(t,i,s)=>{const e=Math.abs(s-i),h=Math.max(2-Tr(e,10),0);return t.toFixed(h)},wn={Numeric:(t,i)=>_n(t,i.getInnerStart(),i.getInnerEnd()),NumericUnits:(t,i)=>{const s=Math.abs(i.getInnerEnd()-i.getInnerStart()),e=t<0;t=Math.abs(t);const h=Tr(t,1e3),r=1e3**h;let n="",o="";if(s>=1e3&&t>=1e3){const i=10**(Tr(s,10)-1),a=Math.round(t/i)*i/r;let u=h;for(;u>0;){const t=Math.min(u,Mn.length)-1;o=Mn[t]+o,u-=t+1}n=(e?"-":"")+a}else{let i=String(Math.floor(t));for(let t=1;t<=h;t+=1){const s=i.length-(3*t+(t-1));i=`${i.substring(0,s)} ${i.substring(s,i.length)}`}n=(e?"-":"")+i+(s<=10?((t,i)=>{if(0===i)return"";let s=(Math.abs(t)-Math.abs(Math.floor(t))).toString().substring(1);return s.length>i&&(s=s.substring(0,i+1)),s})(t,2-Tr(s,10)):"")}return n+=o,n}},An=(t,i)=>{const s=Sn(i);return"e"===i?t?(t,i)=>`${Math.floor(s(t))}e`:()=>"":(t,i)=>{const e=t.toString();if(t>1)return e;const h=Math.floor(s(t));return t.toFixed(Math.abs(h))}};class kn extends yn{constructor(t,i,s,e){super(t,i,s,e),this.Bi=!1,this.Pi=!1,this.Oi=0,this.Et=1e3,this.Vt(0,10),this.Nt()}Xt(t,i,s,e,h){if(t===i)return!1;const r=Math.abs(e-s),n=Math.abs(i-t);if(!this.Bi){const s=((t,i,s)=>{const e=((t,i)=>{if(i<wr&&i>Ar&&t<wr&&t>Ar){const s=Math.abs(t/2**23),e=Math.abs(i/2**23),h=Math.min(s,e);return 10**Math.floor(Math.log10(h))}})(t,i);if(void 0!==e)return e*s})(t,i,this.getCellSize());if(void 0===s)return!1;if(n>s)return!0;const e=(i+t)/2,o=(h?s/2:r/2)*(t>i?-1:1);return{start:e-o,end:e+o}}const o=10**-(12-Math.log10(Math.max(Math.abs(t),1)));if(n>o)return!0;const a=(i+t)/2,u=(h?o/2:r/2)*(t>i?-1:1);return{start:a-u,end:a+u}}wi(){this.Nt()}qt(t){return this.pi()+(t-this.Ot)/(this.Lt-this.Ot)*(this.Si()-this.pi())}Kt(t){return this.Ot+(t-this.pi())/(this.Si()-this.pi())*(this.Lt-this.Ot)}Vt(t,i){return super.Vt(t,i),this.Nt(),this}yi(t){return super.yi(t),this.Nt(),this}Gt(t){return super.Gt(t),this.Li=Cn(this.Lt-this.Ot,this.oi,this.Et,this.li,this.ci),this.Nt(),this}Ei(){return this.Bi=!0,this}Ri(){return this.Bi}zi(){return Math.abs(this.Vi)}Ni(){return this.zi()/this.Li}Gi(){return this.ot}Hi(){return this.nt}getPixelSize(){return this.Li}Di(){return this.ki}zt(){return super.zt(),this.Pi=!0,this}Rt(){return super.Rt(),this.Pi=!1,this}Wi(t,i=wn.Numeric){return i(t,this)}Ui(){const t=Math.abs(this.getInnerEnd()).toString().length,i=Math.abs(this.getInnerStart()).toString().length;return t>i?t:i}ji(t){return Cn(t,this.oi,this.Et,this.li,this.ci)}Nt(){let t=this.Ot,i=this.Lt,s=0;this.Bi&&(t=0,i=this.Lt-this.Ot,s=this.Ot);const e=i-t,h=Cn(e,this.oi,this.Et,this.li,this.ci);this.nt=t-this.oi[0]*h,this.ot=i+this.oi[1]*h;const r=this.ot-this.nt,n=r-this.Vi,o=Math.abs(n/h),a=e-this.Oi,u=Math.abs(a/h);(!this.ki||o>=.4||u>=.4)&&(this.Oi=e,this.Vi=r,this.Li=h,this.Pi=!0);const l=this.Vi*this.ci/(2*this.li),c=-(this.nt-this.Vi*this.ui/this.li)-l,f=2*this.pi()/this.Et-1,d=2*this.Si()/this.Et-1-f;this.ki={displacement:c,scaling:l,highPrecisionOffset:s,viewportStart:f,viewportSize:d,scaleStartLog:0,scaleIntervalLog:0}}Fi(t,i){return t+this.Li*i}}const Cn=(t,i,s,e=1,h=1)=>t/(s*e/h-(i[0]+i[1]));class Tn{$i(t,i){return"x"in t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=i),this}Rt(){return this.x.Rt(),this.y.Rt(),this}zt(){return this.x.zt(),this.y.zt(),this}Gt(t,i){return"object"==typeof t?(this.x.Gt(t.x),this.y.Gt(t.y)):(this.x.Gt(t),this.y.Gt(i)),this}xi(){return e(this.x.xi(),this.y.xi())}Yi(t){return this.x.yi(t),this}Xi(t){return this.y.yi(t),this}bi(){return e(this.x.bi(),this.y.bi())}Zi(t,i){return this.x.Vt(t,i),this}Ki(t,i){return this.y.Vt(t,i),this}getInnerIntervalPixels(){const t=this.x.getCellSize(),i=this.y.getCellSize();return{x:t-this.x.bi(),y:i-this.y.bi()}}qi(){return this.x.Pi||this.y.Pi}}class In extends Tn{constructor(){super(...arguments),this.Ji="LinearScaleXY"}Zt(t,i,s,e){return this.x=new kn(t.x,i.x,s.x,e?e.x:void 0),this.y=new kn(t.y,i.y,s.y,e?e.y:void 0),this}Ri(){return this.x.Ri()||this.y.Ri()}Qi(){return e(this.x.getPixelSize(),this.y.getPixelSize())}Di(){return{x:this.x.Di(),y:this.y.Di()}}Fi(t,i){const s=this.Qi();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}ts(t,i,s,e){const h=this.Qi(),r=Kr(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class Fn extends Tn{constructor(){super(...arguments),this.Ji="MixedScaleXY"}Ri(){return!1}Fi(t,i){const s=this.x.qt(t.x),e=this.y.qt(t.y),h={x:s+i.x,y:e+i.y};return{x:this.x.Kt(h.x),y:this.y.Kt(h.y)}}ts(t,i,s,e){const h={x:this.x.qt(t.x),y:this.y.qt(t.y)},r={x:this.x.qt(i.x),y:this.y.qt(i.y)},n=Zr(tn(r,h)),o=Kr(r,h),a={x:h.x+n.x*e+o.x*s,y:h.y+n.y*e+o.y*s};return{x:this.x.Kt(a.x),y:this.y.Kt(a.y)}}Di(){const t=this.x.Di(),i=this.y.Di();return{uScaleStart:[this.x.Ot,this.y.Ot],uScaleInterval:[this.x.getInnerInterval(),this.y.getInnerInterval()],uScaleStartLog:[t.scaleStartLog,i.scaleStartLog],uScaleIntervalLog:[t.scaleIntervalLog,i.scaleIntervalLog],uViewportStart:[t.viewportStart,i.viewportStart],uViewportSize:[t.viewportSize,i.viewportSize]}}}const Pn={fitting:{start:(t,i,s,e)=>i>=t?s:e,end:(t,i,s,e)=>i>=t?e:s},expansion:{start:(t,i,s,e)=>i>=t?s<t?s:t:e>t?e:t,end:(t,i,s,e)=>i>=t?e>i?e:i:s<i?s:i},progressive:{start:(t,i,s,e)=>i>t?Pn.progressive.end(t,i,s,e)+(t-i):e>t?e:t,end:(t,i,s,e)=>i>t?e>i?e:i:Pn.progressive.start(t,i,s,e)+(i-t)},regressive:{start:(t,i,s,e)=>i>t?s<t?s:t:Pn.regressive.end(t,i,s,e)+(t-i),end:(t,i,s,e)=>i>t?Pn.regressive.start(t,i,s,e)+(i-t):s<i?s:i}},Dn={Empty:"Empty",Numeric:"Numeric",DateTime:"DateTime",Time:"Time"},Bn=t=>void 0!==t.ss,On=t=>void 0!==t.es,Ln={hs:wn.Numeric},En=(t,i)=>[t,i],Rn=(t,i,s,e)=>{const h=[],r=Math.round(Math.abs((t-i)/s));for(let n=1;n<r;n+=1){const r=Math.round((t+s*n)*e)/e;r<i&&h.push(r)}return h},zn=(t,i,s,e,h)=>{wh(t,0)&&(t=0),wh(i,0)&&(i=0);const r=[];let n=void 0!==e?((t,i,s)=>t-(t-s)%i)(t,s,e):t;if(s<=0)throw new Error(`_getRegularGreatKeyValues unit less than or equal to 0, unit: ${s}`);for(;n<i&&!1===wh(n,i);)r.push(n),n+=s,n=Math.round(n*h)/h;return r.push(n),r},Vn=(t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i&&!1===wh(r,i);)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h},Nn=(t,...i)=>{const s=i.length>0?i.length:t?1:0;return(e,h,r,n,o,a)=>{if(h>=s)return;const u=i[h]||1;let l=!1,c=!1,f=1;return t&&(l="ignore"in t?"first"===t.ignore||"both"===t.ignore:l,c="ignore"in t?"last"===t.ignore||"both"===t.ignore:c,f="offset"in t&&void 0!==t.offset?t.offset:f),((t,i,s,e,h)=>(s&&(t=t.filter(((t,i)=>i>0))),e&&(t=t.filter(((i,s)=>s<t.length-1))),t.filter(((t,s)=>(s+h)%i==0))))(e,u,l,c,f)}},Gn=(t,i)=>{if(i.has(t))return i.get(t);const s=Nr(t.ns.rs());return i.set(t,s),s},Hn=t=>{const i=new Map;if(t!==Ln){for(const s of t.os)i.set(s,new Map);for(const s of t.us)i.set(s,new Map)}return i};class Wn{constructor(t,i,s,e,h,r,n){this.wt=new We,this.ls=Ln,this.cs=Dn.Empty,this.fs=new Map,this.ds=new Map,this.gs=Pn.fitting,this.ys=!0,this.ps=$e((()=>this.chart.vs.Ss()))(300,Ue.linear),this.bs=!0,this.xs=!0,this.Ms=!1,this._s=Ar,this.ws=!1,this.As=!1,this.ks=Ar,this.Cs=Ar,this.Ts=Ar,this.Is={},this.Fs=(t,i,s,e,h,r)=>{const n=[],o=[];for(const a of t){if(a<s||a>e){n.push(a);continue}const t=this.fs.get(i),u=(t?t.get(a):void 0)||this.Ps(a,i);u.Ds=!1;const l=this.Bs(u,h);r.set(u,l),n.push(a),o.push(u)}return{displayedKeyValues:n,createdTicks:o}},this.Os=(t,i,s,e,h,r,n,o,a,u,l)=>{const c=[];for(let f=0;f<t.length;f+=1){const d=t[f],g=i[f];let m,y,p;if(this.Ls(d,s)){const i=Gn(d,a);y=[t[f-1],t[f+1]],p=y.concat(u).concat(l).filter((t=>void 0!==t)).filter((i=>i.Es!==s||!!t.find((t=>t===i)))).map((t=>Ir(i,Gn(t,a))?t:void 0)),m=p.some((t=>void 0!==t))}else m=!1;if(m){let t=!0;const i=p.filter((t=>void 0!==t));if(t&&s.Rs&&i.every((t=>Bn(t.Es)))&&(t=!1),t&&s.Rs&&s.Rs.zs&&!1===s.Rs.zs(g,e,h,r,n,o)&&(t=!1),!1===t)continue;return!0}c.push(d)}return c},this.formatValue=t=>this.ls.hs(t,this.Jt),this.Vs=([t,i])=>{this.Ns(t,i)},this.chart=t,this.Gs=i,this.Hs=e,this.Ws=r,this.Jt=s,this.Us=n,"logarithmic"===n.type&&this.setAnimationZoom(Ue.logarithmic(vn(n.base))),this.js=r.numeric,this.setTickStrategy("Numeric"),this.$s=s.getInnerStart(),this.Ys=s.getInnerEnd(),h&&this.setAnimationsEnabled(!1)}getTitle(){return this.Zs.Xs()}setTitle(t){return this.Zs.Ks(t),this.chart.vs.Ss(),this}getTitleFillStyle(){return this.Zs.qs()}setTitleFillStyle(t){return this.Zs.Js(t),this.chart.vs.Ss(),this}getTitleFont(){return this.Zs.Qs()}setTitleFont(t){return this.Zs.te(t),this.chart.vs.Ss(),this}setTitleRotation(t){return this.Zs.ie(t),this.chart.vs.Ss(),this}getTitleRotation(){return this.Zs.se()}setTitleEffect(t){return this.he.ee(t),this.chart.vs.Ss(),this}getTitleEffect(){return this.he.re()}setTickStrategy(t,i){if(this.ne(),"Empty"===t)this.ls=Ln,this.cs=t;else if("Numeric"===t){"Numeric"!==this.cs&&(this.js=this.Ws.numeric);const s=i||(t=>t);this.js=s(this.js),this.ls=this.js.oe(this.Us),this.cs=t}else if("DateTime"===t){"DateTime"!==this.cs&&(this.js=this.Ws.datetime);const s=i||(t=>t);this.js=s(this.js),this.ls=this.js.oe(this.Us),this.cs=t}else if("Time"===t){"Time"!==this.cs&&(this.js=this.Ws.time);const s=i||(t=>t);this.js=s(this.js),this.ls=this.js.oe(this.Us),this.cs=t}return this.ds.forEach((t=>Array.from(t.values()).forEach((t=>t.dispose())))),this.ds=Hn(this.ls),this.chart.vs.Ss(),this}getTickStrategy(){return this.cs}ae(){return this.ls}ue(t){this.ls=t,this.ds.forEach((t=>Array.from(t.values()).forEach((t=>t.dispose())))),this.ds=Hn(this.ls),this.chart.vs.Ss()}setInterval(t){const{start:i,end:s,animate:e,stopAxisAfter:h}=t;return this.Qt(void 0!==i?i:this.$s,void 0!==s?s:this.Ys,void 0!==e&&e,void 0===h||h,"userSetInterval"),this}Qt(t,i,s=!1,e=!0,h){let r={start:t,end:i};const n=Math.abs(i-t);if(Math.abs(this.Ys-this.$s),void 0!==this.ls.le&&this.ls.le>n){const s=(i+t)/2,e=this.ls.le/2*(t>i?-1:1);r={start:s-e,end:s+e}}if(void 0!==this.ls.ce&&this.ls.ce<n){const s=(i+t)/2,e=this.ls.ce/2*(t>i?-1:1);r={start:s-e,end:s+e}}const o=this.Jt.Xt(r.start,r.end,this.$s,this.Ys,!0);if(!1===o)return this;let a;switch(!0===o||(r=o),h){case"userSetInterval":case"userFit":case"interactionSetInterval":case"interactionZoom":a=!0;break;case"zoomBandChart":case"synchronizedAxis":a=!1;break;default:return Sr(0,""),this}if(this.fe&&this.fe.finishAll(!1),this.ps&&(!0===s||s>0)){this.setStopped(!0);const t=!0===s?void 0:s,i=!this.fe||this.fe.isOver()?this.ps:this.fe.NextAnimation.bind(this);this.fe=i([[this.$s,r.start],[this.Ys,r.end]],this.Vs,t),this.fe.onAnimationEnd((()=>{this.fe=void 0,a&&(this.Ts=yh.performance.now())})),this.fe.onAnimationEnd((()=>this.setStopped(e)))}else this.Ns(r.start,r.end),e&&this.setStopped(!0),a&&(this.Ts=yh.performance.now());return this}getInterval(){return{start:this.$s,end:this.Ys}}setStopped(t){return t===this.Ms||(t&&(this.fe&&this.fe.finishAll(!1),this.fe=void 0),this.Ms=t,this.wt.emit("stoppedStateChanged",this,this.Ms),this._s=yh.performance.now(),this.chart.vs.Ss()),this}getStopped(){return this.Ms}onStoppedStateChanged(t){return this.wt.on("stoppedStateChanged",t)}offStoppedStateChanged(t){return this.wt.off(t,"stoppedStateChanged")}fit(t,i=!1){const s=this.de(!1);if(s){const e=this.Ys>=this.$s,h=e?s.min:s.max,r=e?s.max:s.min;this.Qt(h,r,t,i,"userFit")}return this}setScrollStrategy(t){return this.gs=t,this.chart.vs.Ss(),this}getScrollStrategy(){return this.gs}setAnimationScroll(t){return this.ys=Boolean(t),this.chart.vs.Ss(),this}setAnimationZoom(t,i=300){return this.fe&&(this.fe.finishAll(!1),this.fe=void 0),this.ps=t?$e((()=>this.chart.vs.Ss()))(i,t):void 0,this}setAnimationsEnabled(t){return this.bs=t,t?(this.setAnimationScroll(!0),this.setAnimationZoom(Ue.ease,void 0)):(this.setAnimationScroll(void 0),this.setAnimationZoom(void 0)),this}getAnimationsEnabled(){return this.bs}setVisible(t){const i=this.xs!==t;return this.xs=t,this.Zs.setVisible(t),this.ge((i=>{i.ns.setVisible(t)})),i&&this.wt.emit("visibleStateChanged",this,this.xs),this}getVisible(){return this.xs}onIntervalChange(t){return this.wt.on("scaleChange",t)}offIntervalChange(t){return this.wt.off(t,"scaleChange")}onVisibleStateChanged(t){return this.wt.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.wt.off(t,"visibleStateChanged")}me(t,i){const s=new Map;if(this.ls===Ln)return this.ne(),s;i=i||new Map;const e=this.ye(),h=e.min,r=e.max,n=r-h,o=t.physicalAxisSize;this.Is.physicalAxisSize=o;const a=jn(this.ls,h,r,this.$s,this.Ys,o),u=[];if(this.pe(),u.push(...this.Se(this.ls,h,r,a,i,t,s)),this.ve(this.ls,h,r,a,i,t,u,s),this.be(),a)for(const[t,i]of this.ds){const s=a.get(t);if(void 0!==s)for(const[t,e]of i)s.includes(t)||(null==e||e.dispose(),i.delete(t))}return this.Is.min=h,this.Is.max=r,this.Is.scaleInterval=n,this.Is.physicalAxisSize=o,s}xe(t){const i=t.Es.Me;t.ns.Ks(i(t.l,this.Jt))._e()}we(t,i){const s=i.Ae;t.ns.Js(s.getLabelFillStyle()).te(s.getLabelFont()).ie(s.getLabelRotation())}Ps(t,i){const s=this.ds.get(i);let e=s.get(t);e?(s.delete(t),e.Es=i,e.ke(!0)):e=this.Ce(t,i);const h=this.fs.get(i)||new Map;return h.set(t,e),this.fs.set(i,h),this.we(e,i),e}Bs(t,i){const s=this.Te(t,i);return this.xe(t),s}Se(t,i,s,e,h,r,n){const o=[];for(const a of t.os){const t=e.get(a);for(const e of t){if(e<i||e>s)continue;const t=this.fs.get(a),u=(t?t.get(e):void 0)||this.Ps(e,a),l=this.Bs(u,r),c=Gn(u,h);o.find((t=>Ir(c,Gn(t,h))))&&u.ns.setVisible(!1),u.Ds=!1,n.set(u,l),o.push(u)}}return o}ve(t,i,s,e,h,r,n,o){let a,u=[];for(const l of t.us){const t=e.get(l);if(!t)break;let c;if(void 0===a)c=[{start:i,end:s,keyValues:t}];else{c=[];for(let i=0;i<a.length-1;i+=1){const s=a[i],e=a[i+1],h={start:s,end:e,keyValues:[]};for(const i of t)i>=s&&i<e&&h.keyValues.push(i);c.push(h)}}if(a=t,On(l))continue;let f=0,d=-1,g=[],m=[];for(let t=0;t<c.length;t+=1){const e=this.Fs(c[t].keyValues,l,i,s,r,o);g=g.concat(e.displayedKeyValues),m=m.concat(e.createdTicks)}let y=m,p=!0;if(l.Ae.getLabelFillStyle()!==Ie){let t=[];for(;++d<c.length;){const e=c[d],r=e.start,o=e.end;let a=e.keyValues;if(f>0){if(void 0===l.Rs){p=!1;break}const t=l.Rs.Ie;if(a=t(a,f-1,r,o,i,s),void 0===a)break}const y=this.Os(m.filter((t=>a.some((i=>wh(t.l,i))))),g,l,f,r,o,i,s,h,n,u);!0!==y?t=t.concat(y):(f+=1,d=-1,t=[])}y=t,m.forEach((i=>{t.find((t=>t===i))||this.Fe(i)}))}if(u=y,!p)break}}Fe(t){const i=this.fs.get(t.Es);null==i||i.delete(t.l);const s=this.ds.get(t.Es);s&&s.has(t.l)?t.dispose():s&&(t.ke(!1),s.set(t.l,t))}ge(t){for(const i of this.fs.values())for(const s of i.values())t(s)}Pe(t,i){for(const s of this.fs.values())for(const e of s.values())i=t(i,e);return i}ne(){this.fs.forEach(((t,i)=>{t.forEach((t=>this.Fe(t)))})),this.fs.clear()}pe(){for(const t of this.fs.values())for(const i of t.values())i.Ds=!0}be(){for(const t of this.fs.values())for(const[i,s]of t.entries())s.Ds&&(s.dispose(),t.delete(i))}ye(){const t=this.Jt.getInnerStart()<this.Jt.getInnerEnd()?this.Jt.getInnerStart():this.Jt.getInnerEnd(),i=this.Jt.getInnerEnd()>this.Jt.getInnerStart()?this.Jt.getInnerEnd():this.Jt.getInnerStart();return a(t,i)}Ls(t,i){return!(t.Ds||0===t.ns.Xs().length||Bn(i)&&!0!==i.De)}Be(t,i){return this.ls===Ln||(this.ls.os.forEach((s=>{i=t(i,s.Ae)})),this.ls.us.forEach((s=>{(t=>void 0!==t.Me)(s)&&(i=t(i,s.Ae))}))),i}de(t){let i;for(const t of this.Oe()){if(!t.Le())continue;const s=this.Gs.Ee(t),e=this.Gs.Re(t);if(void 0!==s&&Sh(s)&&void 0!==e&&Sh(e)){if("logarithmic"===this.Us.type){let t;if(Math.sign(s)!==Math.sign(e)&&(t=`Logarithmic series data range must be either > 0 or < 0 (encountered [${s}, ${e}])`),0!==s&&0!==e||(t=`Logarithmic series data range is not defined at 0 (encountered [${s}, ${e}])`),t)throw yh.alert(t),new Error(t)}i?(i.min=Math.min(i.min,s),i.max=Math.max(i.max,e)):i=a(s,e)}}if(i&&Sh(i.min)&&Sh(i.max)){if(wh(i.min,i.max)){if(t)return;return{min:i.min-1,max:i.max+1}}return i}}ze(){let t=0;for(const i of this.Oe()){if(!i.Le())continue;const s=this.Gs.Ve(i);s&&(t=Math.max(t,s))}return t}Ne(){const t=this.Oe(),i=this.ws;let s=!1;if(0!==t.length&&this.gs&&!this.Ms){const t=this.de(!0);if(t){const i=this.$s,e=this.Ys;let h=this.gs.start(i,e,t.min,t.max),r=this.gs.end(i,e,t.min,t.max);const n=!1===wh(i,h),o=!1===wh(e,r);if(h=n?h:i,r=o?r:e,n||o){let t=!1;if(this.ys)if(this.ys){t=!0;const a=n?this.Ge(i,h):i,u=o?this.Ge(e,r):e;if(!0===this.Ns(a,u,{allowClamping:!1})&&(n&&!1===wh(a,h)||o&&!1===wh(u,r))){this.chart.vs.Ss(!0),s=!0;let t=Math.abs(r-h)/Math.abs(a-u);t<1&&(t=1/t),this.As=t>=1.4}}else t=!1;t||this.Ns(h,r)}}}s?(this.ws!==s&&(this.ws=s,this.ks=yh.performance.now()),this.He&&(clearTimeout(this.He),this.He=void 0)):!0===i&&void 0===this.He&&(this.As=!1,this.He=setTimeout((()=>{!1!==this.ws&&(this.ws=!1,this.ks=yh.performance.now()),this.He=void 0,this.chart.vs.Ss()}),200))}Ns(t,i,s){const e=!s||!("allowClamping"in s)||void 0===s.allowClamping||s.allowClamping;let h={start:t,end:i},r=!0;const n=Math.abs(i-t),o=Math.abs(this.Ys-this.$s);if(void 0!==this.ls.le&&this.ls.le>n){const s=(i+t)/2,n=(e?this.ls.le/2:o/2)*(t>i?-1:1);h={start:s-n,end:s+n},r=!1}if(void 0!==this.ls.ce&&this.ls.ce<n){const s=(i+t)/2,n=(e?this.ls.ce/2:o/2)*(t>i?-1:1);h={start:s-n,end:s+n},r=!1}let a=this.Jt.Xt(h.start,h.end,this.$s,this.Ys,e);if(!1===a)return!1;!0!==a&&(h=a);const u=this.ze(),l=this.We(Math.min(h.start,h.end),Math.max(h.start,h.end),u);return a=this.Jt.Xt(h.end>h.start?l.min:l.max,h.end>h.start?l.max:l.min,this.$s,this.Ys,!1),!!a&&(!0===a?this.Jt.Vt(h.end>h.start?l.min:l.max,h.end>h.start?l.max:l.min):this.Jt.Vt(h.start,h.end),this.$s=h.start,this.Ys=h.end,this.wt.emit("scaleChange",this,h.start,h.end),this.Cs=yh.performance.now(),this.chart.vs.Ss(),r)}Ue(){return this.ws}je(){return void 0!==this.fe}}class Un{constructor(t,i,s,e,h=s.$e(e).setMouseInteractions(!1)){this.Ds=!1,this.Ye=!1,this.Xe=[],this.Es=t,this.l=i,this.Ze=s,this.Ke=e,this.ns=h,this.Xe.push(h)}ke(t){this.Xe.forEach((i=>i.setVisible(t)))}dispose(){return this.Ye||(this.Ye=!0,this.Xe.forEach((t=>t.dispose()))),this}}const jn=(t,i,s,e,h,r)=>{const n=new Map;for(const r of t.os){let t=r.qe(i,s,e,h);t=$n(t),n.set(r,t)}let o;for(const e of t.us){let t;if(void 0===o)t=e.qe(i,s,i,s);else{let h=[];const n=o.filter((t=>i<=t&&t<=s)).length;if(n>0){const t=r/(n-1);if(void 0!==e.Je&&e.Je>t)break}for(let t=0;t<o.length-1;t+=1){const r=e.qe(o[t],o[t+1],i,s);h=h.concat(r)}t=h}t=$n(t),n.set(e,t),o=t}return n},$n=t=>(t=(t=>{const i={},s=[],e=t.length;let h=0;for(let r=0;r<e;r+=1){const e=t[r];1!==i[e]&&(i[e]=1,s[h]=e,h+=1)}return s})(t)).sort(((t,i)=>t-i)),Yn=ue({size:14,family:"Arial",weight:"normal",style:"normal",variant:!1});class Xn extends Yn{constructor(t){super(t)}setSize(t){return this.set("size",t)}setFamily(t){return this.set("family",t)}setWeight(t){return this.set("weight",t)}setStyle(t){return this.set("style",t)}setVariant(t){return this.set("variant",t)}getSize(){return this.get("size")}getFamily(){return this.get("family")}getWeight(){return this.get("weight")}getStyle(){return this.get("style")}getVariant(){return this.get("variant")}}const Zn=new Xn,Kn=new class{},qn=ue({shape:"sphere",size:10,fillStyle:new De,wireframeStyle:th});class Jn extends qn{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setWireframeStyle(t){return"function"==typeof t?this.set("wireframeStyle",t(this.get("wireframeStyle"))):this.set("wireframeStyle",t)}getWireframeStyle(){return this.get("wireframeStyle")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}}const Qn=ue({size:5,fillStyle:new De});class to extends Qn{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}}const io={Triangulated:Jn,Pixelated:to};class so{constructor(t){this.Qe=new Map,this.vs=t}th(t,i,s){const e=s.animationEnabled;this.Qe.set(t,{applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:e,curAnimatedHighlightValue:0});const h=t.onDispose((()=>{this.Qe.delete(t),t.offDispose(h)}))}ih(t,i){const s=this.Qe.get(t);s&&(s.curUnanimatedHighlightValue=pr(i),this.vs.Ss())}sh(t){const i=this.Qe.get(t);return i?i.curUnanimatedHighlightValue:0}eh(t,i){const s=this.Qe.get(t);s&&(s.animationEnabled=i)}hh(t){const i=this.Qe.get(t);return!!i&&i.animationEnabled}_e(t){let i=!1;this.Qe.forEach(((s,e)=>{let h;if(s.animationEnabled){const e=1e3;if(s.curUnanimatedHighlightValue>0){const r=s.curAnimationPositionMillis/e;h=s.curUnanimatedHighlightValue*Math.abs(Math.sin(r*Math.PI/2+.5));const n=0===s.curAnimatedHighlightValue?1:t;s.curAnimationPositionMillis+=n,i=!0}else s.curAnimatedHighlightValue>0&&0===s.curUnanimatedHighlightValue?(h=Math.max(s.curAnimatedHighlightValue-t/e,0),i=i||h>0):h=0,s.curAnimationPositionMillis=0}else h=s.curUnanimatedHighlightValue;h!==s.curAnimatedHighlightValue&&(s.applyHighlight(h),s.curAnimatedHighlightValue=h)})),i&&this.vs.Ss(!0)}}const eo=new Map,ho=t=>{const i=t.getSize(),s=t.getFamily(),e=t.getWeight(),h=t.getStyle(),r=t.getVariant(),n=`${h} ${r?"small-caps":"normal"} ${e} ${i}px ${s}`;let o=eo.get(n);return o||(o=((t,i)=>({font:t,properties:i}))(n,{size:i,family:s,style:h,variant:r,weight:e}),eo.set(n,o)),o};var ro,no;!function(t){t[t.click=0]="click",t[t.dbclick=1]="dbclick",t[t.mouseDown=2]="mouseDown",t[t.mouseUp=3]="mouseUp",t[t.contextmenu=4]="contextmenu",t[t.wheel=5]="wheel"}(ro||(ro={})),function(t){t[t.touchStart=0]="touchStart",t[t.touchMove=1]="touchMove",t[t.touchEnd=2]="touchEnd"}(no||(no={}));const oo=t=>({container:t.rh,scale:t.Jt,setMouseStyle:(i,s)=>t.oh(i,s),restoreMouseStyle:i=>t.ah(i),clientLocation2Engine:(i,s)=>t.uh(i,s),engineLocation2Client:(i,s)=>t.lh(i,s),captureFrame:(i,s)=>t.fh(i,s),renderFrame:(i,s,e=!1)=>t.dh(i,s,e),layout:()=>{t.gh(),t.mh()},setBackgroundFillStyle(i){return t.setBackgroundFillStyle(i),this},setBackgroundStrokeStyle(i){return t.setBackgroundStrokeStyle(i),this},getBackgroundFillStyle:()=>t.getBackgroundFillStyle(),getBackgroundStrokeStyle:()=>t.getBackgroundStrokeStyle(),addCustomIcon:(i,s)=>t.yh(i,s)}),ao=[];let uo;const lo=()=>{if(void 0!==uo){const t=yh.getComputedStyle(yh.document.body),i=Number(t.getPropertyValue("margin-top").replace("px",""))+Number(t.getPropertyValue("margin-bottom").replace("px",""));uo.style.height=yh.innerHeight-i+"px",(()=>{for(let t=0;t<ao.length;t+=1)ao[t]()})()}},co=new De({color:pe(255,255,255)}),fo={font:ho(Zn),fillStyle:co,lineStyle:new sh({fillStyle:co,thickness:1}),pointStyle3D:new io.Triangulated};class go{constructor(t,i){this.wt=new We,this.Jt=rh.d2({scaleXYConstructor:In}),this.ph=new Map,this.Sh=$e((()=>this.Ss()),60),this.bh=e(0,0),this.xh=void 0,this.Mh=()=>{},this._h=()=>{},this.wh=[],this.Ah=-1,this.kh=[],this.Ch=!0,this.Ye=!1,this.mh=()=>{const{bottom:t,left:i}=this.Th().getBoundingClientRect();return this.bh=e(Math.floor(i),Math.floor(t)),this},this.gh=()=>{this.Ih&&this.Ih()},this.oh=(t,i)=>{if(!i){this.rh.style.cursor=t;const i=this.Ah;return this.Ah+=1,this.kh.push([i,t]),i}return this.ah(i),this.oh(t)},this.ah=t=>{const i=t?this.kh.findIndex((i=>i[0]===t)):-1;i>=0?(this.kh.splice(i,1),this.kh.length>0?this.rh.style.cursor=this.kh[this.kh.length-1][1]:this.rh.style.cursor="default"):(this.kh.push([0,"default"]),this.rh.style.cursor="default")},this.Fh=t=>(this.Ph.S(t),this),this.Dh=()=>this.Ph.M(),this.Bh=()=>{this.Mh&&this.Mh(),this.Oh(),this.Lh(),this._h&&this._h()},this.Eh=t=>(this.ph.set(t.Rh(),t),this.ph=new Map([...this.ph.entries()].sort(((t,i)=>t[0]-i[0]))),t),this.zh=t=>(this.ph.delete(t),this),this.Rt=()=>(this.Ph.o=!1,this),this.zt=()=>(this.Ph.o=!0,this),this.Vh=t=>{if(!this.Ch)return;const i=this.Nh,s=i&&i.clientX===t.clientX&&i.clientY===t.clientY,h=this.uh(t.clientX,t.clientY),r=this.Gh(t,{x:t.clientX,y:t.clientY});if(this.Hh&&r!==this.Hh&&!this.Wh){this.Hh.Uh=!1;const i=this.Hh.jh;i&&i(this.Hh,t)}if(r&&r.getMouseInteractions()&&!this.Wh)if(r.Uh){if(!s){const i=r.$h;i&&i(r,t)}}else{r.Uh=!0;const i=r.Yh;i&&i(r,t)}if(this.Wh){const s=this.Wh.entity.Xh,h=i?e(t.clientX-i.clientX,i.clientY-t.clientY):{x:0,y:0};!s||0===h.x&&0===h.y||s(this.Wh.entity,t,this.Wh.button,this.Wh.startLocation,h)}this.Zh=t,this.Nh=t,this.Kh=h,this.Hh=r},this.qh=t=>{if(this.Ch=!1,this.Kh=void 0,this.Zh=t,this.Nh=void 0,this.Wh){const i=this.Wh.entity.Jh;i&&i(this.Wh.entity,t,this.Wh.button,this.Wh.startLocation),this.Wh.entity.Uh=!1;const s=this.Wh.entity.jh;s&&s(this.Wh.entity,t),this.Wh=void 0}if(this.Qh){const i=this.Qh.entity.tr;i&&i(this.Qh.entity,t),this.Qh=void 0}if(this.Hh){this.Hh.Uh=!1;const i=this.Hh.jh;i&&i(this.Hh,t),this.Hh=void 0}},this.ir=t=>{this.Ch=!0,this.Zh=t},this.sr=()=>this.Kh,this.Hs=t.theme,this.er=i.er,this.hr={rr:i.rr,nr:i.nr,ar:i.ar,ur:i.ur,lr:i.lr,cr:i.cr,dr:t&&t.overrideInteractionMouseButtons?t.overrideInteractionMouseButtons:void 0,gr:t&&void 0!==t.resourcesBaseUrl&&null!==t.resourcesBaseUrl?t.resourcesBaseUrl:`${yh.location.origin}/resources`,mr:!t||!("warnings"in t)||"boolean"!=typeof t.warnings||t.warnings,yr:(()=>{const i=null==t?void 0:t.pickingPrecision;if("string"==typeof i){const t=i.toLowerCase();if("best"===t)return 1;if("high"===t)return.5;if("low"===t)return 1/8}return 1/4})(),pr:void 0===(null==t?void 0:t.interactable)||t.interactable,Sr:void 0===t.textPixelSnappingEnabled||t.textPixelSnappingEnabled};const s=t?t.container:void 0;if(s){if("string"==typeof s){const t=yh.document.getElementById(s);if(!t)throw new Error(`Container "${s}" doesn't exist.`);this.rh=t}else this.rh=s;yh.addEventListener("resize",this.gh),this.wh.push((()=>{yh.removeEventListener("resize",this.gh)}))}else{if(void 0===uo){const t=yh.document.createElement("div");t.id="lcjs-auto-flexbox",t.style.position="relative",t.style.width="100%",t.style.display="flex",t.style.flexDirection="column",yh.document.body.appendChild(t),uo=t,yh.addEventListener("resize",lo)}let t=1;for(;null!==yh.document.getElementById(`chart-${t}`);)t+=1;this.rh=yh.document.createElement("div"),this.rh.id=`chart-${t}`,this.rh.style.flex="1",uo.appendChild(this.rh),lo(),ao.push(this.gh),this.wh.push((()=>{uo&&uo.removeChild(this.rh),ao.includes(this.gh)&&ao.splice(ao.indexOf(this.gh),1),0===ao.length&&uo&&(yh.document.body.removeChild(uo),uo=void 0,yh.removeEventListener("resize",lo))}))}if(yh.ResizeObserver){const t=t=>{for(const i of t)i.target===this.rh&&this.gh()};this.vr=new yh.ResizeObserver(t.bind(this)),this.vr.observe(this.rh)}""===this.rh.style.position&&(this.rh.style.position="relative"),this.rh.style.boxSizing="content-box",this.rh.addEventListener("fullscreenchange",this.gh),this.rh.addEventListener("webkitfullscreenchange",this.gh);const h=t?t.maxFps:void 0;this.br=h?-1===h?-1:0!==h?1e3/h:0:0;const r=new Map;let n=!1;const o=(t,i)=>s=>{const e=function(t){return{x:t.clientX,y:t.clientY}}(s);switch(s.type){case"pointerover":case"pointerenter":case"pointermove":case"pointerdown":r.set(s.pointerId,e);break;default:r.delete(s.pointerId),n=!1}switch(s.interactions=Array.from(r.values()),s.pointerType){case"pen":case"mouse":default:t&&t(s);break;case"touch":i&&i(s)}s.defaultPrevented&&(n=!0)};if(this.rh.onwheel=this.Mr(ro.wheel),this.rh.oncontextmenu=this.Mr(ro.contextmenu),this.rh.onclick=this.Mr(ro.click),this.rh.ondblclick=this.Mr(ro.dbclick),this.rh.onlostpointercapture=()=>{n=!1},this.rh.ontouchmove=t=>{n&&t.preventDefault()},this.rh.onpointerover=o(),this.rh.onpointerenter=o(this.ir),this.rh.onpointerdown=o(this.Mr(ro.mouseDown),this._r(no.touchStart)),this.rh.onpointermove=o(this.Vh,this._r(no.touchMove)),this.rh.onpointerup=o(this.Mr(ro.mouseUp),this._r(no.touchEnd)),this.rh.onpointercancel=o(),this.rh.onpointerout=o(),this.rh.onpointerleave=o(this.qh,this._r(no.touchEnd)),!yh.requestAnimationFrame||!yh.cancelAnimationFrame)throw new Error("LightningChart JS depends on requestAnimationFrame. Make sure to load a polyfill in older browsers.");yh.addEventListener("scroll",this.mh),this.Ph=l(new ye({r:0,g:0,b:0,a:0})),this.wr=new so(this)}Ar(){return this.kr}Cr(){return this.Tr}setBackgroundFillStyle(t){return this.Ir.Js(t),this}getBackgroundFillStyle(){return this.Ir.qs()}setBackgroundStrokeStyle(t){return this.Ir.Fr(t),this}getBackgroundStrokeStyle(){return this.Ir.Pr()}Dr(t){return this._h=t,this}Br(t){return this.Mh=t,this}Or(t){return this.ph.get(t)}Lr(){return Array.from(this.ph.keys()).reverse().reduce(((t,i)=>i!==Number.MAX_SAFE_INTEGER&&i>t?i:t),0)+1}Mr(t){return i=>this.Er(t,i)}Er(t,i){if(!this.Ch)return;t===ro.contextmenu&&Zh(i);const s=this.uh(i.clientX,i.clientY),h=this.Gh(i,{x:i.clientX,y:i.clientY});if(t===ro.mouseUp){if(this.Wh){const t=this.Wh.entity.Jh;if(t&&t(this.Wh.entity,i,this.Wh.button,this.Wh.startLocation),h!==this.Wh.entity){this.Wh.entity.Uh=!1;const t=this.Wh.entity.jh;t&&t(this.Wh.entity,i)}this.Wh=void 0}if(this.Qh){const t=this.Qh.entity.getMouseInteractions()&&this.Qh.entity.tr;t&&t(this.Qh.entity,i),this.Qh=void 0}}else if(h&&h.getMouseInteractions()){const s=t===ro.click?h.Rr:t===ro.dbclick?h.zr:t===ro.mouseDown?h.Vr:t===ro.wheel?h.Nr:t===ro.contextmenu?h.Gr:void 0;if(s&&s(h,i),t===ro.mouseDown){this.Qh={entity:h,event:i};const t=this.Qh.event.button,s=h.Hr;s&&s(h,i,t),this.Wh={entity:h,button:t,startLocation:e(i.clientX,i.clientY)}}}this.Zh=i,this.Kh=s,this.Hh=h}_r(t){return i=>this.Wr(t,i)}Wr(t,i){const s=i.interactions.length;if(this.Ur=i,this.jr){const e=t===no.touchMove?this.jr.$r:t===no.touchEnd?this.jr.Yr:t===no.touchStart?this.jr.Xr:void 0;e&&e(this.jr,i),t===no.touchEnd&&0===s&&(this.jr.Uh=!1,this.jr=void 0)}else if(t===no.touchStart){for(let t=0;t<s&&(this.jr=this.Gh(i,{x:i.interactions[t].x,y:i.interactions[t].y}),!this.jr);t+=1);if(this.jr){this.jr.Uh=!0;const t=this.jr.Xr;t&&t(this.jr,i)}}t===no.touchEnd?this.Kh=void 0:this.Kh=this.uh(i.clientX,i.clientY)}Zr(t){return this.wt.on("resize",t)}Kr(t){return this.wt.off(t,"resize")}qr(){return this.wt.topicOff("resize"),this}Pt(){if(this.Ye=!0,this.ph)for(const t of this.ph.values())t.Pt();this.Mh=void 0,this._h=void 0,yh.removeEventListener("scroll",this.mh),this.rh.removeEventListener("fullscreenchange",this.gh),this.rh.removeEventListener("webkitfullscreenchange",this.gh),this.vr&&(this.vr.disconnect(),this.vr=void 0),this.wh.forEach((t=>{t()})),this.wh.length=0,this.xh&&yh.cancelAnimationFrame(this.xh)}uh(t,i){return e(t-this.bh.x,this.bh.y-i)}lh(t,i){return e(t+this.bh.x,this.bh.y-i)}}const mo=(t=1)=>({type:"horizontalProgressive",packager:(i,s,h)=>{if(i.length>1){const r=Jr(s,h*t),n=Math.abs(r.x),o=i.length,a=[];let u=0,l=0,c=i[0].x+n;for(;l<o;){const t=i[l];if(a[u]=t,u+=1,l+=1,t.x<c&&l<o){const s=l;let h=t.y,r=t.y;for(;l<o&&i[l].x<=c;)i[l].y>h&&(h=i[l].y),i[l].y<r&&(r=i[l].y),l+=1;if(s!==l){const t=(a[u-1].x+i[l-1].x)/2;a[u+0]=e(t,r),a[u+1]=e(t,h),a[u+2]=i[l-1],u+=3}}c+=n}return a}return i.slice()}}),yo=(t=1)=>({type:"horizontalRegressive",packager:(i,s,h)=>{if(i.length>1){const r=Jr(s,h*t),n=Math.abs(r.x),o=i.length,a=[];let u=0,l=0,c=i[0].x-n;for(;l<o;){const t=i[l];if(a[u]=t,u+=1,l+=1,t.x>c&&l<o){const s=l;let h=t.y,r=t.y;for(;l<o&&i[l].x>=c;)i[l].y>h&&(h=i[l].y),i[l].y<r&&(r=i[l].y),l+=1;if(s!==l){const t=(a[u-1].x+i[l-1].x)/2;a[u+0]=e(t,r),a[u+1]=e(t,h),a[u+2]=i[l-1],u+=3}}c-=n}return a}return i.slice()}}),po=(t=1)=>({type:"verticalProgressive",packager:(i,s,h)=>{if(i.length>1){const r=Jr(s,h*t),n=Math.abs(r.y),o=i.length,a=[];let u=0,l=0,c=i[0].y+n;for(;l<o;){const t=i[l];if(a[u]=t,u+=1,l+=1,t.y<c&&l<o){const s=l;let h=t.x,r=t.x;for(;l<o&&i[l].y<=c;)i[l].x>h&&(h=i[l].x),i[l].x<r&&(r=i[l].x),l+=1;if(s!==l){const t=(a[u-1].y+i[l-1].y)/2;a[u+0]=e(r,t),a[u+1]=e(h,t),a[u+2]=i[l-1],u+=3}}c+=n}return a}return i.slice()}}),So=(t=1)=>({type:"verticalRegressive",packager:(i,s,h)=>{if(i.length>1){const r=Jr(s,h*t),n=Math.abs(r.y),o=i.length,a=[];let u=0,l=0,c=i[0].y-n;for(;l<o;){const t=i[l];if(a[u]=t,u+=1,l+=1,t.y>c&&l<o){const s=l;let h=t.x,r=t.x;for(;l<o&&i[l].y>=c;)i[l].x>h&&(h=i[l].x),i[l].x<r&&(r=i[l].x),l+=1;if(s!==l){const t=(a[u-1].y+i[l-1].y)/2;a[u+0]=e(r,t),a[u+1]=e(h,t),a[u+2]=i[l-1],u+=3}}c-=n}return a}return i.slice()}});var vo,bo;t.PointShape=void 0,(vo=t.PointShape||(t.PointShape={}))[vo.Square=0]="Square",vo[vo.Circle=1]="Circle",vo[vo.Triangle=2]="Triangle",function(t){t[t.Nearest=0]="Nearest",t[t.NearestX=1]="NearestX",t[t.NearestY=2]="NearestY"}(bo||(bo={}));const xo=t=>{const i="nearest"===t?bo.Nearest:"nearest-x"===t?bo.NearestX:"nearest-y"===t?bo.NearestY:void 0;return void 0!==i?i:bo.NearestX},Mo=(t,i,s,e,h,r,n,o,a,u)=>{const l=t.length;if(0===l)return;const c=e?1:0,f=l-(h?2:1);if(s===bo.Nearest)return _o(t,i,r,n,c,f);if(s===bo.NearestX||s===bo.NearestY){if("boolean"==typeof u&&("x"===a&&s===bo.NearestX||"y"===a&&s===bo.NearestY))return ko(t,oh(i,n,r),a,u,c,f);if(s===bo.NearestX)return wo(t,oh(i,n,r),o,c,f);if(s===bo.NearestY)return Ao(t,oh(i,n,r),o,c,f)}},_o=(t,i,s,e,h,r)=>{let n,o=Number.MAX_VALUE;for(let a=h;a<=r;a+=1){const h=t[a];if(!Number.isNaN(h.x)&&!Number.isNaN(h.y)){const t=oh(h,s,e),r=(t.x-i.x)**2+(t.y-i.y)**2;r<o&&(o=r,n=a)}}return n},wo=(t,i,s,e,h)=>{if(i.x<s.min.x||i.x>s.max.x)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.x>i.x?e.x-i.x:i.x-e.x;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},Ao=(t,i,s,e,h)=>{if(i.y<s.min.y||i.y>s.max.y)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.y>i.y?e.y-i.y:i.y-e.y;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},ko=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],u=t[r],l=a.x<u.x?a.x:u.x,c=a.y<u.y?a.y:u.y,f=a.x>u.x?a.x:u.x,d=a.y>u.y?a.y:u.y;if(n&&(o<l||o>f)||!n&&(o<c||o>d))return;let g=h,m=Math.floor((h+r)/2),y=r,p=-1;for(;;){const i=o-(n?t[m].x:t[m].y);if(i*(e?-1:1)>0)g=Math.min(m+1,y),p=Math.floor((g+y)/2);else{if(0===Math.abs(i))return m;y=Math.max(m-1,g),p=Math.floor((g+y)/2)}if(p===m){const s=m>h?Math.abs(o-(n?t[m-1].x:t[m-1].y)):wr,e=m<r?Math.abs(o-(n?t[m+1].x:t[m+1].y)):wr,a=Math.abs(i);switch(Math.min(a,s,e)){case s:return m-1;case e:return m+1;default:return m}}else m=p}},Co=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],u=t[r],l=a.x<u.x?a.x:u.x,c=a.y<u.y?a.y:u.y,f=a.x>u.x?a.x:u.x,d=a.y>u.y?a.y:u.y;if(n&&(o<l||o>f)||!n&&(o<c||o>d))return;let g=h,m=Math.floor((h+r)/2),y=r,p=-1;for(;;){const s=o-(n?t[m].x:t[m].y);if(s*(e?-1:1)>0)g=Math.min(m+1,y),p=Math.floor((g+y)/2);else{if(0===Math.abs(s))return{a:m,b:m,lerpAmount:0};y=Math.max(m-1,g),p=Math.floor((g+y)/2)}if(p===m){if(s*(e?-1:1)<0&&m>h){const s=t[m-1],e=t[m];return{a:m-1,b:m,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}if(m<r){const s=t[m],e=t[m+1];return{a:m,b:m+1,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}return{a:m,b:m,lerpAmount:0}}m=p}};let To=0;class Io{constructor(t,i,s){this.Jr=l(!0),this.Qr=!1,this.Uh=!1,this.tn=!1,this.Ye=!1,this.xs=!0,this.sn=void 0,this.en=0,this.wt=new We,this.$h=void 0,this.Yh=void 0,this.jh=void 0,this.Rr=void 0,this.Nr=void 0,this.Gr=void 0,this.zr=void 0,this.Vr=void 0,this.tr=void 0,this.Hr=void 0,this.Xh=void 0,this.Jh=void 0,this.Xr=void 0,this.$r=void 0,this.Yr=void 0,this.onDispose=t=>this.wt.on("dispose",t),this.offDispose=t=>this.wt.off(t,"dispose"),this.vs=t,this.hn=i,this.rn=s,this.nn=To,To+=1,this.an=t.Hs.highlightColorOffset}un(t){return void 0!==this.rn.find((i=>i.type===t))}ln(t,i){var s;return!!this.un(t)&&!0===i(null===(s=this.rn.find((i=>i.type===t)))||void 0===s?void 0:s.args)}dispose(){return this.Ye||(this.Uh&&this.jh&&this.jh(this),this.Ye=!0,this.hn(this),this.wt.emit("dispose",this)),this}setVisible(t){const i=this.xs;return this.xs=t,!t&&i&&(this.Uh&&this.jh&&this.jh(this),this.Uh=!1),this}getVisible(){return this.xs}setMouseInteractions(t){const i=this.Jr.M();return this.Jr.S(t),t||(i&&this.Uh&&this.jh&&this.jh(this),this.Uh=!1),this}getMouseInteractions(){return this.Jr.M()}getIsUnderMouse(){return this.Uh}getIsGrabbed(){return this.tn}setMouseMoveEventHandler(t){return this.$h=t,this}setMouseEnterEventHandler(t){return this.Yh=t,this}setMouseLeaveEventHandler(t){return this.jh=t,this}setMouseClickEventHandler(t){return this.Rr=t,this}setMouseDoubleClickEventHandler(t){return this.zr=t,this}setMouseDownEventHandler(t){return this.Vr=t,this}setMouseUpEventHandler(t){return this.tr=t,this}setMouseWheelEventHandler(t){return this.Nr=t,this}setMouseContextMenuEventHandler(t){return this.Gr=t,this}setMouseDragEventHandler(t){return this.Xh=t,this}setMouseDragStartEventHandler(t){return this.Hr=t,this}setMouseDragStopEventHandler(t){return this.Jh=t,this}setTouchStartEventHandler(t){return this.Xr=t,this}setTouchMoveEventHandler(t){return this.$r=t,this}setTouchEndEventHandler(t){return this.Yr=t,this}cn(t){return this.sn=t,this}fn(){return this.sn?this.sn:Fo}dn(t){return this.en=t,this}gn(){return this.en}mn(t){return this.an=t,this}yn(){return this.an}}const Fo=a(e(0,0),e(0,0));class Po extends Io{constructor(t,i,s,e){super(t,s,e),this.pn=0,this.Sn=i,this.Sn.vn=!0}bn(t){return this.pn===t||(this.pn=t,this.Sn.vn=!0),this}xn(){return this.pn}}class Do extends Po{constructor(t,i,s,e,h){super(t,i,e,h),this.Mn=!0,this.Jt=s}}const Bo=(t,i,s)=>{if(s instanceof In){const h=s.Qi(),r=sn(i,{x:Math.abs(h.x),y:Math.abs(h.y)});return a(e(t.min.x-r.x,t.min.y-r.y),e(t.max.x+r.x,t.max.y+r.y))}return a(s.Fi(e(t.min.x,t.min.y),Jr(i,-1)),s.Fi(e(t.max.x,t.max.y),i))},Oo=(t,i)=>"function"==typeof i?i(t):i,Lo=(t,i)=>!t||t!==i,Eo=(t,i)=>t===Ie&&i!==Ie,Ro=t=>t!==Ie;class zo extends Do{constructor(t,i,s,e,h){super(t,i,s,e,h),this._n=fo.fillStyle,this.vs=t}Js(t){return this._n=Oo(this._n,t),this}qs(){return this._n}wn(){return Lo(this.An,this._n)}kn(){return Eo(this.An,this._n)}Cn(){return Ro(this._n)}Tn(t){this.An=t}}class Vo extends zo{constructor(t,i,s,e,h){super(t,i,s,e,h),this.In=fo.lineStyle,this.vs=t}Fr(t){return this.In="function"==typeof t?t(this.In):t,this}Pr(){return this.In}Fn(){return!this.Pn||this.Pn!==this.In}Dn(t){return!this.Pn||this.Pn.getThickness()!==t}Cn(){return this.In!==th||super.Cn()}kn(){return(this.In!==th||this._n!==Ie)&&this.Pn===th&&this.An===Ie}Bn(t){this.Pn=t}}class No extends zo{constructor(t,i,s,e,h,r=l(5)){super(t,i,s,e,h),this.size=l(5),this.size=r}Gt(t){return this.size.S(t),this}}class Go extends zo{constructor(t,i,s,h,r,n=l(fo.font)){super(t,i,s,h,r),this.On=l(""),this.Ln=l(e(0,0)),this.En=l(0),this.Rn=l(0),this.zn=l(e(0,0)),this.Vn=l(0),this.Nn=l(Zn),this.K=e(0,0),this.oi=l(c(1,1,1,1)),this.Gn=l(f(4,4,4,4)),this.font=l(fo.font),this.Hn=!1,this.font=n}Cn(){return Ro(this._n)&&this.On.M().length>0}kn(){return!1===this.Hn&&this.Cn()}Ks(t){return this.On.S(t),this}Xs(){return this.On.M()}te(t){return t instanceof Xn?this.Nn.S(t):this.Nn.S(t(this.Nn.M())),this}Qs(){return this.Nn.M()}Wn(t){return this.Nn.S(this.Nn.M().setFamily(t)),this}Un(){return this.Nn.M().getFamily()}jn(t){return this.Nn.S(this.Nn.M().setSize(t)),this}$n(){return this.Nn.M().getSize()}Yn(t){return this.Nn.S(this.Nn.M().setWeight(t)),this}Xn(){return this.Nn.M().getWeight()}Zn(t){return this.Nn.S(this.Nn.M().setStyle(t)),this}Kn(){return this.Nn.M().getStyle()}qn(t){return this.Nn.S(this.Nn.M().setVariant(t)),this}Jn(){return this.Nn.M().getVariant()}Qn(t){return this.Ln.S(t),this}io(){return this.Ln.M()}ie(t){return this.Vn.S(t),this}se(){return this.Vn.M()}so(t,i){return this.zn.S(e(t,i)),this}eo(){return this.zn.M()}ho(t){return this.Rn.S(t),this}ro(){return this.Rn.M()}no(t){return this.En.S(t),this}oo(){return this.En.M()}ao(t){return this.Rn.S(t.x),this.En.S(t.y),this}uo(t){return this.oi.S(t),this}lo(){return this.oi.M()}co(t){return this.Gn.S(t),this}fo(){return this.Gn.M()}}class Ho extends No{constructor(i,s,e,h,r,n=5){super(i,s,e,h,r,l(n)),this.do=[],this.mo=l(t.PointShape.Square),this.Vn=l(0),this.yo=l(!1),this.po=l(!1),this.So=l(!1),this.vo=kr,this.bo=0,this.xo=[],this.Mo=0,this._o=kr,this.wo=bo.Nearest,this.Ao=!1}ko(t){return this.wo=t,this}Co(){return this.xo}To(){return this.do}Io(t){return this.mo.S(t),this}ie(t){return this.Vn.S(t),this}Fo(t){return this.yo.S(t),this}Po(t){return this.po.S(t),this}Do(t){return this.So.S(t),this}Bo(t,i){return Array.isArray(t)||(t=[t]),this.Mo+=t.length,this.xo=hr(this.xo,t,{canReturnB:!0}),this._o&&(this._o=i?Hr(this._o,i):void 0),this}Oo(){return this.Ao=!0,this.do.length=0,this.bo=0,this.vo=kr,this.xo=[],this.Mo=0,this}Lo(){return this.bo}Eo(){return this.Mo}}class Wo extends Vo{constructor(t,i,s,h,r){super(t,i,s,h,r),this.Ln=l(e(0,0)),this.Et=l(e(100,100)),this.Vn=l(0),this.K=l(e(0,0)),this.Ro=!1}_e(){return this.zo(),this}Qn(t){const i=this.Ln.M();return t.x===i.x&&t.y===i.y||(this.Ln.S(t),this.zo()),this}io(){return this.Ln.M()}Vo(t){const i=this.Ln.M();return t!==i.x&&(this.Ln.S(e(t,i.y)),this.zo()),this}No(t){const i=this.Ln.M();return t!==i.y&&(this.Ln.S(e(i.x,t)),this.zo()),this}Gt(t){const i=this.Et.M();return t.x===i.x&&t.y===i.y||(this.Et.S(e(t.x,t.y)),this.zo()),this}xi(){return this.Et.M()}Go(t){const i=this.Et.M();return t!==i.x&&(this.Et.S(e(t,i.y)),this.zo()),this}Ho(t){const i=this.Et.M();return t!==i.x&&(this.Et.S(e(i.x,t)),this.zo()),this}ie(t){return this.Vn.S(t),this}se(){return this.Vn.M()}Wo(t){const i=this.K.M();return t===i&&i.x===t.x&&i.y===t.y||(void 0===t?(this.Ro=!1,this.zo()):(this.Ro=!0,this.K.S(t))),this}zo(){if(!this.Ro){const t=this.Ln.M(),i=this.Et.M(),s=e(t.x+i.x/2,t.y+i.y/2),h=this.K.M();s.x===h.x&&s.y===h.y||this.K.S(s)}}}class Uo extends Vo{constructor(){super(...arguments),this.do=[],this.Ln=l(e(0,0)),this.vo=kr,this.Uo=!1}jo(t){return t=Qh(t),this.do=t,this.Uo=!0,this}$o(){return this.do}ii(){return this.vo.max.x}ti(){return this.vo.min.x}ei(){return this.vo.max.y}si(){return this.vo.min.y}Yo(){return 0}Xo(){return 0}}class jo extends Uo{}class $o extends zo{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Zo=new Array,this.Ko=new Array,this.qo=l({type:"disabled",packager:(t,i,s)=>t.slice()}),this.vo=kr,this.Jo=0,this.Qo=!1,this.xo=[Array(),Array()],this.ta=!1,this.ia=(new De).setColor(pe(42,171,240)),this.Ao=!1,this.sa=!1,this.ea=!1}Bo(t,i){const s=this.Jo-1,h=s>0&&!this.ta;let[r,n]=h?[[this.Zo[s]],[this.Ko[s]]]:[[],[]];if(t instanceof Array){const[i,s]=o(t);r=hr(r,i,{canReturnB:!0}),n=hr(n,s,{canReturnB:!0})}else{const i=t.position;r.push(e(i,t.high)),n.push(e(i,t.low))}return this.ta?(this.xo[0]=hr(this.xo[0],r,{canReturnB:!0}),this.xo[1]=hr(this.xo[1],n,{canReturnB:!0})):(this.xo=[r,n],this.ta=!0),this.vo=Hr(this.vo,i||Hr(Nr(r),Nr(n))),this}Oo(){return this.Ao=!0,this.Zo.length=0,this.Ko.length=0,this.Jo=0,this.vo=kr,this}To(){return[this.Zo,this.Ko]}Co(){return[this.xo[0],this.xo[1]]}ha(t){return this.qo.S(t),this}ra(){return this.qo.M()}na(t){return this.ia="function"==typeof t?t(this.ia):t,this}oa(){return this.ia}Lo(){return this.Jo-(Number(this.sa)+Number(this.ea))}Eo(){return this.xo.length}aa(t){return this.sa=t,this}ua(){return this.sa}la(t){return this.ea=t,this}ca(){return this.ea}kn(){return this.An===Ie&&this.fa===Ie&&(this._n!==Ie||this.ia!==Ie)}da(t){this.fa=t}Cn(){return this.ia!==Ie||super.Cn()}wn(){return super.wn()||!this.fa||this.fa!==this.ia}}class Yo extends Vo{constructor(t,i,s,h,r){super(t,i,s,h,r),this.Ln=l(e(0,0)),this.ga=l(0),this.ot=l(360),this.ma=l(100),this.ya=l(100),this.pa=l(0),this.Sa=l(void 0),this.va=e(0,0),this.ba=e(0,0),this.xa=e(0,0)}Ma(){return this.ma.M()}_a(){return this.ya.M()}io(){return this.Ln.M()}wa(){return this.ga.M()}Gi(){return this.ot.M()}Aa(){return this.pa.M()}ka(){return this.Sa.M()}Ca(){return this.va}Ta(){return this.ba}Ia(){return this.xa}Qn(t){return this.Ln.S(t),this}Fa(t){return this.ga.S(t),this}Pa(t){return this.ot.S(t),this}Da(t){return this.ya.S(t),this.ma.S(t),this}Ba(t){return this.ma.S(t),this}Oa(t){return this.ya.S(t),this}La(t){return this.pa.S(t<0?0:t),this}Ea(t){return this.Sa.S(void 0!==t&&t<=0?void 0:t),this}}var Xo;!function(t){t[t.Complex=0]="Complex",t[t.Simple=1]="Simple"}(Xo||(Xo={}));const Zo=(t,i)=>"function"==typeof i?i(t):i,Ko=(t,i)=>!t||t!==i,qo=(t,i)=>!t||t.getThickness()!==i,Jo=(t,i)=>t===th&&i!==th,Qo=t=>t!==th&&t.getFillStyle()!==Ie;class ta extends Do{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Ra=fo.lineStyle,this.engine=t}za(t){return this.Ra=Zo(this.Ra,t),this}Va(){return this.Ra}Fn(){return Ko(this.Na,this.Ra)}Ga(t){return qo(this.Na,t)}kn(){return Jo(this.Na,this.Ra)}Cn(){return Qo(this.Ra)}Ha(t){this.Na=t}}class ia extends ta{constructor(t,i,s,h,r){super(t,i,s,h,r),this.nt=e(0,0),this.ot=e(0,0),this.Wa=!1}S({min:t,max:i}){return this.Wa=!0,this.nt=t,this.ot=i,this}Hi(){return this.nt}Gi(){return this.ot}Ua(t){return this.Wa=!0,this.nt=t,this}Pa(t){return this.Wa=!0,this.ot=t,this}}class sa extends ta{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ja=[],this.Wa=!1}Bo(t,i){return this.ja.push(t),this.ja.push(i),this.Wa=!0,this}Oo(){return this.ja.length=0,this.Wa=!0,this}}class ea extends ta{constructor(t,i,s,e,h){super(t,i,s,e,h),this.$a=[],this.vo=kr,this.xo=new Array,this.bo=0,this.wo=bo.NearestX,this.Ao=!1,this.Ya=l(void 0),this.sa=!1,this.ea=!1}Xa(t){return this.Ya.S(t),this}Za(){return this.Ya.M()}Co(){return this.xo}To(){return this.$a}ko(t){return this.wo=t,this}Oo(){return this.Ao=!0,this.$a.length=0,this.bo=0,this.xo=[],this.vo=kr,this}Lo(){return this.bo-(Number(this.sa)+Number(this.ea))}Eo(){return this.xo.length}aa(t){return this.sa=t,this}ua(){return this.sa}la(t){return this.ea=t,this}ca(){return this.ea}}class ha extends zo{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Jo=0,this.Ka=0,this.Et=l({x:0,y:0}),this.qa=l({x:0,y:0}),this.Ja=l({x:0,y:0}),this.nt={x:0,y:0},this.ot={x:0,y:0},this.Qa=!0,this.tu=!0,this.iu=!0,this.vo=kr,this.su=!0,this.eu=Ie}hu(t){return this.eu=Oo(this.eu,t),this}ru(){return this.eu}S(t){return ra.S(this,t,((t,i)=>({x:t,y:i}))),this}nu(){return ra.nu(this)}ou(){return ra.ou(this)}io(){return ra.io(this)}Eo(){return ra.Eo(this)}au(t,i,s){return ra.au(this,t,i,s),this}uu(t,i,s){return ra.uu(this,t,i,s),this}lu(t,i){return ra.lu(this,t,i),this}cu(t,i){return ra.cu(this,t,i),this}fu(t,i){return ra.fu(this,t,i),this}Oo(){return ra.Oo(this,((t,i)=>({x:t,y:i}))),this}du(){return ra.du(this)}gu(){return ra.gu(this)}mu(){return ra.mu(this)}Lo(){return ra.Lo(this)}kn(){return ra.kn(this)}Cn(){return ra.Cn(this)}yu(){return this.pu}Su(){return this.vu}}const ra={S(t,i,s){t.Qa=!0,t.tu=!0,t.iu=!0;const{start:e}=i,{end:h}=i,{rows:r}=i,{columns:n}=i;t.su=i.pixelate;const o={x:i.pixelate&&n>=1||!i.pixelate&&n>1?n:0,y:i.pixelate&&r>=1||!i.pixelate&&r>1?r:0};t.qa.S(o),t.nt={...e},t.ot={...h},t.Et.S(tn(h,e)),ra.bu(t,s)},bu(t,i){const s=t.qa.M();if(s.x>0&&s.y>0){t.pu?t.pu.length=0:t.pu=[];const e=t.su?Qr(s,{x:1,y:1}):{x:s.x,y:s.y};t.Ja.S(e),t.pu=Array.from(Array(e.y)).map((()=>Array(e.x))),t.vu=Array.from(Array(s.y)).map((()=>Array(s.x))),ra.xu(t,s,e,i),t.Jo=e.x*e.y,t.Ka=s.x*s.y}else t.pu=void 0,t.Ja.S({x:0,y:0})},xu(t,i,s,e){const h=t.nt,r=t.ot,n=t.pu,o=t.vu;if(n){const i=s.x,o=s.y,{x:u,y:l}=t.Et.M(),c={x:u/(i-1),y:l/(o-1)};for(let t=0;t<o;t+=1)for(let s=0;s<i;s+=1)n[t][s]=e(c.x*s,c.y*t);const f=e(0,0),d=e(r.x-h.x,r.y-h.y),g={},m={};for(const t of Object.keys(f))g[t]=Math.min(f[t],d[t]),m[t]=Math.max(f[t],d[t]);t.vo=a(g,m)}if(o){const t=i.x,s=i.y;for(let i=0;i<s;i+=1)for(let s=0;s<t;s+=1)o[i][s]={intensity:0}}},nu:t=>t.qa.o||t.Ja.o,ou(t){const i=t.qa.M();return{columns:i.x,rows:i.y}},io(t){const i=t.nt,s=t.ot;return{start:{x:i.x,y:i.y},end:{x:s.x,y:s.y}}},Eo(t){throw new Error("Method not implemented.")},au(t,i,s,e){const h="geometry"===s||"y"===s?t.pu:t.vu;if(h){const r=t.Ja.M();if("y"===s){const t=Fh(h);for(let s=0;s<r.y;s+=1){let e=s-i;for(;e<0;)e+=r.y;for(let i=0;i<r.x;i+=1)h[e][i]={...t[e][i],y:t[s][i].y}}}else Ih(h,i);const n=h===t.pu?t.Ja.M():t.qa.M(),o={column:{start:0,end:n.x},row:{start:n.y-i,end:n.y}};ra.Mu(t,s,e,o)}},uu(t,i,s,e){const h="geometry"===s||"y"===s?t.pu:t.vu;if(h){const r=t.Ja.M();if("y"===s){const t=Fh(h);for(let s=0;s<r.x;s+=1){let e=s-i;for(;e<0;)e+=r.x;for(let i=0;i<r.y;i+=1)h[i][e]={...t[i][e],y:t[i][s].y}}}else h.forEach((t=>Ih(t,i)));const n=h===t.pu?t.Ja.M():t.qa.M(),o={column:{start:n.x-i,end:n.x},row:{start:0,end:n.y}},a=(t=>{const i=t.length,s=i>0?t[0].length:0,e=Array.from(Array(s)).map((()=>Array(i)));for(let h=0;h<s;h+=1)for(let s=0;s<i;s+=1)e[h][s]=t[s][h];return e})(e);ra.Mu(t,s,a,o)}},Mu(t,i,s,e){"color"===i&&ra.lu(t,s,e),"value"===i&&ra.cu(t,s,e),"geometry"===i&&ra.fu(t,s,e),"y"===i&&ra._u(t,s,e)},lu(t,i,s){const e=t.vu;if(e){const[h,r,n,o]=Th(t.qa.M(),s);if("function"==typeof i)for(let t=h;t<r;t+=1)for(let s=n;s<o;s+=1){const h=e[t][s],r=i(t,s,{intensity:h.intensity,color:h.color});e[t][s].color=r||h.color}else{const t=i.length,s=t>0?i[0].length:0;for(let a=h,u=0;a<r&&u<t;a+=1,u+=1)for(let t=n,h=0;t<o&&h<s;t+=1,h+=1){const s=i[u][h];s&&(e[a][t].color=s)}}t.Qa=!0}},cu(t,i,s){const e=t.vu;if(e){const[h,r,n,o]=Th(t.qa.M(),s);if("function"==typeof i)for(let t=h;t<r;t+=1)for(let s=n;s<o;s+=1){const h=i(t,s,{intensity:e[t][s].intensity});(h||0===h)&&(e[t][s].intensity=h)}else{const t=i.length,s=t>0?i[0].length:0;for(let a=h,u=0;a<r&&u<t;a+=1,u+=1)for(let t=n,h=0;t<o&&h<s;t+=1,h+=1){const s=i[u][h];(s||0===s)&&(e[a][t].intensity=s)}}t.tu=!0}},fu(t,i,s){const e=t.pu;if(e){const[h,r,n,o]=Th(t.Ja.M(),s);if("function"==typeof i)for(let t=h;t<r;t+=1)for(let s=n;s<o;s+=1){const h=i(t,s,{...e[t][s]});void 0!==h&&(e[t][s]={...h})}else{const t=i.length,s=t>0?i[0].length:0;for(let a=h,u=0;a<r&&u<t;a+=1,u+=1)for(let t=n,h=0;t<o&&h<s;t+=1,h+=1){const s=i[u][h];void 0!==s&&(e[a][t]={...s})}}t.iu=!0}},_u(t,i,s){const e=t.pu;if(e){const[h,r,n,o]=Th(t.Ja.M(),s);if("function"==typeof i)for(let t=h;t<r;t+=1)for(let s=n;s<o;s+=1){const h=e[t][s],r=i(t,s,h.y);void 0!==r&&(e[t][s]={...h,y:r})}else{const t=i.length,s=t>0?i[0].length:0;for(let a=h,u=0;a<r&&u<t;a+=1,u+=1)for(let t=n,h=0;t<o&&h<s;t+=1,h+=1){const s=e[a][t],r=i[u][h];void 0!==r&&(e[a][t]={...s,y:r})}}t.iu=!0}},Oo(t,i){t.Qa=!0,t.tu=!0,t.iu=!0,t.pu=void 0,t.vu=void 0,t.Jo=0,t.Ka=0,t.qa.S({x:0,y:0}),t.Ja.S({x:0,y:0}),t.nt={x:0,y:0},t.ot={x:0,y:0},t.vo=a(i(wr,wr),i(Ar,Ar))},du(t){const i=t.Ja.M();return{x:i.x,y:i.y}},gu(t){const i=t.qa.M();return{x:i.x,y:i.y}},mu:t=>t.Jo,Lo:t=>t.Ka,kn:t=>Eo(t.An,t._n)||Eo(t.wu,t.eu),Cn:t=>Ro(t._n)||Ro(t.eu)};class na{constructor(t,i){this.gr=t,this.Au=i,this.ku=i.rows*Ea,this.Cu=i.columns*Ra}}var oa,aa;t.OnScreenMenuButtonType=void 0,(oa=t.OnScreenMenuButtonType||(t.OnScreenMenuButtonType={}))[oa.ZoomIn=0]="ZoomIn",oa[oa.ZoomInX=1]="ZoomInX",oa[oa.ZoomInY=2]="ZoomInY",oa[oa.ZoomOut=3]="ZoomOut",oa[oa.ZoomOutX=4]="ZoomOutX",oa[oa.ZoomOutY=5]="ZoomOutY",oa[oa.ZoomToFit=6]="ZoomToFit",oa[oa.ToggleAnimations=7]="ToggleAnimations",t.OnScreenMenuButtonShape=void 0,(aa=t.OnScreenMenuButtonShape||(t.OnScreenMenuButtonShape={}))[aa.Circle=0]="Circle",aa[aa.Rectangle=1]="Rectangle",aa[aa.RoundedRectangle=2]="RoundedRectangle";const ua={x:-43,y:0},la={x:-65,y:0},ca={x:-86,y:0},fa={x:-107,y:-1},da={x:-128,y:-3},ga={x:-150,y:0},ma={x:-171,y:0},ya={x:-276,y:0},pa={x:-298,y:0},Sa={x:0,y:0},va={x:-21,y:0};class ba extends na{constructor(t,i,s,e){super(t,s),this.Tu=yh.document.createElement("button"),this.Iu=yh.document.createElement("div"),this.Fu=yh.document.createElement("label"),this.Au=s,this.Pu=i,this.Du=e}Bu(t,i,s,e){this.Ou(t,e),this.Lu(),this.Eu(i),this.Ru(),this.Fu.textContent=s||"";const h=yh.document.createElement("div");this.zu(h),this.Tu.onclick=this.onClick.bind(this),h.appendChild(this.Iu),h.appendChild(this.Fu),this.Tu.appendChild(h)}Ru(){this.Tu.style.cursor="pointer"}zu(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignContent="center",t.style.flexDirection="column"}Eu(t){"string"==typeof t?(this.Iu.style.backgroundImage=`url(${t})`,this.Iu.style.backgroundSize="100%",this.Iu.style.backgroundRepeat="no-repeat",this.Iu.style.backgroundPosition="center",this.Iu.style.width="20px",this.Iu.style.height="20px"):this.applyStyleForSprite(t),this.Iu.style.margin="auto"}Lu(){switch(this.Pu){case t.OnScreenMenuButtonShape.RoundedRectangle:this.Tu.style.borderRadius="10px";break;case t.OnScreenMenuButtonShape.Rectangle:this.Tu.style.borderRadius="0px";break;case t.OnScreenMenuButtonShape.Circle:default:this.Tu.style.borderRadius="31px"}}Ou(t,i){this.Tu.style.width=`${this.Cu.toString()}px`,this.Tu.style.height=`${this.ku.toString()}px`,this.Tu.style.backgroundColor=t,this.Tu.style.opacity=i||za,this.Tu.style.alignItems="center",this.Tu.style.border="2px solid #707070",this.Tu.style.transition="background-color .8s ease"}applyStyleForSprite(t){this.Iu.style.backgroundImage=`url(${this.gr}/${Va})`,this.Iu.style.backgroundPositionX=`${t.x}px`,this.Iu.style.backgroundPositionY=`${t.y}px`,this.Iu.style.backgroundSize="1600%",this.Iu.style.backgroundRepeat="no-repeat",this.Iu.style.width="20px",this.Iu.style.height="20px"}Vu(t){return t.appendChild(this.Tu),t}Nu(){return this.Tu}}class xa extends ba{constructor(t,i,s,e){super(t,i,s,e),this.Gu="",this.Hu="",this.Wu=!1,this.Du=e}Uu(){this.ju(),this.onToggledStateAction()}$u(){this.Yu(),this.onInitialStateAction()}Yu(){this.Xu(this.Gu)}ju(){this.Xu(this.Hu)}Xu(t){"string"==typeof t?this.Iu.style.background=t:(this.Iu.style.backgroundImage=`url(${this.gr}/${Va})`,this.Iu.style.backgroundPositionX=`${t.x}px`,this.Iu.style.backgroundPositionY=`${t.y}px`)}onClick(){this.Wu?this.$u():this.Uu(),this.Wu=!this.Wu}}class Ma extends ba{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Du=i;const e=this.Du.getTheme();this.Bu(e.onScreenMenuBackgroundColor.toRGBAString(),ua)}onClick(){const t=this.Du.Zu();t&&this.Du.zoom(t,{x:-1,y:-1})}}class _a extends ba{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Du=i;const e=this.Du.getTheme();this.Bu(e.onScreenMenuBackgroundColor.toRGBAString(),fa)}onClick(){const t=this.Du.Zu();t&&this.Du.zoom(t,{x:-1,y:0})}}class wa extends ba{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Du=i;const e=this.Du.getTheme();this.Bu(e.onScreenMenuBackgroundColor.toRGBAString(),ga)}onClick(){const t=this.Du.Zu();t&&this.Du.zoom(t,{x:0,y:-1})}}class Aa extends ba{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Du=i;const e=this.Du.getTheme();this.Bu(e.onScreenMenuBackgroundColor.toRGBAString(),la)}onClick(){const t=this.Du.Zu();t&&this.Du.zoom(t,{x:1,y:1})}}class ka extends ba{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Du=i;const e=this.Du.getTheme();this.Bu(e.onScreenMenuBackgroundColor.toRGBAString(),da)}onClick(){const t=this.Du.Zu();t&&this.Du.zoom(t,{x:1,y:0})}}class Ca extends ba{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Du=i;const e=this.Du.getTheme();this.Bu(e.onScreenMenuBackgroundColor.toRGBAString(),ma)}onClick(){const t=this.Du.Zu();t&&this.Du.zoom(t,{x:0,y:1})}}class Ta extends xa{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Du=i;const e=this.Du.getTheme();this.Gu=ya,this.Hu=pa,this.Bu(e.onScreenMenuBackgroundColor.toRGBAString(),this.Gu)}onToggledStateAction(){this.Du.setAnimationsEnabled(!1)}onInitialStateAction(){this.Du.setAnimationsEnabled(!0)}}class Ia extends ba{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.Du=i;const e=this.Du.getTheme();this.Bu(e.onScreenMenuBackgroundColor.toRGBAString(),ca)}onClick(){this.Du.forEachAxis((t=>{t.fit(!0)}))}}class Fa extends ba{constructor(t,i,s){super(t,i.shape||Na,i.dimensions||{rows:1,columns:1},s);const e=s.getTheme(),h=i.color||e.onScreenMenuBackgroundColor.toRGBAString(),r=i.icon||"",n=i.label||"",o=i.opacity||"";this.Bu(h,r,n,o),this.Ku=i.action}onClick(){this.Ku(this.Du)}}class Pa extends xa{constructor(t,i,s,e){super(t,i,{rows:1,columns:1},s),this.Du=s,this.qu=e,this.Gu=va,this.Hu=Sa,this.Bu(Ga,this.Gu)}Yu(){this.Xu(this.Gu),this.Tu.style.backgroundColor=Ga,this.Tu.style.border="2px solid #707070",this.Tu.style.margin="0px"}ju(){this.Xu(this.Hu),this.Tu.style.background="#FECC00 0% 0% no-repeat padding-box",this.Tu.style.border="10px solid #BCBCBC12",this.Tu.style.margin="1px"}onToggledStateAction(){var t;null===(t=this.qu)||void 0===t||t.style.setProperty("display","block")}onInitialStateAction(){var t;null===(t=this.qu)||void 0===t||t.style.setProperty("display","none")}}var Da;t.MouseStyles=void 0,(Da=t.MouseStyles||(t.MouseStyles={})).Move="move",Da.ResizeColumn="col-resize",Da.ResizeRow="row-resize",Da.Horizontal="ew-resize",Da.Vertical="ns-resize",Da.NorthWest="nw-resize",Da.NorthEast="ne-resize",Da.Copy="copy",Da.CrossHair="crosshair",Da.Default="default",Da.Help="help",Da.Restricted="not-allowed",Da.None="none",Da.Point="pointer",Da.Text="text",Da.Wait="wait",Da.ZoomIn="zoom-in",Da.ZoomOut="zoom-out";const Ba={LeftBottom:e(-1,-1),CenterBottom:e(0,-1),RightBottom:e(1,-1),LeftCenter:e(-1,0),Center:e(0,0),RightCenter:e(1,0),LeftTop:e(-1,1),CenterTop:e(0,1),RightTop:e(1,1)},Oa=new De({color:pe(255,255,255,0)}),La=new sh({thickness:1,fillStyle:Oa}),Ea=60,Ra=60,za="1.0",Va="osm/osm-sprite-transparent.png",Na=t.OnScreenMenuButtonShape.Circle,Ga="#363636";var Ha;t.OSMPosition=void 0,(Ha=t.OSMPosition||(t.OSMPosition={}))[Ha.TopRight=0]="TopRight",Ha[Ha.TopLeft=1]="TopLeft",Ha[Ha.BottomLeft=2]="BottomLeft",Ha[Ha.BottomRight=3]="BottomRight";const Wa=t=>{const i=t.length;if(i>0){let s=0,h=0;for(let e=0;e<i;e+=1)s+=t[e].x,h+=t[e].y;return e(s/i,h/i)}return e(0,0)},Ua=(...t)=>{const i=t.length,s=new Array(i).fill(!1),e=(e,h)=>{for(let r=0;r<i;r+=1){const i=t[r],n=i.Ju(e,h);n?i._e(e,h,!0):s[r]&&s[r]&&i._e(e,h,!1),s[r]=n}return!1};return{onTouchStart:e,onTouchMove:e,onTouchEnd:e}},ja=class{constructor(t,i=300){this.Qu=!1,this.tl=[],this.il=300,this.sl=t,this.il=i}Ju(t,i){const s=yh.performance.now();let e=!1;for(let t=0;t<this.tl.length;t+=1)s-this.tl[t].time>=this.il?(this.tl.splice(t,1),t-=1):this.tl[t].state&&(e=!0);return this.Qu?0===i.interactions.length&&(this.tl.push({state:!1,time:s}),this.Qu=!1):1===i.interactions.length&&"pointerdown"===i.type&&(this.tl.push({state:!0,time:s}),e=!0,this.Qu=!0),e}_e(t,i,s){if(s){const s=this.tl.reduce(((t,i)=>(i.state?t.on+=1:t.off+=1,t)),{on:0,off:0});s.on>=2&&s.off>=1&&(this.sl(t,i),this.tl.length=0)}}},$a=class{constructor(t,i,s,e=1,h=100){this.el=t,this.hl=i,this.rl=s,this.nl=e,this.ol=h}Ju(t,i){const s=i.interactions.length;if(s===this.nl){if(void 0!==this.al)return!0;if("pointerdown"===i.type&&(1===s||(t=>{const i=t.length;if(i>0){const s=Wa(t);let h=0;for(let r=0;r<i;r+=1)h=Math.max(h,Lr(s,e(t[r].x,t[r].y)));return h}return wr})(i.interactions)<=this.ol))return this.al=Wa(i.interactions),!0}return!1}_e(t,i,s){const h=this.ul;if(!s||i.forceTouchEnd||"pointerup"===i.type)this.rl&&this.rl(t,this.al,h,i),this.al=void 0,this.ul=void 0;else{const s=Wa(i.interactions);"pointerdown"===i.type?this.el&&this.el(t,this.al,i):"pointermove"===i.type&&this.hl&&this.hl(t,this.al,s,e(s.x-h.x,h.y-s.y),i),this.ul=s}}},Ya=class{constructor(t,i,s){this.ll=!1,this.el=t,this.hl=i,this.rl=s}Ju(t,i){return this.ll?2!==i.interactions.length&&(this.ll=!1):2===i.interactions.length&&"pointerdown"===i.type&&(this.ll=!0),this.ll}_e(t,i,s){let h,r;if(s&&"pointerup"!==i.type){if("pointerdown"===i.type){const s=i.interactions;h=s[0],r=s[1],this.el(t,h,r,i)}else if("pointermove"===i.type){h=i.interactions[0],r=i.interactions[1];const s=this.cl,n=this.fl,o=e(h.x-s.x,s.y-h.y),a=e(r.x-n.x,n.y-r.y);this.hl(t,h,r,o,a,i)}}else{const s=i.interactions;this.rl(t,s[0],s[1],i)}this.cl=h,this.fl=r}},Xa=i=>{const s=i.getDraggingMode();return void 0!==s&&s!==t.UIDraggingModes.notDraggable?s===t.UIDraggingModes.draggable?t.MouseStyles.Move:s===t.UIDraggingModes.onlyHorizontal?t.MouseStyles.Horizontal:t.MouseStyles.Vertical:void 0};class Za{constructor(){this.xs=!0,this.wt=new We,this.dl=0,this.ml=(t,i)=>{0===this.dl&&this.wt.emit("mouseEnter",this,i),this.dl+=1},this.yl=(t,i)=>{this.dl-=1,this.dl<1&&(this.wt.emit("mouseLeave",this,i),this.dl=0)},this.pl=(t,i)=>{this.wt.emit("mouseClick",this,i)},this.Sl=(t,i)=>{this.wt.emit("mouseDoubleClick",this,i)},this.vl=(t,i)=>{this.wt.emit("mouseDown",this,i)},this.bl=(t,i)=>{this.wt.emit("mouseUp",this,i)},this.xl=(t,i)=>{this.wt.emit("mouseMove",this,i)},this.Ml=(t,i,s)=>{this.wt.emit("mouseDragStart",this,i,s)},this._l=(t,i,s,e,h)=>{this.wt.emit("mouseDrag",this,i,s,e,h)},this.wl=(t,i,s,e)=>{this.wt.emit("mouseDragStop",this,i,s,e)},this.Al=(t,i)=>{this.wt.emit("mouseWheel",this,i)},this.kl=(t,i)=>{this.dl+=1,this.wt.emit("touchStart",this,i)},this.Cl=(t,i)=>{this.wt.emit("touchMove",this,i)},this.Tl=(t,i)=>{this.dl-=1,this.wt.emit("touchEnd",this,i)},this.Il=t=>(t instanceof Do?t.setMouseEnterEventHandler(this.ml).setMouseLeaveEventHandler(this.yl).setMouseClickEventHandler(this.pl).setMouseDoubleClickEventHandler(this.Sl).setMouseDownEventHandler(this.vl).setMouseUpEventHandler(this.bl).setMouseMoveEventHandler(this.xl).setMouseDragEventHandler(this._l).setMouseDragStartEventHandler(this.Ml).setMouseDragStopEventHandler(this.wl).setMouseWheelEventHandler(this.Al).setTouchStartEventHandler(this.kl).setTouchMoveEventHandler(this.Cl).setTouchEndEventHandler(this.Tl):(t.onMouseEnter(this.ml),t.onMouseLeave(this.yl),t.onMouseClick(this.pl),t.onMouseDoubleClick(this.Sl),t.onMouseDown(this.vl),t.onMouseUp(this.bl),t.onMouseMove(this.xl),t.onMouseDrag(this._l),t.onMouseDragStart(this.Ml),t.onMouseDragStop(this.wl),t.onMouseWheel(this.Al),t.onTouchStart(this.kl),t.onTouchMove(this.Cl),t.onTouchEnd(this.Tl)),t)}onMouseEnter(t){return this.wt.on("mouseEnter",t)}onMouseLeave(t){return this.wt.on("mouseLeave",t)}onMouseClick(t){return this.wt.on("mouseClick",t)}onMouseDoubleClick(t){return this.wt.on("mouseDoubleClick",t)}onMouseDown(t){return this.wt.on("mouseDown",t)}onMouseUp(t){return this.wt.on("mouseUp",t)}onMouseMove(t){return this.wt.on("mouseMove",t)}onMouseDragStart(t){return this.wt.on("mouseDragStart",t)}onMouseDrag(t){return this.wt.on("mouseDrag",t)}onMouseDragStop(t){return this.wt.on("mouseDragStop",t)}onMouseWheel(t){return this.wt.on("mouseWheel",t)}onTouchStart(t){return this.wt.on("touchStart",t)}onTouchMove(t){return this.wt.on("touchMove",t)}onTouchEnd(t){return this.wt.on("touchEnd",t)}offMouseEnter(t){return this.wt.off(t,"mouseEnter")}offMouseLeave(t){return this.wt.off(t,"mouseLeave")}offMouseClick(t){return this.wt.off(t,"mouseClick")}offMouseDoubleClick(t){return this.wt.off(t,"mouseDoubleClick")}offMouseDown(t){return this.wt.off(t,"mouseDown")}offMouseUp(t){return this.wt.off(t,"mouseUp")}offMouseMove(t){return this.wt.off(t,"mouseMove")}offMouseDragStart(t){return this.wt.off(t,"mouseDragStart")}offMouseDrag(t){return this.wt.off(t,"mouseDrag")}offMouseDragStop(t){return this.wt.off(t,"mouseDragStop")}offMouseWheel(t){return this.wt.off(t,"mouseWheel")}offTouchStart(t){return this.wt.off(t,"touchStart")}offTouchMove(t){return this.wt.off(t,"touchMove")}offTouchEnd(t){return this.wt.off(t,"touchEnd")}getIsUnderMouse(){return this.dl>0}setVisible(t){const i=this.xs!==t;return this.xs=t,i&&this.wt.emit("visibleStateChanged",this,this.xs),this}getVisible(){return this.xs}onVisibleStateChanged(t){return this.wt.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.wt.off(t,"visibleStateChanged")}}const Ka=(i,s,e)=>{const h=i.getDraggingMode();if(h!==t.UIDraggingModes.notDraggable){const r=i.scale.Fi(i.getPosition(),{x:h!==t.UIDraggingModes.onlyVertical?s.x:0,y:h!==t.UIDraggingModes.onlyHorizontal?s.y:0}),n=i.scale,o=i.getSize(),a=i.getOrigin(),u=n.Fi({x:n.x.getInnerStart(),y:n.y.getInnerStart()},sn({x:(1+a.x)/2,y:(1+a.y)/2},o)),l=n.Fi({x:n.x.getInnerEnd(),y:n.y.getInnerEnd()},sn({x:(a.x-1)/2,y:(a.y-1)/2},o)),c={x:Math.min(Math.max(r.x,u.x),l.x),y:Math.min(Math.max(r.y,u.y),l.y)};i.setPosition(c),Zh(e)}},qa=(t,i,s,e,h)=>{Ka(t,h,i)},Ja=(t,i,s,e,h)=>{Ka(t,e,h)};class Qa extends Za{constructor(t,i,s,h,r){super(),this.position=e(50,50),this.origin=e(0,0),this.size=e(0,0),this.Ye=!1,this.Fl=void 0,this.Pl=void 0,this.Dl=Xa,this.Bl=void 0,this.Ol=()=>{const t="function"==typeof this.Dl?this.Dl(this):this.Dl;t&&(this.Pl=this.Sn.vs.oh(t))},this.Ll=()=>{this.Sn.vs.ah(this.Pl)},this.oi=c(0,0,0,0),this.Sn=t,this.renderingScale=i,this.scale=s,this.hn=h,this.Hs=r,this.Sn.Ss(),this.onMouseEnter(this.Ol),this.onMouseLeave(this.Ll),this.onMouseDrag(qa);const n=Ua(new $a(_h,Ja,_h));this.onTouchStart(n.onTouchStart),this.onTouchMove(n.onTouchMove),this.onTouchEnd(n.onTouchEnd),this.Hs=r}setEffect(t){return this.El=this.El||this.Sn.vs.El.Rl(this,{zl:{shapes:this.Vl()}}),this.El.zl.ee(t),this}getEffect(){return!!this.El&&this.El.zl.re()}setAutoDispose(t){return this.Bl=t,this.Sn.Ss(),this}getAutoDispose(){return this.Bl}getSize(i=t.UISpace.Everything){return i===t.UISpace.Everything?e(this.size.x+(this.oi.left+this.oi.right),this.size.y+(this.oi.bottom+this.oi.top)):this.size}setContentSize(t){this.size=t}setMargin(t){return this.oi="object"==typeof t?d(this.oi,t):{left:t,top:t,right:t,bottom:t},this.Sn.Ss(),this}getMargin(){return this.oi}Nl(){if(this.Bl){const t=this.size,i=this.renderingScale.xi(),s={x:t.x/i.x,y:t.y/i.y};("max-width"===this.Bl.type&&s.x>=this.Bl.maxWidth||"max-height"===this.Bl.type&&s.y>=this.Bl.maxHeight)&&this.dispose()}return this}_e(){return this}dispose(){return this.Ye||(this.Sn.Ss(),this.Ye=!0,this.hn(this),this.wt.emit("dispose",this)),this}setVisible(t){return super.setVisible(t),this.Sn.Ss(),this}onDispose(t){return this.wt.on("dispose",t)}offDispose(t){return this.wt.off(t,"dispose")}setPosition(t){return this.position=t,this.Sn.Ss(),this}getPosition(i=this.origin,s=t.UISpace.Everything){const e=this.getSize(t.UISpace.Everything),h=this.scale.Fi(this.position,sn({x:-(this.origin.x+1)/2,y:-(this.origin.y+1)/2},e));if(s===t.UISpace.Everything)return this.scale.Fi(h,sn({x:(i.x+1)/2,y:(i.y+1)/2},e));const r=this.scale.Fi(h,{x:this.oi.left,y:this.oi.bottom}),n=this.getSize(t.UISpace.Content);return this.scale.Fi(r,sn({x:(i.x+1)/2,y:(i.y+1)/2},n))}setOrigin(t){return this.origin=t,this.Sn.Ss(),this}getOrigin(){return this.origin}setDraggingMode(i=t.UIDraggingModes.notDraggable){return this.Fl=i,this.Sn.Ss(),this}getDraggingMode(){return void 0!==this.Fl?this.Fl:t.UIDraggingModes.notDraggable}setMouseStyle(t){return this.Dl=t,this}getMouseStyle(){return this.Dl}}class tu extends Qa{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Gn=c(),this.Gl=0,this.Sn=t,this.Hl=e,this.backgroundElement=new this.Hl(this.Sn,this.renderingScale,this.scale,_h,r),this.Il(this.backgroundElement)}Vl(){return this.backgroundElement.Vl()}onHighlight(t){return this.wt.on("highlight",t)}offHighlight(t){return this.wt.off(t)}setBackground(t){return t(this.backgroundElement),this}getBackground(){return this.backgroundElement}Nl(){return super.Nl(),this.Ye||this.backgroundElement.setOrigin(this.origin).setPosition(this.getPosition(this.origin,t.UISpace.PaddedBackground)).Nl(),this}_e(){const i=this.getSize(t.UISpace.PaddedContent);return this.backgroundElement.Wl(i)._e(),super._e()}dispose(){return super.dispose(),this.backgroundElement.dispose(),this}setVisible(t){return super.setVisible(t),this.backgroundElement.setVisible(t),this}setPadding(t){return this.Gn="object"==typeof t?d(this.Gn,t):{left:t,top:t,right:t,bottom:t},this.Sn.Ss(),this}getPadding(){return this.Gn}getSize(i=t.UISpace.Everything){let s=super.getSize(i);return i>=t.UISpace.PaddedContent&&(s=e(s.x+this.Gn.left+this.Gn.right,s.y+this.Gn.bottom+this.Gn.top)),i>=t.UISpace.PaddedBackground&&(s=e(s.x+this.backgroundElement.Ul()+this.backgroundElement.jl(),s.y+this.backgroundElement.$l()+this.backgroundElement.Yl())),s}getPosition(i=this.origin,s=t.UISpace.Everything){if(s===t.UISpace.Everything)return super.getPosition(i,s);const h=super.getPosition(e(-1,-1),t.UISpace.Everything),r=this.getMargin(),n=this.scale.Fi(h,{x:r.left,y:r.bottom});if(s===t.UISpace.PaddedBackground){const s=this.getSize(t.UISpace.PaddedBackground);return this.scale.Fi(n,sn({x:(i.x+1)/2,y:(i.y+1)/2},s))}const o=this.scale.Fi(n,{x:this.backgroundElement.Ul(),y:this.backgroundElement.$l()});if(s===t.UISpace.PaddedContent){const s=this.getSize(t.UISpace.PaddedContent);return this.scale.Fi(o,sn({x:(i.x+1)/2,y:(i.y+1)/2},s))}const a=this.getPadding(),u=this.scale.Fi(o,{x:a.left,y:a.bottom}),l=this.getSize(t.UISpace.Content);return this.scale.Fi(u,sn({x:(i.x+1)/2,y:(i.y+1)/2},l))}setMouseInteractions(t){return this.backgroundElement.setMouseInteractions(t),this}getMouseInteractions(){return this.backgroundElement.getMouseInteractions()}getHighlight(){return this.Gl}setHighlight(t){return this.Gl=pr(t),this.backgroundElement.setHighlight(t),this.wt.emit("highlight",t),this}}const iu=t=>"setBackground"in t;class su extends Za{constructor(t,i,s,e,h,r,n,o,a,u,l){super(),this.l=0,this.Xl=1,this.Zl=!0,this.Kl=new Xn,this.ql=!0,this.Ye=!1,this.axisScale=e,this.renderingScale=h,this.Jl=n,this.Ql=o,this.tc=a,this.hn=u,this.ic=i,this.sc=s,this.hc=this.Il(this.ic.rc(this.renderingScale)),this.Hs=l,this.nc=this.Il(this.tc.oc(this.sc,this.renderingScale,r,_h,this.Hs,!1).setOrigin(Yh(this.Ql)).setDirection(this.Ql)),this.axis=t,this.setMouseInteractions(!1),"major"===this.nc.ac?this.hc.za(l.xAxisNumericTicks.majorTickStyle.gridStrokeStyle):"minor"===this.nc.ac?this.hc.za(l.xAxisNumericTicks.minorTickStyle.gridStrokeStyle):"other"===this.nc.ac&&this.hc.za(l.cursorGridStrokeStyleX)}setValue(t){return this.l=t,this.sc.Ss(),this.wt.emit("valueChange",this.l),this}getValue(){return this.l}setTextFormatter(t){return this.uc=t,this.sc.Ss(),this}setTickLength(t){return this.nc.setPointerLength(t),this.ic.Ss(),this}getTickLength(){return this.nc.getPointerLength()}setTickLabelPadding(t){return this.nc.setTickLabelPadding(t),this.ic.Ss(),this}setTickLabelRotation(t){return this.nc.setTextRotation(t),this.ic.Ss(),this}getTickLabelRotation(){return this.nc.getTextRotation()}getTickLabelPadding(){return this.nc.getTickLabelPadding()}setGridStrokeLength(t){return this.Xl=t,this.ic.Ss(),this}getGridStrokeLength(){return this.Xl}setGridStrokeStyle(t){return this.hc.za(t),this.ic.Ss(),this}getGridStrokeStyle(){return this.hc.Va()}dispose(){return this.Ye||(this.Ye=!0,this.hc.dispose(),this.nc.dispose(),this.hn(this),this.ic.vs.Ss(),this.wt.emit("dispose",this)),this}onDispose(t){return this.wt.on("dispose",t)}offDispose(t){return this.wt.off(t,"dispose")}setMarkerVisible(t){return this.Zl=t,this.sc.Ss(),this}getMarkerVisible(){return this.Zl}setMarker(t){return t(this.nc),this.sc.Ss(),this}getMarker(){return this.nc}setMouseInteractions(t){return this.nc.setMouseInteractions(t),this.hc.setMouseInteractions(t),this}getMouseInteractions(){return this.hc.getMouseInteractions()}setAllocatesAxisSpace(t){return this.ql=t,this.sc.Ss(),this}getAllocatesAxisSpace(){return this.ql}isInScale(){return Or(this.l,this.axisScale.getInnerStart(),this.axisScale.getInnerEnd())}onValueChange(t){return this.wt.on("valueChange",t)}offValueChange(t){return this.wt.off(t,"valueChange")}}class eu extends su{constructor(t,i,s,e,h,r,n,o,a,u,l){super(t,i,s,e,h,r,n,o,l,a,u),this.lc=!1,this.hn=a,this.ic=i,this.sc=s}dispose(){return this.lc=!1,super.dispose()}update(){return this}plot(t,i,s,e){if(this.isInScale()&&this.getVisible()){this.lc=!1;const h=nh(this.l,this.axisScale,this.Jl.getWidth(this.renderingScale));this.hc.setVisible(!0).Ua(this.Jl.toPoint(h,t)).Pa(this.Jl.toPoint(h,t-(s+i*this.Xl))),this.Zl?(this.uc&&this.nc.setText(this.uc(this.l,this)),this.nc.setVisible(!0).setPosition(this.Jl.toPoint(h,e))):this.nc.setVisible(!1)}else this.hc.setVisible(!1),this.nc.setVisible(!1);return this.nc._e().Nl(),this}cc(){const t=this.nc._e().getSize();return this.Jl.getHeight(t)}}var hu;t.HighlightModes=void 0,(hu=t.HighlightModes||(t.HighlightModes={}))[hu.noHighlighting=0]="noHighlighting",hu[hu.onHover=1]="onHover",hu[hu.onHoverIndividual=2]="onHoverIndividual";class ru{constructor(i,s,e,h){this.fc=!0,this.dc=t.HighlightModes.onHover,this.Ye=!1,this.xs=!0,this.gc=0,this.wt=new We,this.mc=[],this.yc=(t,i)=>{this.setVisible(i)},this.Sc=()=>this.setHighlight(1),this.vc=()=>this.setHighlight(0),this.onMouseEnter=t=>this.wt.on("mouseEnter",t),this.onMouseLeave=t=>this.wt.on("mouseLeave",t),this.onMouseClick=t=>this.wt.on("mouseClick",t),this.onMouseDoubleClick=t=>this.wt.on("mouseDoubleClick",t),this.onMouseDown=t=>this.wt.on("mouseDown",t),this.onMouseUp=t=>this.wt.on("mouseUp",t),this.onMouseMove=t=>this.wt.on("mouseMove",t),this.offMouseEnter=t=>this.wt.off(t,"mouseEnter"),this.offMouseLeave=t=>this.wt.off(t,"mouseLeave"),this.offMouseClick=t=>this.wt.off(t,"mouseClick"),this.offMouseDoubleClick=t=>this.wt.off(t,"mouseDoubleClick"),this.offMouseDown=t=>this.wt.off(t,"mouseDown"),this.offMouseUp=t=>this.wt.off(t,"mouseUp"),this.offMouseMove=t=>this.wt.off(t,"mouseMove"),this.offMouseDragStart=t=>this.wt.off(t,"mouseDragStart"),this.offMouseDrag=t=>this.wt.off(t,"mouseDrag"),this.offMouseDragStop=t=>this.wt.off(t,"mouseDragStop"),this.offMouseWheel=t=>this.wt.off(t,"mouseWheel"),this.bc=(t,i)=>{0===this.gc&&this.wt.emit("mouseEnter",this,i),this.xc()},this.Mc=(t,i)=>{1===this.gc&&this.wt.emit("mouseLeave",this,i),this._c()},this.wc=(t,i)=>{this.wt.emit("mouseMove",this,i),this.Ac()},this.kc=(t,i)=>this.wt.emit("mouseClick",this,i),this.Cc=(t,i)=>this.wt.emit("mouseDoubleClick",this,i),this.Tc=(t,i)=>this.wt.emit("mouseDown",this,i),this.Ic=(t,i)=>this.wt.emit("mouseUp",this,i),this.Fc=(t,i,s)=>{this.wt.emit("mouseDragStart",this,i,s)},this.Pc=(t,i,s,e,h)=>{this.wt.emit("mouseDrag",this,i,s,e,h)},this.Dc=(t,i,s,e)=>{this.wt.emit("mouseDragStop",this,i,s,e)},this.Bc=(t,i)=>{this.wt.emit("mouseWheel",this,i)},this.Oc=(t,i)=>{this.wt.emit("touchStart",this,i),this.xc()},this.Lc=(t,i)=>{this.wt.emit("touchMove",this,i),this.Ac()},this.Ec=(t,i)=>{this.wt.emit("touchEnd",this,i),this._c()},this.Du=i,this.Rc=s,this.Hs=e,this.Xe=new Map,this.zc=h,this.El=this.zc.Rl(this,{Vc:{themeEffectEnabled:this.Hs.effectsText},Nc:{}}),this.Du.vs.wr.th(this,(t=>{this.Xe.forEach(((i,s)=>s.dn(t))),this.mc.forEach((i=>{i.setHighlight(t)}))}),{animationEnabled:this.Du.getAnimationsEnabled()})}Gc(t,i){const s=void 0===(null==i?void 0:i.setEventHandlers)||i.setEventHandlers,e=void 0!==(null==i?void 0:i.isText)&&i.isText;this.Xe.set(t,{isText:e});const h=Array.from(this.Xe);this.El.Vc.Hc(h.filter((t=>t[1].isText)).map((t=>t[0]))),this.El.Nc.Hc(h.filter((t=>!t[1].isText)).map((t=>t[0]))),t.setMouseInteractions(this.fc).setVisible(this.xs).dn(this.getHighlight()),s&&t.setMouseEnterEventHandler(this.bc).setMouseLeaveEventHandler(this.Mc).setMouseClickEventHandler(this.kc).setMouseDoubleClickEventHandler(this.Cc).setMouseDownEventHandler(this.Tc).setMouseUpEventHandler(this.Ic).setMouseMoveEventHandler(this.wc).setMouseDragStartEventHandler(this.Fc).setMouseDragEventHandler(this.Pc).setMouseDragStopEventHandler(this.Dc).setMouseWheelEventHandler(this.Bc).setTouchStartEventHandler(this.Oc).setTouchMoveEventHandler(this.Lc).setTouchEndEventHandler(this.Ec)}Wc(t){this.Xe.delete(t)}setEffect(t){return this.El.Vc.ee(t&&this.Hs.effectsText),this.El.Nc.ee(t),this.Du.vs.Ss(),this}getEffect(){return this.El.Vc.re()||this.El.Nc.re()}onHighlight(t){return this.wt.on("highlight",t)}offHighlight(t){return this.wt.off(t)}setName(t){return this.dt=t,this.mc.forEach((t=>t.setText(this.dt))),this}getName(){return this.dt}dispose(){return this.Ye||(this.Ye=!0,this.Xe.forEach(((t,i)=>i.dispose())),this.Rc(this),this.mc.forEach((t=>{t.dispose()})),this.mc.length=0,this.wt.emit("dispose",this),this.Du.vs.Ss()),this}setVisible(t){return t===this.xs||(this.xs=t,this.Xe.forEach(((i,s)=>s.setVisible(t))),this.mc.forEach((i=>i.setOn(t))),this.wt.emit("visibleStateChanged",this,this.xs),this.Du.vs.Ss()),this}getVisible(){return this.xs}onVisibleStateChanged(t){return this.wt.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.wt.off(t,"visibleStateChanged")}setHighlight(t){return this.Du.vs.wr.ih(this,t),this.wt.emit("highlight",t),this}getHighlight(){return this.Du.vs.wr.sh(this)}setAnimationHighlight(t){return this.Du.vs.wr.eh(this,t),this}getAnimationHighlight(){return this.Du.vs.wr.hh(this)}setMouseInteractions(t){return this.fc=t,this.Xe.forEach(((i,s)=>s.setMouseInteractions(t))),this.Du.vs.Ss(),this}getMouseInteractions(){return this.fc}getIsUnderMouse(){return this.gc>0}setHighlightOnHover(i){return this.dc=i?t.HighlightModes.onHover:t.HighlightModes.noHighlighting,!1===i&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.dc!==t.HighlightModes.noHighlighting}attach(t,i=!0){t.setText(this.dt),t.setButtonOffStrokeStyle(t.getButtonOffStrokeStyle().setThickness(1)),t.setButtonOnStrokeStyle(t.getButtonOnStrokeStyle().setThickness(1));const s=t.getLocked();return t.setLocked(!1).setOn(this.getVisible()).setLocked(s),i&&t.onSwitch(this.yc),t.setLocked(!i),t.onMouseEnter(this.Sc),t.onMouseLeave(this.vc),this.onMouseEnter((()=>t.setHighlight(!0))),this.onMouseLeave((()=>t.setHighlight(!1))),this.onTouchStart((()=>t.setHighlight(!0))),this.onTouchEnd((()=>t.setHighlight(!1))),this.mc.push(t),this}onMouseDragStart(t){return this.wt.on("mouseDragStart",t)}onMouseDrag(t){return this.wt.on("mouseDrag",t)}onMouseDragStop(t){return this.wt.on("mouseDragStop",t)}onMouseWheel(t){return this.wt.on("mouseWheel",t)}onTouchStart(t){return this.wt.on("touchStart",t)}onTouchMove(t){return this.wt.on("touchMove",t)}onTouchEnd(t){return this.wt.on("touchEnd",t)}onDispose(t){return this.wt.on("dispose",t)}offTouchStart(t){return this.wt.off(t,"touchStart")}offTouchMove(t){return this.wt.off(t,"touchMove")}offTouchEnd(t){return this.wt.off(t,"touchEnd")}offDispose(t){return this.wt.off(t,"dispose")}xc(i=1){this.gc+=i,this.gc===i&&this.dc===t.HighlightModes.onHover&&this.setHighlight(!0)}_c(i=1){this.gc=Math.max(0,this.gc-i),0===this.gc&&this.dc===t.HighlightModes.onHover&&this.setHighlight(!1)}Ac(){}}class nu extends ru{constructor(t,i,s,e,h,r,n,o){super(i,s,n,o),this.Sn=t,this.axis=e,this.Jt=h,this.Uc=r,this.jc()}}class ou extends nu{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.dt="Band",this.$c=0,this.Yc=0,this._n=this.Hs.bandFillStyle,this.In=this.Hs.bandStrokeStyle,this.Xc=this.Sn.Zc(this.Jt).Js(this._n).Fr(this.In).dn(this.getHighlight()),this.Gc(this.Xc)}setValueStart(t){return this.$c=t,this.wt.emit("valueChange",this,this.$c,this.Yc),this.Sn.Ss(),this}getValueStart(){return this.$c}setValueEnd(t){return this.Yc=t,this.wt.emit("valueChange",this,this.$c,this.Yc),this.Sn.Ss(),this}getValueEnd(){return this.Yc}setFillStyle(t){this._n="function"==typeof t?t(this._n):t;const i=this._n;return this.Xc.Js(i),this.Sn.Ss(),this}getFillStyle(){return this._n}setStrokeStyle(t){this.In="function"==typeof t?t(this.In):t;const i=this.In;return this.Xc.Fr(i),this.Sn.Ss(),this}getStrokeStyle(){return this.In}onValueChange(t){return this.wt.on("valueChange",t)}offValueChange(t){return this.wt.off(t,"valueChange")}Nl(){return this.Xc.Qn(this.Uc.toVec2(this.$c,this.Uc.getHeight(this.Jt).getInnerStart())).Gt(this.Uc.toVec2(this.Yc-this.$c,this.Uc.getHeight(this.Jt).getInnerInterval())),this}attach(t,i){return super.attach(t,i),ar(t,this.Hs,{fill:this._n,stroke:this.In}),this}Kc(t,i){t.dn(i),this.Sn.Ss()}jc(){let i,s;const h=(t,e)=>{const h=oh(this.Sn.vs.uh(e.x,e.y),this.Sn.vs.Jt,this.Jt),r=this.Uc.getWidth(h),n=this.axis.Jt.qt(this.$c),o=this.axis.Jt.qt(this.Yc),a=(this.axis.Jt.qt(r)-n)/(o-n);i=!(a<.1||a>.9),!1===i&&(s=a<.5)},r=(t,e,h,r,n)=>{const o=this.Uc.getWidth(r);i?(this.$c=this.axis.Jt.Fi(this.$c,o),this.Yc=this.axis.Jt.Fi(this.Yc,o)):s?this.$c=this.axis.Jt.Fi(this.$c,o):this.Yc=this.axis.Jt.Fi(this.Yc,o),Zh(n),this.wt.emit("valueChange",this,this.$c,this.Yc),this.Sn.Ss()};this.onMouseMove(((s,r)=>{h(0,e(r.clientX,r.clientY));const n=i?t.MouseStyles.Point:this.Uc.getWidth({x:t.MouseStyles.Horizontal,y:t.MouseStyles.Vertical});this.qc=this.Du.engine.setMouseStyle(n,this.qc)})),this.onMouseLeave((()=>{this.Du.engine.restoreMouseStyle(this.qc),this.qc=void 0})),this.onMouseDrag(((t,i,s,e,h)=>{0===s&&r(0,0,0,h,i)}));const n=Ua(new $a(h,r));this.onTouchStart(n.onTouchStart),this.onTouchMove(n.onTouchMove),this.onTouchEnd(n.onTouchEnd)}}class au extends nu{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.dt="Constant Line",this.l=0,this.In=this.Hs.constantLineStrokeStyle,this.Jc=!0,this.Qc=this.Sn.rc(this.Jt).za(this.In).dn(this.getHighlight()),this.Gc(this.Qc)}setValue(t){return this.l=t,this.wt.emit("valueChange",this,this.l),this.Sn.Ss(),this}getValue(){return this.l}setStrokeStyle(t){this.In="function"==typeof t?t(this.In):t;const i=this.In;return this.Qc.za(i),this.Sn.Ss(),this}getStrokeStyle(){return this.In}setInteractionMoveByDragging(t){return this.Jc=t,this}getInteractionMoveByDragging(){return this.Jc}onValueChange(t){return this.wt.on("valueChange",t)}offValueChange(t){return this.wt.off(t,"valueChange")}Nl(){return this.Qc.Ua(this.Uc.toVec2(this.l,this.Uc.getHeight(this.Jt).getInnerStart())).Pa(this.Uc.toVec2(this.l,this.Uc.getHeight(this.Jt).getInnerEnd())),this}attach(t,i){return super.attach(t,i),ar(t,this.Hs,{stroke:this.In}),this}Kc(t,i){t.dn(i),this.Sn.Ss()}jc(){const i=(t,i)=>{this.Jc&&(this.l=this.axis.Jt.Fi(this.l,this.Uc.getWidth(i)),this.wt.emit("valueChange",this,this.l),this.Sn.Ss(),Zh(t))};this.onMouseMove((()=>{if(this.Jc){const i=this.Uc.getWidth({x:t.MouseStyles.Horizontal,y:t.MouseStyles.Vertical});this.qc=this.Du.engine.setMouseStyle(i,this.qc)}})),this.onMouseLeave((()=>{this.Jc&&(this.Du.engine.restoreMouseStyle(this.qc),this.qc=void 0)})),this.onMouseDrag(((t,s,e,h,r)=>{this.Jc&&0===e&&i(s,r)}));const s=Ua(new $a(void 0,((t,s,e,h,r)=>i(r,h))));this.onTouchStart(s.onTouchStart),this.onTouchMove(s.onTouchMove),this.onTouchEnd(s.onTouchEnd)}}const uu=(t,i)=>t.setTextFillStyle(i.uiTextFillStyle).setTextFont(i.uiTextFont),lu=(t,i)=>(ar(t.setButtonOffSize(i.uiButtonSize).setButtonOnSize(i.uiButtonSize),i,{fill:i.uiButtonFillStyle}),t),cu=(t,i,s)=>{s&&iu(t)&&t.setBackground((t=>t.setFillStyle(i.uiBackgroundFillStyle).setStrokeStyle(i.uiBackgroundStrokeStyle))).setEffect(!0)},fu={uiElement:void 0,stylers:hs(),addStyler(t){return{...this,stylers:this.stylers.push(t)}},applyStylers(t,i){return this.stylers.forEach((s=>void 0!==s?s(t,i):void 0)),t}},du={background:void 0,setBackground(t){return{...this,background:t}}},gu={oc(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,e,h),h);return cu(n,h,r),n}},mu={oc(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.background,e,h),h);return cu(n,h,r),n}};class yu extends Qa{constructor(){super(...arguments),this.tf=!0}Nl(){return super.Nl(),this}setMouseInteractions(t){return this.tf=t,this}getMouseInteractions(){return this.tf}Vl(){return[]}}class pu extends yu{onHighlight(t){return this.wt.on("highlight",t)}offHighlight(t){return this.wt.off(t)}Wl(t){return this.size=t,this}Ul(){return 0}jl(){return 0}Yl(){return 0}$l(){return 0}setHighlight(t){return this}getHighlight(){return 0}setFillStyle(){return this}getFillStyle(){return Ie}setStrokeStyle(){return this}getStrokeStyle(){return th}setStrokeThickness(){return this}getStrokeThickness(){return 0}}class Su extends pu{constructor(){super(...arguments),this.setSize=this.Wl.bind(this)}}class vu extends Qa{constructor(){super(...arguments),this._n=Ie,this.wt=new We,this.Gl=0}onHighlight(t){return this.wt.on("highlight",t)}offHighlight(t){return this.wt.off(t)}Vl(){return[this.mo]}setFillStyle(t){return this._n="function"==typeof t?t(this._n):t,this.mo.Js(this._n),this.Sn.Ss(),this}getFillStyle(){return this._n}getHighlight(){return this.Gl}setHighlight(t){return this.Gl=t,this.mo.dn(t),this.wt.emit("highlight",t),this.Sn.Ss(),this}setMouseInteractions(t){return this.mo.setMouseInteractions(t),this}getMouseInteractions(){return this.mo.getMouseInteractions()}dispose(){return super.dispose(),this.mo.dispose(),this}setVisible(t){return super.setVisible(t),this.mo.setVisible(t),this}}class bu extends vu{constructor(){super(...arguments),this.In=th}setStrokeStyle(t){return this.In="function"==typeof t?t(this.In):t,this.mo.Fr(this.In),this.Sn.Ss(),this}getStrokeStyle(){return this.In}}class xu extends bu{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Sn=t,this.mo=this.Sn.if(this.renderingScale,Xo.Simple).Fr(this.getStrokeStyle()).Js(this.getFillStyle()).setVisible(!1),this.Il(this.mo)}sf(){const t=this.ef();if(t.length>2){const i=Nr(t),s=e(i.max.x-i.min.x,i.max.y-i.min.y);this.setContentSize(s);const h=t.map((t=>{const h=Qr(t,Jr(i.min,-1));return this.scale.Fi(this.position,Qr(h,sn(Jr(Qr(this.origin,e(1,1)),-.5),s)))})).map((t=>oh(t,this.scale,this.renderingScale)));this.mo.jo(h).setVisible(this.getVisible()).setVisible(this.getVisible())}else this.mo&&this.mo.setVisible(!1),this.setContentSize(e(0,0))}Nl(){return super.Nl(),this.Ye||this.sf(),this}_e(){return this.sf(),super._e()}setVisible(t){return super.setVisible(t),this.mo.setVisible(t),this}}class Mu extends vu{constructor(t,i,s,e,h){super(t,i,s,e,h),this.On="label",this.mo=this.Sn.$e(this.renderingScale).Js(this._n).Ks(this.On),this.Il(this.mo)}Nl(){const i=this.getPosition(e(0,0),t.UISpace.Content),s=oh(i,this.scale,this.renderingScale);return this.mo.Qn(s),this}_e(){this.mo._e();const t=0===this.On.length?e(0,0):this.mo.hf();return this.setContentSize(t),super._e()}setText(t){return this.On=t,this.mo.Ks(this.On),this.Sn.Ss(),this}getText(){return this.On}setFont(t){return this.mo.te(t),this.Sn.Ss(),this}getFont(){return this.mo.Qs()}setTextRotation(t){return this.mo.ie(t),this.Sn.Ss(),this}getTextRotation(){return this.mo.se()}}const _u={...fu,...gu,uiElement:Mu};class wu extends bu{constructor(t,i,s,e,h){super(t,i,s,e,h),this.fitTo=this.Wl.bind(this),this.setSize=this.fitTo,this.mo=this.Sn.Zc(i).Js(this._n).Fr(this.getStrokeStyle()),this.Il(this.mo)}Nl(){const i=Nr([this.getPosition(e(-1,-1),t.UISpace.Content),this.getPosition(e(1,1),t.UISpace.Content)].map((t=>oh(t,this.scale,this.renderingScale)))),s={x:i.max.x-i.min.x,y:i.max.y-i.min.y};return this.mo.Gt(s).Qn(oh(this.getPosition(e(-1,-1),t.UISpace.Content),this.scale,this.renderingScale)),this}Wl(t){return this.setContentSize(t),this.Sn.Ss(),this}Ul(){return 0}jl(){return 0}Yl(){return 0}$l(){return 0}}class Au extends bu{constructor(t,i,s,h,r){super(t,i,s,h,r),this.rf=e(0,0),this.setSize=this.fitTo.bind(this),this.mo=t.nf(i).Fa(0).Pa(360).Js(this._n).Fr(this.getStrokeStyle()),this.Il(this.mo)}Nl(){const i=this.getSize(t.UISpace.Content).x/2;return this.mo.Ba(i*this.renderingScale.Qi().x).Oa(i*this.renderingScale.Qi().y).Qn(oh(this.getPosition(e(0,0),t.UISpace.Content),this.scale,this.renderingScale)).Ea(255)._e(),this}Wl(t){const i=Math.sqrt(t.x*t.x/4+t.y*t.y/4);return this.setContentSize(e(2*i,2*i)),this.rf=t,this.Sn.Ss(),this}Ul(){return(this.getSize(t.UISpace.Content).x-this.rf.x)/2}jl(){return(this.getSize(t.UISpace.Content).x-this.rf.x)/2}Yl(){return(this.getSize(t.UISpace.Content).y-this.rf.y)/2}$l(){return(this.getSize(t.UISpace.Content).y-this.rf.y)/2}fitTo(t){const i=Math.min(t.x,t.y);return this.setContentSize(e(i,i)),this.rf=t,this}}class ku extends xu{constructor(t,i,s,h,r){super(t,i,s,Xo.Simple,h,r),this.af=l(e(0,0)),this.uf=!1,this.setSize=this.fitTo.bind(this),this.Sn=t,this.sf()}ef(){const t=this.af.M();if(this.uf){const i=Math.min(t.x,t.y);return[e(0,0),e(i/2,i/2),e(0,i),e(-i/2,i/2)]}const i=2*Math.sqrt(this.af.M().x*this.af.M().x/4+this.af.M().y*this.af.M().y/4),s=e(Math.cos(Math.PI/4)*i,0),h=e(0,Math.sin(Math.PI/4)*i),r=e(0,0),n=Qr(r,Qr(s,h)),o=Qr(n,Qr(h,Jr(s,-1)));return[r,n,o,tn(o,Qr(s,h))]}Wl(t){return this.af.S(t),this.uf=!1,this.Sn.Ss(),this}Ul(){return this.uf?0:(this.getSize(t.UISpace.Content).x-this.af.M().x)/2}jl(){return this.uf?0:(this.getSize(t.UISpace.Content).x-this.af.M().x)/2}Yl(){return this.uf?0:(this.getSize(t.UISpace.Content).y-this.af.M().y)/2}$l(){return this.uf?0:(this.getSize(t.UISpace.Content).y-this.af.M().y)/2}fitTo(t){return this.af.S(t),this.uf=!0,this.Sn.Ss(),this}}class Cu extends xu{constructor(i,s,h,r,n){super(i,s,h,Xo.Simple,r,n),this.lf=l(e(0,0)),this.cf=l(10),this.ff=l(void 0),this.Ql=l(t.UIDirections.Right),this.sf()}setDirection(t){return this.Ql.S(t),this.Sn.Ss(),this}getDirection(){return this.Ql.M()}setPointerLength(t){return this.cf.S(t),this.Sn.Ss(),this}getPointerLength(){return this.cf.M()}setPointerAngle(t){return this.ff.S(t),this.Sn.Ss(),this}getPointerAngle(){let t=this.ff.M();if(void 0===t){const i=this.df();if(0===i)return 0;t=0!==i?180*Math.atan(2*this.getPointerLength()/i)/Math.PI:0}return Math.min(Math.max(t,1),89)}Wl(t){return this.lf.S(t),this.Sn.Ss(),this}gf(){const t=this.getPointerAngle();return 0===t?0:2*this.getPointerLength()/Math.tan(t*Math.PI/180)}mf(){return Xh(this.Ql.M())?this.lf.M().x:this.lf.M().y}df(){return Xh(this.Ql.M())?this.lf.M().y:this.lf.M().x}Ul(){switch(this.Ql.M()){case t.UIDirections.Right:return 0;case t.UIDirections.Left:return this.getPointerLength();case t.UIDirections.Up:case t.UIDirections.Down:return Math.max(0,this.gf()-this.df());default:return 0}}jl(){switch(this.Ql.M()){case t.UIDirections.Right:return this.getPointerLength();case t.UIDirections.Left:return 0;case t.UIDirections.Up:case t.UIDirections.Down:return Math.max(0,this.gf()-this.df());default:return 0}}Yl(){switch(this.Ql.M()){case t.UIDirections.Right:case t.UIDirections.Left:return Math.max(0,this.gf()-this.df());case t.UIDirections.Up:return this.getPointerLength();case t.UIDirections.Down:default:return 0}}$l(){switch(this.Ql.M()){case t.UIDirections.Right:case t.UIDirections.Left:return Math.max(0,this.gf()-this.df());case t.UIDirections.Up:return 0;case t.UIDirections.Down:return this.getPointerLength();default:return 0}}ef(){const t=Yh(this.Ql.M()),i=Kr(e(0,0),t),s=this.getPointerLength(),h=this.gf(),r=this.mf(),n=this.df();if(!(0!==s&&0!==h||0!==r&&0!==n))return[];const o=e(0,0),a=Qr(Qr(o,Jr(t,-s)),Jr(i,h/2)),u=Qr(a,Jr(i,(n-h)/2)),l=Qr(u,Jr(t,-r)),c=Qr(Qr(o,Jr(t,-s)),Jr(i,-h/2)),f=Qr(c,Jr(i,-(n-h)/2)),d=Qr(f,Jr(t,-r));let g;return g=0===r||0===n?[o,a,c]:0===s||0===h?[u,l,d,f]:wh(n,h)?[o,a,l,d,c]:[o,a,u,l,d,f,c],g}}class Tu extends yu{setSize(t){return this.setContentSize(t),this.Sn.Ss(),this}}class Iu extends tu{constructor(){super(...arguments),this.yf=[],this.pf=0,this.Sf=t=>{const i=this.yf.indexOf(t);i>=0&&this.yf.splice(i,1)}}getMembers(){return this.yf}getMemberCount(){return this.yf.length}setMinimumSize(t){return this.vf=t,this.Sn.Ss(),this}getMinimumSize(){return this.vf}addElement(t,i=-1){const s=t.oc(this.Sn,this.renderingScale,this.scale,this.Sf,this.Hs,!1);return s.setMouseInteractions(this.getMouseInteractions()),i>=0?this.yf.splice(i,0,s):this.yf.push(s),s.setVisible(this.getVisible()),this.Il(s),this.Ye&&(gr(0,(()=>{})),s.dispose()),s}dispose(){return super.dispose(),this.yf.slice().forEach(Mh),this}setVisible(t){return super.setVisible(t),this.yf.forEach((i=>i.setVisible(t))),this}setMouseInteractions(t){super.setMouseInteractions(t);for(let i=0;i<this.yf.length;i+=1)this.yf[i].setMouseInteractions(t);return this}getMouseInteractions(){if(super.getMouseInteractions())return!0;for(let t=0;t<this.yf.length;t+=1)if(this.yf[t].getMouseInteractions())return!0;return!1}setHighlight(t){super.setHighlight(t);for(let s=0;s<this.yf.length;s+=1){const e=this.yf[s];"getHighlight"in(i=e)&&"setHighlight"in i&&e.setHighlight(t)}var i;return this}}class Fu extends Iu{Nl(){super.Nl();const i=this.getPosition(e(-1,1),t.UISpace.Content),s=this.yf.reduce(((t,i)=>t+ +(i instanceof Tu)),0),h=s>0?(this.size.x-this.pf)/s:0;return this.yf.reduce(((t,s)=>s instanceof Tu?this.scale.Fi({x:t,y:i.y},{x:h+s.getSize().x,y:0}).x:s.setOrigin(e(-1,1)).setPosition(e(t,i.y)).Nl().getPosition(e(1,0)).x),i.x),this}_e(){for(let t=0;t<this.yf.length;t+=1){const i=this.yf[t];i instanceof Pu&&i.setMinimumSize(0),i._e()}const t=this.yf.reduce(this.bf.bind(this),h(0,0));this.pf=t.x;const i=void 0===this.vf?t:e(Math.max(t.x,this.vf),t.y);this.setContentSize(i);for(let t=0;t<this.yf.length;t+=1){const s=this.yf[t];s instanceof Pu&&s.setMinimumSize(i.y)._e()}return super._e()}bf(t,i){const s=i.getSize();return t.x+=s.x,t.y=Math.max(t.y,s.y),t}addGap(t=0,i=-1){return this.addElement(Du,i).setSize(e(0,t))}}class Pu extends Iu{Nl(){super.Nl();const i=this.getPosition(e(-1,1),t.UISpace.Content),s=this.yf.reduce(((t,i)=>t+ +(i instanceof Tu)),0),h=s>0?(this.size.y-this.pf)/s:0;return this.yf.reduce(((t,s)=>s instanceof Tu?this.scale.Fi({x:i.x,y:t},{x:0,y:-(h+s.getSize().y)}).y:s.setOrigin(e(-1,1)).setPosition(e(i.x,t)).Nl().getPosition(e(0,-1)).y),i.y),this}_e(){for(let t=0;t<this.yf.length;t+=1){const i=this.yf[t];i instanceof Fu&&i.setMinimumSize(0),i._e()}const t=this.yf.reduce(this.bf.bind(this),h(0,0));this.pf=t.y;const i=void 0===this.vf?t:e(t.x,Math.max(t.y,this.vf));this.setContentSize(i);for(let t=0;t<this.yf.length;t+=1){const s=this.yf[t];s instanceof Fu&&s.setMinimumSize(i.x)._e()}return super._e()}bf(t,i){const s=i.getSize();return t.y+=s.y,t.x=Math.max(t.x,s.x),t}addGap(t=0,i=-1){return this.addElement(Du,i).setSize(e(0,t))}}const Du={...fu,...gu,uiElement:Tu};class Bu extends Pu{constructor(){super(...arguments),this.yf=[]}addRow(){return this.addElement(Eu,void 0)}getRow(t,i=!1){return i&&this.yf.length<=t?(this.addRow(),this.getRow(t,!0)):this.yf[t]}}const Ou={...fu,...du,...mu},Lu={...Ou,uiElement:Pu,background:wu},Eu={...Ou,uiElement:Fu,background:wu},Ru={setTextLabel:null,setText(t){return this.setTextLabel.setText(t),this},getText(){return this.setTextLabel.getText()}},zu=(t,i)=>{const s={},e=`stylable${t}s`;return s[e]=i,s[`set${t}FillStyle`]=function(t){return this[e].forEach((i=>i.setFillStyle(t))),this},s[`get${t}FillStyle`]=function(){return this[e][0].getFillStyle()},s[`set${t}Font`]=function(t){return this[e].forEach((i=>i.setFont(t))),this},s[`get${t}Font`]=function(){return this[e][0].getFont()},s[`set${t}Rotation`]=function(t){return this[e].forEach((i=>i.setTextRotation(t))),this},s[`get${t}Rotation`]=function(){return this[e][0].getTextRotation()},s},Vu=zu("Text",[]),Nu={button:void 0,isLocked:!1,setOn(t){if(!this.isLocked){const i=this.button.getOn()!==t;this.button.setOn(t),i&&this.wt.emit("switch",t)}return this},getOn(){return this.button.getOn()},setLocked(t){return this.isLocked=t,this},getLocked(){return this.isLocked},onSwitch(t){return this.wt.on("switch",(i=>t(this,i)))},offSwitch(t){return this.wt.off(t,"switch")},setButtonOffFillStyle(t){return this.button.setOffFillStyle(t),this},getButtonOffFillStyle(){return this.button.getOffFillStyle()},setButtonOffStrokeStyle(t){return this.button.setOffStrokeStyle(t),this},getButtonOffStrokeStyle(){return this.button.getOffStrokeStyle()},setButtonOffSize(t){return this.button.setOffSize(t),this},getButtonOffSize(){return this.button.getOffSize()},setButtonOnFillStyle(t){return this.button.setOnFillStyle(t),this},getButtonOnFillStyle(){return this.button.getOnFillStyle()},setButtonOnStrokeStyle(t){return this.button.setOnStrokeStyle(t),this},getButtonOnStrokeStyle(){return this.button.getOnStrokeStyle()},setButtonOnSize(t){return this.button.setOnSize(t),this},getButtonOnSize(){return this.button.getOnSize()}},Gu={pointable:void 0,setDirection(t){return this.pointable.setDirection(t),this},getDirection(){return this.pointable.getDirection()},setPointerLength(t){return this.pointable.setPointerLength(t),this},getPointerLength(){return this.pointable.getPointerLength()}},Hu={...fu,...du,background:wu,oc(t,i,s,e,h,r){const n=new Fu(t,i,s,this.background,e,h),o=n.addElement(_u,void 0),a=Object.assign(n,Ru,{setTextLabel:o},Vu,{stylableTexts:[o]});return cu(a,h,r),this.applyStylers(a,h)}}.addStyler(uu),Wu={...fu,...du,background:Cu,oc(i,s,e,h,r,n){const o=new Fu(i,s,e,this.background,h,r),a=o.addElement(_u,void 0),u=o.getBackground(),l=Object.assign(o,Ru,{setTextLabel:a},Vu,{stylableTexts:[a]},Gu,{pointable:u},{setTickLabelPadding(i){return this.getDirection()===t.UIDirections.Up?this.setPadding({top:i}):this.getDirection()===t.UIDirections.Down?this.setPadding({bottom:i}):this.getDirection()===t.UIDirections.Right?this.setPadding({right:i}):this.getDirection()===t.UIDirections.Left&&this.setPadding({left:i}),this},getTickLabelPadding(){return this.getDirection()===t.UIDirections.Up?this.getPadding().top:this.getDirection()===t.UIDirections.Down?this.getPadding().bottom:this.getDirection()===t.UIDirections.Right?this.getPadding().right:this.getPadding().left}});return l.ac="other",l.setPointerLength(r.xAxisNumericTicks.majorTickStyle.getTickLength()).setTickLabelPadding(r.xAxisNumericTicks.majorTickStyle.getTickPadding()).setTextFont(r.uiTextFont).setTextFillStyle(r.uiTextFillStyle).setBackground((t=>t.setFillStyle(r.uiBackgroundFillStyle).setStrokeStyle(r.uiBackgroundStrokeStyle))),cu(l,r,n),this.applyStylers(l,r)}};class Uu extends Qa{constructor(t,i,s,e,h,r,n){super(t,i,s,r,n),this.Qu=!1,this.wt=new We,this.getOn=()=>this.Qu,this.xf=this.Il(new e(this.Sn,this.renderingScale,this.scale,_h,n)),this.Mf=this.Il(new h(this.Sn,this.renderingScale,this.scale,_h,n))}Vl(){return[...this.xf.Vl(),...this.Mf.Vl()]}onHighlight(t){return this.wt.on("highlight",t)}offHighlight(t){return this.wt.off(t)}setOn(t){return this.Qu=t,this.Sn.Ss(),this}setOffFillStyle(t){return this.xf.setFillStyle(t),this}getOffFillStyle(){return this.xf.getFillStyle()}setOffStrokeStyle(t){return this.xf.setStrokeStyle(t),this}getOffStrokeStyle(){return this.xf.getStrokeStyle()}setOffSize(t){return this.xf.fitTo("number"==typeof t?e(t,t):t),this}getOffSize(){return this.xf.getSize()}setOnFillStyle(t){return this.Mf.setFillStyle(t),this}getOnFillStyle(){return this.Mf.getFillStyle()}setOnStrokeStyle(t){return this.Mf.setStrokeStyle(t),this}getOnStrokeStyle(){return this.Mf.getStrokeStyle()}setOnSize(t){return this.Mf.fitTo("number"==typeof t?e(t,t):t),this}getOnSize(){return this.Mf.getSize()}Nl(){return super.Nl(),this.Qu?(this.xf.setVisible(!1),this.Mf.setVisible(this.getVisible()).setPosition(this.getPosition(e(0,0),t.UISpace.Content)).Nl()):(this.xf.setVisible(this.getVisible()).setPosition(this.getPosition(e(0,0),t.UISpace.Content)).Nl(),this.Mf.setVisible(!1)),this}_e(){const t=this.xf._e().getSize(),i=this.Mf._e().getSize();return this.setContentSize(e(Math.max(t.x,i.x),Math.max(t.y,i.y))),super._e()}dispose(){return super.dispose(),this.xf.dispose(),this.Mf.dispose(),this}setMouseInteractions(t){return this.Mf.setMouseInteractions(t),this.xf.setMouseInteractions(t),this}getMouseInteractions(){return this.Mf.getMouseInteractions()}setHighlight(t){const i=pr(t);return this.Mf.setHighlight(i),this.xf.setHighlight(i),this.wt.emit("highlight",t),this.Sn.Ss(),this}getHighlight(){return this.Mf.getHighlight()}}const ju={...fu,uiElement:Uu,pictureOff:Au,pictureOn:Au,setPictureOff(t){return{...this,pictureOff:t}},setPictureOn(t){return{...this,pictureOn:t}},oc(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.pictureOff,this.pictureOn,e,h),h);return cu(n,h,r),n}},$u={...fu,...du,background:wu,buttonBuilder:ju,setPictureOff(t){return{...this,buttonBuilder:this.buttonBuilder.setPictureOff(t)}},setPictureOn(t){return{...this,buttonBuilder:this.buttonBuilder.setPictureOn(t)}},oc(i,s,e,h,r,n){const o=new Fu(i,s,e,this.background,h,r),a=o.addElement(Lu);a.addGap();const u=a.addElement(this.buttonBuilder);a.addGap();const l=o.addElement(Lu);l.addGap();const c=l.addElement(_u);l.addGap(),o.addGap();const f=Object.assign(o,Ru,{setTextLabel:c},Vu,{stylableTexts:[c]},Nu,{button:u});return f.onMouseClick(((t,i)=>{f.setOn(!f.getOn())})),f.onMouseEnter((()=>f.setHighlight(!0))),f.onMouseLeave((()=>f.setHighlight(!1))),f.setMouseStyle(t.MouseStyles.Point),f.setPadding({left:6}),cu(f,r,n),this.applyStylers(f,r)}}.addStyler(uu).addStyler(lu);class Yu extends Qa{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this._f=[],this.wf=2,this.Af="",this.kf=(t,i)=>void 0!==t.label?t.label:_n(t.value,i.min,i.max),this.Cf=0,this.Tf=0,this.If=!1,this.Sn=t,this.Ff=r,this.Pf=this.Il(t.Zc(i).Fr(th)),this.Df=this.Il(t.$e(i).Js(h.uiTextFillStyle).te(h.uiTextFont).setMouseInteractions(!1)),"vertical"===r?(this.Bf=140,this.Of=25):(this.Bf=160,this.Of=15)}Vl(){return[this.Pf,this.Df]}Lf(t){this.Ef=t;const i=Ku(t,"vertical"===this.Ff?0:90,this.If);return this.Pf.Js(i),this.Sn.Ss(),this}Rf(){return this.Ef}zf(t){return this.Bf=t,this.Sn.Ss(),this}Vf(){return this.Bf}Nf(t){return this.Of=t,this.Sn.Ss(),this}Gf(){return this.Of}Hf(t){return this.Af=t,this.Sn.Ss(),this}Wf(){return this.Af}Uf(t){return this.kf=t,this.Sn.Ss(),this}setLUTDisplayProportionalSteps(t){if(this.If=t,this.Ef){const t=Ku(this.Ef,"vertical"===this.Ff?0:90,this.If);this.Pf.Js(t)}return this.Sn.Ss(),this}getLUTDisplayProportionalSteps(){return this.If}setFillStyle(t){return this.Df.Js(t),this.Sn.Ss(),this}getFillStyle(){return this.Df.qs()}setFont(t){return this.Df.te(t),this.Sn.Ss(),this}getFont(){return this.Df.Qs()}setTextRotation(t){return this.Tf=t,this.Df.ie(t),this.Sn.Ss(),this}getTextRotation(){return this.Df.se()}Nl(){var i,s,e,h;if(super.Nl(),this.Ye)return this;const r=this.Ef;if(r){const n=this.renderingScale.Qi(),o=r.min,a=r.max;if("vertical"===this.Ff){const e=this.getPosition({x:-1,y:-1},t.UISpace.Content),h=Qr(e,{x:this.Pf.xi().x+this.wf*n.x,y:0}),u={x:h.x,y:h.y+(this.Af.length>0?this.Cf*n.y+this.Df.xi().y:0)+.5*((null===(i=this._f[0])||void 0===i?void 0:i.xi().y)||0)},l={x:u.x,y:this.getPosition({x:-1,y:1},t.UISpace.Content).y-.5*((null===(s=this._f[this._f.length-1])||void 0===s?void 0:s.xi().y)||0)};this.Pf.Qn({x:e.x,y:u.y}),this.Df.ao({x:-1,y:-1}).Qn(h),r.getSteps().forEach(((t,i)=>{const s=zr(u,l,this.If?!0===r.getInterpolation()?(t.value-o)/(a-o):.9*(t.value-o)/(a-o):!0===r.getInterpolation()?i/(r.getSteps().length-1):i/r.getSteps().length);this._f[i].ao({x:-1,y:0}).Qn(s)}))}else{const i=this.getPosition({x:-1,y:-1},t.UISpace.Content),s=this.getPosition({x:1,y:1},t.UISpace.Content),u=this._f.reduce(((t,i)=>Math.max(t,i.xi().y)),0),l=Qr(i,{x:.5*((null===(e=this._f[0])||void 0===e?void 0:e.xi().x)||0),y:u}),c={x:s.x,y:l.y},f={x:c.x-(.5*((null===(h=this._f[this._f.length-1])||void 0===h?void 0:h.xi().x)||0)+(this.Af.length>0?this.Cf*n.x+this.Df.xi().x:0)),y:l.y},d={x:l.x,y:l.y+this.wf*n.y};this.Pf.Qn(d),this.Df.ao({x:1,y:1}).Qn(c),r.getSteps().forEach(((t,i)=>{const s=zr(l,f,this.If?!0===r.getInterpolation()?(t.value-o)/(a-o):.9*(t.value-o)/(a-o):!0===r.getInterpolation()?i/(r.getSteps().length-1):i/r.getSteps().length);this._f[i].ao({x:0,y:1}).Qn(s)}))}}return this}_e(){if(this.Ef&&this.getVisible()){const t=this.Ef.getSteps();for(let i=this._f.length;i<t.length;i+=1)this._f.push(this.Il(this.Sn.$e(this.renderingScale).setMouseInteractions(!1)));for(let i=0;i<t.length;i+=1)this._f[i].Js(this.Df.qs()).te(this.Df.Qs()).Ks(this.kf(t[i],this.Ef)).ie(this.Tf);for(let i=t.length;i<this._f.length;i+=1)this._f[i].dispose();if(this._f.length=t.length,this.Df.Ks(this.Af),"vertical"===this.Ff){const t=this.Of,i=this.Bf;this.Pf.Gt({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=t+Math.max(this._f.reduce(((t,i)=>Math.max(t,i._e().hf().x)),0),this.Df._e().hf().x),e=(this.Af.length>0?this.Cf+this.Df._e().hf().y:0)+i+.5*this._f[0]._e().hf().y+.5*this._f[this._f.length-1]._e().hf().y;this.setContentSize({x:s,y:e})}else{const t=this.Bf,i=this.Of;this.Pf.Gt({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=Math.max(this.Af.length>0?this.Cf+this.Df._e().hf().x:0,.5*this._f[this._f.length-1]._e().hf().x),e=t+.5*this._f[0]._e().hf().x+s,h=i+this.wf+this._f.reduce(((t,i)=>Math.max(t,i._e().hf().y)),0);this.setContentSize({x:e,y:h})}}else this._f.forEach((t=>t.dispose())),this._f.length=0,this.Df.setVisible(!1),this.Pf.setVisible(!1),this.setContentSize({x:0,y:0});return super._e()}dispose(){return super.dispose(),this.Pf.dispose(),this._f.forEach(Mh),this.Df.dispose(),this}setMouseInteractions(t){return this.Pf.setMouseInteractions(t),this}getMouseInteractions(){return this.Pf.getMouseInteractions()}}const Xu={lutElement:{},setLUT(t){return this.lutElement.Lf(t),this},getLUT(){return this.lutElement.Rf()},setLUTLength(t){return this.lutElement.zf(t),this},getLUTLength(){return this.lutElement.Vf()},setLUTThickness(t){return this.lutElement.Nf(t),this},getLUTThickness(){return this.lutElement.Gf()},setLookUpUnit(t){return this.lutElement.Hf(t),this},getLookUpUnit(){return this.lutElement.Wf()},setLUTStepValueFormatter(t){return this.lutElement.Uf(t),this},setLUTDisplayProportionalSteps(t){return this.lutElement.setLUTDisplayProportionalSteps(t),this},getLUTDisplayProportionalSteps(){return this.lutElement.getLUTDisplayProportionalSteps()}},Zu={...fu,...du,background:wu,alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},oc(t,i,s,e,h,r){const n=new Pu(t,i,s,this.background,e,h),o=n.addElement({oc:()=>new Yu(t,i,s,_h,h,this.alignment)}),a=Object.assign(n,Vu,{stylableTexts:[o]},Xu,{lutElement:o});return cu(a,h,r),this.applyStylers(a,h)}}.addStyler(uu),Ku=(t,i,s)=>{const e=t.getSteps(),h=t.min,r=t.max-h;if(!0===t.getInterpolation())return new Je({angle:i,stops:e.map(((i,n)=>({offset:s?(i.value-h)/r:n/(e.length-1),color:i.color||t.color})))});const n=[];for(let i=0;i<e.length;i+=1){const o=e[i];n.push({offset:s?.9*(o.value-h)/r:i/e.length,color:o.color||t.color});const a=i<e.length-1?e[i+1]:void 0;n.push({offset:s?a?.9*(a.value-h)/r:1:a?(i+1)/e.length:1,color:o.color||t.color})}return new Je({angle:i,stops:n})},qu={...fu,...du,background:wu,buttonBuilder:ju,setPictureOff(t){return{...this,buttonBuilder:this.buttonBuilder.setPictureOff(t)}},setPictureOn(t){return{...this,buttonBuilder:this.buttonBuilder.setPictureOn(t)}},alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},oc(i,s,e,h,r){const n=new Pu(i,s,e,this.background,h,r),o=n.addElement(Eu),a=o.addElement(Lu);a.addGap();const u=a.addElement(this.buttonBuilder);a.addGap();const l=o.addElement(Lu);l.addGap();const c=l.addElement(_u);l.addGap();const f=n.addElement({oc:()=>new Yu(i,s,e,_h,r,this.alignment)});"vertical"===this.alignment&&f.setMargin({left:r.uiButtonSize+6});const d=Object.assign(n,Ru,{setTextLabel:c},Vu,{stylableTexts:[c,f]},zu("LUTText",[f]),Nu,{button:u},Xu,{lutElement:f});return d.onMouseClick((()=>{d.setOn(!d.getOn())})),d.onMouseEnter((()=>d.setHighlight(!0))),d.onMouseLeave((()=>d.setHighlight(!1))),d.setMouseStyle(t.MouseStyles.Point),d.setPadding({left:6}),this.applyStylers(d,r)}}.addStyler(uu).addStyler(lu),Ju={alignment:null,title:null,entryStylers:null,legendBoxDisposed:null,entries:[],add(t,i){const s=!i||"object"!=typeof i||void 0===i.toggleVisibilityOnClick||i.toggleVisibilityOnClick,e=i&&"object"==typeof i&&void 0!==i.builder?i.builder:void 0;return this.legendBoxDisposed()||(t instanceof Ml?this.addChart(t,s,e):"attach"in t?this.addAttachable(t,s,e):t&&this.addDashboard(t,s,e)),this},addAttachable(t,i,s){const e=t.Rf&&t.Rf();let h=s;h||(h=e?qu.setAlignment(this.alignment):$u);const r=this.addElement(h);if(e&&"setLUT"in r){r.setLUT(e.lut);const t=e.lut.getUnits(),i=e.lookUpProperty,s=t.length>0?t:"x"===i?"x":"y"===i?"y":"z"===i?"z":"";r.setLookUpUnit(s)}return this.entryStylers.forEach((t=>t(r))),this.entries.push({entry:r,component:t}),t.attach(r,i),this},addChart(t,i,s){return t.jf().forEach((t=>this.addAttachable(t,i,s))),this},addDashboard(t,i,s){return t.getCells().filter((t=>t.panel instanceof Ml)).forEach((t=>this.addChart(t.panel,i,s))),this},setTitle(t){return this.title.setText(t),this},getTitle(){return this.title.getText()},setTitleFillStyle(t){return this.title.setTextFillStyle(t),this},getTitleFillStyle(){return this.title.getTextFillStyle()},setTitleFont(t){return this.title.setTextFont(t),this},getTitleFont(){return this.title.getTextFont()},setTitleRotation(t){return this.title.setTextRotation(t),this},getTitleRotation(){return this.title.getTextRotation()},setEntries(t){return this.entries.forEach((i=>t(i.entry,i.component))),this}},Qu={alignment:"vertical",layoutBuilder:Lu,setAlignment(t){return{...this,alignment:t,layoutBuilder:"horizontal"===t?Eu:Lu}},getAlignment(){return this.alignment},titleBuilder:Hu,styleTitle(t){return{...this,titleBuilder:this.titleBuilder.addStyler(t)}},entryStylers:[],styleEntries(t){return{...this,entryStylers:[...this.entryStylers,t]}}},tl={...fu,...du,...Qu,background:wu,oc(t,i,s,e,h,r){const n=this.layoutBuilder.setBackground(this.background).oc(t,i,s,e,h,!1);let o=Object.assign(n,Ju,{alignment:this.alignment,entryStylers:this.entryStylers,legendBoxDisposed:()=>n.Ye});o.entries=[];const a=o.addElement("horizontal"===this.alignment?Lu:Eu),u=a.addElement(this.titleBuilder).setText("Legend").setTextFillStyle(h.legendTitleFillStyle).setTextFont(h.legendTitleFont);return a.addGap(),o=Object.assign(o,{title:u}),"horizontal"===this.alignment&&u.setMargin({right:6}),cu(o,h,r),this.applyStylers(o,h)}}.addStyler(((t,i)=>t.setPadding(5)));class il extends Qa{constructor(i,s,e,h,r){super(i,s,e,h,r),this.$f=10,this.Yf=t.UIDirections.Up,this.Xf=0,this.ac="major",this.On=this.Il(i.$e(this.renderingScale)),this.Qc=this.Il(i.rc(this.renderingScale))}Vl(){return[this.On]}Nl(){if(super.Nl(),this.Ye)return this;const i=oh(this.getPosition(),this.scale,this.renderingScale),s=this.renderingScale.Fi(i,{x:this.Yf===t.UIDirections.Right?-this.$f:this.Yf===t.UIDirections.Left?this.$f:0,y:this.Yf===t.UIDirections.Up?-this.$f:this.Yf===t.UIDirections.Down?this.$f:0}),e=this.renderingScale.Fi(s,{x:this.Yf===t.UIDirections.Right?-this.Xf:this.Yf===t.UIDirections.Left?this.Xf:0,y:this.Yf===t.UIDirections.Up?-this.Xf:this.Yf===t.UIDirections.Down?this.Xf:0});return this.Qc.Ua(i).Pa(s),this.On.Qn(e).ao(this.Yf===t.UIDirections.Up?{x:0,y:1}:this.Yf===t.UIDirections.Down?{x:0,y:-1}:this.Yf===t.UIDirections.Right?{x:1,y:0}:{x:-1,y:0}),this}_e(){const i=this.Qc.Va(),s=i instanceof sh?i.getThickness():0;return this.size=this.Yf===t.UIDirections.Left||this.Yf===t.UIDirections.Right?{x:this.$f+this.Xf+this.On._e().hf().x,y:s}:{y:this.$f+this.Xf+this.On._e().hf().y,x:s},super._e()}dispose(){return super.dispose(),this.On.dispose(),this.Qc.dispose(),this}setVisible(t){return super.setVisible(t),this.On.setVisible(t),this.Qc.setVisible(t),this}setMouseInteractions(t){return this.On.setMouseInteractions(t),this.Qc.setMouseInteractions(t),this}getMouseInteractions(){return this.On.getMouseInteractions()}getText(){return this.On.Xs()}setTextFillStyle(t){return this.On.Js(t),this.Sn.Ss(),this}getTextFillStyle(){return this.On.qs()}setTextFont(t){return this.On.te(t),this}setTextRotation(t){return this.On.ie(t),this}getTextRotation(){return this.On.se()}getTextFont(){return this.On.Qs()}setText(t){return this.On.Ks(t),this.Sn.Ss(),this}setDirection(t){return this.Yf=t,this.Sn.Ss(),this}getDirection(){return this.Yf}setPointerLength(t){return this.$f=t,this.Sn.Ss(),this}getPointerLength(){return this.$f}setTickLabelPadding(t){return this.Xf=t,this.Sn.Ss(),this}getTickLabelPadding(){return this.Xf}setTickStyle(t){return this.Qc.za(t),this.Sn.Ss(),this}getTickStyle(){return this.Qc.Va()}}const sl={...fu,oc(t,i,s,e,h,r){const n=new il(t,i,s,e,h);return cu(n,h,r),this.applyStylers(n,h)}}.addStyler(uu),el=sl.addStyler(((t,i)=>(t.ac="major",t.setPointerLength(i.xAxisNumericTicks.majorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.majorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.majorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.majorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.majorTickStyle.labelFillStyle)))),hl=sl.addStyler(((t,i)=>(t.ac="minor",t.setPointerLength(i.xAxisNumericTicks.minorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.minorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.minorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.minorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.minorTickStyle.labelFillStyle)))),rl=$u.addStyler((t=>t.onSwitch(((i,s)=>!0===s?setTimeout((()=>t.setOn(!1)),300):void 0)))),nl=tl.setAlignment("horizontal"),ol=tl.setAlignment("vertical"),al={TextBox:Hu,CheckBox:$u,ButtonBox:rl,PointableTextBox:Wu,AxisTickMajor:el,AxisTickMinor:hl,LUTRange:Zu},ul={HorizontalLegendBox:nl,VerticalLegendBox:ol};class ll extends Un{constructor(t,i,s,e,h,r,n){super(t,i,s,e,n),this.Zf=h,this.Kf=r}}const cl=(t,i,s)=>Ah(t+.1*(i-t)+.5*s.getPixelSize()*Math.sign(i-t),t,i),fl=(t,i,s)=>{const e=s.qt(t),h=s.qt(i);return Ah(s.Kt(e+.1*(h-e)+.5*Math.sign(h-e)),t,i)};class dl extends Wn{constructor(i,s,h,r,n,o,a,u,l,c,f,d,g,m,y,p,S){var v;super(f,c,u,y,p,{numeric:c.getWidth({x:y.xAxisNumericTicks,y:y.yAxisNumericTicks}),datetime:c.getWidth({x:y.xAxisDateTimeTicks,y:y.yAxisDateTimeTicks}),time:c.getWidth({x:y.xAxisTimeTicks,y:y.yAxisTimeTicks})},S),this.qf=new Map,this.Jf=void 0,this.Qf=0,this.td=[],this.sd=[],this.gs=Pn.fitting,this.ed=!0,this.hd=0,this.rd=8,this.nd=void 0,this.od=void 0,this.ad=20,this.ud=1,this.ld=!0,this.fd=!0,this.dd=!0,this.gd=!0,this.md=!0,this.yd=!0,this.pd=!0,this.Sd=!0,this.vd=!0,this.bd=!0,this.xd=this.Gs.defaultDragMouseStyle,this.Md=this.Gs.defaultDragMouseStyle,this._d=this.Gs.defaultDragMouseStyle,this.wd=this.Gs.defaultDragMouseStyle,this.Ad=this.Gs.defaultDragMouseStyle,this.wt=new We,this.kd=[],this.Cd=t=>{const i=this.sd.indexOf(t);i>=0&&this.sd.splice(i,1)},this.Td=t=>(this.sd.indexOf(t)<0&&this.sd.push(t),this.Cd),this.Oc=(t,i)=>this.wt.emit("axisAreaTouch",this,i),this.Id=Jh(this.kd),this.onAxisInteractionAreaMouseClick=t=>this.wt.on("axisAreaMouseClick",t),this.onAxisInteractionAreaMouseDoubleClick=t=>this.wt.on("axisAreaDoubleClick",t),this.onAxisInteractionAreaMouseDown=t=>this.wt.on("axisAreaMouseDown",t),this.onAxisInteractionAreaMouseUp=t=>this.wt.on("axisAreaMouseUp",t),this.onAxisInteractionAreaMouseEnter=t=>this.wt.on("axisAreaMouseEnter",t),this.onAxisInteractionAreaMouseLeave=t=>this.wt.on("axisAreaMouseLeave",t),this.onAxisInteractionAreaMouseMove=t=>this.wt.on("axisAreaMouseMove",t),this.onAxisInteractionAreaMouseWheel=t=>this.wt.on("axisAreaMouseWheel",t),this.onAxisInteractionAreaMouseDragStart=t=>this.wt.on("axisAreaMouseDragStart",t),this.onAxisInteractionAreaMouseDrag=t=>this.wt.on("axisAreaMouseDrag",t),this.onAxisInteractionAreaMouseDragStop=t=>this.wt.on("axisAreaMouseDragStop",t),this.onAxisInteractionAreaTouchStart=t=>this.wt.on("axisAreaTouchStart",t),this.onAxisInteractionAreaTouch=t=>this.wt.on("axisAreaTouch",t),this.onAxisInteractionAreaTouchStop=t=>this.wt.on("axisAreaTouchEnd",t),this.offAxisInteractionAreaMouseClick=t=>this.wt.off(t,"axisAreaMouseClick"),this.offAxisInteractionAreaMouseDoubleClick=t=>this.wt.off(t,"axisAreaDoubleClick"),this.offAxisInteractionAreaMouseDown=t=>this.wt.off(t,"axisAreaMouseDown"),this.offAxisInteractionAreaMouseUp=t=>this.wt.off(t,"axisAreaMouseUp"),this.offAxisInteractionAreaMouseEnter=t=>this.wt.off(t,"axisAreaMouseEnter"),this.offAxisInteractionAreaMouseLeave=t=>this.wt.off(t,"axisAreaMouseLeave"),this.offAxisInteractionAreaMouseMove=t=>this.wt.off(t,"axisAreaMouseMove"),this.offAxisInteractionAreaMouseWheel=t=>this.wt.off(t,"axisAreaMouseWheel"),this.offAxisInteractionAreaMouseDragStart=t=>this.wt.off(t,"axisAreaMouseDragStart"),this.offAxisInteractionAreaMouseDrag=t=>this.wt.off(t,"axisAreaMouseDrag"),this.offAxisInteractionAreaMouseDragStop=t=>this.wt.off(t,"axisAreaMouseDragStop"),this.offAxisInteractionAreaTouchStart=t=>this.wt.off(t,"axisAreaTouchStart"),this.offAxisInteractionAreaTouch=t=>this.wt.off(t,"axisAreaTouch"),this.offAxisInteractionAreaTouchStop=t=>this.wt.off(t,"axisAreaTouchEnd"),this.Fd=(t,i)=>i.getAllocatesAxisSpace()?Math.max(t,i.update().cc()):t,this.Pd=t=>{const i=this.td.indexOf(t);-1!==i&&this.td.splice(i,1)},this.Dd=(t,i)=>{this.wt.emit("axisAreaDoubleClick",this,i),this.gd&&(this.setStopped(!1),Zh(i))},this.Bd=t=>{this.wt.emit("axisAreaMouseEnter",this),(this.fd||this.ld||this.dd||this.gd)&&this.Od(t)},this.Ld=t=>{this.Ed(t),this.wt.emit("axisAreaMouseLeave",this)},this.Rd=(t,i,s)=>{var h,r;this.wt.emit("axisAreaMouseDragStart",this,i,s);const n=Ph(null===(h=this.chart.zd.dr)||void 0===h?void 0:h.axisXYZoomMouseButton,0),o=Ph(null===(r=this.chart.zd.dr)||void 0===r?void 0:r.axisXYPanMouseButton,2),a=e(i.clientX,i.clientY);s===o&&this.fd?(this.Vd(t),Zh(i)):s===n&&this.ld&&(this.Nd(t,a),Zh(i))},this.Gd=(t,i,s,h,r)=>{var n,o;this.wt.emit("axisAreaMouseDrag",this,i,s,h,r);const a=Ph(null===(n=this.chart.zd.dr)||void 0===n?void 0:n.axisXYZoomMouseButton,0),u=Ph(null===(o=this.chart.zd.dr)||void 0===o?void 0:o.axisXYPanMouseButton,2),l=e(i.clientX,i.clientY);s===u&&this.fd?(this.Hd(t,r),Zh(i)):s===a&&this.ld&&(this.Wd(t,h,l,r),Zh(i))},this.Ud=(t,i,s,h)=>{var r,n;this.wt.emit("axisAreaMouseDragStop",this,i,s,h);const o=Ph(null===(r=this.chart.zd.dr)||void 0===r?void 0:r.axisXYZoomMouseButton,0),a=Ph(null===(n=this.chart.zd.dr)||void 0===n?void 0:n.axisXYPanMouseButton,2),u=e(i.clientX,i.clientY);s===a&&this.fd?(this.jd(t),Zh(i)):s===o&&this.ld&&(this.$d(t,h,u),Zh(i)),t.getIsUnderMouse()&&(this.fd||this.ld||this.dd||this.gd)&&this.Od(t)},this.Yd=(t,i)=>{if(this.wt.emit("axisAreaMouseWheel",this,i),this.dd){this.setStopped(!0);const t=this.Gs.getWidth(this.Xd.vs.uh(i.clientX,i.clientY)),s=this.Jt.Kt(t);this.zoom(s,dr(i)),Zh(i)}},this.Zd=(t,i)=>this.wt.emit("axisAreaMouseClick",this,i),this.Kd=(t,i)=>this.wt.emit("axisAreaMouseDown",this,i),this.qd=(t,i)=>this.wt.emit("axisAreaMouseUp",this,i),this.Jd=(t,i)=>this.wt.emit("axisAreaMouseMove",this,i),this.Qd=(t,i,s)=>{this.wt.emit("axisAreaTouchStart",this,s),this.ld&&(this.Od(t),this.Nd(t,i),Zh(s))},this.tg=(t,i,s,e,h)=>{this.wt.emit("axisAreaTouch",this,h),this.ld&&(this.Wd(t,i,s,e),Zh(h))},this.ig=(t,i,s,e)=>{this.wt.emit("axisAreaTouchEnd",this,e),this.ld&&(this.$d(t,i,s),this.Ed(t),Zh(e))},this.sg=(t,i,s,e)=>{(this.fd||this.dd)&&(this.Od(t),this.Vd(t),Zh(e))},this.eg=(t,i,s,h,r,n)=>{if(this.fd){const i=e((h.x+r.x)/2,(h.y+r.y)/2);this.Hd(t,i),Zh(n)}if(this.dd){const t=this.Xd.vs.uh(i.x,i.y),e=this.Xd.vs.uh(s.x,s.y),o=Math.abs(this.Gs.getWidth(tn(t,h))-this.Gs.getWidth(tn(e,r)))-Math.abs(this.Gs.getWidth(t)-this.Gs.getWidth(e)),a=this.Jt.Fi(this.$s,-o),u=this.Jt.Fi(this.Ys,o);this.Ns(a,u),Zh(n)}},this.hg=(t,i,s,e)=>{(this.fd||this.dd)&&(this.jd(t),this.Ed(t),Zh(e))},this.rg=(t,i)=>{(this.md||this.yd)&&this.ng(t)},this.og=(t,i)=>{this.ag(t)},this.ug=(t,i,s)=>{const h=e(i.clientX,i.clientY);this.md&&this.lg(t,h)},this.cg=(t,i,s,h,r)=>{const n=e(i.clientX,i.clientY);this.md&&this.dg(t,n,h,r)},this.gg=(t,i,s,h,r)=>{const n=e(i.clientX,i.clientY);this.md&&this.mg(t,n,h,r)},this.yg=(t,i,s,h)=>{const r=e(i.clientX,i.clientY);(this.md||this.yd)&&this.pg(t,r,h),(this.md||this.yd)&&this.ng(t)},this.Sg=(t,i)=>{this.yd&&(this.setStopped(!0),this.zoom(this.$s,dr(i)),Zh(i))},this.vg=(t,i)=>{this.yd&&(this.setStopped(!0),this.zoom(this.Ys,dr(i)),Zh(i))},this.bg=(t,i,s)=>{this.md&&(this.ng(t),this.lg(t,i),Zh(s))},this.xg=(t,i,s,e,h)=>{this.md&&(this.dg(t,i,s,e),Zh(h))},this.Mg=(t,i,s,e,h)=>{this.md&&(this.mg(t,i,s,e),Zh(h))},this._g=(t,i,s,e)=>{this.md&&(this.pg(t,i,s),this.ag(t),Zh(e))},this.Zf=i,this.wg=s,this.Xd=h,this.Ag=n,this.kg=o,this.chart=f,this.Cg=g,this.Tg=r,this.zc=a,m(this,this.Td),u.Ig=this,this.Fg=d,this.Pg=this.Fg>50?1:-1,this.Dg=(v=this.Gs.toPoint(0,-this.Pg),Math.abs(v.x)>=Math.abs(v.y)?v.x>=0?t.UIDirections.Right:t.UIDirections.Left:v.y>=0?t.UIDirections.Up:t.UIDirections.Down),this.Bg=l,this.Og=this.Jt instanceof kn?(new In).$i(this.Gs.toVec2(this.Jt,this.Bg)):(new Fn).$i(this.Gs.toVec2(this.Jt,this.Bg)),this.Lg=this.chart.pixelScale,this.Eg=(new In).$i(this.Gs.toVec2(this.Gs.getWidth(this.Lg),this.Bg)),this.Rg=this.Xd.rc(this.Og).setMouseInteractions(!1),this.zg=this.Xd.rc(this.Og).setMouseInteractions(!1),this.Vg=this.Xd.rc(this.Og).setMouseInteractions(!1),this.Ng=this.Tg.Zc(this.Lg).Js(c.getWidth({x:y.xAxisOverlayStyle,y:y.yAxisOverlayStyle})).Fr(th).mn(y.highlightColorOffsetAxisOverlay||y.highlightColorOffset),this.Gg=this.Tg.Zc(this.Lg).Js(c.getWidth({x:y.xAxisZoomingBandFillStyle,y:y.yAxisZoomingBandFillStyle})).Fr(c.getWidth({x:y.xAxisZoomingBandStrokeStyle,y:y.yAxisZoomingBandStrokeStyle})),this.Hg=this.Tg.Zc(this.Lg).Js(c.getWidth({x:y.xAxisOverlayStyle,y:y.yAxisOverlayStyle})).Fr(th).mn(y.highlightColorOffsetAxisOverlay||y.highlightColorOffset),this.Wg=this.Tg.Zc(this.Lg).Js(c.getWidth({x:y.xAxisOverlayStyle,y:y.yAxisOverlayStyle})).Fr(th).mn(y.highlightColorOffsetAxisOverlay||y.highlightColorOffset),this.Zs=this.Tg.$e(this.Og).setMouseInteractions(!1).ie(this.Gs.getTitleTextRotation(this.Pg)),this.chart.vs.wr.th(this.Ng,(t=>this.Ng.dn(t)),{animationEnabled:this.bs}),this.chart.vs.wr.th(this.Hg,(t=>this.Hg.dn(t)),{animationEnabled:this.bs}),this.chart.vs.wr.th(this.Wg,(t=>this.Wg.dn(t)),{animationEnabled:this.bs});const b=Ua(new $a(this.Qd,this.tg,this.ig,1),new Ya(this.sg,this.eg,this.hg),new ja(this.Dd)),x=Ua(new $a(this.bg,this.xg,this._g)),M=Ua(new $a(this.bg,this.Mg,this._g));this.Ng.setMouseEnterEventHandler(this.Bd).setMouseLeaveEventHandler(this.Ld).setMouseDragStartEventHandler(this.Rd).setMouseDragEventHandler(this.Gd).setMouseDragStopEventHandler(this.Ud).setMouseWheelEventHandler(this.Yd).setMouseDoubleClickEventHandler(this.Dd).setMouseClickEventHandler(this.Zd).setMouseDownEventHandler(this.Kd).setMouseUpEventHandler(this.qd).setMouseMoveEventHandler(this.Jd).setTouchStartEventHandler(b.onTouchStart).setTouchMoveEventHandler(b.onTouchMove).setTouchEndEventHandler(b.onTouchEnd),this.Hg.setMouseEnterEventHandler(this.rg).setMouseLeaveEventHandler(this.og).setMouseDragStartEventHandler(this.ug).setMouseDragEventHandler(this.cg).setMouseDragStopEventHandler(this.yg).setMouseWheelEventHandler(this.Sg).setTouchStartEventHandler(x.onTouchStart).setTouchMoveEventHandler(x.onTouchMove).setTouchEndEventHandler(x.onTouchEnd),this.Wg.setMouseEnterEventHandler(this.rg).setMouseLeaveEventHandler(this.og).setMouseDragStartEventHandler(this.ug).setMouseDragEventHandler(this.gg).setMouseDragStopEventHandler(this.yg).setMouseWheelEventHandler(this.vg).setTouchStartEventHandler(M.onTouchStart).setTouchMoveEventHandler(M.onTouchMove).setTouchEndEventHandler(M.onTouchEnd),this.Rg.za(c.getWidth({x:y.xAxisStrokeStyle,y:y.yAxisStrokeStyle})),this.zg.za(c.getWidth({x:y.xAxisNibStyle,y:y.yAxisNibStyle})),this.Vg.za(c.getWidth({x:y.xAxisNibStyle,y:y.yAxisNibStyle})),this.Zs.Js(c.getWidth({x:y.xAxisTitleFillStyle,y:y.yAxisTitleFillStyle})).te(c.getWidth({x:y.xAxisTitleFont,y:y.yAxisTitleFont})),this.El=a.Rl(this,{}),this.he=this.El.Ug([this.Zs]).ee(y.effectsText)}Ue(){return this.ws}je(){return void 0!==this.fe}addBand(t=!0){const i=t?this.kg:this.Ag,s=new ou(i,this.chart,this.Id,this,this.Og,this.Gs,this.Hs,this.zc);return this.kd.push(s),s}addConstantLine(t=!0){const i=t?this.kg:this.Ag,s=new au(i,this.chart,this.Id,this,this.Og,this.Gs,this.Hs,this.zc);return this.kd.push(s),s}jg(t){this.kd.forEach(t)}$g(t){return this.kd.map(t)}getHighlighters(){return this.kd}setThickness(t){return"number"==typeof t?(this.Yg=t,this.Xg=t):"object"==typeof t&&(this.Yg=t.min,this.Xg=t.max),this.Zf.Ss(),this}getThickness(){return{min:this.Yg,max:this.Xg}}setMouseInteractions(t){return this.setAxisInteractionPanByDragging(t).setAxisInteractionReleaseByDoubleClicking(t).setAxisInteractionZoomByDragging(t).setAxisInteractionZoomByWheeling(t).setNibInteractionScaleByDragging(t).setNibInteractionScaleByWheeling(t)}Oe(){return this.sd}Ce(t,i){return new ll(i,t,this.Xd,this.Og,this.Zf,this.Og)}ne(){if(this.qf){for(const t of this.qf)t[1].grid.dispose(),t[1].tick.dispose();this.qf.clear()}super.ne()}Te(t,i){const{tickStart:s}=i,e=t.Es.Ae,h=s+e.getTickLength()*this.Pg+e.getTickPadding()*this.Pg;t.ns.Qn(this.Gs.toPoint(t.l,h)).ao(this.Gs.toPoint(e.getLabelAlignment(),-this.Pg)).ie(e.labelRotation).setVisible(this.getVisible())}Zg(t,i){const{startPosition:s,gridStrokeLen:e,gridStrokeStart:h,tickStart:r}=i,n=t.Es.Ae,o=s-e*n.getGridStrokeLength(),a=r+n.getTickLength()*this.Pg;return{gridStroke:{start:this.Gs.toPoint(t.l,h),end:this.Gs.toPoint(t.l,o)},tickStroke:{start:this.Gs.toPoint(t.l,r),end:this.Gs.toPoint(t.l,a)}}}Kg(t,i,s,e){return this.Zf.rc(this.Og).za(new sh({fillStyle:new De({color:ve(360*(1-e))}),thickness:5})).Ua(this.Gs.toVec2(t,0)).Pa(this.Gs.toVec2(t,this.Pg*(50*e)))}Ge(t,i){return"linear"===this.Us.type?cl(t,i,this.Jt):fl(t,i,this.Jt)}qg(t,i){return i instanceof kn?cl:fl}We(t,i,s){if("linear"===this.Us.type){const e=this.Jt.ji(i-t);return{min:t-s*e,max:i+s*e}}const e=this.Jt;return{min:e.Fi(t,-s),max:e.Fi(i,s)}}Nl(t,i,s){const e=this.Rg.Va(),h=this.Jt.getInnerStart()<this.Jt.getInnerEnd()?this.Jt.getInnerStart():this.Jt.getInnerEnd(),r=this.Jt.getInnerEnd()>this.Jt.getInnerStart()?this.Jt.getInnerEnd():this.Jt.getInnerStart(),n=this.Jt.vi(),o=this.Bg.getInnerInterval(),a=e instanceof sh?e.getThickness()*this.Pg/2:0,u=this.Fg/100*o,l=u+t,c=l+a,f=o*this.Pg,d=c+a,g=this.td.reduce(this.Fd,0);let m,y=0;if(this.ls!==Ln){const t=this.Jt.vi();this.me({physicalAxisSize:t,startPosition:u,gridStrokeLen:f,gridStrokeStart:l,tickStart:d});for(const[i,s]of this.fs){let e=this.qf.get(i);if(!e)if(i.ss)e={grid:this.Zf.Jg(this.Og).setMouseInteractions(!1),tick:this.Zf.Jg(this.Og).setMouseInteractions(!1)};else if("Qg"in i){const t=Array.from(this.fs.keys()).filter((t=>"Qg"in t)).reverse().indexOf(i),s=this.wg[t];if(!s)throw new Error("Not enough tick layers. This is an internal LCJS error - if you see this, please contact Arction support.");e={grid:s.Jg(this.Og).setMouseInteractions(!1),tick:s.Jg(this.Og).setMouseInteractions(!1)}}if(e){e.grid.Oo(),e.tick.Oo();for(const[i,h]of s){const i=this.Zg(h,{physicalAxisSize:t,startPosition:u,gridStrokeLen:f,gridStrokeStart:l,tickStart:d});e.grid.Bo(i.gridStroke.start,i.gridStroke.end),e.tick.Bo(i.tickStroke.start,i.tickStroke.end)}e.grid.za(i.Ae.getGridStrokeStyle()),e.tick.za(i.Ae.getTickStyle()),this.qf.set(i,e)}}for(const t of this.fs.values()){let i=Ar;for(const s of t.values()){const t=s.Es.Ae,e=this.Gs.getHeight(s.ns.xi()),h=t.getTickLength()+t.getTickPadding()+e+t.getLabelPadding();i=Math.max(i,h)}y=Math.max(y,i)}m=d+Math.max(y,g)*this.Pg}else y=0,m=d+g*this.Pg;this.Rg.Ua(this.Gs.toPoint(h,c)).Pa(this.Gs.toPoint(r,c)),this.zg.Ua(this.Gs.toPoint(this.Jt.Fi(this.Jt.getInnerStart(),this.rd),c)).Pa(this.Gs.toPoint(this.Jt.getInnerStart(),c)),this.Vg.Ua(this.Gs.toPoint(this.Jt.Fi(this.Jt.getInnerEnd(),-this.rd),c)).Pa(this.Gs.toPoint(this.Jt.getInnerEnd(),c));const p=this.Zs&&this.Zs.Xs().length>0?this.Gs.getHeight(this.Zs._e().xi()):0,S=m+.5*p*this.Pg;this.Zs.Qn(this.Gs.toPoint(this.Jt.Fi(this.Jt.getInnerStart(),n/2),S));const v=d,b=v+this.Pg*this.Qf,x=this.md||this.yd?Math.min(this.ad,.25*n):0,M={start:this.Gs.toVec2(this.Jt.Fi(this.Jt.getInnerStart(),x),v),end:this.Gs.toVec2(this.Jt.Fi(this.Jt.getInnerEnd(),-x),b)};if(this.Jf){const i=this.Fg/100*o+t,s=-this.Pg*o-t,e={start:this.Gs.toVec2(this.Jf.min,d+this.Pg*this.Qf),end:this.Gs.toVec2(this.Jf.max,i+s)},h=oh(e.start,this.Og,this.Lg),r=oh(e.end,this.Og,this.Lg);this.Gg.Qn(h).Gt(tn(r,h)).setVisible(!0)}else this.Gg.setVisible(!1);const _=oh(this.Gs.toVec2(this.Jt.getInnerStart(),b),this.Og,this.Lg),w=oh(M.start,this.Og,this.Lg),A=oh(M.end,this.Og,this.Lg),k=oh(this.Gs.toVec2(this.Jt.getInnerEnd(),v),this.Og,this.Lg);this.Ng.Qn(w).Gt(tn(A,w)),this.Hg.Qn(_).Gt(tn(w,_)),this.Wg.Qn(A).Gt(tn(k,A));for(const i of this.td)i.update().plot(l,f,t,d);for(const t of this.kd)t.Nl();const C=(e instanceof sh?e.getThickness():0)+Math.max(y,g)+(this.Zs&&this.Zs.Xs().length>0?p+this.hd:0);return this.Qf=Ah(C,void 0!==this.Yg?this.Yg:0,void 0!==this.Xg?this.Xg:wr),this}tm(t){const i=this.Rg.Va(),s=i instanceof sh?i.getThickness()*this.Pg/2:0,e=this.Bg.getInnerInterval(),h=this.Fg/100*e+t,r=h+s,n=e*this.Pg,o=r+s;for(const i of this.td)i.update().plot(h,n,t,o);for(const t of this.kd)t.Nl()}im(){return this.Qf}sm(t,i){i=i||al.AxisTickMajor;const s=new eu(this,t?this.Zf:this.Tg,this.Tg,this.Jt,this.Eg,this.Eg,this.Gs,this.Dg,this.Pd,this.Hs,i).setTextFormatter(this.formatValue);return this.td.push(s),s}Od(t){this.chart.vs.wr.ih(t,1),this.nd=t.vs.oh(this.xd,this.nd)}Ed(t){this.chart.vs.wr.ih(t,0),t.vs.ah(this.nd)}Vd(t){this.setStopped(!0),t.vs.ah(this.nd)}Hd(t,i){const s=-this.Gs.getWidth(i);this.pan(s),this.nd=t.vs.oh(this.Md,this.nd)}pan(t){const i=this.$s,s=this.Ys,e=this.Jt.Fi(i,t),h=this.Jt.Fi(s,t);this.Ns(e,h,{allowClamping:!1})}zoom(t,i){const s=this.Jt.qt(this.$s),e=this.Jt.qt(this.Ys),h=this.Jt.qt(t),r=Ah((h-s)/(e-s),0,1),n=.2*this.Jt.vi(),o=r*this.ud*n*-i,a=(1-r)*this.ud*n*i,u=this.Jt.Fi(this.$s,o),l=this.Jt.Fi(this.Ys,a);this.Ns(u,l)}jd(t){this.Jf=void 0,t.vs.ah(this.nd)}Nd(t,i){this.setStopped(!0),t.vs.ah(this.nd),this.chart.vs.wr.ih(this.Ng,0)}Wd(t,i,s,e){const h=oh(this.Xd.vs.uh(s.x,s.y),this.Xd.vs.Jt,this.Og),r=Ah(this.Gs.getWidth(h),this.$s,this.Ys),n=this.Gs.getWidth(oh(this.Xd.vs.uh(i.x,i.y),this.Xd.vs.Jt,this.Og)),o=Or(this.Gs.getHeight(h),this.Gs.getHeight(oh(this.Ng.io(),this.Lg,this.Og)),this.Gs.getHeight(oh(Qr(this.Ng.io(),this.Ng.xi()),this.Lg,this.Og)));Math.abs(this.Jt.qt(r)-this.Jt.qt(n))>10&&o?(this.Jf=a(Math.min(r,n),Math.max(r,n)),this.nd=t.vs.oh(this._d,this.nd)):(this.Jf=void 0,this.nd=t.vs.oh(this.xd,this.nd)),this.Xd.Ss()}$d(t,i,s){if(this.Jf){const t=this.Jf.min,i=this.Jf.max,s=this.Ys<this.$s;this.Qt(s?i:t,s?t:i,!0,!0,"interactionSetInterval")}this.Jf=void 0,t.vs.ah(this.nd)}ng(t){this.chart.vs.wr.ih(t,1),this.od=t.vs.oh(this.wd,this.od)}ag(t){this.chart.vs.wr.ih(t,0),t.vs.ah(this.od)}lg(t,i){this.setStopped(!0),this.od=t.vs.oh(this.Ad,this.od)}dg(t,i,s,e){const h=this.Gs.getWidth(e);this.Ns(this.Jt.Fi(this.$s,h),this.Ys)}mg(t,i,s,e){const h=this.Gs.getWidth(e);this.Ns(this.$s,this.Jt.Fi(this.Ys,h))}pg(t,i,s){t.vs.ah(this.od),t.getIsUnderMouse()&&(this.od=t.vs.oh(this.wd)),this.Xd.Ss()}addCustomTick(t){return this.sm(!0,t)}getUiPosition(){return this.Fg}setStrokeStyle(t){return this.Rg.za(t),this.Xd.Ss(),this}getStrokeStyle(){return this.Rg.Va()}getOverlayStyle(){return this.Ng.qs()}setOverlayStyle(t){return this.Ng.Js(t),this.Xd.Ss(),this}setAxisInteractionZoomByDragging(t){return this.ld=t,this}getAxisInteractionZoomByDragging(){return this.ld}setAxisInteractionPanByDragging(t){return this.fd=t,this}getAxisInteractionPanByDragging(){return this.fd}setAxisInteractionZoomByWheeling(t){return this.dd=t,this}getAxisInteractionZoomByWheeling(){return this.dd}setAxisInteractionReleaseByDoubleClicking(t){return this.gd=t,this}getAxisInteractionReleaseByDoubleClicking(){return this.gd}setAxisMouseHoverStyle(t=this.Gs.defaultDragMouseStyle){return this.xd=t,this}getAxisMouseHoverStyle(){return this.xd}setAxisMousePanStyle(t=this.Gs.defaultDragMouseStyle){return this.Md=t,this}getAxisMousePanStyle(){return this.Md}setAxisMouseZoomStyle(t=this.Gs.defaultDragMouseStyle){return this._d=t,this}getAxisMouseZoomStyle(){return this._d}setAnimationHighlight(t){return this.chart.vs.wr.eh(this.Ng,t),this.chart.vs.wr.eh(this.Hg,t),this.chart.vs.wr.eh(this.Wg,t),this}getAnimationHighlight(){return this.chart.vs.wr.hh(this.Ng)}getTitleMargin(){return this.hd}setTitleMargin(t){return this.hd=t,this.Xd.Ss(),this}getNibLength(){return this.rd}setNibLength(t){return this.rd=t,this.Xd.Ss(),this}getNibStyle(){return this.zg.Va()}setNibStyle(t){return this.zg.za(t),this.Vg.za(t),this.Xd.Ss(),this}getNibOverlayStyle(){return this.Hg.qs()}setNibOverlayStyle(t){return this.Hg.Js(t),this.Wg.Js(t),this.Xd.Ss(),this}setNibMousePickingAreaSize(t){return this.ad=t,this.Xd.Ss(),this}getNibMousePickingAreaSize(){return this.ad}setNibInteractionScaleByDragging(t){return this.md=t,this}getNibInteractionScaleByDragging(){return this.md}setNibInteractionScaleByWheeling(t){return this.yd=t,this}getNibInteractionScaleByWheeling(){return this.yd}setNibMouseHoverStyle(t=this.Gs.defaultDragMouseStyle){return this.wd=t,this}getNibMouseHoverStyle(){return this.wd}setNibMouseScaleStyle(t=this.Gs.defaultDragMouseStyle){return this.Ad=t,this}getNibMouseScaleStyle(){return this.Ad}setChartInteractions(t){return this.setChartInteractionFitByDrag(t),this.setChartInteractionPanByDrag(t),this.setChartInteractionZoomByDrag(t),this.setChartInteractionZoomByWheel(t),this}setChartInteractionPanByDrag(t){return this.pd=t,this}getChartInteractionPanByDrag(){return this.pd}setChartInteractionZoomByWheel(t){return this.Sd=t,this}getChartInteractionZoomByWheel(){return this.Sd}setChartInteractionZoomByDrag(t){return this.vd=t,this}getChartInteractionZoomByDrag(){return this.vd}setChartInteractionFitByDrag(t){return this.bd=t,this}getChartInteractionFitByDrag(){return this.bd}Rt(){return this.Jt.Rt(),this}zt(){return this.Jt.zt(),this}dispose(){this.zg.dispose(),this.Vg.dispose(),this.Rg.dispose(),this.Ng.dispose(),this.Gg.dispose(),this.Hg.dispose(),this.Wg.dispose(),this.Zs.dispose(),this.ge(Mh);for(const t of this.qf.values())t.grid.dispose(),t.tick.dispose();return this.sd.slice().forEach(Mh),this.kd.slice().forEach(Mh),this.Cg(this),this.wt.emit("dispose",this),this}onDispose(t){return this.wt.on("dispose",t)}offDispose(t){return this.wt.off(t,"dispose")}setVisible(t){this.zg.setVisible(t),this.Vg.setVisible(t),this.Rg.setVisible(t),this.Zs.setVisible(t),this.Ng.setVisible(t),this.Hg.setVisible(t),this.Wg.setVisible(t),this.ge((i=>{i.ke(t)}));for(const i of this.qf.values())i.grid.setVisible(t),i.tick.setVisible(t);return super.setVisible(t),this.Zf.Ss(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationHighlight(this.bs),this}}const gl=(t,i)=>t instanceof pn||i instanceof pn?(new Fn).$i(t,i):(new In).$i(t,i),ml=(t,i,s="image/png",e)=>{i+=`.${s.slice(s.indexOf("image/")+6)}`;const h=t.captureFrame(s,e);if("image/png"!==s&&h.type.includes("image/png"))throw new Error(`saveToFile | type not supported by browser: ${s}\nCheck support table for HTMLCanvasElement.toDataURL`);if(yh.navigator.msSaveBlob)yh.navigator.msSaveBlob(h,i);else{const t=yh.document.createElement("a");yh.document.body.appendChild(t);const s=yh.URL.createObjectURL(h);t.href=s,t.download=i,t.click(),setTimeout((()=>{yh.URL.revokeObjectURL(s),yh.document.body.removeChild(t)}),0)}},yl=(i,s,e,h,r,n)=>{const o=i.oc(s,e,h,r,n,!0);return o.setDraggingMode(t.UIDraggingModes.draggable),o},pl=t=>{if(t instanceof Tn)return t;const i=t.x instanceof dl?t.x.Jt:t.x.x,s=t.y instanceof dl?t.y.Jt:t.y.y;return gl(i,s)};class Sl{constructor(t,i,s,h,r,n,o,a){this.hm=[],this.rm=[],this.wt=new We,this.nm=void 0,this.om=void 0,this.am=void 0,this.oi=c(0,0,0,0),this.Ye=!1,this.um=()=>{this.lm=!0,this.fm.Ss()},this.dm=t=>i=>{const s=this.hm.indexOf(i);-1!==s&&this.hm.splice(s,1),this.vs.Ss(),t.Pt()},this.gm=t=>{const i=this.rm.indexOf(t);-1!==i&&this.rm.splice(i,1),this.vs.Ss()},this.lm=!0,this.onResize=t=>this.wt.on("resize",t),this.offResize=t=>this.wt.off(t,"resize"),this.zd=t,this.ym=s,this.fm=h,this.removePanel=r,this.Hs=i.vs.Hs;const u=i.vs.xi();this.uiScale=s.d2({scaleXYConstructor:In}).Zi(0,100).Ki(0,100).Gt(u),this.pixelScale=s.d2({scaleXYConstructor:In}).Zi(0,this.uiScale.x.getCellSize()).Ki(0,this.uiScale.y.getCellSize()).Gt(u),this.engine=i.vs.pm,this.vs=i.vs.Sm,this.El=this.vs.El.Rl(this,{}),this.vm=()=>i.bm("unidentified ui"),this.xm=i.Mm(),this._m=this.fm.Zc(this.uiScale).Qn(e(0,0)).Gt(e(100,100)).Js(n).Fr(o).setMouseMoveEventHandler(((t,i)=>this.wt.emit("mouseMovePanelBackground",this,i))).setMouseEnterEventHandler(((t,i)=>this.wt.emit("mouseEnterPanelBackground",this,i))).setMouseLeaveEventHandler(((t,i)=>this.wt.emit("mouseLeavePanelBackground",this,i))).setMouseDownEventHandler(((t,i)=>this.wt.emit("mouseDownPanelBackground",this,i))).setMouseUpEventHandler(((t,i)=>this.wt.emit("mouseUpPanelBackground",this,i))).setMouseClickEventHandler(((t,i)=>this.wt.emit("mouseClickPanelBackground",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.wt.emit("mouseDoubleClickPanelBackground",this,i))).setMouseWheelEventHandler(((t,i)=>this.wt.emit("mouseWheelPanelBackground",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.wt.emit("mouseDragStartPanelBackground",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.wt.emit("mouseDragPanelBackground",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.wt.emit("mouseDragStopPanelBackground",this,i,s,e))).setTouchStartEventHandler(((t,i)=>this.wt.emit("touchStartPanelBackground",this,i))).setTouchMoveEventHandler(((t,i)=>this.wt.emit("touchMovePanelBackground",this,i))).setTouchEndEventHandler(((t,i)=>this.wt.emit("touchEndPanelBackground",this,i)));const l=i.vs.Zr(this.um);if(this.wm=i.vs.Kr.bind(i.vs,l),a){const t=a.on(this.um);this.Am=()=>a.off(t)}this.nm=r}getTheme(){return this.Hs}setBackgroundFillStyle(t){return this._m.Js(t),this.fm.Ss(),this}getBackgroundFillStyle(){return this._m.qs()}setBackgroundStrokeStyle(t){return this._m.Fr(t),this.fm.Ss(),this}getBackgroundStrokeStyle(){return this._m.Pr()}km(t){return this.hm.push(t),this.vs.Ss(),t}Cm(t){return this.rm.push(t),this.vs.Ss(),t}addUIElement(t=Hu,i=this.uiScale){i=pl(i);const s=this.vm();return this.km(yl(t,s,this.uiScale,i,this.dm(s),this.Hs))}addLegendBox(i=tl,s=this.uiScale){s=pl(s);const e=this.Cm(yl(i,this.xm,this.uiScale,s,this.gm,this.Hs));return e.setDraggingMode(t.UIDraggingModes.notDraggable),void 0!==s&&s!==this.uiScale||(void 0===i||"vertical"===i.getAlignment()?e.setOrigin(Ba.RightCenter).setPosition({x:100,y:50}):e.setOrigin(Ba.CenterBottom).setPosition(this.uiScale.Fi({x:50,y:0},{x:0,y:3}))),e}dispose(){return this.Ye||(this.Ye=!0,this.wm&&this.wm(),this.Am&&this.Am(),vl(this.uiScale),vl(this.pixelScale),this.om&&this.om(),this.fm.Pt(),this.xm.Pt(),this.hm.slice().forEach((t=>{t.dispose()})),this.rm.slice().forEach((t=>{t.dispose()})),this.vs.Ss(),this.nm&&this.nm(this),this.wt.emit("dispose",this)),this}onDispose(t){return this.wt.on("dispose",t)}offDispose(t){return this.wt.off(t,"dispose")}saveToFile(t,i,s){return ml(this.engine,t,i,s),this}uo(t){this.oi=t,this.um()}Rt(){return this.pixelScale.Rt(),this.uiScale.Rt(),this}zt(){return this.pixelScale.zt(),this.uiScale.zt(),this}Nl(){if(this.lm){const t=this.fm.vs.xi(),i=t.x,s=t.y;this.uiScale.Gt(i,s),this.pixelScale.Gt(i,s);const e=[this.oi.left,this.oi.right],h=[this.oi.bottom,this.oi.top];this.uiScale.Yi(e),this.uiScale.Xi(h);const r=this.uiScale.getInnerIntervalPixels();this.pixelScale.Zi(0,r.x).Yi(e).Ki(0,r.y).Xi(h),this.wt.emit("resize",this,r.x,r.y,i,s)}this.lm=!1}Tm(){for(let t=0;t<this.hm.length;t+=1)this.hm[t]._e().Nl();for(let t=0;t<this.rm.length;t+=1)this.rm[t]._e().Nl();this.am&&this.am()}Im(t,i){if(t){const s=t(i);this.onResize(s._e.bind(s)),this.om=s.Pt.bind(s),this.am=s._e.bind(s)}}onBackgroundMouseEnter(t){return this.wt.on("mouseEnterPanelBackground",t)}offBackgroundMouseEnter(t){return this.wt.off(t,"mouseEnterPanelBackground")}onBackgroundMouseMove(t){return this.wt.on("mouseMovePanelBackground",t)}offBackgroundMouseMove(t){return this.wt.off(t,"mouseMovePanelBackground")}onBackgroundMouseLeave(t){return this.wt.on("mouseLeavePanelBackground",t)}offBackgroundMouseLeave(t){return this.wt.off(t,"mouseLeavePanelBackground")}onBackgroundMouseDown(t){return this.wt.on("mouseDownPanelBackground",t)}offBackgroundMouseDown(t){return this.wt.off(t,"mouseDownPanelBackground")}onBackgroundMouseUp(t){return this.wt.on("mouseUpPanelBackground",t)}offBackgroundMouseUp(t){return this.wt.off(t,"mouseUpPanelBackground")}onBackgroundMouseClick(t){return this.wt.on("mouseClickPanelBackground",t)}offBackgroundMouseClick(t){return this.wt.off(t,"mouseClickPanelBackground")}onBackgroundMouseDoubleClick(t){return this.wt.on("mouseDoubleClickPanelBackground",t)}offBackgroundMouseDoubleClick(t){return this.wt.off(t,"mouseDoubleClickPanelBackground")}onBackgroundMouseDragStart(t){return this.wt.on("mouseDragStartPanelBackground",t)}offBackgroundMouseDragStart(t){return this.wt.off(t,"mouseDragStartPanelBackground")}onBackgroundMouseDrag(t){return this.wt.on("mouseDragPanelBackground",t)}offBackgroundMouseDrag(t){return this.wt.off(t,"mouseDragPanelBackground")}onBackgroundMouseDragStop(t){return this.wt.on("mouseDragStopPanelBackground",t)}offBackgroundMouseDragStop(t){return this.wt.off(t,"mouseDragStopPanelBackground")}onBackgroundMouseWheel(t){return this.wt.on("mouseWheelPanelBackground",t)}offBackgroundMouseWheel(t){return this.wt.off(t,"mouseWheelPanelBackground")}onBackgroundTouchStart(t){return this.wt.on("touchStartPanelBackground",t)}offBackgroundMouseTouchStart(t){return this.wt.off(t,"touchStartPanelBackground")}onBackgroundTouchMove(t){return this.wt.on("touchMovePanelBackground",t)}offBackgroundTouchMove(t){return this.wt.off(t,"touchMovePanelBackground")}onBackgroundTouchEnd(t){return this.wt.on("touchEndPanelBackground",t)}offBackgroundTouchEnd(t){return this.wt.off(t,"touchEndPanelBackground")}}const vl=t=>{t.mi&&t.mi()};class bl extends Sl{constructor(t,i,s,e,h,r){super(t,i,s,i.Fm("uipanel bg",0),e,i.vs.Hs.uiPanelBackgroundFillStyle,i.vs.Hs.uiPanelBackgroundStrokeStyle,r),this.Im(h,this.pixelScale)}setMinimumSize(t){return this.vf=t,this.vs.Ss(),this}getMinimumSize(){return this.vf}Nl(){super.Nl(),super.Tm()}}const xl=c(10,10,10,10);class Ml extends Sl{constructor(t,i,s,h,r,n,o,a,u,l,c){super(t,i,s,h,n,o,a,c),this.Pm={},this.Gn=xl,this.bs=!0,this.Dm=r,this.Bm=this.Dm.$e(this.uiScale).Ks("Chart").Qn(e(50,100)).ao(e(0,1)).te(u).Js(l).setMouseInteractions(!1),this.Om=this.El.Ug([this.Bm]).ee(this.Hs.effectsText)}setAnimationsEnabled(t){return this.bs=t,this}getAnimationsEnabled(){return this.bs}setTitle(t){return this.Bm.Ks(t),this.vs.Ss(),this}getTitle(){return this.Bm.Xs()}getTitleSize(){return this.Bm._e().hf()}setTitleFillStyle(t){return this.Bm.Js(t),this.um(),this}getTitleFillStyle(){return this.Bm.qs()}setTitleFont(t){return this.Bm.te(t),this.um(),this}getTitleFont(){return this.Bm.Qs()}setTitleRotation(t){return this.Bm.ie(t),this.vs.Ss(),this}getTitleRotation(){return this.Bm.se()}setTitleEffect(t){return this.Om.ee(t),this.vs.Ss(),this}getTitleEffect(){return this.Om.re()}setTitleMargin(t){var i,s;return this.Pm="object"==typeof t?this.Pm?(i=this.Pm,{left:void 0!==(s=t).left?s.left:i.left,top:void 0!==s.top?s.top:i.top,right:void 0!==s.right?s.right:i.right,bottom:void 0!==s.bottom?s.bottom:i.bottom}):t:{left:t,top:t,right:t,bottom:t},this.um(),this}getTitleMargin(){return this.Pm}setPadding(t){return this.Gn="object"==typeof t?d(this.Gn,t):{left:t,top:t,right:t,bottom:t},this.um(),this}getPadding(){return this.Gn}Lm(t){const i=t.Em(),s=null==i?void 0:i.height,e=null==i?void 0:i.width;if(void 0!==s&&void 0!==e)return{x:s/2,y:e/2}}dispose(){return super.dispose(),this.Dm.Pt(),this}}const _l={Rm:(t,i)=>t.qs()!==Ie&&0!==t.Xs().length&&t.getVisible()?t._e().hf().y+(void 0!==i.top?i.top:10)+(void 0!==i.bottom?i.bottom:0):0,zm(t,i){t.Qn(e(50,100)).uo({top:void 0!==i.top?i.top:10,right:i.right||0,left:i.left||0,bottom:i.bottom||0})}};var wl;t.SliceLabelIndices=void 0,(wl=t.SliceLabelIndices||(t.SliceLabelIndices={}))[wl.LabelsInsideSlices=0]="LabelsInsideSlices",wl[wl.LabelsOnSides=1]="LabelsOnSides";const Al={SortByName:(t,i)=>t.getName().localeCompare(i.getName(),void 0,{numeric:!0}),SortByValueAscending:(t,i)=>t.getAnimatedValue()-i.getAnimatedValue(),SortByValueDescending:(t,i)=>i.getAnimatedValue()-t.getAnimatedValue(),None:()=>0},kl={Name:t=>`${t.getName()}`,NamePlusValue:t=>`${t.getName()}: ${Math.round(t.getAnimatedValue())}`,NamePlusRelativeValue:(t,i)=>`${t.getName()}: ${(100*i).toFixed(2)}%`};class Cl extends ru{constructor(){super(...arguments),this.dt="Slice",this.l=0}}const Tl=(t,i)=>{Zh(i),t.setExploded(!t.getExploded())};class Il extends Cl{}class Fl extends Il{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.Vm=!1,this.Nm=Ie,this.Gm=Ie,this.Hm=this.l,this.Wm=this.Vm?1:0,this.Um=this.getVisible(),this.jm=$e((()=>this.Du.vs.Ss())),this.$m=$e((()=>this.Du.vs.Ss())),this.Ym=()=>{this.Xm=void 0},this.Zm=()=>{this.Km=void 0},this.index=t,this.Du=e,this.scale=h,this.Rc=r,this.qm=i.nf(h).dn(this.getHighlight()),this.Gc(this.qm),this.ns=s.$e(h).dn(this.getHighlight()),this.Gc(this.ns,{isText:!0}),this.onMouseClick(Tl),this.onTouchEnd(Tl)}setValue(t){return this.Du.getAnimationsEnabled()?this.Um&&this.Jm(this.Hm,t):this.Hm=t,this.l=t,this.Du.vs.Ss(),this}getValue(){return this.l}setExploded(t){if(t&&!1===this.Du.getMultipleSliceExplosion()){const t=this.Du.getSlices();for(let i=0;i<t.length;i+=1)t[i]!==this&&t[i].getExploded()&&t[i].setExploded(!1)}return this.Du.getAnimationsEnabled()?(this.Km&&this.Km.finish(),this.Km=this.$m(300,Ue.ease)([[this.Wm,t?1:0]],(([t])=>{this.Wm=t,this.Du.vs.Ss()})),this.Km.onEveryAnimationEnd(this.Zm),this.Vm=!this.Vm):!1!==this.Du.getMultipleSliceExplosion()||t?(this.Wm=this.Vm?0:1,this.Vm=!this.Vm):(this.Wm=0,this.Vm=!this.Vm),this.Du.vs.Ss(),this}getExploded(){return this.Vm}setVisible(t){return this.Um=t,!1===t?this.Du.getAnimationsEnabled()&&this.Hm>0?(this.Xm&&(this.Xm.finish(!1),this.Xm=void 0),this.Jm(this.Hm,0,(()=>super.setVisible(!1)))):(this.Hm=0,super.setVisible(!1)):this.Du.getAnimationsEnabled()?(this.Xm&&(this.Xm.finish(!1),this.Xm=void 0),super.setVisible(!0),this.Jm(this.Hm,this.l)):(this.Hm=this.l,super.setVisible(!0)),this}Jm(t,i,s){this.Xm=this.jm(300,Ue.ease)([[t,i]],(([t])=>{this.Hm=t,this.Du.vs.Ss()})),this.Xm.onEveryAnimationEnd(this.Ym),s&&this.Xm.onAnimationEnd(s)}setStyle(t,i,s,e){this.Nm=t,this.Gm=s,this.qm.Js(this.Nm).Fr(i),this.ns.Js(this.Gm).te(e);for(let t=0;t<this.mc.length;t+=1)this.styleAttachedEntry(this.mc[t])}getAnimatedValue(){return this.Hm}getAnimatedExplosion(){return this.Wm}attach(t,i=!0){return super.attach(t,i),this.styleAttachedEntry(t),this}styleAttachedEntry(t){ar(t,this.Hs,{fill:this.Nm,stroke:this.qm.Pr()})}}const Pl=(t,i,s)=>Qr(i,Jr(cn(.5*(t.wa()+t.Gi())*Math.PI/180),s)),Dl=(t,i,s,e,h,r)=>{const n=t.length;let o=90;for(let a=0;a<n;a+=1){const u=t[a],l=o-360*i[a],c=u.getAnimatedExplosion();if(0===c||1===n)u.qm.Qn(s);else{const t=Qr(s,Jr(cn(.5*(o+l)*Math.PI/180),r*c));u.qm.Qn(t)}u.qm.Fa(o).Pa(l).Ba(e).Oa(e).La(h),o=l}},Bl=t=>{const i=t.getSlices();for(let t=0;t<i.length;t+=1)i[t].setExploded(!1)};class Ol extends Ml{constructor(t,i,s,e,h,r,n){super(t,i,s,i.Fm("pieChart bg",0),i.bm("pieChart ui"),e,i.vs.Hs.pieChartBackgroundFillStyle,i.vs.Hs.pieChartBackgroundStrokeStyle,i.vs.Hs.pieChartTitleFont,i.vs.Hs.pieChartTitleFillStyle,r),this.Qm=[],this.ty=Al.SortByName,this.pa=0,this.iy=this.Hs.pieChartSliceFillStylePalette,this.sy=this.Hs.pieChartSliceStrokeStyle,this.ey=!0,this.hy=this.Hs.pieChartSliceLabelFont,this.ny=this.Hs.pieChartSliceLabelFillStyle,this.oy=0,this.uy=!1,this.ly=20,this.gy=!0,this.my=!0,this.yy=t=>{const i=this.Qm.indexOf(t);i>=0&&(this.Qm.splice(i,1),this.py())},this.zd.nr||this.zd.rr||this.vs.er(7),this.Sy=i.vy("pieChart bottom",0),this.by=i.vy("pieChart top",1),this.Bm.Ks("Pie Chart"),this.Im(h,this.pixelScale),this.onBackgroundMouseDoubleClick(Bl);const o=Ua(new ja(Bl));this.onBackgroundTouchStart(o.onTouchStart),this.onBackgroundTouchMove(o.onTouchMove),this.onBackgroundTouchEnd(o.onTouchEnd),n&&this.setAnimationsEnabled(!1)}addSlice(t,i){const s=new Fl(this.oy,this.Sy,this.by,this,this.pixelScale,this.yy,this.Hs,this.vs.El);this.oy+=1,s.setName(t);const e=this.bs;return this.bs=!1,s.setValue(i),this.bs=e,s.setEffect(this.gy),this.xy(s),this.Qm.push(s),this.py(),s.setHighlightOnHover(this.ey),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Qm}setMultipleSliceExplosion(t){return this.uy=t,this}getMultipleSliceExplosion(){return this.uy}setInnerRadius(t){return this.pa=t,this.vs.Ss(),this}getInnerRadius(){return this.pa}setSliceExplosionOffset(t){return this.ly=t,this.vs.Ss(),this}getSliceExplosionOffset(){return this.ly}setLUT(t){return this.Ef=t,this.vs.Ss(),this}setSliceFillStyle(t){this.iy=t;for(let t=0;t<this.Qm.length;t+=1)this.xy(this.Qm[t]);return this.vs.Ss(),this}getSliceFillStyle(){return this.iy}setSliceStrokeStyle(t){this.sy="function"==typeof t?t(this.sy):t;for(let t=0;t<this.Qm.length;t+=1)this.xy(this.Qm[t]);return this.vs.Ss(),this}getSliceStrokeStyle(){return this.sy}setSliceEffect(t){return this.gy=t,this.Qm.forEach((i=>i.El.Nc.ee(t))),this.vs.Ss(),this}getSliceEffect(){return this.gy}setSliceSorter(t){return this.ty=t,this.Qm=this.Qm.sort(this.ty),this.vs.Ss(),this}getSliceSorter(){return this.ty}setLabelFillStyle(t){this.ny="function"==typeof t?t(this.ny):t;for(let t=0;t<this.Qm.length;t+=1)this.xy(this.Qm[t]);return this.vs.Ss(),this}getLabelFillStyle(){return this.ny}setLabelFont(t){this.hy="function"==typeof t?t(this.hy):t;for(let t=0;t<this.Qm.length;t+=1)this.xy(this.Qm[t]);return this.vs.Ss(),this}getLabelFont(){return this.hy}setLabelEffect(t){return this.my=t,this.Qm.forEach((i=>i.El.Vc.ee(t))),this.vs.Ss(),this}getLabelEffect(){return this.my}setLabelFormatter(t){return this.My=t,this.vs.Ss(),this}getLabelFormatter(){return this.My}setSliceHighlightOnHover(t){return this.ey=t,this.Qm.forEach((i=>i.setHighlightOnHover(t))),this}Nl(){super.Nl(),_l.zm(this.Bm,this.Pm),super.Tm();const t=_l.Rm(this.Bm,this.Pm),i=e(this.pixelScale.x.getInnerInterval()-(this.Gn.left+this.Gn.right),this.pixelScale.y.getInnerInterval()-(this.Gn.bottom+this.Gn.top+t)),s=e(this.Gn.left+i.x/2,this.Gn.bottom+i.y/2);if(this.Ef){const t=this.Ef;this.Qm.forEach((i=>{this.xy(i,new De({color:t.getColors(i.getAnimatedValue())}))}))}for(let t=0;t<this.Qm.length;t+=1){const i=this.Qm[t].getAnimatedValue()>0;this.Qm[t].qm.setVisible(i),this.Qm[t].ns.setVisible(i)}this.Qm=this.Qm.sort(this.ty);const h=this.Qm.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const n=[];for(let t=0;t<h.length;t+=1)n.push((o=h[t].getAnimatedValue())>0?o/r:0);var o;for(let t=0;t<h.length;t+=1){const i=h[t];i.ns.Ks(this.My(i,n[t]))._e()}this._y(h,n,s,i)}xy(t,i=this.iy(t.index)){t.setStyle(i,this.sy,this.ny,this.hy)}py(){this.Qm=this.Qm.sort(this.ty),this.vs.Ss()}jf(){return this.Qm}dispose(){return super.dispose(),this.by.Pt(),this.Sy.Pt(),this.Qm.slice().forEach((t=>t.dispose())),this}}const Ll={UserSeries:{type:"ApplicationType",args:{type:"UserSeries"}},InternalUI:{type:"ApplicationType",args:{type:"InternalUI"}}},El=(...t)=>{const i=[];return t.forEach((t=>{var s;t&&"object"==typeof(s=t)&&s&&"pattern"in s&&i.push({type:"DataPattern",args:t})})),i};var Rl;!function(t){t[t.TopRight=0]="TopRight",t[t.TopLeft=1]="TopLeft",t[t.BottomLeft=2]="BottomLeft",t[t.BottomRight=3]="BottomRight"}(Rl||(Rl={}));const zl=(t,i,s,h,r,n,o,a,u)=>{if(0===t.length)return;const l=h.x+i*r.x*.5,c=1===s?Math.max:Math.min;let f;for(let r=0;r<t.length;r+=1){const d=t[r];let g;f&&(g=f.ns.io().y+s*(f.ns.xi().y+10));const m=Pl(d.qm,h,n+a+o+u).y,y=void 0===g?m:c(m,g);d.ns.Qn(e(l,y)).ho(i).no(0),f=d}},Vl=(t,i,s,h,r,n)=>{const o=r*t.getAnimatedExplosion(),a=t.qm,u=t.ns,l=Pl(a,s,h+n+o),c=on(u.io().y,l,s);return[l,c,e(u.io().x-i*(n+u.xi().x),c.y)]},Nl=(...t)=>i=>{const s=(t=>{let i=.5*(t.qm.wa()+t.qm.Gi());for(i%=360;i<0;)i+=360;return i<=90?Rl.TopRight:i<180?Rl.TopLeft:i<270?Rl.BottomLeft:Rl.BottomRight})(i);return t.includes(s)},Gl=Nl(Rl.BottomLeft,Rl.TopLeft),Hl=Nl(Rl.BottomRight,Rl.TopRight),Wl=Nl(Rl.TopLeft,Rl.TopRight),Ul=Nl(Rl.BottomLeft,Rl.BottomRight);class jl extends Ol{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.My=kl.NamePlusValue,this.wy=5,this.Ay=5,this.ky=[],this.Cy=this.Hs.pieChartConnectorStrokeStyle,this.setPadding({bottom:50})}setLabelConnectorStyle(t){this.Cy=t;for(let t=0;t<this.ky.length;t+=1)this.ky[t].za(this.Cy);return this.vs.Ss(),this}getLabelConnectorStyle(){return this.Cy}setLabelConnectorLength(t){return this.Ay=t,this.vs.Ss(),this}getLabelConnectorLength(){return this.Ay}setLabelConnectorGap(t){return this.wy=t,this.vs.Ss(),this}getLabelConnectorGap(){return this.wy}_y(t,i,s,e){const h=this.ly,r=this.wy,n=this.Ay,o=this.hy.getSize();let a=0;if(1===t.length)a=t[0].ns.xi().x;else for(let i=0;i<t.length;i+=1)a=Math.max(a,t[1].ns.xi().x);const u=Math.max(0,.5*Math.min(e.x-2*a,e.y-2*o)-(r+h+n));Dl(t,i,s,u,this.pa,h);const l=t.filter(Gl),c=t.filter(Hl),f=l.filter(Wl),d=l.filter(Ul).reverse(),g=c.filter(Wl).reverse(),m=c.filter(Ul);zl(d,-1,-1,s,e,u,h,r,n),zl(f,-1,1,s,e,u,h,r,n),zl(m,1,-1,s,e,u,h,r,n),zl(g,1,1,s,e,u,h,r,n);for(let t=0;t<this.ky.length;t+=1)this.ky[t].setVisible(!1);for(let t=0;t<l.length;t+=1)l[t].getVisible()&&this.Ty(Vl(l[t],-1,s,u,h,r));for(let t=0;t<c.length;t+=1)c[t].getVisible()&&this.Ty(Vl(c[t],1,s,u,h,r))}getMinimumSize(){return e(500,300)}Ty(t){let i;for(let t=0;t<this.ky.length;t+=1)if(!this.ky[t].getVisible()){i=this.ky[t].setVisible(!0);break}void 0===i&&(i=this.by.Iy(this.pixelScale,void 0,[Ll.InternalUI]).za(this.Cy),this.ky.push(i)),i.Oo().Bo(t)}}class $l extends Ol{constructor(){super(...arguments),this.My=kl.Name,this.Fy=.5}_y(t,i,s,e){const h=this.ly,r=Math.max(0,.5*Math.min(e.x,e.y)-h);Dl(t,i,s,r,this.pa,h);for(let i=0;i<t.length;i+=1){const e=t[i],n=e.qm,o=e.ns,a=this.pa/100,u=((1-a)*this.Fy+a)*r+e.getAnimatedExplosion()*h,l=Pl(n,s,u);o.Qn(l).ho(0).no(0)}}getMinimumSize(){return e(200,200)}setLabelPosition(t){return this.Fy=t,this.vs.Ss(),this}getLabelPosition(){return this.Fy}}const Yl={LabelsOnSides:jl,LabelsInsideSlices:$l},Xl={Ee:t=>t.getXMin(),Re:t=>t.getXMax(),Ve:t=>t.Py().x,Dy:t=>t.x,By:(t,i)=>({x:t.x,y:i.y,z:i.z}),Yf:n(0,-1,0),Oy:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:n(0,i.y,i.z),gridlinePositionB:n(0,i.y,-i.z),gridlinePositionC:n(0,-i.y,-i.z)}}},Zl={Ee:t=>t.getYMin(),Re:t=>t.getYMax(),Ve:t=>t.Py().y,Dy:t=>t.y,By:(t,i)=>({x:i.x,y:t.y,z:i.z}),Yf:n(-1,0,0),Oy:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:n(i.x,0,i.z),gridlinePositionB:n(i.x,0,-i.z),gridlinePositionC:n(-i.x,0,-i.z)}}},Kl={Ee:t=>t.getZMin(),Re:t=>t.getZMax(),Ve:t=>t.Py().z,Dy:t=>t.z,By:(t,i)=>({x:i.x,y:i.y,z:t.z}),Yf:n(1,0,0),Oy:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:n(i.x,-i.y,0),gridlinePositionB:n(i.x,i.y,0),gridlinePositionC:n(-i.x,i.y,0)}}},ql=t=>{if(t instanceof sh){const i=t.getThickness(),s=t.getFillStyle();if(s instanceof De)return 1===i?Kn:new Jn({size:i,fillStyle:s,shape:"sphere"})}return Kn};class Jl extends Wn{constructor(t,i,s,e,h,r,n,o,a){super(t,i,s,e,o,{numeric:i.Dy({x:t.vs.Hs.xAxis3DNumericTicks,y:t.vs.Hs.yAxis3DNumericTicks,z:t.vs.Hs.zAxis3DNumericTicks}),datetime:i.Dy({x:t.vs.Hs.xAxis3DDateTimeTicks,y:t.vs.Hs.yAxis3DDateTimeTicks,z:t.vs.Hs.zAxis3DDateTimeTicks}),time:i.Dy({x:t.vs.Hs.xAxis3DTimeTicks,y:t.vs.Hs.yAxis3DTimeTicks,z:t.vs.Hs.zAxis3DTimeTicks})},{type:"linear"}),this.qf=new Map,this.Ly=()=>{},this.Ey=()=>{},this.Ry=()=>{},this.zy=()=>{},this.Vy=h,this.Ny=r,this.Gy=n,this.Hy=this.Vy.Jt;const u=this.Gs.Dy({x:this.Hs.xAxis3DStrokeStyle,y:this.Hs.yAxis3DStrokeStyle,z:this.Hs.zAxis3DStrokeStyle});this.Wy=this.Vy.Iy([Ll.InternalUI]).za(u).Uy(ql(u)).setMouseInteractions(!1),this.Zs=this.Ny.$e(this.Gy).setMouseInteractions(!1).Js(i.Dy({x:t.vs.Hs.xAxis3DTitleFillStyle,y:t.vs.Hs.yAxis3DTitleFillStyle,z:t.vs.Hs.zAxis3DTitleFillStyle})).te(i.Dy({x:t.vs.Hs.xAxis3DTitleFont,y:t.vs.Hs.yAxis3DTitleFont,z:t.vs.Hs.zAxis3DTitleFont})),this.El=a,this.he=this.El.Ug([this.Zs]).ee(e.effectsText),this.Wy.setMouseEnterEventHandler(this.Ly).setMouseLeaveEventHandler(this.Ey).setMouseDragEventHandler(this.Ry).setMouseDragStopEventHandler(this.zy),s.Ig=this}setStrokeStyle(t){return this.Wy.za(t).Uy(ql(this.Wy.Va())),this.chart.vs.Ss(),this}getStrokeStyle(){return this.Wy.Va()}setMouseInteractions(t){return this}setVisible(t){this.Wy.setVisible(t);for(const i of this.qf.values())i.grid.setVisible(t),i.tick.setVisible(t);return super.setVisible(t),this.Ny.Ss(),this}Oe(){return this.chart.getSeries()}jy(t){return Math.abs(this.Jt.Ht(t)*this.Vy.$y(1))}We(t,i,s){const e=Math.abs(this.Jt.Ht(i-t)*this.Vy.$y(1));return{min:t-s*e,max:i+s*e}}Ce(t,i){return new Ql(i,t,this.Ny,this.Gy,this.Vy)}Te(t,i){const{wuSize:s,start:h,end:r,tickDirection3D:n,tickDirection2D:o}=i,a=t.Es.Ae,u=(t.l-this.Jt.getInnerStart())/(this.Jt.getInnerEnd()-this.Jt.getInnerStart()),l=_r.addVec(Vr(h,r,u),_r.multiplyVec(_r.multiply(n,this.Vy.$y(.5*this.Wy.Va().getThickness())),s)),c=_r.addVec(l,_r.multiplyVec(_r.multiply(n,this.Vy.$y(a.tickLength)),s)),f=this.Vy.Yy(c)||e(0,0),d=Qr(oh(f,this.chart.engine.scale,this.Gy),Jr(o,a.tickPadding));return t.ns.Qn(d).ao({x:-o.x,y:-o.y}),{posTickEnd3D:c,posTickStart3D:l,tickPositionRelative:u}}Kg(t,i,s){const{wuSize:h,start:r,end:n,tickDirection3D:o}=i,a=(t-this.Jt.getInnerStart())/(this.Jt.getInnerEnd()-this.Jt.getInnerStart()),u=_r.addVec(Vr(r,n,a),_r.multiplyVec(_r.multiply(o,this.Vy.$y(.5*this.Wy.Va().getThickness())),h)),l=_r.addVec(u,_r.multiplyVec(_r.multiply(o,this.Vy.$y(10)),h)),c=this.Vy.Yy(u)||e(0,0),f=this.Vy.Yy(l)||e(0,0);return this.Ny.rc(this.Gy).Ua(c).Pa(f).za(new sh({fillStyle:new De({color:ve(120*s)}),thickness:1}))}Ge(t,i){return tc(t,i,this.Jt)}Nl(t){const i=this.Hy,s=n(i.x.jt(),i.y.jt(),i.z.jt());let h,r;this.Gs===Kl?(h=n(i.x.getInnerEnd(),i.y.getInnerStart(),i.z.getInnerStart()),r=n(i.x.getInnerEnd(),i.y.getInnerStart(),i.z.getInnerEnd())):(h=n(i.x.getInnerStart(),i.y.getInnerStart(),i.z.getInnerStart()),r=this.Gs.By(n(i.x.getInnerEnd(),i.y.getInnerEnd(),i.z.getInnerEnd()),h));const o=this.Gs.Yf,a=this.Vy.Yy(h)||e(0,0),u=this.Vy.Yy(r)||e(0,0),l=Vr(h,r,.5),c=_r.addVec(l,_r.multiplyVec(_r.multiply(o,-1),s)),f=this.Vy.Yy(l)||e(0,0),d=this.Vy.Yy(c)||e(0,0),g=Zr(tn(oh(f,this.chart.engine.scale,this.Gy),oh(d,this.chart.engine.scale,this.Gy)));this.Wy.Oo().Bo([h,r]);const{gridlinePositionA:m,gridlinePositionB:y,gridlinePositionC:p}=this.Gs.Oy(t),S=t=>({x:-1===t.x?this.Hy.x.getInnerStart():1===t.x?this.Hy.x.getInnerEnd():0,y:-1===t.y?this.Hy.y.getInnerStart():1===t.y?this.Hy.y.getInnerEnd():0,z:-1===t.z?this.Hy.z.getInnerStart():1===t.z?this.Hy.z.getInnerEnd():0}),v=S(m),b=S(y),x=S(p),M={physicalAxisSize:qr(tn(a,u)),wuSize:s,start:h,end:r,tickDirection3D:o,tickDirection2D:g,gridlinePositionA:v,gridlinePositionB:b,gridlinePositionC:x},_=this.me(M);for(const[t,i]of this.fs){let s=this.qf.get(t);s||(s={grid:this.Vy.Jg().setMouseInteractions(!1),tick:this.Vy.Jg().setMouseInteractions(!1)}),s.grid.Oo(),s.tick.Oo();for(const[,t]of i){const i=this.Zg(t,M,_);i.gridStroke&&s.grid.Bo(i.gridStroke),s.tick.Bo([i.tickStroke.start,i.tickStroke.end])}s.grid.za(t.Ae.getGridStrokeStyle()),s.tick.za(t.Ae.getTickStyle()),this.qf.set(t,s)}const w=this.Pe(((t,i)=>{const s=i.ns.xi();return t.x=Math.max(t.x,s.x),t.y=Math.max(t.y,s.y),t}),e(0,0)),A=Math.atan((u.y-a.y)/(u.x-a.x));this.Zs.ao({x:0,y:0}).ie(180*-A/Math.PI);const k=_r.addVec(l,_r.multiplyVec(_r.multiply(o,this.Vy.$y(.5*this.Wy.Va().getThickness()+this.Be(((t,i)=>Math.max(t,i.tickLength)),0))),s)),C=this.Vy.Yy(k)||e(0,0),T=Qr(oh(C,this.chart.engine.scale,this.Gy),Qr(Qr(sn(w,g),Jr(g,this.Be(((t,i)=>Math.max(t,i.labelPadding)),0))),sn(Jr(this.Zs._e().xi(),.5),g)));this.Zs.Qn(T),this.Wy.Xy={overrideFollowing:!1,skipMousePicking:!1}}Zg(t,i,s){const{gridlinePositionA:e,gridlinePositionB:h,gridlinePositionC:r}=i,n=s.get(t),o=n.posTickStart3D,a=n.posTickEnd3D,u=n.tickPositionRelative;let l;return wh(u,0)||wh(u,1)||(l=[this.isX()?{...e,x:o.x}:this.isY()?{...e,y:o.y}:this.isZ()?{...e,z:o.z}:{x:0,y:0,z:0},this.isX()?{...h,x:o.x}:this.isY()?{...h,y:o.y}:this.isZ()?{...h,z:o.z}:{x:0,y:0,z:0},this.isX()?{...r,x:o.x}:this.isY()?{...r,y:o.y}:this.isZ()?{...r,z:o.z}:{x:0,y:0,z:0}]),{gridStroke:l,tickStroke:{start:o,end:a}}}ne(){if(this.qf){for(const t of this.qf)t[1].grid.dispose(),t[1].tick.dispose();this.qf.clear()}super.ne()}isX(){return this.Gs===Xl}isY(){return this.Gs===Zl}isZ(){return this.Gs===Kl}}class Ql extends Un{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Zf=h}}const tc=(t,i,s)=>Ah(t+.1*(i-t)+Math.abs(s.jt())/100*Math.sign(i-t),Math.min(t,i),Math.max(t,i));class ic{constructor(){this.type="simple"}}const sc=new ic;class ec{constructor(t){this.type="phong",this.ambientReflection=1,this.specularReflection=.1,this.diffuseReflection=1,this.ambientColor=Se("#000"),this.specularColor=Se("#fff"),this.shininess=32,t&&(this.ambientReflection=Number.isNaN(Number(t.ambientReflection))?this.ambientReflection:Number(t.ambientReflection),this.specularReflection=Number.isNaN(Number(t.specularReflection))?this.specularReflection:Number(t.specularReflection),this.diffuseReflection=Number.isNaN(Number(t.diffuseReflection))?this.diffuseReflection:Number(t.diffuseReflection),this.ambientColor=t.ambientColor||this.ambientColor,this.specularColor=t.specularColor||this.specularColor,this.shininess=t.shininess||this.shininess)}}const hc=new ec,rc={Simple:ic,Phong:ec};class nc extends ru{constructor(t,i,s,e,h){super(t,i,e,h),this.Zy=hc,this.Ky=!0,this.qy=!0,this.Du=t,this.Vy=s,this.Xe=new Map,this.onMouseWheel(this.Du.Jy),this.onMouseDrag(this.Du.Qy),this.onTouchStart(this.Du.tp.onTouchStart),this.onTouchMove(this.Du.tp.onTouchMove),this.onTouchEnd(this.Du.tp.onTouchEnd)}setAutoScrollingEnabled(t){return this.Ky=t,this.Du.vs.Ss(),this}getAutoScrollingEnabled(){return this.Ky}setColorShadingStyle(t){return this.Zy=t,this.Xe.forEach(((i,s)=>s.ip(t))),this.Vy.Ss(),this}getColorShadingStyle(){return this.Zy}setDepthTestEnabled(t){return this.qy=t,this.Xe.forEach(((i,s)=>s.sp(t))),this.Vy.Ss(),this}getDepthTestEnabled(){return this.qy}ep(){}Nl(){}hp(){}getXMax(){const t=this.mo;return t?t.ii():void 0}getXMin(){const t=this.mo;return t?t.ti():void 0}getYMax(){const t=this.mo;return t?t.ei():void 0}getYMin(){const t=this.mo;return t?t.si():void 0}getZMax(){const t=this.mo;return t?t.rp():void 0}getZMin(){const t=this.mo;return t?t.np():void 0}Py(){const t=this.mo;return t?n(t.Yo(),t.Xo(),t.op()):n(0,0,0)}}class oc extends nc{constructor(t,i,s,e,h){super(t,i,s,e,h),this.dt="Box Series 3D",this.ap=.25,this.Rf=()=>ur(this._n);const r=this.Du.getSeries().length;this._n=fr(this.Hs.boxSeries3DFillStyle,r),this.mo=this.Vy.lp().sp(this.qy).Js(this._n).up(this.ap).dn(this.getHighlight()),this.Gc(this.mo)}invalidateData(t){const i=t.length;if(0===i)return this;const s=t[0];if(!s)return this;let e;if("xMin"in s||"yMin"in s||"zMin"in s||"xMax"in s||"yMax"in s||"zMax"in s){e=[];for(let s=0;s<i;s+=1){const i=t[s],h="xMin"in i&&"xMax"in i,r="yMin"in i&&"yMax"in i,n="zMin"in i&&"zMax"in i;e[s]={color:i.color,value:i.value,id:i.id,xCenter:h?(i.xMin+i.xMax)/2:void 0,yCenter:r?(i.yMin+i.yMax)/2:void 0,zCenter:n?(i.zMin+i.zMax)/2:void 0,xSize:h?i.xMax-i.xMin:void 0,ySize:r?i.yMax-i.yMin:void 0,zSize:n?i.zMax-i.zMin:void 0}}}else e=t;return this.mo.cp(e.slice()),this.Du.vs.Ss(),this}setFillStyle(t){return this._n="function"==typeof t?t(this._n):t,this.mo.Js(t),this.Du.vs.Ss(),this}getFillStyle(){return this._n}setRoundedEdges(t){return void 0!==t&&isNaN(t)&&(console.error("'BoxSeries3D.setRoundedEdges | NaN was supplied.'"),t=void 0),this.ap=void 0!==t?Ah(t,0,1):void 0,this.mo.up(this.ap),this.Vy.Ss(),this}getRoundedEdges(){return this.ap}Le(){return this.Ky&&this.getVisible()}Kc(t,i){t.dn(i),this.Du.vs.Ss()}Nl(){super.Nl(),this.mo._e(!1)}attach(t,i){return super.attach(t,i),ar(t,this.Hs,{fill:this._n}),this}}class ac extends nc{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Rf=()=>ur(this.Ra.getFillStyle())}setStrokeStyle(t){this.Ra="function"==typeof t?t(this.Ra):t;const i=this.Ra;return this.mo.za(i),this.Vy.Ss(),this}getStrokeStyle(){return this.Ra}add(t){return(t=Array.isArray(t)?t:[t])?(this.mo.Bo(t.slice()),this.Vy.Ss(),this):this}clear(){return this.mo.Oo(),this.gc=0,this}getPointAmount(){const t=this.mo;return t.Lo()+t.Eo()}Le(){return this.Ky&&this.getPointAmount()>0&&this.getVisible()}Kc(t,i){t.dn(i),this.Vy.Ss()}attach(t,i){return super.attach(t,i),ar(t,this.Hs,{stroke:this.Ra}),this}}class uc extends ac{constructor(t,i,s,e,h){super(t,i,s,e,h),this.dt="Line Series 3D";const r=this.Du.getSeries().length;this.Ra=fr(e.lineSeries3DStrokeStyle,r),this.fp=fo.pointStyle3D,this.dp(this.Ra),this.mo=this.Vy.Iy([Ll.UserSeries]).sp(this.qy).za(this.Ra).Uy(this.fp).dn(this.getHighlight()),this.Gc(this.mo)}setStrokeStyle(t){super.setStrokeStyle(t),this.dp(this.Ra);const i=this.fp;return this.mo.Uy(i),this}dp(t){const i=new io.Triangulated({shape:"sphere",fillStyle:t.getFillStyle(),size:t.getThickness()});this.fp=i}}class lc extends ac{constructor(t,i,s,e,h){super(t,i,s,e,h),this.dt="Point Line Series 3D",this.Rf=()=>ur(this.Ra.getFillStyle())||ur(this.fp.getFillStyle());const r=this.Du.getSeries().length;this.Ra=fr(e.pointLineSeries3DStrokeStyle,r),this.fp=fr(e.pointLineSeries3DPointStyle,r),this.gp(),this.mo=this.Vy.Iy([Ll.UserSeries]).sp(this.qy).za(this.Ra).Uy(this.fp).dn(this.getHighlight()),this.Gc(this.mo)}setPointStyle(t){return this.fp="function"==typeof t?t(this.fp):t,this.gp(),this.mo.Uy(this.fp),this.Vy.Ss(),this}getPointStyle(){return this.fp}setStrokeStyle(t){super.setStrokeStyle(t);const i=this.Ra,s=Math.abs(i.getThickness()),e=this.fp;s>e.getSize()&&(this.fp=e.setSize(s)),this.gp();const h=this.fp;return this.mo.Uy(h),this.Vy.Ss(),this}gp(){const t=this.fp,i=t.getSize();this.fp=t.setSize(i)}Kc(t,i){t.dn(i),this.Vy.Ss()}}class cc extends nc{constructor(t,i,s,e,h,r){super(t,i,s,e,h)}add(t){return(t=Array.isArray(t)?t:[t])?(this.mo.Bo(t.slice()),this.Vy.Ss(),this):this}clear(){return this.mo.Oo(),this.gc=0,this}getPointAmount(){const t=this.mo;return t.Lo()+t.Eo()}Le(){return this.Ky&&this.getPointAmount()>0&&this.getVisible()}Kc(t,i){t.dn(i),this.Vy.Ss()}attach(t,i){return super.attach(t,i),ar(t,this.Hs,{point3D:this.mp}),this}}class fc extends cc{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.dt="Point Series 3D",this.Rf=()=>ur(this.mp.getFillStyle());const n=this.Du.getSeries().length;this.mp=fr(e.pointSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.mo=this.Vy.pp(o).sp(this.qy).yp(this.mp).dn(this.getHighlight()),this.Gc(this.mo)}setPointStyle(t){this.mp="function"==typeof t?t(this.mp):t;const i=this.mp;return this.mo.yp(i),this.Vy.Ss(),this}getPointStyle(){return this.mp}}class dc extends cc{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.dt="Point Cloud Series 3D",this.Rf=()=>ur(this.mp.getFillStyle());const n=this.Du.getSeries().length;this.mp=fr(e.pointCloudSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.mo=this.Vy.pp(o).yp(this.mp).dn(this.getHighlight()),this.Gc(this.mo)}setPointStyle(t){this.mp="function"==typeof t?t(this.mp):t;const i=this.mp;return this.mo.yp(i),this.Vy.Ss(),this}getPointStyle(){return this.mp}}const gc={Triangulated:fc,Pixelated:dc};class mc extends Ml{constructor(t,i,s,e,h,r,n,o,a,u,l){super(t,i,s,e,h,r,n,o,a,u,l),this.Sp=[],this.vp=0,this.bp=t=>{const i=this.Sp.indexOf(t);i>=0&&(this.Sp.splice(i,1),this.wt.emit("seriesDispose",this,t))},this.xp=()=>{this.vp+=1},this.Mp=()=>{this.vp-=1},this.onSeriesBackgroundMouseEnter=t=>this.wt.on("mouseEnterSeriesBackground",t),this.onSeriesBackgroundMouseLeave=t=>this.wt.on("mouseLeaveSeriesBackground",t),this.onSeriesBackgroundMouseMove=t=>this.wt.on("mouseMoveSeriesBackground",t),this.onSeriesBackgroundMouseDown=t=>this.wt.on("mouseDownSeriesBackground",t),this.onSeriesBackgroundMouseUp=t=>this.wt.on("mouseUpSeriesBackground",t),this.onSeriesBackgroundMouseClick=t=>this.wt.on("mouseClickSeriesBackground",t),this.onSeriesBackgroundMouseDoubleClick=t=>this.wt.on("mouseDoubleClickSeriesBackground",t),this.onSeriesBackgroundMouseDragStart=t=>this.wt.on("mouseDragStartSeriesBackground",t),this.onSeriesBackgroundMouseDrag=t=>this.wt.on("mouseDragSeriesBackground",t),this.onSeriesBackgroundMouseDragStop=t=>this.wt.on("mouseDragStopSeriesBackground",t),this.onSeriesBackgroundMouseWheel=t=>this.wt.on("mouseWheelSeriesBackground",t),this.onSeriesBackgroundTouchStart=t=>this.wt.on("touchStartSeriesBackground",t),this.onSeriesBackgroundTouchMove=t=>this.wt.on("touchMoveSeriesBackground",t),this.onSeriesBackgroundTouchEnd=t=>this.wt.on("touchEndSeriesBackground",t),this.offSeriesBackgroundMouseEnter=t=>this.wt.off(t,"mouseEnterSeriesBackground"),this.offSeriesBackgroundMouseLeave=t=>this.wt.off(t,"mouseLeaveSeriesBackground"),this.offSeriesBackgroundMouseMove=t=>this.wt.off(t,"mouseMoveSeriesBackground"),this.offSeriesBackgroundMouseDown=t=>this.wt.off(t,"mouseDownSeriesBackground"),this.offSeriesBackgroundMouseUp=t=>this.wt.off(t,"mouseUpSeriesBackground"),this.offSeriesBackgroundMouseClick=t=>this.wt.off(t,"mouseClickSeriesBackground"),this.offSeriesBackgroundMouseDoubleClick=t=>this.wt.off(t,"mouseDoubleClickSeriesBackground"),this.offSeriesBackgroundMouseDragStart=t=>this.wt.off(t,"mouseDragStartSeriesBackground"),this.offSeriesBackgroundMouseDrag=t=>this.wt.off(t,"mouseDragSeriesBackground"),this.offSeriesBackgroundMouseDragStop=t=>this.wt.off(t,"mouseDragStopSeriesBackground"),this.offSeriesBackgroundMouseWheel=t=>this.wt.off(t,"mouseWheelSeriesBackground"),this.offSeriesBackgroundTouchStart=t=>this.wt.off(t,"touchStartSeriesBackground"),this.offSeriesBackgroundTouchMove=t=>this.wt.off(t,"touchMoveSeriesBackground"),this.offSeriesBackgroundTouchEnd=t=>this.wt.off(t,"touchEndSeriesBackground"),this._p=this.El.Ug()}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.Sp.forEach((i=>i.setAnimationHighlight(t))),this}wp(t,i){this._p.Hc([i]),t.setMouseMoveEventHandler(((t,i)=>{this.wt.emit("mouseMoveSeriesBackground",this,i)})).setMouseEnterEventHandler(((t,i)=>{this.wt.emit("mouseEnterSeriesBackground",this,i)})).setMouseLeaveEventHandler(((t,i)=>{this.wt.emit("mouseLeaveSeriesBackground",this,i)})).setMouseDownEventHandler(((t,i)=>this.wt.emit("mouseDownSeriesBackground",this,i))).setMouseUpEventHandler(((t,i)=>this.wt.emit("mouseUpSeriesBackground",this,i))).setMouseClickEventHandler(((t,i)=>this.wt.emit("mouseClickSeriesBackground",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.wt.emit("mouseDoubleClickSeriesBackground",this,i))).setMouseWheelEventHandler(((t,i)=>this.wt.emit("mouseWheelSeriesBackground",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.wt.emit("mouseDragStartSeriesBackground",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.wt.emit("mouseDragSeriesBackground",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.wt.emit("mouseDragStopSeriesBackground",this,i,s,e))).setTouchStartEventHandler(((t,i)=>{this.wt.emit("touchStartSeriesBackground",this,i)})).setTouchMoveEventHandler(((t,i)=>{this.wt.emit("touchMoveSeriesBackground",this,i)})).setTouchEndEventHandler(((t,i)=>{this.wt.emit("touchEndSeriesBackground",this,i)}))}setSeriesBackgroundFillStyle(t){return this.Ap.Js(t),this.vs.Ss(),this}getSeriesBackgroundFillStyle(){return this.Ap.qs()}setSeriesBackgroundStrokeStyle(t){return this.kp.Fr(t),this.vs.Ss(),this}getSeriesBackgroundStrokeStyle(){return this.kp.Pr()}setSeriesBackgroundEffect(t){return this._p.ee(t),this.vs.Ss(),this}getSeriesBackgroundEffect(){return this._p.re()}Cp(t){this.Sp.push(t),t.onMouseEnter(this.xp),t.onMouseLeave(this.Mp),void 0!==this.Tp&&t.setHighlightOnHover(this.Tp),this.wt.emit("seriesAdded",this,t)}jf(){return this.Sp}Ip(){return this.vp}setSeriesHighlightOnHover(t){return this.Tp=t,this.Sp.forEach((i=>i.setHighlightOnHover(t))),this}dispose(){return this.Sp.slice().forEach(Mh),super.dispose()}}const yc=_r.normalize({x:-.5610788649579117,y:-.35242840511865414,z:-1.1349149375849081});class pc{constructor(t,i,s,e){this.Fp=!0,this.Pp=!0,this.Dp=2*-Math.PI/2160,this.Bp=2*Math.PI/2160,this.Op=.1,this.Lp=1*Math.PI/180,this.Ep=t,this.Rp=i,this.zp=s,this.Yy=e}getDefaultCameraConfiguration(t){const i={direction:yc,location:_r.multiply(yc,-1)};return this.cameraLocationChanged({boundingBox:t,cameraDirection:i.direction,cameraLocation:i.location})||i}applyCameraInteractions(t,i){let s={direction:t.cameraDirection,location:t.cameraLocation};return i.forEach((t=>{"rotate"===t.type?s=this.Vp(s,t):"wheel-zoom"===t.type?s=this.Np(s,t):"rotate+zoom"===t.type?s=this.Gp(s,t):"fixed-rotate"===t.type?s=this.Hp(s,t):"move"===t.type&&(s=this.Wp(s,t))})),this.Fp?s=this.jp(t.boundingBox,s):this.Pp&&(s=this.$p(t.boundingBox,s)),s}Vp(t,i){const{rotation:s}=i,e=t.location,h=_r.multiply(_r.normalize(t.location),-1),{Right:r,Up:n}=this.Yp(h);let o=e;const a=this.Xp(h),u=s.x*this.Dp*a;o=_r.rotateAroundAxis(o,n,u);const l=(s.y>0?1:-1)*Math.min(Math.abs(s.y)*this.Bp,a-this.Lp);return 0!==l&&(o=_r.rotateAroundAxis(o,r,l)),{location:o,direction:_r.multiply(_r.normalize(o),-1)}}Np(t,i){const{deltaY:s}=i;this.Fp&&this.Zp(!1);const e=t.location,h=_r.multiply(_r.normalize(e),-1),r=s*this.Op,n=_r.length(e)*-r;return{direction:h,location:_r.addVec(e,_r.multiply(h,n))}}Gp(t,i){const{rotation:s,cameraDistance:e}=i;this.Fp&&this.Zp(!1);let h=this.Vp(t,{type:"rotate",rotation:s});const r=h.location,n=_r.multiply(_r.normalize(r),-1),o=_r.multiply(n,-e);return h={direction:_r.multiply(_r.normalize(o),-1),location:o},h}Hp(t,i){this.Fp&&this.Zp(!1);const{rotation:s}=i,e=t.location,h=t.direction,{Right:r,Up:n}=this.Yp(h),o=s.x*this.Dp;let a=_r.normalize(_r.rotateAroundAxis(h,n,o));const u=s.y*this.Bp;return a=_r.normalize(_r.rotateAroundAxis(a,r,u)),{location:e,direction:a}}Wp(t,i){this.Fp&&this.Zp(!1),this.Pp=!1;const{amountRight:s,amountForward:e}=i,h=t.location,r=t.direction,{Right:n}=this.Yp(r);return{location:_r.addVec(h,_r.multiply(r,.01*e),_r.multiply(n,.01*s)),direction:r}}boundingBoxChanged(t){const i={location:t.cameraLocation,direction:_r.multiply(_r.normalize(t.cameraLocation),-1)};return this.Fp?this.jp(t.boundingBox,i):this.$p(t.boundingBox,i)}cameraLocationChanged(t){const i={location:t.cameraLocation,direction:_r.multiply(_r.normalize(t.cameraLocation),-1)};return this.Fp?this.jp(t.boundingBox,i):this.$p(t.boundingBox,i)}viewportChanged(t){const i={location:t.cameraLocation,direction:_r.multiply(_r.normalize(t.cameraLocation),-1)};if(this.Fp)return this.jp(t.boundingBox,i)}jp(t,i,s){let e=i;s=void 0!==s?s:0,e=this.Kp(t,e,100,20,1,s,5);const h=this.Xp(e.direction);return e=this.qp(e,this.Jp(t,e,100,1),h),e}Kp(t,i,s,e,h,r,n){return Sc(r,n,(t=>({direction:i.direction,location:_r.multiply(i.direction,-t)})),(i=>this.Qp(t,i)),s,h,"linear",e)}Jp(t,i,s,e){const{Right:h,Left:r,Up:n,Down:o}=this.Yp(i.direction),a=this.tS(t,!1,i);let u=i;const l=e,c=.1;return Math.abs(a.bottom-a.top)>l&&(u=a.bottom<a.top?vc(0,c,(t=>({location:u.location,direction:_r.normalize(_r.lerp(u.direction,o,t))})),(i=>this.iS(t,i)),0,l,!0,s):vc(0,c,(t=>({location:u.location,direction:_r.normalize(_r.lerp(u.direction,n,t))})),(i=>this.iS(t,i)),0,l,!0,s)),Math.abs(a.left-a.right)>l&&(u=a.left<a.right?vc(0,c,(t=>({location:u.location,direction:_r.normalize(_r.lerp(u.direction,r,t))})),(i=>this.sS(t,i)),0,l,!0,s):vc(0,c,(t=>({location:u.location,direction:_r.normalize(_r.lerp(u.direction,h,t))})),(i=>this.sS(t,i)),0,l,!0,s)),u}Qp(t,i){const s=this.tS(t,!0,i);return Math.min(s.left+s.right,s.top+s.bottom)}sS(t,i){const s=this.tS(t,!1,i);return Math.abs(s.left-s.right)}iS(t,i){const s=this.tS(t,!1,i);return Math.abs(s.top-s.bottom)}tS(t,i,s){const e=Nr(this.eS(t,i,s).map((t=>oh(t,this.Ep,this.Rp))));return{left:e.min.x,right:this.Rp.x.getInnerEnd()-e.max.x,top:this.Rp.y.getInnerEnd()-e.max.y,bottom:e.min.y}}eS(t,i,s){const e=this.zp,h=n(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),r=n(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),o=[],a=i?16:4,u=(h.x+r.x)/2,l=(h.z+r.z)/2,c=Math.sqrt(2)*(r.x-u),f=Math.sqrt(2)*(r.z-l);return[h.y,r.y].forEach((t=>{for(let i=0;i<a;i+=1){const s=Math.PI/4+2*Math.PI*i/a,e=u+Math.cos(s)*c,h=l+Math.sin(s)*f;o.push({x:e,y:t,z:h})}})),o.map((t=>this.Yy(t,s))).filter((t=>void 0!==t))}$p(t,i){const s=_r.length(i.location),e=this.hS(t);return s<e?{direction:i.direction,location:_r.multiply(i.direction,-e)}:i}hS(t){return.8*Math.sqrt(t.x**2+t.y**2+t.z**2)}Yp(t){const i=n(0,1,0),s=_r.normalize(_r.cross(i,_r.multiply(t,-1)));let e=_r.cross(s,t);return e.y=Math.abs(e.y),e=_r.normalize(e),{Right:s,Up:e,Down:_r.multiply(e,-1),Left:_r.multiply(s,-1)}}Xp(t){const i={x:0,y:1,z:0},s=_r.angle(t,i),e=_r.angle(t,_r.multiply(i,-1));return Math.min(s,e)}qp(t,i,s){return{location:_r.lerp(t.location,i.location,s),direction:_r.normalize(_r.lerp(t.direction,i.direction,s))}}Zp(t){return this.Fp=t,this}rS(){return this.Fp}}const Sc=(t,i,s,e,h,r,n,o)=>{let a,u=0,l=(i+t)/2;do{const o=s(l);if(a={value:l,result:o,score:e(o)},Math.abs(a.score-h)<=r)break;const c=a.score>h;c&&"linear"===n||!c&&"reversed"===n?(l=(a.value+t)/2,i=a.value):(l=(a.value+i)/2,t=a.value),u+=1}while(u<o);return a.result},vc=(t,i,s,e,h,r,n,o)=>{let a,u=0,l=t;do{const c=s(l),f=e(c);if(void 0===a||Math.abs(f-h)<Math.abs(a.score-h)){if(a={value:l,result:c,score:e(c)},Math.abs(a.score-h)<=r)break}else if(n)break;u+=1,l+=1/(o-1)*(i-t)}while(u<o);return a.result};class bc extends nc{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.dt="Surface Grid Series 3D",this.Rf=()=>ur(this._n),this.Zy=sc;const n=this.Du.getSeries().length;this._n=fr(this.Hs.surfaceGridSeries3DFillStyle,n),this.eu=fr(this.Hs.surfaceGridSeries3DWireframeStyle,n);const o=e.start||{x:0,z:0},a=e.end?{x:(e.end.x-o.x)/e.columns,z:(e.end.z-o.z)/e.rows}:e.step||{x:1,z:1},u={heatmapDataType:"intensity",dataOrder:e.dataOrder||"columns",columns:e.columns,rows:e.rows,start:o,step:a};this.hr=u,this.mo=this.Vy.nS(u).Js(this._n).hu(this.eu).ip(this.Zy).dn(this.getHighlight()),this.Gc(this.mo)}setFillStyle(t){return this._n="function"==typeof t?t(this._n):t,this.mo.Js(this._n),this.Vy.Ss(),this}getFillStyle(){return this._n}setWireframeStyle(t){return this.eu="function"==typeof t?t(this.eu):t,this.mo.hu(this.eu),this.Vy.Ss(),this}getWireframeStyle(){return this.mo.ru()}setIntensityInterpolation(t){return t=t||"disabled",this.mo.oS(t),this.Vy.Ss(),this}getIntensityInterpolation(){return this.mo.aS()}invalidateIntensityValues(t){if(Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.hr.dataOrder?t.length:t[0].length,rows:"rows"===this.hr.dataOrder?t.length:t[0].length},s="columns"===this.hr.dataOrder?this.hr.columns:this.hr.rows,e="columns"===this.hr.dataOrder?this.hr.rows:this.hr.columns;if(i.x>s||i.y>e){if(!0===this.Du.zd.mr){const t=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.hr.columns}x${this.hr.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;yh.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.mo.uS({type:"intensity",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.hr.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.hr.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.hr.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.hr.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.hr.dataOrder?this.hr.columns:this.hr.rows)-1,o=("columns"===this.hr.dataOrder?this.hr.rows:this.hr.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.Du.zd.mr){const s=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.hr.columns}x${this.hr.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;yh.console.warn(s)}const a=Math.max(-s,0),u=Math.max(-h,0),l=Math.max(e-n,0),c=Math.max(r-o,0),f=i.primary-(a+l),d=[];if(0===u&&0===c)for(let i=0;i<f;i+=1)d[i]=t.values[a+i];else for(let i=0;i<f;i+=1)d[i]=t.values[a+i].slice(u,0===c?void 0:-c);if(0===d.length||0===d[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:d},s=Math.max(s,0),h=Math.max(h,0)}this.mo.uS({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.Vy.Ss(),this}invalidateHeightMap(t){if(Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.hr.dataOrder?t.length:t[0].length,rows:"rows"===this.hr.dataOrder?t.length:t[0].length},s="columns"===this.hr.dataOrder?this.hr.columns:this.hr.rows,e="columns"===this.hr.dataOrder?this.hr.rows:this.hr.columns;if(i.x>s||i.y>e){if(!0===this.Du.zd.mr){const t=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.hr.columns}x${this.hr.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;yh.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.mo.lS({type:"y",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.hr.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.hr.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.hr.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.hr.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.hr.dataOrder?this.hr.columns:this.hr.rows)-1,o=("columns"===this.hr.dataOrder?this.hr.rows:this.hr.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.Du.zd.mr){const s=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.hr.columns}x${this.hr.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;yh.console.warn(s)}const a=Math.max(-s,0),u=Math.max(-h,0),l=Math.max(e-n,0),c=Math.max(r-o,0),f=i.primary-(a+l),d=[];if(0===u&&0===c)for(let i=0;i<f;i+=1)d[i]=t.values[a+i];else for(let i=0;i<f;i+=1)d[i]=t.values[a+i].slice(u,0===c?void 0:-c);if(0===d.length||0===d[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:d},s=Math.max(s,0),h=Math.max(h,0)}this.mo.lS({type:"y",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.Vy.Ss(),this}setCullMode(t){return this.mo.cS("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.mo.fS()}ep(){}Nl(){}hp(){}Le(){return this.Ky&&this.getVisible()}Kc(t,i){t.dn(i),this.Vy.Ss()}}class xc extends nc{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.dt="Surface Grid Series 3D",this.Rf=()=>ur(this._n),this.Zy=sc;const n=this.Du.getSeries().length;this._n=fr(this.Hs.surfaceScrollingGridSeries3DFillStyle,n),this.eu=fr(this.Hs.surfaceScrollingGridSeries3DWireframeStyle,n);const o=e.start||{x:0,z:0},a=e.step||{x:1,z:1},u={heatmapDataType:"intensity",scrollDimension:e.scrollDimension||"columns",columns:e.columns,rows:e.rows,start:o,step:a};this.hr=u,this.mo=this.Vy.dS(u).Js(this._n).hu(this.eu).ip(this.Zy).dn(this.getHighlight()),this.Gc(this.mo)}setFillStyle(t){return this._n="function"==typeof t?t(this._n):t,this.mo.Js(this._n),this.Vy.Ss(),this}getFillStyle(){return this._n}setWireframeStyle(t){return this.eu="function"==typeof t?t(this.eu):t,this.mo.hu(this.eu),this.Vy.Ss(),this}getWireframeStyle(){return this.mo.ru()}setIntensityInterpolation(t){return t=t||"disabled",this.mo.oS(t),this.Vy.Ss(),this}getIntensityInterpolation(){return this.mo.aS()}clear(){return this.mo.Oo(),this.Vy.Ss(),this}addValues(t){if(!t)return this;let i=t.yValues,s=t.intensityValues;if(!i&&!s)return this;if(i&&0===i.length&&(i=void 0),s&&0===s.length&&(s=void 0),i){const t=i[0].length,s=0+t-1,e="columns"===this.hr.scrollDimension?this.hr.rows:this.hr.columns;if(s>e-1){if(!0===this.Du.zd.mr){const i=`SurfaceScrollingGridSeries3D.addValues input yValues overflow.\nGrid was created with ${e} ${"columns"===this.hr.scrollDimension?"rows":"columns"}, input yValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;yh.console.warn(i)}const s=[];for(let t=0;t<i.length;t+=1)s[t]=i[t].slice(0,e+1);i=s}}if(s){const t=s[0].length,i=0+t-1,e="columns"===this.hr.scrollDimension?this.hr.rows:this.hr.columns;if(i>e-1){if(!0===this.Du.zd.mr){const i=`SurfaceScrollingGridSeries3D.addValues intensityValues overflow.\nGrid was created with ${e} ${"columns"===this.hr.scrollDimension?"rows":"columns"}, input intensityValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;yh.console.warn(i)}const i=[];for(let t=0;t<s.length;t+=1)i[t]=s[t].slice(0,e+1);s=i}}if(i&&s){const t=i.length,e=s.length;if(t!==e){if(!0===this.Du.zd.mr){const i=`SurfaceScrollingGridSeries3D.addValues input yValues and intensityValues size does not match.\nyValues: ${t}\nintensityValues: ${e}\nData will be automatically clipped according to the smaller supplied sample. This can result in sub-optimal performance.`;yh.console.warn(i)}t>e?i=i.slice(0,e):s=s.slice(0,t)}}const e=i?i.length:null==s?void 0:s.length,h=i?i[0].length:null==s?void 0:s[0].length;return this.mo.gS({startPrimary:0,startSecondary:0,lengthPrimary:e,lengthSecondary:h,heightMapValues:i,intensityValues:s}),this.Vy.Ss(),this}setCullMode(t){return this.mo.cS("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.mo.fS()}ep(){}Nl(){}hp(){}Le(){return this.Ky&&this.getVisible()}Kc(t,i){t.dn(i),this.Vy.Ss()}}class Mc extends mc{constructor(t,i,s,h,r,n,o){let a;super(t,i,s,i.Fm("chart3D bg",0),i.bm("chart3D ui"),h,i.vs.Hs.chart3DBackgroundFillStyle,i.vs.Hs.chart3DBackgroundStrokeStyle,i.vs.Hs.chart3DTitleFont,i.vs.Hs.chart3DTitleFillStyle,n),this.mS=1,this.yS=[],this.pS=2,this.SS=!0,this.vS=!0,this.bS=!0,this.xS=0,this.axes={id:"axes",chart:this},this.world={id:"world",chart:this},this.wh=[],this.Ih=()=>{const t=this.Vy.MS();this.wS._S(t),this.AS._S(t);const i=this.kS.viewportChanged(this.CS());i&&this.TS(i),this.vs.Ss()},this.Qy=(t,i,s,e,h)=>{if(this.bS){const t=h;this.yS.push({type:"rotate",rotation:t}),this.vs.Ss(),Zh(i)}},this.Jy=(t,i)=>{if(this.vS){if(this.SS)Math.sign(this.xS)!==Math.sign(i.deltaY)?this.xS=dr(i):this.xS+=dr(i);else{const t=dr(i);this.yS.push({type:"wheel-zoom",deltaY:t})}this.vs.Ss(),Zh(i)}},this.zd.nr||this.zd.rr||this.vs.er(1),this.Bm.Ks("Chart3D"),this.IS=s.d3(),this.IS.x.Vt(-1,1),this.IS.y.Vt(-1,1),this.IS.z.Vt(-1,1),this.Vy=i.FS("chart3D layer3D",0,this.IS),this.wS=i.PS("chart3D series bg",0),this.AS=i.vy("chart3D axis ui",1),this.DS={x:new Jl(this,Xl,this.IS.x,this.Hs,this.Vy,this.AS,this.pixelScale,!1,this.El),y:new Jl(this,Zl,this.IS.y,this.Hs,this.Vy,this.AS,this.pixelScale,!1,this.El),z:new Jl(this,Kl,this.IS.z,this.Hs,this.Vy,this.AS,this.pixelScale,!1,this.El)},this.BS=this.Vy.Iy([Ll.InternalUI]).setMouseInteractions(!1),this.setBoundingBoxStrokeStyle(this.Hs.chart3DBoundingBoxStrokeStyle),this.Ap=this.wS.if(this.engine.scale,Xo.Simple).Js(this.Hs.chart3DSeriesBackgroundFillStyle).Fr(th).setMouseInteractions(!0),this.kp=this.wS.if(this.engine.scale,Xo.Simple).Js(Ie).Fr(this.Hs.chart3DSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.wp(this.Ap,this.kp),this.OS({x:1,y:1,z:1},!0),this.kS=new pc(this.engine.scale,this.pixelScale,this.IS,((t,i)=>(i&&this.TS(i),this.Vy.Yy(t)))),this.LS=this.kS.getDefaultCameraConfiguration(this.ES(this.RS)),this.TS(this.LS),this.tp=Ua(new Ya(((t,i,s)=>{a={locationOne:i,locationTwo:s,cameraLocation:this.Vy.getCameraLocation()}}),((t,i,s,h,r,n)=>{if(!this.bS&&!this.vS)return;const o=(a.locationOne.x-a.locationTwo.x)**2+(a.locationOne.y-a.locationTwo.y)**2,u=(i.x-s.x)**2+(i.y-s.y)**2,l=_r.length(a.cameraLocation),c=o/u*l,f=e((h.x+r.x)/2,(h.y+r.y)/2);this.yS.push({type:"rotate+zoom",rotation:this.bS?f:{x:0,y:0},cameraDistance:this.vS?c:l}),this.vs.Ss(),Zh(n)}),(t=>{})),new $a((t=>{}),((t,i,s,e,h)=>{if(this.bS){const t=e;this.yS.push({type:"rotate",rotation:t}),this.vs.Ss(),Zh(h)}}),(t=>{}))),this.onBackgroundTouchStart(this.tp.onTouchStart),this.onBackgroundTouchMove(this.tp.onTouchMove),this.onBackgroundTouchEnd(this.tp.onTouchEnd),this.onSeriesBackgroundTouchStart(this.tp.onTouchStart),this.onSeriesBackgroundTouchMove(this.tp.onTouchMove),this.onSeriesBackgroundTouchEnd(this.tp.onTouchEnd),this.onBackgroundMouseDrag(this.Qy),this.onBackgroundMouseWheel(this.Jy),this.onBackgroundMouseDown(((t,i)=>{Zh(i)})),this.onSeriesBackgroundMouseDrag(this.Qy),this.onSeriesBackgroundMouseWheel(this.Jy),this.onSeriesBackgroundMouseDown(((t,i)=>{Zh(i)})),o&&!0===o.disableAnimations&&this.setAnimationsEnabled(!1),this.onResize(this.Ih),this.Ih(),this.Im(r,this.pixelScale)}addPointSeries(t){const i=new(t&&t.type||fc)(this,this.bp,this.Vy,this.Hs,this.vs.El,t);return this.Cp(i),i}addLineSeries(){const t=new uc(this,this.bp,this.Vy,this.Hs,this.vs.El);return this.Cp(t),t}addPointLineSeries(){const t=new lc(this,this.bp,this.Vy,this.Hs,this.vs.El);return this.Cp(t),t}addSurfaceGridSeries(t){const i=new bc(this,this.bp,this.Vy,t,this.Hs,this.vs.El);return this.Cp(i),i}addSurfaceScrollingGridSeries(t){const i=new xc(this,this.bp,this.Vy,t,this.Hs,this.vs.El);return this.Cp(i),i}addBoxSeries(){const t=new oc(this,this.bp,this.Vy,this.Hs,this.vs.El);return this.Cp(t),t}getDefaultAxisX(){return this.DS.x}getDefaultAxisY(){return this.DS.y}getDefaultAxisZ(){return this.DS.z}getDefaultAxes(){return[this.DS.x,this.DS.y,this.DS.z]}setCameraLocation(t){let i={location:t,direction:_r.normalize(_r.multiply(t,-1))};const s=this.kS.cameraLocationChanged(this.CS(i));return s&&(i=s),this.TS(i),this.vs.Ss(),this}getCameraLocation(){return this.Vy.getCameraLocation()}getCameraDirection(){return this.Vy.getCameraDirection()}setCameraAutomaticFittingEnabled(t){this.kS.Zp(t);const i=this.kS.cameraLocationChanged(this.CS());return i&&this.TS(i),this}getCameraAutomaticFittingEnabled(){return this.kS.rS()}onCameraChange(t){return this.wt.on("cameraChange",t)}offCameraChange(t){return this.wt.off(t,"cameraChange")}setBoundingBoxStrokeStyle(t){return this.BS.za(t).Uy(ql(this.BS.Va())),this.Vy.Ss(),this}getBoundingBoxStrokeStyle(){return this.BS.Va()}setBoundingBox(t){return this.OS(t,!1),this}OS(t,i){this.RS=t;const s=this.ES(t);if(this.IS.x.Gt(s.x),this.IS.y.Gt(s.y),this.IS.z.Gt(-s.z),!i){const t=this.kS.boundingBoxChanged(this.CS());t&&this.TS(t)}this.vs.Ss()}getBoundingBox(){return this.RS}Nl(){const t=yh.performance.now();if(_l.zm(this.Bm,this.Pm),0!==this.xS){const i=this.zS?t-this.zS:1e3/60,s=this.xS*i*.006;this.yS.push({type:"wheel-zoom",deltaY:s}),this.xS=Math.sign(this.xS)*Math.max(Math.abs(this.xS)-.01*i,0),0!==this.xS?(this.vs.Ss(!0),this.zS=t):this.zS=void 0}const i=this.getCameraDirection();if(this.yS.length>0){const t=this.kS.applyCameraInteractions(this.CS(),this.yS);t&&this.TS(t),this.yS.length=0}this.VS&&_r.equals(this.VS.location,this.LS.location)&&_r.equals(this.VS.direction,this.LS.direction)||this.wt.emit("cameraChange",this,this.getCameraLocation()),this.VS=this.LS,super.Nl();for(let t=0;t<this.Sp.length;t+=1)this.Sp[t].ep();for(let t=0;t<this.Sp.length;t+=1)this.Sp[t].Nl();this.DS.x.Ne(),this.DS.y.Ne(),this.DS.z.Ne(),this.DS.x.Nl(i),this.DS.y.Nl(i),this.DS.z.Nl(i),super.Tm();const s=this.IS,e=n(s.x.getInnerStart(),s.y.getInnerStart(),s.z.getInnerStart()),h=n(s.x.getInnerEnd(),s.y.getInnerEnd(),s.z.getInnerEnd());this.BS.Oo().Bo([n(h.x,e.y,e.z),n(h.x,h.y,e.z),n(h.x,h.y,h.z),n(h.x,e.y,h.z),n(e.x,e.y,h.z),n(e.x,h.y,h.z),n(h.x,h.y,h.z),n(h.x,h.y,e.z),n(e.x,h.y,e.z),n(e.x,h.y,h.z),n(e.x,e.y,h.z),n(e.x,e.y,e.z)]);const r=[n(e.x,e.y,e.z),n(h.x,e.y,e.z),n(e.x,h.y,e.z),n(h.x,h.y,e.z),n(e.x,e.y,h.z),n(h.x,e.y,h.z),n(e.x,h.y,h.z),n(h.x,h.y,h.z)].map((t=>this.Vy.Yy(t))),o=this.Vy.Yy(n((e.x+h.x)/2,(e.y+h.y)/2,(e.z+h.z)/2)),a=er(r,o),u=[];for(let t=0;t<a.length;t+=1){const i=a[t];Ur(i,o,a[t>0?t-1:a.length-1],a[t<a.length-1?t+1:0])||u.push(i)}const l=er(u,o);this.Ap.jo(l),this.kp.jo(l);for(let t=0;t<this.Sp.length;t+=1)this.Sp[t].hp()}dispose(){return this.wh.forEach((t=>{t()})),this.wh.length=0,this.IS.Pt(),this.Vy.Pt(),this.AS.Pt(),this.wS.Pt(),super.dispose()}Rt(){return this.IS.x.Rt(),this.IS.y.Rt(),this.IS.z.Rt(),super.Rt()}zt(){return super.zt()}TS(t){this.Vy.setCameraLocation(t.location).setCameraDirection(t.direction).setLightLocation(_r.addVec(t.location,_r.multiply(t.direction,-this.pS))),this.LS=t,this.vs.Ss()}ES(t){return _r.divide(t,_r.length(t)/this.mS)}CS(t=this.LS){return{boundingBox:this.ES(this.RS),cameraLocation:t.location,cameraDirection:t.direction}}setMouseInteractions(t){return this.setMouseInteractionZoom(t).setMouseInteractionRotate(t)}setMouseInteractionZoom(t){return this.vS=t,this}getMouseInteractionZoom(){return this.vS}setMouseInteractionRotate(t){return this.bS=t,this}getMouseInteractionRotate(){return this.bS}forEachAxis(t){return t(this.DS.x),t(this.DS.y),t(this.DS.z),this}getMinimumSize(){}getSeries(){return this.Sp}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationZoom(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}setAnimationZoom(t){return this.SS=!!t,this}getAnimationZoom(){return this.SS}}const _c={Column:Lu,Row:Eu};class wc extends bl{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.NS=new Map,this.GS=this.addUIElement(_c.Row).setPosition({x:0,y:100}).setOrigin(Ba.LeftTop).setBackground((t=>t.setFillStyle(Ie).setStrokeStyle(th)))}add(t,i){return(t instanceof Ml?[t]:t instanceof ky?t.getCells().filter((t=>t.panel instanceof Ml)).map((t=>t.panel)):[]).forEach((t=>{const s=this.GS.addElement(ul.VerticalLegendBox).setBackground((t=>t.setFillStyle(Ie).setStrokeStyle(th))).add(t,i).setTitle(t.getTitle());this.NS.set(t,s)})),this.vs.Ss(),this}setLegendBoxes(t){return this.NS.forEach(((i,s)=>t(i,s))),this}getMinimumSize(){return super.getMinimumSize()||this.GS.getSize()}}class Ac{constructor(t,i){this.HS=t,this.WS=i}alter(t){this.US=void 0!==this.US?this.US:this.WS(),this.jS=t,this.HS(t)}resetValue(){void 0!==this.jS&&(void 0!==this.US&&this.isAltered()&&this.HS(this.US),this.US=void 0,this.jS=void 0)}getNormalValue(){return void 0!==this.US?this.US:this.WS()}isAltered(){return void 0!==this.jS&&this.WS()===this.jS}}class kc{constructor(t,i){this.$S=[],this.YS=t,this.Jt=i}update(){return this.YS.getVisible()?!(this.XS()&&(!this.ZS()||(this.resetTable(),this.YS._e(),this.XS()))&&(this.KS(),this.YS._e(),this.XS()&&(this.resetTable(),this.YS._e(),1))):(this.ZS()&&this.resetTable(),!0)}ZS(){for(let t=0;t<this.$S.length;t+=1)if(this.$S[t].isAltered())return!0;return!1}resetTable(){for(let t=0;t<this.$S.length;t+=1)this.$S[t].resetValue();return this}XS(){return((i,s)=>{const h=oh(i.getPosition(e(-1,-1),t.UISpace.PaddedBackground),i.scale,s),r=oh(i.getPosition(e(1,1),t.UISpace.PaddedBackground),i.scale,s);return h.x<s.x.getInnerStart()||r.x>s.x.getInnerEnd()||h.y<s.y.getInnerStart()||r.y>s.y.getInnerEnd()})(this.YS,this.Jt)}qS(){return((i,s)=>{const h=oh(i.getPosition(e(-1,-1),t.UISpace.PaddedBackground),i.scale,s),r=oh(i.getPosition(e(1,1),t.UISpace.PaddedBackground),i.scale,s);return h.x<s.x.getInnerStart()||r.x>s.x.getInnerEnd()})(this.YS,this.Jt)}JS(){return((i,s)=>{const h=oh(i.getPosition(e(-1,-1),t.UISpace.PaddedBackground),i.scale,s),r=oh(i.getPosition(e(1,1),t.UISpace.PaddedBackground),i.scale,s);return h.y<s.y.getInnerStart()||r.y>s.y.getInnerEnd()})(this.YS,this.Jt)}QS(t){return this.$S.push(t),t}}class Cc extends kc{constructor(){super(...arguments),this.K=this.QS(new Ac((t=>this.YS.setOrigin(t)),(()=>this.YS.getOrigin())))}KS(){const t=this.K.getNormalValue(),i=e(this.qS()?-t.x:t.x,this.JS()?-t.y:t.y);this.K.alter(i)}}class Tc extends kc{constructor(t,i,s,e){super(t,i),this.tv=this.QS(new Ac((t=>this.YS.setTextFont((i=>i.setSize(t)))),(()=>this.YS.getTextFont().getSize()))),this.sv=s,this.ev=e}KS(){const t=this.tv.getNormalValue(),i=this.sv;if(i<t)for(let s=1;s<=this.ev;s+=1){const e=t-(t-i)*(s/this.ev);if(this.tv.alter(e),this.YS._e(),!this.XS())return}}}const Ic={Flip:(t,i)=>new Cc(t,i),FontSize:(t=5,i=5)=>(s,e)=>new Tc(s,e,t,i)};class Fc{constructor(){this.hv=[]}addRow(...t){return this.hv.push(t),this}}class Pc extends Fc{oc(){const t=this.hv;return this.hv=[],t}rv(){return this.hv.length=0,this}}class Dc extends Bu{constructor(){super(...arguments),this.Kl=this.Hs.cursorResultTableTextFont,this.Tf=0,this.nv=this.Hs.cursorResultTableTextFillStyle}setContent(t){for(let i=0;i<t.length;i+=1){const s=t[i];let e=!1;for(let t=0;t<s.length;t+=1){const i=s[t];if(void 0===i||0===i.length){e=!0;break}}e||(s.unshift(""),s.push(""))}this.ov();const i=t.length;let s=this.getMembers().length;for(let e=0;e<Math.max(i,s);e+=1){const h=this.getRow(e,!0);if(e>=i)this.getMembers()[e].dispose(),e-=1,s-=1;else{const i=t[e].length;let s=h.getMembers().length;for(let r=0;r<Math.max(i,s);r+=1){const n=t[e][r],o=h.getMembers();if(r>=i)h.getMembers()[r].dispose(),r-=1,s-=1;else if(void 0!==n&&n.length>0){for(let t=o.length;t<r;t+=1)h.addGap(void 0,void 0);let t;if(r>=o.length)t=h.addElement(_u,void 0);else{const i=o[r];i instanceof Tu?(h.getMembers()[r].dispose(),t=h.addElement(_u,r)):t=i}t.setFont(this.Kl).setFillStyle(this.nv).setText(n).setTextRotation(this.Tf)}else{for(let t=o.length;t<r;t+=1)h.addGap(void 0,void 0);r>=o.length?h.addGap(void 0,void 0):o[r]instanceof Mu&&(h.getMembers()[r].dispose(),h.addGap(void 0,r))}}}}return this.Sn.Ss(),this}setTextFillStyle(t){this.nv="function"==typeof t?t(this.nv):t;for(let t=0;t<this.getMemberCount();t+=1){const i=this.getRow(t);for(let t=0;t<i.getMembers().length;t+=1){const s=i.getMembers()[t];s instanceof Mu&&s.setFillStyle(this.nv)}}return this.Sn.Ss(),this}getTextFillStyle(){return this.nv}setTextFont(t){return this.Kl=t instanceof Xn?t:t(this.Kl),this.Sn.Ss(),this}getTextFont(){return this.Kl}setTextRotation(t){return this.Tf=t,this.Sn.Ss(),this}getTextRotation(){return this.Tf}ov(){for(let t=0;t<this.yf.length;t+=1)for(let i=0;i<this.yf[t].getMembers().length;i+=1)this.yf[t].getMembers()[i].dispose()}_e(){for(let t=0;t<this.yf.length;t+=1)this.yf[t].setMinimumSize(void 0);super._e();for(let t=0;t<this.yf.length;t+=1)this.yf[t].setMinimumSize(this.size.x);return super._e(),this}}class Bc{constructor(t,i,s,h,r,n){this.av=!0,this.uv=!0,this.lv=!1,this.Ln=e(0,0),this.xs=!0,this.Sn=t,this.renderingScale=i,this.scale=s,this.cv=h,this.fv=r,this.dv=new this.cv(this.Sn,this.renderingScale,this.scale,_h,n).setMouseInteractions(!1).setFillStyle(n.cursorPointMarkerFillStyle).setStrokeStyle(n.cursorPointMarkerStrokeStyle),this.YS=new Dc(this.Sn,this.renderingScale,this.scale,this.fv,_h,n).setMouseInteractions(!1).setBackground((t=>t.setFillStyle(n.cursorResultTableFillStyle).setStrokeStyle(n.cursorResultTableStrokeStyle))).setTextFillStyle(n.cursorResultTableTextFillStyle).setTextFont(n.cursorResultTableTextFont),this.gv=Ic.Flip(this.YS,this.scale)}dispose(){return this.dv.dispose(),this.YS.dispose(),this}pointAt(t){return this.Ln=t.series.scale===this.scale?t.location:oh(t.location,t.series.scale,this.scale),this.dv.setPosition(this.Ln),this.YS.setPosition(this.Ln).setContent(t.resultTableContent),this.Sn.Ss(),this}getPosition(){return this.Ln}setVisible(t){return this.xs=t,this.Sn.Ss(),this}getVisible(){return this.xs}setPointMarkerVisible(t){return this.av=t,this.Sn.Ss(),this}getPointMarkerVisible(){return this.av}setPointMarker(t){return t(this.dv),this.Sn.Ss(),this}getPointMarker(){return this.dv}setResultTableVisible(t){return this.uv=t,this.Sn.Ss(),this}getResultTableVisible(){return this.uv}setResultTable(t){return t(this.YS),this.Sn.Ss(),this}getResultTable(){return this.YS}setAutoFitStrategy(t){return this.gv&&this.gv.resetTable(),this.gv=t?t(this.YS,this.Sn.vs.Jt):void 0,this.Sn.Ss(),this}getAutoFitStrategy(){return void 0!==this.gv}Nl(){return this.gv&&this.gv.update(),this.YS.setVisible(this.lv&&this.xs&&this.uv),this.dv.setVisible(this.lv&&this.xs&&this.av),this.dv.Nl(),this.YS.Nl(),this}_e(){return this.dv._e(),this.YS._e(),this.lv=((t,i,s=i)=>{const e=i!==s?oh(t,i,s):t;return e.x>=s.x.getInnerStart()&&e.x<=s.x.getInnerEnd()&&e.y>=s.y.getInnerStart()&&e.y<=s.y.getInnerEnd()})(this.Ln,this.scale),this}}class Oc extends Bc{constructor(){super(...arguments),this.mv=!1}pointAt(t){return this.yv(t.fillStyle),super.pointAt(t)}yv(t){t&&this.mv&&this.YS.setTextFillStyle(t)}setResultTableAutoTextStyle(t){return this.mv=t,this.Sn.Ss(),this}getResultTableAutoTextStyle(){return this.mv}}class Lc extends Bc{setPosition(t){return this.Ln=t,this.dv.setPosition(t),this.YS.setPosition(t),this.Sn.Ss(),this}}class Ec{constructor(t,i,s=[]){this.pv=[],this.Sv=(t,i)=>(this.pv.forEach((s=>s(t,i))),t),this.cv=t,this.fv=i,this.pv=s}}class Rc extends Ec{constructor(){super(...arguments),this.vv=(t,i,s,e)=>this.Sv(new Oc(t,i,s,this.cv,this.fv,e),e),this.addStyler=t=>new Rc(this.cv,this.fv,this.pv.map((t=>t)).concat(t)),this.setPointMarker=t=>new Rc(t,this.fv,this.pv.map((t=>t))),this.setResultTableBackground=t=>new Rc(this.cv,t,this.pv.map((t=>t)))}}class zc extends Ec{constructor(){super(...arguments),this.bv=(t,i,s,e)=>this.Sv(new Lc(t,i,s,this.cv,this.fv,e),e),this.addStyler=t=>new zc(this.cv,this.fv,this.pv.map((t=>t)).concat(t)),this.setPointMarker=t=>new zc(t,this.fv,this.pv.map((t=>t))),this.setResultTableBackground=t=>new zc(this.cv,t,this.pv.map((t=>t)))}}const Vc=t=>t.setPointMarker((t=>t.setSize(e(5,5)).setOrigin(e(0,0)))).setResultTable((t=>t.setEffect(!0).setOrigin(e(-1,-1)).setMargin(5))),Nc=(t,i)=>t.setPointMarker((t=>t.setFillStyle(i.chartMarkerPointMarkerFillStyle).setStrokeStyle(i.chartMarkerPointMarkerStrokeStyle).setSize(e(20,20)).setOrigin(e(0,0)))).setResultTable((t=>t.setEffect(!0).setBackground((t=>t)).setOrigin(e(-1,-1)).setMargin(10)));new Rc(wu,wu,[Vc]);const Gc=new Rc(wu,Cu,[Vc,i=>i.setPointMarkerVisible(!1).setResultTable((i=>i.setOrigin(e(0,-1)).setMargin(0).setBackground((i=>{i instanceof Cu&&i.setDirection(t.UIDirections.Down).setPointerLength(10).setPointerAngle(60)}))))]),Hc=Gc;new zc(ku,wu,[Nc,t=>t.setResultTableVisible(!1)]);const Wc=new zc(Su,wu,[Nc,t=>t.setResultTable((t=>t.setOrigin(Ba.LeftBottom)))]),Uc=(t,i,s,e,h)=>({location:t,scale:i,resultTableContent:s,series:e,fillStyle:h}),jc={World:"World",USA:"USA",NorthAmerica:"NorthAmerica",SouthAmerica:"SouthAmerica",Canada:"Canada",Europe:"Europe",Asia:"Asia",Africa:"Africa",Australia:"Australia"},$c=(t,i)=>!(!i.name||t.name.toLowerCase()!==i.name.toLowerCase())||"ISO_A3"in t&&"ISO_A3"in i&&t.ISO_A3.toLowerCase()===i.ISO_A3.toLowerCase(),Yc=(t,i)=>{let s=i.geometry;return s=Xc(t,i,s),s=Zc(t,i,s),s},Xc=(t,i,s)=>{if(t===jc.Asia){const t=[];for(let i=0;i<s.length;i+=1){t[i]=[];const e=s[i],h=t[i];for(let t=0;t<e.length;t+=1){const i=e[t];i.x<-100?h[t]={x:i.x+360,y:i.y}:h[t]=i}}return t}return s},Zc=(t,i,s)=>{const e=i.name.toLowerCase();let h;if(t===jc.USA&&("alaska"===e?h={translate:{x:55,y:-25},scale:{x:.16,y:.16}}:"hawaii"===e&&(h={translate:{x:48,y:7},scale:{x:1,y:1}})),h){const{translate:t,scale:r}=h,n=Nr(kh(s)),o=[];for(let i=0;i<s.length;i+=1){o[i]=[];const h=s[i],a=o[i];for(let i=0;i<h.length;i+=1){const s=h[i];let o=s.x;"alaska"===e&&1===Math.sign(o)&&(o=-180-(180-o)),a[i]={x:t.x+(o-n.min.x)*r.x+n.min.x,y:t.y+(s.y-n.min.y)*r.y+n.min.y}}}return i.outlier=!0,i.transform={...h,vertexBoundaries:n},o}return s},Kc={World:{min:{x:-180,y:-90},max:{x:180.0000000000002,y:83.63410065300012}},Europe:{min:{x:-25,y:34},max:{x:40,y:70}},Africa:{min:{x:-17,y:-40},max:{x:52,y:37.37549753800012}},Asia:{min:{x:27,y:-10.922621351999808},max:{x:180.0000000000002,y:81.85871002800009}},NorthAmerica:{min:{x:-179.1435033839999,y:5.515082098000121},max:{x:-50,y:83.11652252800009}},SouthAmerica:{min:{x:-85,y:-55.9185042229998},max:{x:-35,y:15}},USA:{min:{x:-125,y:24},max:{x:-68,y:50}},Canada:{min:{x:-141.0181,y:41.7297},max:{x:-52.6194,y:75}},Australia:{min:{x:111,y:-43.6586},max:{x:155,y:-9.2199}}},qc={World:.6,Europe:1/1.4,Africa:1.3,Asia:.8,NorthAmerica:.9,SouthAmerica:1.5,USA:3/4,Canada:6/8,Australia:11/12};var Jc;t.AutoCursorModes=void 0,(Jc=t.AutoCursorModes||(t.AutoCursorModes={}))[Jc.disabled=0]="disabled",Jc[Jc.snapToClosest=1]="snapToClosest",Jc[Jc.onHover=2]="onHover";class Qc extends mc{constructor(i,s,e,h,r,n,o,a,u,l,c){super(i,s,e,h,r,n,o,a,u,l,c),this.xv=t.AutoCursorModes.snapToClosest,this.Mv=t=>{this.Sp.includes(t)||(this.Sp.push(t),this.wt.emit("seriesAdded",this,t))},this._v=s.wv();const f=()=>{this.xv!==t.AutoCursorModes.disabled&&this.vs.Ss()},d=()=>{this.xv!==t.AutoCursorModes.disabled&&this.vs.Ss()},g=()=>{this.xv!==t.AutoCursorModes.disabled&&this.vs.Ss()},m=()=>{this.xv!==t.AutoCursorModes.disabled&&this.vs.Ss()},y=()=>{this.xv!==t.AutoCursorModes.disabled&&this.vs.Ss()},p=()=>{this.xv!==t.AutoCursorModes.disabled&&this.vs.Ss()};this.onSeriesBackgroundMouseEnter(f),this.onSeriesBackgroundMouseMove(d),this.onSeriesBackgroundMouseLeave(g),this.onSeriesBackgroundTouchStart(m),this.onSeriesBackgroundTouchMove(y),this.onSeriesBackgroundTouchEnd(p),this.Av(((t,i)=>{const s=i.onMouseEnter(f),e=i.onMouseMove(d),h=i.onMouseLeave(g),r=i.onTouchStart(m),n=i.onTouchMove(y),o=i.onTouchEnd(p),a=this.kv(((t,u)=>{u===i&&(i.offMouseEnter(s),i.offMouseMove(e),i.offMouseLeave(h),i.offTouchStart(r),i.offTouchMove(n),i.offTouchEnd(o)),this.Cv(a)}))}))}setAutoCursor(t){return this.Tv&&t(this.Tv),this.vs.Ss(),this}getAutoCursor(){return this.Tv}setAutoCursorMode(t){return this.xv=t,this.vs.Ss(),this}getAutoCursorMode(){return this.xv}Iv(t){if(t.x<this.uiScale.x.pi()||t.x>this.uiScale.x.Si()||t.y<this.uiScale.y.pi()||t.y>this.uiScale.y.Si())return;let i,s=Number.MAX_VALUE;for(const e of this.Sp)if(e.getCursorEnabled()&&e.getVisible()){const h=e.Iv(t,!1);if(h){const e=oh(h.location,h.scale,this.engine.scale),r=Lr(t,e);Number.isNaN(r)||i&&!(r<s)||(i=h,s=r)}}return i||void 0}solveNearest(t){if(t=t||this.vs.sr())return this.Iv(t)}Fv(i){let s;if(!i){const i=this.vs.sr(),e=this.Sp.find((t=>t.getIsUnderMouse())),h=this.Ap.getIsUnderMouse();this.xv===t.AutoCursorModes.snapToClosest?(h||void 0!==e)&&(s=i&&this.Iv(i)):this.xv===t.AutoCursorModes.onHover&&void 0!==e&&e.getCursorEnabled()&&(s=i&&e.Iv(i,!0))}s?this.Tv.pointAt(s).setVisible(!0):this.Tv.setVisible(!1),this.Tv._e().Nl()}Av(t){return this.wt.on("seriesAdded",t)}Pv(t){return this.wt.off(t)}kv(t){return this.wt.on("seriesDispose",t)}Cv(t){return this.wt.off(t)}dispose(){return this._v.Pt(),this.Tv.dispose(),super.dispose()}}class tf extends Ml{constructor(i,s,e,h,r,n,o){super(i,s,e,s.Fm("mapChart bg",0),s.bm("mapChart ui"),h,s.vs.Hs.mapChartBackgroundFillStyle,s.vs.Hs.mapChartBackgroundStrokeStyle,s.vs.Hs.mapChartTitleFont,s.vs.Hs.mapChartTitleFillStyle,o),this.Dv=[],this.Bv=[],this.Ov=[],this.Jt=this.ym.d2({scaleXYConstructor:In}),this.fc=!0,this._n=this.Hs.mapChartFillStyle,this.In=this.Hs.mapChartStrokeStyle,this.Lv=this.Hs.mapChartOutlierRegionFillStyle,this.Ev=this.Hs.mapChartOutlierRegionStrokeStyle,this.Rv=this.Hs.mapChartSeparateRegionFillStyle,this.zv=this.Hs.mapChartSeparateRegionStrokeStyle,this.Gl=0,this.Vv=t.AutoCursorModes.onHover,this.Nv=sf,this.bs=!1,this.onMouseEnter=t=>this.wt.on("mouseEnter",t),this.onMouseLeave=t=>this.wt.on("mouseLeave",t),this.onMouseClick=t=>this.wt.on("mouseClick",t),this.onMouseDoubleClick=t=>this.wt.on("mouseDoubleClick",t),this.onMouseDown=t=>this.wt.on("mouseDown",t),this.onMouseUp=t=>this.wt.on("mouseUp",t),this.onMouseMove=t=>this.wt.on("mouseMove",t),this.offMouseEnter=t=>this.wt.off(t,"mouseEnter"),this.offMouseLeave=t=>this.wt.off(t,"mouseLeave"),this.offMouseClick=t=>this.wt.off(t,"mouseClick"),this.offMouseDoubleClick=t=>this.wt.off(t,"mouseDoubleClick"),this.offMouseDown=t=>this.wt.off(t,"mouseDown"),this.offMouseUp=t=>this.wt.off(t,"mouseUp"),this.offMouseMove=t=>this.wt.off(t,"mouseMove"),this.offMouseDragStart=t=>this.wt.off(t,"mouseDragStart"),this.offMouseDrag=t=>this.wt.off(t,"mouseDrag"),this.offMouseDragStop=t=>this.wt.off(t,"mouseDragStop"),this.offMouseWheel=t=>this.wt.off(t,"mouseWheel"),this.onMapDataReady=t=>{const i=this.wt.on("mapDataReady",t);return this.Gv&&yh.setTimeout((()=>t())),i},this.onViewChange=t=>this.wt.on("viewChange",t),this.Hv=(t,i,s,e,h)=>{this.Jt.x.Gt(e).yi([this.oi.left+this.Gn.left,this.oi.right+this.Gn.right]),this.Jt.y.Gt(h).yi([this.oi.bottom+this.Gn.bottom,this.oi.top+this.Gn.top+_l.Rm(this.Bm,this.Pm)]),this.Wv&&this.Uv(this.jv,this.Jt,this.Wv)},this.bc=(i,s,e,h)=>{this.Vv!==t.AutoCursorModes.disabled&&(this.$v(i,e,h),Zh(s)),this.wt.emit("mouseEnter",this,s)},this.Mc=(t,i,s,e)=>{this.Yv(t,s,e),this.wt.emit("mouseLeave",this,i),i&&Zh(i)},this.wc=(i,s,e,h)=>{this.Vv!==t.AutoCursorModes.disabled&&(this.$v(i,e,h),Zh(s)),this.wt.emit("mouseMove",this,s)},this.kc=(t,i)=>this.wt.emit("mouseClick",this,i),this.Cc=(t,i)=>this.wt.emit("mouseDoubleClick",this,i),this.Tc=(t,i)=>this.wt.emit("mouseDown",this,i),this.Ic=(t,i)=>this.wt.emit("mouseUp",this,i),this.Fc=(t,i,s)=>{this.wt.emit("mouseDragStart",this,i,s)},this.Pc=(t,i,s,e,h)=>{this.wt.emit("mouseDrag",this,i,s,e,h)},this.Dc=(t,i,s,e)=>{this.wt.emit("mouseDragStop",this,i,s,e)},this.Bc=(t,i)=>{this.wt.emit("mouseWheel",this,i)},this.Oc=(t,i,s,e)=>{this.Xv=this.engine.clientLocation2Engine(i.clientX,i.clientY),this.$v(t,s,e),this.wt.emit("touchStart",this,i),Zh(i)},this.Lc=(t,i,s,e)=>{this.Xv=this.engine.clientLocation2Engine(i.clientX,i.clientY),this.$v(t,s,e),this.wt.emit("touchMove",this,i),Zh(i)},this.Ec=(t,i,s,e)=>{this.Xv=void 0,this.Yv(t,s,e),this.wt.emit("touchEnd",this,i),Zh(i)},this.zd.nr||this.zd.rr||this.vs.er(3),this.Zv=s.vy("mapChart plotting",0),this.onResize(this.Hv),this.Bm.Ks("Map Chart");const a=Ph(n?n.autoCursorBuilder:void 0,Wc);this.Kv=a.bv(s.wv(),this.Jt,this.Jt,this.Hs).setVisible(!1),this.qv=this.El.Ug(),this.Im(r,this.uiScale);const u=Ph(n&&n.type,jc.World);this.jv=u,this.Jv(u).then((()=>{this.wt.emit("mapDataReady")}))}setFillStyle(t){return this._n="function"==typeof t?t(this._n):t,this.Qv(),this}getFillStyle(){return this._n}setStrokeStyle(t){return this.In="function"==typeof t?t(this.In):t,this.Qv(),this}getStrokeStyle(){return this.In}setEffect(t){return this.qv.ee(t),this.vs.Ss(),this}getEffect(){return this.qv.re()}setOutlierRegionFillStyle(t){return this.Lv="function"==typeof t?t(this.Lv):t,this.Bv.forEach((t=>t.Js(this.Lv))),this.vs.Ss(),this}getOutlierRegionFillStyle(){return this.Lv}setOutlierRegionStrokeStyle(t){return this.Ev="function"==typeof t?t(this.Ev):t,this.Bv.forEach((t=>t.Fr(this.Ev))),this.vs.Ss(),this}getOutlierRegionStrokeStyle(){return this.Ev}setSeparateRegionFillStyle(t){return this.Rv="function"==typeof t?t(this.Rv):t,this.Ov.forEach((t=>t.Js(this.Rv))),this.vs.Ss(),this}getSeparateRegionFillStyle(){return this.Rv}setSeparateRegionStrokeStyle(t){return this.zv="function"==typeof t?t(this.zv):t,this.Ov.forEach((t=>t.Fr(this.zv))),this.vs.Ss(),this}getSeparateRegionStrokeStyle(){return this.zv}invalidateRegionValues(t){if(!this.Gv||!this.tb)return this.ib=this.ib||[],this.ib.push(t),this;const i=this._n,s=i instanceof Le;if("function"==typeof t)for(let e=0;e<this.Gv.regions.length;e+=1){const h=this.Gv.regions[e],r=this.tb[e],n=t({...h,geometry:void 0},r);void 0!==n&&n!==r&&(this.tb[e]=n,s&&this.sb(this.Dv[e],n,i.getPalette()))}else for(const e of t)if(e)for(let t=0;t<this.Gv.regions.length;t+=1){const h=this.Gv.regions[t],r=this.tb[t];void 0!==e.value&&e.value!==r&&$c(h,e)&&(this.tb[t]=e.value,s&&this.sb(this.Dv[t],e.value,i.getPalette()))}return this.vs.Ss(),this}setAutoCursor(t){return this.Kv&&t(this.Kv),this.vs.Ss(),this}getAutoCursor(){return this.Kv}setAutoCursorMode(t){return this.Vv=t,this.vs.Ss(),this}getAutoCursorMode(){return this.Vv}setCursorResultTableFormatter(t){return this.Nv=t,this.vs.Ss(),this}getCursorResultTableFormatter(){return this.Nv}onMouseDragStart(t){return this.wt.on("mouseDragStart",t)}onMouseDrag(t){return this.wt.on("mouseDrag",t)}onMouseDragStop(t){return this.wt.on("mouseDragStop",t)}onMouseWheel(t){return this.wt.on("mouseWheel",t)}onTouchStart(t){return this.wt.on("touchStart",t)}onTouchMove(t){return this.wt.on("touchMove",t)}onTouchEnd(t){return this.wt.on("touchEnd",t)}offTouchStart(t){return this.wt.off(t,"touchStart")}offTouchMove(t){return this.wt.off(t,"touchMove")}offTouchEnd(t){return this.wt.off(t,"touchEnd")}setMouseInteractions(t){return this.fc=t,this.eb((t=>t.setMouseInteractions(this.fc))),this}getMouseInteractions(){return this.fc}offMapDataReady(t){return this.wt.off(t,"mapDataReady")}offViewChange(t){return this.wt.off(t,"viewChange")}async Jv(t){const i=await((t,i)=>{let s;if(t===jc.World)s="countries_world.json";else if(t===jc.NorthAmerica)s="countries_northAmerica.json";else if(t===jc.SouthAmerica)s="countries_southAmerica.json";else if(t===jc.Africa)s="countries_africa.json";else if(t===jc.Europe)s="countries_europe.json";else if(t===jc.Asia)s="countries_asia.json";else if(t===jc.USA)s="states_usa.json";else if(t===jc.Canada)s="territoriesProvinces_canada.json";else{if(t!==jc.Australia){const i=`LCJS MapChart unidentified \`type\`: ${t}`;throw yh.alert(i),new Error(i)}s="territories_australia.json"}const e=`${i}/maps/${s}`;return yh.fetch(e).then((t=>t.json())).catch((t=>{Mr(i,e,"Map Chart",{shouldCrash:!0})}))})(t,this.zd.gr);this.tb=new Array(i.regions.length).map((t=>{})).fill(void 0);const s=Kc[t];if(!s)throw new Error("Unidentified map type.");for(const t of i.outliers)for(const i of t.geometry){const t=this.Zv.if(this.Jt,Xo.Simple).jo(i).setMouseInteractions(this.fc).Js(this.Lv).Fr(this.Ev);this.Bv.push(t)}if(t===jc.USA){const t=25.8,i=29.7;this.Ov.push(this.Zv.Zc(this.Jt).setMouseInteractions(!1).Js(this.Rv).Fr(this.zv).Qn({x:-126,y:t}).Gt({x:10,y:i-t}),this.Zv.Zc(this.Jt).setMouseInteractions(!1).Js(this.Rv).Fr(this.zv).Qn({x:-113,y:t}).Gt({x:7,y:i-t}))}for(let e=0;e<i.regions.length;e+=1){const h=i.regions[e],r=[],n=Yc(t,h);for(const t of n){const i=this.Zv.if(this.Jt,Xo.Simple).jo(t);i.setMouseInteractions(this.fc).cn(s).setMouseEnterEventHandler(((t,s)=>this.bc(i,s,h,e))).setMouseLeaveEventHandler(((t,s)=>this.Mc(i,s,h,e))).setMouseClickEventHandler(this.kc).setMouseDoubleClickEventHandler(this.Cc).setMouseDownEventHandler(this.Tc).setMouseUpEventHandler(this.Ic).setMouseMoveEventHandler(((t,s)=>this.wc(i,s,h,e))).setMouseDragStartEventHandler(this.Fc).setMouseDragEventHandler(this.Pc).setMouseDragStopEventHandler(this.Dc).setMouseWheelEventHandler(this.Bc).setTouchStartEventHandler(((t,s)=>this.Oc(i,s,h,e))).setTouchMoveEventHandler(((t,s)=>this.Lc(i,s,h,e))).setTouchEndEventHandler(((t,s)=>this.Ec(i,s,h,e))),r.push(i)}this.Dv.push(r)}if(this.qv.Hc(this.Dv.flat()),this.Qv(),this.Wv=s,this.Uv(t,this.Jt,s),this.Gv=i,this.ib){for(const t of this.ib)this.invalidateRegionValues(t);this.ib=void 0}this.Nl()}Uv(t,i,s){const e=qc[t],h=i.x.getCellSize(),r=i.y.getCellSize()/h,n={min:{x:s.min.x,y:s.min.y},max:{x:s.max.x,y:s.max.y}};if(r<e){const t=(n.max.x-n.min.x)*(e/r-1);n.min.x-=t/2,n.max.x+=t/2}else if(r>e){const t=(n.max.y-n.min.y)*(r/e-1);n.min.y-=t/2,n.max.y+=t/2}i.x.Vt(n.min.x,n.max.x),i.y.Vt(n.min.y,n.max.y);const o=this.Jt.x._i(),a=this.Jt.y._i();this.wt.emit("viewChange",{latitudeRange:{start:n.min.y,end:n.max.y},longitudeRange:{start:n.min.x,end:n.max.x},margin:{top:a[1],bottom:a[0],left:o[0],right:o[1]}})}eb(t){for(let i=0;i<this.Dv.length;i+=1)for(const s of this.Dv[i])t(s,i)}Qv(){const t=this._n,i=this.In;if(t instanceof Le&&"value"===t.getLookUpProperty()&&this.tb){const s=t.getPalette();for(let t=0;t<this.tb.length;t+=1){this.sb(this.Dv[t],this.tb[t],s);for(const s of this.Dv[t])s.Fr(i)}}else this.eb((s=>s.Js(t).Fr(i)));this.vs.Ss()}sb(t,i,s){const e=void 0!==i?s.getColors(i):s.getFallbackColor(),h=new De({color:e});for(const i of t)i.Js(h)}$v(t,i,s){this.hb={polygon:t,region:i,iRegion:s},this.vs.Ss()}Yv(t,i,s){this.hb&&t===this.hb.polygon&&(this.hb=void 0,this.vs.Ss())}setAnimationsEnabled(t){return this.bs=!t,this}getAnimationsEnabled(){return this.bs}getMinimumSize(){}jf(){return[this]}Nl(){super.Nl(),super.Tm(),_l.zm(this.Bm,this.Pm);const t=u(this.Jt.x.pi(),this.Jt.y.pi(),this.Jt.x.vi(),this.Jt.y.vi());this.Zv._S(t);const i=this.vs.sr()||this.Xv;if(this.hb&&i){const t=this.tb&&this.tb[this.hb.iRegion];let s=oh(i,this.engine.scale,this.Jt);s={x:Ah(s.x,this.Jt.x.getInnerStart(),this.Jt.x.getInnerEnd()),y:Ah(s.y,this.Jt.y.getInnerStart(),this.Jt.y.getInnerEnd())};let e=s.x,h=s.y;const r=this.hb.region.transform;this.hb.region.outlier&&r&&(e=(e-r.translate.x-r.vertexBoundaries.min.x)/r.scale.x+r.vertexBoundaries.min.x,h=(h-r.translate.y-r.vertexBoundaries.min.y)/r.scale.y+r.vertexBoundaries.min.y),this.Kv.setPosition(s).setVisible(!0).getResultTable().setContent(this.Nv(new Pc,this.hb.region,t,e,h,this).oc())}else this.Kv.setVisible(!1);return this.Kv._e().Nl(),this}dispose(){return this.Zv.Pt(),this.Kv.dispose(),vl(this.Jt),super.dispose()}Rt(){return super.Rt(),this.Jt.Rt(),this}zt(){return super.zt(),this.Jt.zt(),this}Rf(){return ur(this._n)}attach(t,i){return t.setText(this.getTitle()),t.setButtonOffStrokeStyle(t.getButtonOffStrokeStyle().setThickness(1)),t.setButtonOnStrokeStyle(t.getButtonOnStrokeStyle().setThickness(1)),t.setOn(!0).setLocked(!0),t.onMouseEnter((()=>{})),t.onMouseLeave((()=>{})),this.onMouseEnter((()=>t.setHighlight(!0))),this.onMouseLeave((()=>t.setHighlight(!1))),this.onTouchStart((()=>t.setHighlight(!0))),this.onTouchEnd((()=>t.setHighlight(!1))),ar(t,this.Hs,{fill:this._n}),this}}const sf=(t,i,s,e,h,r)=>(t.addRow(`${i.name}`).addRow(ef(e,h)),void 0!==s&&t.addRow(`Region value: ${s.toFixed(1)}`),t),ef=(t,i)=>{const s=t>0,e=i>0;return`${[cr(Math.abs(0|t),2),"° ",cr(Math.abs(0|(t<0?t=-t:t)%1*60),2),"' "].join("")+(s?"E":"W")}, ${[cr(Math.abs(0|i),2),"° ",cr(Math.abs(0|(i<0?i=-i:i)%1*60),2),"' "].join("")+(e?"N":"S")}`};class hf extends Wn{constructor(t,i,s,e,h,r,n,o,a){super(t,i,i.rb(s),e,h,{numeric:i.nb({amplitude:e.polarAmplitudeAxisNumericTicks,radial:e.polarAmplitudeAxisNumericTicks}),datetime:i.nb({amplitude:e.polarAmplitudeAxisDateTimeTicks,radial:e.polarAmplitudeAxisDateTimeTicks}),time:i.nb({amplitude:e.polarAmplitudeAxisTimeTicks,radial:e.polarAmplitudeAxisTimeTicks})},{type:"linear"}),this.ob=r,this.ab=n,this.ub=o,this.El=a,this.lb=s,this.cb=i.nb({amplitude:e.polarAmplitudeAxisStrokeStyle,radial:e.polarRadialAxisStrokeStyle}),this.Zs=o.$e(s).setMouseInteractions(!1).te(i.nb({amplitude:e.polarAmplitudeAxisTitleFont,radial:e.polarRadialAxisTitleFont})).Js(i.nb({amplitude:e.polarAmplitudeAxisTitleFillStyle,radial:e.polarRadialAxisTitleFillStyle})),this.he=this.El.Ug([this.Zs]).ee(e.effectsText)}setStrokeStyle(t){return this.cb="function"==typeof t?t(this.cb):t,this.ab.Ss(),this}getStrokeStyle(){return this.cb}Ce(t,i){return new rf(i,t,this.lb,this.ub,this.ub,this.fb(this.ob,this.lb),this.ub.rc(this.lb).setMouseInteractions(!1))}Te(t,i){const s=this.gb(this.lb,t);this.mb&&!1===this.mb(t)?t.ns.setVisible(!1):t.ns.setVisible(!0).Qn(Qr(this.yb(this.lb,t.l),s.padding)).ao(s.alignment).ie(s.rotation).so(s.offset.x,s.offset.y),this.pb(this.lb,t.Sb,t.vb,t)}setMouseInteractions(t){return this}Nl(){this.me({physicalAxisSize:0});const t=this.Pe(((t,i)=>{const s=i.Es.Ae,e=.5*this.cb.getThickness()+s.tickLength+s.tickPadding+Math.abs(i.ns._e().xi().y/this.lb.Qi().y)+s.labelPadding;return Math.max(t,e)}),0);return this.bb(this.lb,this.cb,t),this.xb(this.lb,this.Zs,t),t}}class rf extends ll{constructor(t,i,s,e,h,r,n,o){super(t,i,e,s,h,s,o),this.Sb=r,this.vb=n,r.setMouseInteractions(!1),this.Xe.push(r,n)}}class nf extends hf{constructor(t,i,s,e,h,r,n,o,a){super(t,of,i,s,e,h,r,n,o),this.Wy=this.ab.rc(this.lb).setMouseInteractions(!1),this.Mb=a,this.setScrollStrategy(Pn.expansion),this.setTickStrategy(Dn.Numeric),this.setTitle("Amplitude")}Oe(){return this.Mb()}Ge(t,i){return cl(t,i,this.lb.y)}We(t,i,s){const e=2*(i-t),h=this.lb.x.ji(e);return{min:t-s*h,max:i+s*h}}yb(t,i){return{x:t._b()?i-t.wb().start:t.wb().start-i,y:0}}fb(t,i){return t.nf(i)}pb(t,i,s,e){const h=e.Es.Ae,r=t._b()?e.l-t.wb().start:t.wb().start-e.l;wh(e.l,t.wb().start)||wh(e.l,t.wb().end)?i.setVisible(!1):i.setVisible(!0).Fa(0).Pa(360).Ea(void 0).La(0).Da(r).Ea(60).Js(Ie).Fr(h.gridStrokeStyle);const n=.5*this.cb.getThickness();s.Ua({x:r,y:-n*t.Qi().y}).Pa({x:r,y:-(n+h.tickLength)*t.Qi().y}).za(h.tickStyle)}gb(t,i){const s=i.Es.Ae;return{alignment:{x:0,y:1},padding:{x:0,y:t.Qi().y*-(.5*this.cb.getThickness()+s.tickLength+s.tickPadding)},rotation:0,offset:{x:0,y:0}}}bb(t,i,s){const e=t._b()?t.wb().end-t.wb().start:t.wb().start-t.wb().end;this.Wy.Ua({x:0,y:0}).Pa({x:e,y:0}).za(i)}xb(t,i,s){const e=t._b()?(t.wb().start+t.wb().end)/2-t.wb().start:t.wb().start-(t.wb().start+t.wb().end)/2;i.ao({x:0,y:1}).Qn({x:e,y:-s*t.Qi().y})}}const of={Ee:t=>t.getAmplitudeMin(),Re:t=>t.getAmplitudeMax(),Ve:t=>{},rb:t=>({getInnerStart:()=>t.wb().start,getInnerEnd:()=>t.wb().end,Vt:(i,s)=>t.Ab(i,s),Xt:(i,s,e,h,r)=>t.y.Xt(i,s,e,h,r)}),nb:t=>t.amplitude};class af extends hf{constructor(t,i,s,e,h,r,n,o){super(t,lf,i,s,e,h,r,n,o),this.kb=90,this.Cb=12,this.Tb=uf,this.Wy=this.ab.nf(this.lb).setMouseInteractions(!1),this.mb=t=>{let i=180*(t.l-this.lb.Ib())/Math.PI%360;for(;i<0;)i+=360;for(;i>360;)i-=360;if(i>=0&&i<=20||i>=340&&i<=360)return!1},this.gs=void 0,this.setTickStyle(s.polarRadialAxisTickStyle),this.setTitle("Degrees"),this.setNorth(this.kb)}setTickStyle(t){return this.Fb="function"==typeof t?t(this.Fb):t,this.Pb(),this.ab.Ss(),this}getTickStyle(){return this.Fb}setTickFormattingFunction(t){return this.Tb=t,this.Pb(),this.ab.Ss(),this}getTickFormattingFunction(){return this.Tb}setClockwise(t){this.lb.Db(t);const i=this.kb*Math.PI/180;return t?this.lb.Bb(i+Math.PI/2):this.lb.Bb(i-Math.PI/2),this.ab.Ss(),this}getClockwise(){return!this.lb.Ob()}setNorth(t){for(;t<0;)t+=360;t%=360,this.kb=t;const i=t*Math.PI/180;return this.getClockwise()?this.lb.Bb(i+Math.PI/2):this.lb.Bb(i-Math.PI/2),this.ab.Ss(),this}getNorth(){return 180*this.lb.Ib()/Math.PI}setDivision(t){return this.Cb=t,this.Pb(),this.ab.Ss(),this}getDivision(){return this.Cb}Oe(){return[]}Ge(t,i){return i}We(t,i,s){return{min:t,max:i}}yb(t,i){const s=t.Ob()?1:-1,e=t.Ib(),h=t._b()?t.wb().end-t.wb().start:t.wb().start-t.wb().end;return{x:Math.cos((i-e)*s)*h,y:Math.sin((i-e)*s)*h}}fb(t,i){return t.rc(i)}pb(t,i,s,e){const h=this.Fb,r=t.Ob()?1:-1,n=t.Ib(),o=(e.l-n)*r,a=Math.cos(o),u=Math.sin(o),l=t._b()?t.wb().end-t.wb().start:t.wb().start-t.wb().end,c={x:a*l,y:u*l};i.Ua({x:0,y:0}).Pa(c);const f={x:c.x+a*h.tickLength*t.Qi().x,y:c.y+u*h.tickLength*t.Qi().y};s.Ua(c).Pa(f),i.za(h.gridStrokeStyle),s.za(h.tickStyle)}gb(t,i){const s=this.Fb,e=t.Ob()?1:-1,h=t.Ib();let r,n=(i.l-h)*e;for(;n<0;)n+=2*Math.PI;for(;n>=2*Math.PI;)n-=2*Math.PI;r=n>0&&n<=Math.PI?-n+Math.PI/2:-n-Math.PI/2;const o=s.tickLength+s.tickPadding,a=Math.cos(n)*o*t.Qi().x,u=Math.sin(n)*o*t.Qi().y;return{alignment:{x:0,y:0},padding:{x:a,y:u},rotation:180*r/Math.PI,offset:{x:a,y:u}}}bb(t,i,s){const e=t._b()?t.wb().end-t.wb().start:t.wb().start-t.wb().end;this.Wy.Fa(0).Pa(360).La(0).Da(e+.5*i.getThickness()*t.Qi().x).Ea(60).Js(Ie).Fr(i)}xb(t,i,s){const e=t.Ib(),h=this.gb(t,{l:0+e}),r=t._b()?t.wb().end-t.wb().start:t.wb().start-t.wb().end;i.ao(h.alignment).ie(h.rotation).so(h.offset.x,h.offset.y).Qn(Qr({x:r,y:0},h.padding))}Pb(){this.ue({os:[],us:[{ns:"Radial ticks",Qg:0,Ae:this.Fb,Me:this.Tb,qe:(t,i,s,e)=>{const h=[],r=2*Math.PI/this.Cb;for(let t=0;t<2*Math.PI;t+=r)h.push(t);return h},Rs:{Ie:()=>{},zs:()=>!1},Je:void 0}],hs:uf,le:void 0,ce:void 0})}}const uf=(t,i,s)=>(180*t/Math.PI).toFixed(0),lf={Ee:t=>{},Re:t=>{},Ve:t=>{},rb:t=>({getInnerStart:()=>0,getInnerEnd:()=>2*Math.PI,Vt:(t,i)=>{},Xt:(i,s,e,h,r)=>t.x.Xt(i,s,e,h,r)}),nb:t=>t.radial};class cf extends ru{constructor(t,i,s,e,h,r){super(i,s,h,r),this.dt="Sector",this.Lb=0,this.Eb=1*Math.PI/2,this.Rb=void 0,this.zb=void 0,this.Sn=t,this.lb=e,this.qm=this.Sn.nf(this.lb).dn(this.getHighlight()),this.Gc(this.qm),this._n=h.polarSectorFillStyle,this.In=h.polarSectorStrokeStyle,this.setMouseInteractions(!1)}setAngleStart(t){return this.Lb=Ah(t,0,360),this.Sn.Ss(),this}getAngleStart(){return this.Lb}setAngleEnd(t){return this.Eb=Ah(t,0,360),this.Sn.Ss(),this}getAngleEnd(){return this.Eb}setAmplitudeStart(t){return this.Rb=t,this.Sn.Ss(),this}getAmplitudeStart(){return this.Rb}setAmplitudeEnd(t){return this.zb=t,this.Sn.Ss(),this}getAmplitudeEnd(){return this.zb}setFillStyle(t){return this._n="function"==typeof t?t(this._n):t,this.Sn.Ss(),this}getFillStyle(){return this._n}setStrokeStyle(t){return this.In="function"==typeof t?t(this.In):t,this.Sn.Ss(),this}getStrokeStyle(){return this.In}Nl(){const t=this.lb.wb(),i=180*this.lb.Ib()/Math.PI,s=void 0!==this.Rb?Ah(this.Rb,t.start,t.end):t.start,e=void 0!==this.zb?Ah(this.zb,t.start,t.end):t.end,h=this.lb._b()?s-t.start:t.start-s,r=this.lb._b()?e-t.start:t.start-e,n=Math.min(h,r),o=Math.max(h,r),a=this.lb.Ob()?1:-1,u=Math.abs(this.Eb-this.Lb);this.qm.Fa((this.Lb-i)*a).Pa((this.Eb-i)*a).La(100*n/o).Da(o).Js(this._n).Fr(this.In).Ea(Math.ceil(u/2))}Kc(t,i){t.dn(i),this.Sn.Ss()}attach(t,i=!0){return super.attach(t,i),ar(t,this.Hs,{fill:this._n,stroke:this.In}),this}}class ff extends ru{constructor(){super(...arguments),this.Ky=!0,this.Vb=!0}setAutoScrollingEnabled(t){return this.Ky=t,this.Du.vs.Ss(),this}getAutoScrollingEnabled(){return this.Ky}ep(){}Nl(){}hp(){}setCursorEnabled(t){return this.Vb=t,this}getCursorEnabled(){return this.Vb}}class df extends ff{constructor(t,i,s,e,h,r){super(i,s,h,r),this.Nv=gf,this.Sn=t,this.Du=i,this.scale=e}getAmplitudeMin(){return this.Nb?this.Nb.min:void 0}getAmplitudeMax(){return this.Nb?this.Nb.max:void 0}setCursorResultTableFormatter(t){return this.Nv=t,this.Du.vs.Ss(),this}getCursorResultTableFormatter(){return this.Nv}setCursorEnabled(t){return super.setCursorEnabled(t)}}const gf=(t,i,s,e,h)=>t.addRow(i.getName()).addRow("Angle:","",Math.round(s).toString()).addRow("Amplitude","",h(e)),mf=(t,i,s)=>t*(1-s)+i*s,yf=(t,i,s,e,h)=>{if(void 0===i.value||void 0===s.value||void 0===e.value||void 0===h.value)return;const r=(t.x-s.point.x)/(h.point.x-s.point.x),n=(h.point.y-s.point.y)*r+s.point.y,o=(t.x-i.point.x)/(e.point.x-i.point.x),a=(e.point.y-i.point.y)*o+i.point.y,u=(t.y-a)/(n-a),l=mf(s.value,h.value,r),c=mf(i.value,e.value,o);return mf(c,l,u)},pf=(t,i)=>{const s=[],e=i.wb().start,h=i.wb().end,r=i._b(),n=i.Ob()?1:-1,o=i.Ib(),a=Math.abs(h-e),u=Math.min(e,h)+.001*a,l=Math.max(e,h)-.001*a;for(const i of t){const t=Ah(i.amplitude,u,l),h=i.angle*Math.PI/180-o,a=Math.cos(h*n)*(r?t-e:e-t),c=Math.sin(h*n)*(r?t-e:e-t),f=i.color;s.push({x:a,y:c,color:f})}return s},Sf=t=>{const i={min:wr,max:Ar};for(const s of t)i.min=Math.min(i.min,s.amplitude),i.max=Math.max(i.max,s.amplitude);return i},vf=t=>t.slice().map((t=>t.angle>=0&&t.angle<=360?t:{...t,angle:t.angle%360})),bf=(t,i)=>{let s=ln(t);for(i.Ob()||(s*=-1),s+=180*i.Ib()/Math.PI;s<0;)s+=360;s%=360;const e=qr(t),h=i.wb(),r=Math.abs(h.end-h.start);return{angle:s,amplitude:mf(h.start,h.end,e/r)}};class xf extends df{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.dt="Line Series",this.Gb=[],this.Hb=!1,this.Wb=!1;const n=this.Du.getSeries().length;this.Ra=fr(this.Hs.polarLineSeriesStrokeStyle,n),this.Ub=t.Iy(e,void 0,[Ll.UserSeries]).za(this.Ra).dn(this.getHighlight()).ko(bo.Nearest),this.Gc(this.Ub)}setData(t){return this.Gb=vf(t),this.Hb=!0,this.Nb=Sf(this.Gb),this.Sn.Ss(),this}setStrokeStyle(t){this.Ra="function"==typeof t?t(this.Ra):t;const i=this.Ra;return this.Ub.za(i),this.Sn.Ss(),this}getStrokeStyle(){return this.Ra}setConnectDataAutomaticallyEnabled(t){return this.Wb=t,this.Sn.Ss(),this}getConnectDataAutomaticallyEnabled(){return this.Wb}Le(){return this.Ky&&this.Gb.length>0&&this.getVisible()}Kc(t,i){t.dn(i),this.Sn.Ss()}Iv(t,i){return this.jb(t,this.Ub)}solveNearestFromScreen(t){return this.jb(t,this.Ub)}jb(t,i){const s=i.$b(t);if(!s)return;const{angle:e,amplitude:h}=bf(s,this.scale);return Uc(s,this.scale,this.Nv(new Pc,this,e,h,this.Du.getAmplitudeAxis().formatValue).oc(),this,this.Ra.getFillStyle())}Nl(){if(this.Hb||this.scale.Yb()){const t=pf(this.Gb,this.scale),i=Nr(t);this.Wb?(t.push({...t[0]}),this.Ub.la(!0)):this.Ub.la(!1),this.Ub.Oo().Bo(t).cn(i),this.Hb=!1,this.Ub._e()}}attach(t,i=!0){return super.attach(t,i),ar(t,this.Hs,{stroke:this.Ra}),this}}class Mf extends df{constructor(i,s,e,h,r,n){super(i,s,e,h,r,n),this.dt="Point Line Series",this.Gb=[],this.Hb=!1,this.Wb=!1,this.Xb=3,this.Vn=0,this.Zb=t.PointShape.Circle;const o=this.Du.getSeries().length;this._n=fr(this.Hs.polarPointLineSeriesFillStyle,o),this.Ra=fr(this.Hs.polarPointLineSeriesStrokeStyle,o),this.Ub=i.Iy(h,void 0,[Ll.UserSeries]).za(this.Ra).dn(this.getHighlight()).ko(bo.Nearest),this.Gc(this.Ub),this.Kb=i.pp(h).Js(this._n).Io(this.Zb).Gt(this.Xb).dn(this.getHighlight()).ko(bo.Nearest),this.Gc(this.Kb)}setData(t){return this.Gb=vf(t),this.Hb=!0,this.Nb=Sf(this.Gb),this.Sn.Ss(),this}setStrokeStyle(t){this.Ra="function"==typeof t?t(this.Ra):t;const i=this.Ra;return this.Ub.za(i),this.Sn.Ss(),this}getStrokeStyle(){return this.Ra}setPointFillStyle(t){this._n="function"==typeof t?t(this._n):t;const i=this._n;return this.Kb.Js(i),this.Sn.Ss(),this}getPointFillStyle(){return this._n}setPointSize(t){return this.Xb=t,this.Kb.Gt(t),this.Sn.Ss(),this}getPointSize(){return this.Xb}setPointShape(t){return this.Zb=t,this.Kb.Io(this.Zb),this}getPointShape(){return this.Zb}setPointRotation(t){return this.Vn=t,this.Kb.ie(t),this.Sn.Ss(),this}getPointRotation(){return this.Vn}setConnectDataAutomaticallyEnabled(t){return this.Wb=t,this.Sn.Ss(),this}getConnectDataAutomaticallyEnabled(){return this.Wb}Le(){return this.Ky&&this.Gb.length>0&&this.getVisible()}Kc(t,i){t.dn(i),this.Sn.Ss()}Iv(t,i){return this.jb(t,this.Ub)}solveNearestFromScreen(t){return this.jb(t,this.Ub)}jb(t,i){const s=i instanceof Ho?i.Iv(t):i.$b(t);if(!s)return;const{angle:e,amplitude:h}=bf(s,this.scale);return Uc(s,this.scale,this.Nv(new Pc,this,e,h,this.Du.getAmplitudeAxis().formatValue).oc(),this,"color"in s&&this._n instanceof Be?new De({color:s.color}):this._n)}Nl(){if(this.Hb||this.scale.Yb()){const t=pf(this.Gb,this.scale),i=Nr(t);this.Wb?(t.push({...t[0]}),this.Ub.la(!0)):this.Ub.la(!1),this.Ub.Oo().Bo(t).cn(i),this.Kb.Oo().Bo(t).cn(i),this.Hb=!1,this.Ub._e(),this.Kb._e()}}}class _f extends df{constructor(i,s,e,h,r,n){super(i,s,e,h,r,n),this.dt="Point Series",this.Gb=[],this.Hb=!1,this.Xb=3,this.Vn=0,this.Zb=t.PointShape.Circle;const o=this.Du.getSeries().length;this._n=fr(this.Hs.polarPointSeriesFillStyle,o),this.Kb=i.pp(h).Js(this._n).Io(this.Zb).Gt(this.Xb).dn(this.getHighlight()).ko(bo.Nearest),this.Gc(this.Kb)}setData(t){return this.Gb=vf(t),this.Hb=!0,this.Nb=Sf(this.Gb),this.Sn.Ss(),this}setPointFillStyle(t){this._n="function"==typeof t?t(this._n):t;const i=this._n;return this.Kb.Js(i),this.Sn.Ss(),this}getPointFillStyle(){return this._n}setPointSize(t){return this.Xb=t,this.Kb.Gt(t),this.Sn.Ss(),this}getPointSize(){return this.Xb}setPointShape(t){return this.Zb=t,this.Kb.Io(this.Zb),this}getPointShape(){return this.Zb}setPointRotation(t){return this.Vn=t,this.Kb.ie(t),this.Sn.Ss(),this}getPointRotation(){return this.Vn}Le(){return this.Ky&&this.Gb.length>0&&this.getVisible()}Kc(t,i){t.dn(i),this.Sn.Ss()}Iv(t,i){const s=this.Kb.Iv(t);if(!s)return;const{angle:e,amplitude:h}=bf(s,this.scale);return Uc(s,this.scale,this.Nv(new Pc,this,e,h,this.Du.getAmplitudeAxis().formatValue).oc(),this,"color"in s&&this._n instanceof Be?new De({color:s.color}):this._n)}solveNearestFromScreen(t){return this.Iv(t,!1)}Nl(){if(this.Hb||this.scale.Yb()){const t=pf(this.Gb,this.scale),i=Nr(t);this.Kb.Oo().Bo(t).cn(i),this.Hb=!1,this.Kb._e()}}attach(t,i=!0){return super.attach(t,i),ar(t,this.Hs,{fill:this._n}),this}}class wf{constructor(t,i,s,e){this.wt=new We,this.qb=!1,this.Du=t,this.Jb=i,this.Sp=s,this.mo=e}setGeometry(t){return this.Qb=t,this.qb=!0,this.Du.vs.Ss(),this}getGeometry(){return this.Qb}setMouseInteractions(t){return this.mo.setMouseInteractions(t),this}dispose(){return this.mo.dispose(),this.Jb(this),this.wt.emit("dispose",this),this}onDispose(t){return this.wt.on("dispose",t)}offDispose(t){return this.wt.off(t,"dispose")}setVisible(t){const i=this.mo.getVisible()!==t;return this.mo.setVisible(t),i&&this.wt.emit("visibleStateChanged",this,t),this.Du.vs.Ss(),this}getVisible(){return this.mo.getVisible()}onVisibleStateChanged(t){return this.wt.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.wt.off(t,"visibleStateChanged")}}const Af=(t,i,s)=>{const h=i.Jt,r=s.Jt;let n=(t.x-h.getInnerStart())/(h.getInnerEnd()-h.getInnerStart()),o=(t.y-r.getInnerStart())/(r.getInnerEnd()-r.getInnerStart());return 1===s.Pg&&(n=1-n),1===i.Pg&&(o=1-o),e(o,n)};class kf extends Lc{constructor(t,i,s,e,h,r,n,o,a){super(t,i,gl(s.Jt,e.Jt),h,r,a),this.tx=!1,this.ix=!1,this.sx=!0,this.hx=!0,this.nx=!1,this.ox=!1,this.setGridStrokeYStyle=t=>(this.ux.setGridStrokeStyle(t),this),this.getGridStrokeYStyle=()=>this.ux.getGridStrokeStyle(),this.axisX=s,this.axisY=e,this.lx=n,this.gx=o,this.mx=this.axisX.sm(!1,this.lx).setMouseInteractions(!1).setAllocatesAxisSpace(!1),this.ux=this.axisY.sm(!1,this.gx).setMouseInteractions(!1).setAllocatesAxisSpace(!1)}dispose(){return super.dispose(),this.mx.dispose(),this.ux.dispose(),this}pointAt(t){return super.pointAt(t),this.setPosition(oh(t.location,t.scale,this.scale)),this}setPosition(t){super.setPosition(t),this.mx.setValue(t.x),this.ux.setValue(t.y);const i=Af(e(this.mx.getValue(),this.ux.getValue()),this.axisX,this.axisY);return this.mx.setGridStrokeLength(this.nx?i.x:1),this.ux.setGridStrokeLength(this.ox?i.y:1),this}Nl(){this.mx.setVisible(this.xs&&this.lv).setMarkerVisible(this.xs&&this.lv&&this.tx),this.ux.setVisible(this.xs&&this.lv).setMarkerVisible(this.xs&&this.lv&&this.ix);const t=Af(e(this.mx.getValue(),this.ux.getValue()),this.axisX,this.axisY);return this.mx.setGridStrokeLength(this.nx?t.x:1),this.ux.setGridStrokeLength(this.ox?t.y:1),super.Nl()}setGridStrokeXCut(t){return this.nx=t,this.Sn.Ss(),this}getGridStrokeXCut(){return this.nx}setGridStrokeYCut(t){return this.ox=t,this.Sn.Ss(),this}getGridStrokeYCut(){return this.ox}setGridStrokeXStyle(t){return this.mx.setGridStrokeStyle(t),this}getGridStrokeXStyle(){return this.mx.getGridStrokeStyle()}setTickMarkerXVisible(t){return this.tx=t,this.Sn.Ss(),this}getTickMarkerXVisible(){return this.tx}setTickMarkerYVisible(t){return this.ix=t,this.Sn.Ss(),this}getTickMarkerYVisible(){return this.ix}setTickMarkerX(t){return this.mx.setMarker(t),this}setTickMarkerY(t){return this.ux.setMarker(t),this}getTickMarkerX(){return this.mx.getMarker()}getTickMarkerY(){return this.ux.getMarker()}}class Cf extends Oc{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,o),this.nx=!1,this.ox=!1,this.yx=!1,this.Sx=!1,this.vx=new Map,this.bx=new Map,this.tx=!0,this.ix=!0,this.cv=e,this.fv=h,this.lx=r,this.gx=n,this.xx=o.cursorGridStrokeStyleX,this.Mx=o.cursorGridStrokeStyleY}dispose(){return super.dispose(),this.vx.forEach((t=>t.dispose())),this.bx.forEach((t=>t.dispose())),this._x=void 0,this.wx=void 0,this}Nl(){return this._x&&this._x.setVisible(this.xs&&this.lv).setMarkerVisible(this.xs&&this.lv&&this.tx),this.wx&&this.wx.setVisible(this.xs&&this.lv).setMarkerVisible(this.xs&&this.lv&&this.ix),super.Nl()}pointAt(t){const{location:i}=t,{series:s}=t,{axisX:h}=s,{axisY:r}=s,n=this.Ps(h,!0),o=this.Ps(r,!1);n!==this._x&&this._x&&this._x.setVisible(!1),o!==this.wx&&this.wx&&this.wx.setVisible(!1),n.setValue(i.x),o.setValue(i.y);const a=Af(e(i.x,i.y),h,r);return n.setGridStrokeLength(this.nx?a.x:1),o.setGridStrokeLength(this.ox?a.y:1),this._x=n,this.wx=o,super.pointAt(t)}yv(t){if(super.yv(t),t){const i=i=>i.setTextFillStyle(t);this._x&&this.yx&&this._x.setMarker(i),this.wx&&this.Sx&&this.wx.setMarker(i)}}Ps(t,i){let s=(i?this.vx:this.bx).get(t);return s||(i?(s=t.sm(!1,this.lx),this.vx.set(t,s)):(s=t.sm(!1,this.gx),this.bx.set(t,s)),this.we(s,i),s.setMouseInteractions(!1).setAllocatesAxisSpace(!1)),s}we(t,i){const s=i?this.xx:this.Mx;return t.setGridStrokeStyle(s),t.setMouseInteractions(!1),(i?this.tx:this.ix)?t.setMarkerVisible(!0):t.setMarkerVisible(!1),t}setGridStrokeXCut(t){return this.nx=t,this.Sn.Ss(),this}getGridStrokeXCut(){return this.nx}setGridStrokeYCut(t){return this.ox=t,this.Sn.Ss(),this}getGridStrokeYCut(){return this.ox}setGridStrokeXStyle(t){return this.xx=t instanceof Function?t(this.getGridStrokeXStyle()):t,this.vx.forEach((t=>t.setGridStrokeStyle(this.xx))),this}getGridStrokeXStyle(){return this.xx}setGridStrokeYStyle(t){return this.Mx=t instanceof Function?t(this.getGridStrokeYStyle()):t,this.bx.forEach((t=>t.setGridStrokeStyle(this.Mx))),this}getGridStrokeYStyle(){return this.Mx}setTickMarkerXVisible(t){return this.tx=t,this.Sn.Ss(),this}getTickMarkerXVisible(){return this.tx}setTickMarkerYVisible(t){return this.ix=t,this.Sn.Ss(),this}getTickMarkerYVisible(){return this.ix}setTickMarkerX(t){return this.vx.forEach((i=>i.setMarker(t))),this.lx=this.lx.addStyler(t),this.Sn.Ss(),this}setTickMarkerY(t){return this.bx.forEach((i=>i.setMarker(t))),this.gx=this.gx.addStyler(t),this.Sn.Ss(),this}setTickMarkerXAutoTextStyle(t){return this.yx=t,this.Sn.Ss(),this}getTickMarkerXAutoTextStyle(){return this.yx}setTickMarkerYAutoTextStyle(t){return this.Sx=t,this.Sn.Ss(),this}getTickMarkerYAutoTextStyle(){return this.Sx}}class Tf extends Ec{constructor(t,i,s,e,h){super(t,i,h),this.cv=t,this.fv=i,this.lx=s,this.gx=e,this.pv=h}}class If extends Tf{constructor(){super(...arguments),this.vv=(t,i,s,e)=>this.Sv(new Cf(t,i,s,this.cv,this.fv,this.lx,this.gx,e),e),this.addStyler=t=>new If(this.cv,this.fv,this.lx,this.gx,this.pv.map((t=>t)).concat(t)),this.setPointMarker=t=>new If(t,this.fv,this.lx,this.gx,this.pv.map((t=>t))),this.setResultTableBackground=t=>new If(this.cv,t,this.lx,this.gx,this.pv.map((t=>t)))}}class Ff extends Tf{constructor(){super(...arguments),this.bv=(t,i,s,e,h)=>this.Sv(new kf(t,i,s,e,this.cv,this.fv,this.lx,this.gx,h),h),this.addStyler=t=>new Ff(this.cv,this.fv,this.lx,this.gx,this.pv.map((t=>t)).concat(t)),this.setPointMarker=t=>new Ff(t,this.fv,this.lx,this.gx,this.pv.map((t=>t))),this.setResultTableBackground=t=>new Ff(this.cv,t,this.lx,this.gx,this.pv.map((t=>t)))}}const Pf=new If(wu,wu,al.PointableTextBox,al.PointableTextBox,[(t,i)=>{Vc(t),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),iu(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),iu(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),Df=new Ff(ku,wu,al.PointableTextBox,al.PointableTextBox,[(t,i)=>{Nc(t,i),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),iu(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),iu(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),Bf=(i,s,e)=>{switch(i){case t.UIVisibilityModes.always:return!0;case t.UIVisibilityModes.never:return!1;case t.UIVisibilityModes.whenDragged:return e;case t.UIVisibilityModes.whenHovered:return s&&!e;case t.UIVisibilityModes.whenHoveredOrDragged:return e||s;case t.UIVisibilityModes.whenNotDragged:return!e;default:return!1}},Of=(t,i)=>Math.min(Math.max(t,i.getInnerStart()),i.getInnerEnd());class Lf{constructor(i,s,h,r,n,o){this.Ax=t.UIVisibilityModes.always,this.kx=t.UIVisibilityModes.always,this.Jr=!0,this.Ye=!1,this.Cx=!1,this.Tx=!1,this.Ln=e(0,0),this.Fl=t.UIDraggingModes.draggable,this.Pl=void 0,this.wt=new We,this.xs=!0,this.Ix=(i,s,e)=>{this.Cx=!0,this.Sn.Ss();const h=this.Fl===t.UIDraggingModes.notDraggable?this.Fl:e||this.Fl;this.Pl=this.Sn.vs.oh(h===t.UIDraggingModes.notDraggable?t.MouseStyles.Restricted:h===t.UIDraggingModes.draggable?t.MouseStyles.Move:h===t.UIDraggingModes.onlyHorizontal?t.MouseStyles.Horizontal:t.MouseStyles.Vertical)},this.Fx=()=>{this.Cx=!1,this.Sn.Ss(),this.Sn.vs.ah(this.Pl)},this.Px=(t,i)=>{this.Tx=!0,Zh(i),this.Sn.Ss()},this.Dx=(i,s)=>{if(this.Fl!==t.UIDraggingModes.notDraggable){const h=s||this.Fl,r=oh(this.Sn.vs.uh(i.x,i.y),this.Sn.vs.Jt,this.scale),n=e(h!==t.UIDraggingModes.onlyVertical?Of(r.x,this.scale.x):this.Ln.x,h!==t.UIDraggingModes.onlyHorizontal?Of(r.y,this.scale.y):this.Ln.y);return this.setPosition(n),!0}return!1},this.Bx=(t,i)=>{this.Tx=!1,Zh(i),this.Sn.Ss()},this.onDispose=t=>this.wt.on("dispose",t),this.offDispose=t=>this.wt.off(t,"dispose"),this.Sn=i,this.renderingScale=s,this.scale=h,this.Kv=r,this.Ox=n,this.Hs=o;const a=r.getPointMarker().setMouseInteractions(!0);a.onMouseEnter(this.Ix),a.onMouseLeave(this.Fx),a.onMouseDragStart(this.Px),a.onMouseDrag(((t,i)=>this.Dx(e(i.clientX,i.clientY))&&Zh(i))),a.onMouseDragStop(this.Bx),a.onTouchStart(this.Px),a.onTouchMove(((t,i)=>this.Dx(e(i.clientX,i.clientY))&&Zh(i))),a.onTouchEnd(this.Bx),r.getResultTable().setMouseInteractions(!0),this.setPosition(this.Ln)}setPosition(t){return this.Ln=t,this.Kv.setPosition(t),this.wt.emit("positionChange",this,this.Ln),this}getPosition(){return this.Ln}onPositionChange(t){return this.wt.on("positionChange",t)}offPositionChange(t){return this.wt.off(t,"positionChange")}setPointMarkerVisibility(t){return this.Ax=t,this.Sn.Ss(),this}getPointMarkerVisibility(){return this.Ax}setResultTableVisibility(t){return this.kx=t,this.Sn.Ss(),this}getResultTableVisibility(){return this.kx}setMouseInteractions(t){return this.Jr=t,this.Kv.getPointMarker().setMouseInteractions(t),this.Kv.getResultTable().setMouseInteractions(t),this}getMouseInteractions(){return this.Jr}setAutoFitStrategy(t){return this.Kv.setAutoFitStrategy(t),this}getAutoFitStrategy(){return this.Kv.getAutoFitStrategy()}isAttached(){return!0}Nl(){const t=this.isAttached();return Bf(this.Ax,this.Cx,this.Tx)?this.Kv.setPointMarkerVisible(!0):this.Kv.setPointMarkerVisible(!1),t&&Bf(this.kx,this.Cx,this.Tx)?this.Kv.setResultTableVisible(!0):this.Kv.setResultTableVisible(!1),this.Kv.Nl(),this}_e(){return this.Kv._e(),this}pointAt(t){return this.Kv.pointAt(t),this}dispose(){return this.Ye||(this.Ye=!0,this.Ox(this),this.Kv.dispose(),this.wt.emit("dispose")),this}setVisible(t){const i=this.xs!==t;return this.xs=t,this.Kv.setVisible(t),i&&this.wt.emit("visibleStateChanged",this,this.xs),this}getVisible(){return this.xs}onVisibleStateChanged(t){return this.wt.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.wt.off(t,"visibleStateChanged")}setPointMarker(t){return this.Kv.setPointMarker(t),this}getPointMarker(){return this.Kv.getPointMarker()}setResultTable(t){return this.Kv.setResultTable(t),this}getResultTable(){return this.Kv.getResultTable()}setDraggingMode(i=t.UIDraggingModes.notDraggable){return this.Fl=i,this.Sn.Ss(),this}getDraggingMode(){return this.Fl}}class Ef extends Lf{constructor(i,s,h,r,n,o,a){super(i,s,gl(h.Jt,r.Jt),n.bv(i,s,h,r,a),o,a),this.Lx=t.UIVisibilityModes.always,this.Ex=t.UIVisibilityModes.always,this.Rx=t.UIVisibilityModes.always,this.zx=t.UIVisibilityModes.always,this.gridStrokeStyleX=this.Kv.getGridStrokeXStyle(),this.gridStrokeStyleY=this.Kv.getGridStrokeYStyle(),this.Sn=i,this.axisX=h,this.axisY=r,this.Ox=o;const u=this.Kv.getTickMarkerX().setMouseInteractions(!0);u.onMouseEnter(((i,s)=>this.Ix(i,s,t.UIDraggingModes.onlyHorizontal))),u.onMouseLeave(this.Fx),u.onMouseDragStart(this.Px),u.onMouseDrag(((i,s)=>this.Dx(e(s.clientX,s.clientY),t.UIDraggingModes.onlyHorizontal)&&Zh(s))),u.onMouseDragStop(this.Bx),u.onTouchStart(this.Px),u.onTouchMove(((i,s)=>this.Dx(e(s.clientX,s.clientY),t.UIDraggingModes.onlyHorizontal)&&Zh(s)));const l=this.Kv.getTickMarkerY().setMouseInteractions(!0);l.onMouseEnter(((i,s)=>this.Ix(i,s,t.UIDraggingModes.onlyVertical))),l.onMouseLeave(this.Fx),l.onMouseDragStart(this.Px),l.onMouseDrag(((i,s)=>this.Dx(e(s.clientX,s.clientY),t.UIDraggingModes.onlyVertical)&&Zh(s))),l.onMouseDragStop(this.Bx),l.onTouchStart(this.Px),l.onTouchMove(((i,s)=>this.Dx(e(s.clientX,s.clientY),t.UIDraggingModes.onlyVertical)&&Zh(s)))}Nl(){const t=this.isAttached();return this.xs&&t&&Bf(this.Rx,this.Cx,this.Tx)?this.Kv.setTickMarkerXVisible(!0):this.Kv.setTickMarkerXVisible(!1),this.xs&&t&&Bf(this.zx,this.Cx,this.Tx)?this.Kv.setTickMarkerYVisible(!0):this.Kv.setTickMarkerYVisible(!1),this.Kv.setGridStrokeXStyle(this.xs&&t&&Bf(this.Lx,this.Cx,this.Tx)?this.gridStrokeStyleX:th),this.Kv.setGridStrokeYStyle(this.xs&&t&&Bf(this.Ex,this.Cx,this.Tx)?this.gridStrokeStyleY:th),super.Nl()}setGridStrokeXVisibility(t){return this.Lx=t,this.Sn.Ss(),this}getGridStrokeXVisibility(){return this.Lx}setGridStrokeYVisibility(t){return this.Ex=t,this.Sn.Ss(),this}getGridStrokeYVisibility(){return this.Ex}setTickMarkerXVisibility(t){return this.Rx=t,this.Sn.Ss(),this}getTickMarkerXVisibility(){return this.Rx}setTickMarkerYVisibility(t){return this.zx=t,this.Sn.Ss(),this}getTickMarkerYVisibility(){return this.zx}setGridStrokeXCut(t){return this.Kv.setGridStrokeXCut(t),this}getGridStrokeXCut(){return this.Kv.getGridStrokeXCut()}setGridStrokeYCut(t){return this.Kv.setGridStrokeYCut(t),this}getGridStrokeYCut(){return this.Kv.getGridStrokeYCut()}setGridStrokeXStyle(t){return this.gridStrokeStyleX="function"==typeof t?t(this.gridStrokeStyleX):t,this}getGridStrokeXStyle(){return this.Kv.getGridStrokeXStyle()}setGridStrokeYStyle(t){return this.gridStrokeStyleY="function"==typeof t?t(this.gridStrokeStyleY):t,this}getGridStrokeYStyle(){return this.Kv.getGridStrokeYStyle()}setTickMarkerX(t){return this.Kv.setTickMarkerX(t),this}getTickMarkerX(){return this.Kv.getTickMarkerX()}setTickMarkerY(t){return this.Kv.setTickMarkerY(t),this}getTickMarkerY(){return this.Kv.getTickMarkerY()}setMouseInteractions(t){return super.setMouseInteractions(t),this.Kv.getTickMarkerX().setMouseInteractions(t),this.Kv.getTickMarkerY().setMouseInteractions(t),this}}class Rf extends Ef{}class zf extends Rf{constructor(t,i,s,e,h,r){super(t,i,s.axisX,s.axisY,e,h,r),this.Vx=!1,this.Sn=t,this.owningSeries=s}setPosition(t){return super.setPosition(t),this.Vx=!1,this.Sn.Ss(),this}_e(){if(!this.Vx){const t=this.owningSeries.solveNearestFromScreen(oh(this.Ln,this.scale,this.Sn.vs.Jt));t?(this.Ln=oh(t.location,this.owningSeries.scale,this.scale),this.Kv.pointAt(t),this.Vx=!0):this.Kv.setPosition(this.Ln)}return super._e()}isAttached(){return this.Vx}}class Vf extends ff{constructor(t,i,s,e,h,r,n,o,a,u){super(t,i,a,u),this.Nx=[],this.addMarker=(t=Df)=>{const i=new zf(this.Gx(),this.Du.uiScale,this,t,this.removeMarker,this.Hs);return this.Nx.push(i),i},this.removeMarker=t=>{const i=this.Nx.indexOf(t);-1!==i&&this.Nx.splice(i,1)},this.Xe=new Map,this.chart=t,this.Sn=s,this.axisX=e,this.axisY=h,this.axisXAttachHandler=r,this.axisYAttachHandler=n,this.Gx=o,this.scale=gl(e.Jt,h.Jt),this.Hx=t.Wx,t.Wx+=1,this.Ux(this.scale),this.attacheAxis(),this.onMouseEnter(this.chart.jx),this.onMouseLeave(this.chart.$x),this.onMouseWheel(this.chart.Jy),this.onMouseDragStart(this.chart.Yx),this.onMouseDrag(this.chart.Qy),this.onMouseDragStop(this.chart.Xx),this.onTouchStart(this.chart.tp.onTouchStart),this.onTouchMove(this.chart.tp.onTouchMove),this.onTouchEnd(this.chart.tp.onTouchEnd)}attacheAxis(){this.Zx=this.axisXAttachHandler(this),this.Kx=this.axisYAttachHandler(this)}Nl(){super.Nl();for(let t=0;t<this.Nx.length;t+=1)this.Nx[t]._e().Nl()}Gc(t,i){super.Gc(t,i),t.bn(this.Hx)}setDrawOrder(t){return this.Hx=t.seriesDrawOrderIndex,this.Xe.forEach(((t,i)=>{i.bn(this.Hx)})),this.Du.vs.Ss(),this}dispose(){return super.dispose(),this.Nx.slice().forEach((t=>t.dispose())),this.Zx(this),this.Kx(this),this}qx(){for(let t=0;t<this.Nx.length;t+=1)this.Nx[t].setPosition(this.Nx[t].getPosition());this.Sn.Ss()}getBoundaries(){return a(e(this.getXMin()||0,this.getYMin()||0),e(this.getXMax()||0,this.getYMax()||0))}setCursorEnabled(t){return super.setCursorEnabled(t)}}const Nf=(t,i,s,e)=>{const h=t.length;let r=0;if(void 0!==i){const h=s-i;if(h>0){const i=t.slice(r,h);r+=h,e(i,!0)}}for(;r<h;){const i=t.slice(r,r+s);r+=s,e(i,!1)}},Gf=(t,i=(t=>t))=>{const s=[];let e;for(let h=0;h<t.length;h+=1){e=t[h];const r=i(e.To()),n=e.Co(),o=n?i(n):[];let a=!1,u=!1;"ua"in e&&(a=e.ua(),u=e.ca()),s.push.apply(s,r.slice(a?1:0,r.length-(u&&0===o.length?1:0))),s.push.apply(s,o.slice(a&&0===r.length?1:0,o.length-(u?1:0)))}return s},Hf=(t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:e+i*s,y:t[s]};return h},Wf=(t,i,s,e)=>t.addRow(i.getName()).addRow("X","",i.axisX.formatValue(s)).addRow("Y","",i.axisY.formatValue(e));class Uf extends Vf{constructor(i,s,e,h,r,n,o,a,u,l,c){super(i,s,e,h,r,n,o,a,l,c),this.Jx=[],this.$a=[],this.Qx=0,this.Uh=!1,this.dc=t.HighlightModes.onHover,this.Nv=Wf,this.tM=u}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.Qx=void 0!==i&&i>0?i:0,this.Sn.Ss(),this}add(t){if(Array.isArray(t)?this.iM(t):this.iM([t]),this.$a.length>0){const t=this.$a[this.$a.length-1];this.sM={x:t.x,y:t.y}}return this}addArrayX(t,i=1,s){let e=s;return e||(e=this.sM?this.sM.y+i:0),this.add(((t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:t[s],y:e+i*s};return h})(t,i,e)),this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.sM?this.sM.x+i:0),this.add(Hf(t,i,e)),this}addArraysXY(t,i){if(t.length!==i.length)throw new Error("arrayX and arrayY lengths are not equal");return this.add(((t,i)=>{const s=new Array(t.length);for(let e=0;e<t.length;e+=1)s[e]={x:t[e],y:i[e]};return s})(t,i)),this}setCursorResultTableFormatter(t){return this.Nv=t,this.Du.vs.Ss(),this}getCursorResultTableFormatter(){return this.Nv}getPointAmount(){return this.Jx.reduce(((t,i)=>t+i.Lo()+i.Eo()),this.$a.length)}clear(){this.eM=void 0;for(let t=0;t<this.Jx.length;t+=1)this.Jx[t].Oo();return this.$a.length=0,this.gc=0,this.sM=void 0,this.Sn.Ss(),this.wt.emit("dataClear",this),this}getLastPoint(){return this.sM}Le(){return this.Ky&&this.getPointAmount()>0&&this.getVisible()}getXMax(){return this.tM.getXMax(this.Jx,this.eM)||0}getXMin(){return this.tM.getXMin(this.Jx,this.eM)||0}getYMax(){return this.tM.getYMax(this.Jx,this.eM)||0}getYMin(){return this.tM.getYMin(this.Jx,this.eM)||0}Py(){const t=e(0,0);for(const i of this.Jx)t.x=Math.max(t.x,i.Yo()),t.y=Math.max(t.y,i.Xo());return t}hM(t,i,s,e){this.tM.hM(t,i,s,e,this.scale,(t=>{this.Wc(t)}))}ep(){super.ep();const t=this.Jx.length;this.rM&&this.hM(this.Jx,this.getPointAmount(),this.rM,this.Qx),t!==this.Jx.length&&this.qx()}Nl(){super.Nl();const t=this.getBoundaries();this.$a.length>0&&(this.nM(this.$a),this.$a=[]);for(const i of this.Jx)i.cn(t);return super.Nl()}hp(){super.hp(),this.eM=void 0,this.$a.length=0}iM(t){0!==t.length&&(this.eM?this.eM=Hr(this.eM,Nr(t)):this.eM=Nr(t),this.wt.emit("dataAdd",this,t,this.eM),this.$a=hr(this.$a,t,{canReturnB:!1}),this.Sn.Ss())}oM(){return Gf(this.Jx)}aM(t){return this.wt.on("dataAdd",t)}uM(t){return this.wt.off(t)}lM(t){return this.wt.on("dataClear",t)}cM(t){return this.wt.off(t)}}const jf=(t,i,s,e)=>{let h,r,n=Number.MAX_VALUE;for(let o=0;o<i.length;o+=1){const a=i[o],u=s(a,t);if(u){const i=e(t,u);(void 0===h||i<n)&&(h=u,r=a,n=i)}}return h&&r?[h,r]:void 0};class $f extends df{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.dt="Polygon Series",this.fM=[],this.dM=[],this.gM=t=>{const i=this.dM.indexOf(t);i>=0&&this.dM.splice(i,1);const s=this.fM.findIndex((i=>i===t.mo));s>=0&&this.fM.splice(s,1),this.Wc(t.mo),this.Sn.Ss()};const n=this.Du.getSeries().length;this._n=fr(this.Hs.polarPolygonSeriesFillStyle,n),this.In=fr(this.Hs.polarPolygonSeriesStrokeStyle,n)}addPolygon(){const t=new wf(this.Du,this.gM,this,this.mM());return this.dM.push(t),t}setFillStyle(t){this._n="function"==typeof t?t(this._n):t;const i=this._n;for(const t of this.fM)t.Js(i);return this.Sn.Ss(),this}getFillStyle(){return this._n}setStrokeStyle(t){this.In="function"==typeof t?t(this.In):t;const i=this.In;for(const t of this.fM)t.Fr(i);return this.Sn.Ss(),this}getStrokeStyle(){return this.In}Le(){return this.Ky&&void 0!==this.dM.find((t=>void 0!==t.yM))&&this.getVisible()}Nl(){this.dM.forEach((t=>{(t.qb||this.scale.Yb())&&t.pM&&(t.mo.jo(pf(t.pM,this.scale)),t.qb=!1,t.mo._e())}))}ep(){super.ep();const t=a(wr,Ar);this.dM.forEach((i=>{if(!i.Qb)return;const s=!i.qb&&i.pM?i.pM:vf(i.Qb);i.pM=s;const e=!i.qb&&i.yM?i.yM:Sf(s);i.yM=e,t.min=Math.min(t.min,e.min),t.max=Math.max(t.max,e.max)})),this.Nb=t}Kc(t,i){t.dn(i),this.Sn.Ss()}Iv(t,i){const s=jf(t,this.fM,((t,i)=>{const s=t.Iv(i);if(s)return oh(s,this.scale,t.vs.Jt)}),Lr);if(!s)return;const e=oh(s[0],s[1].vs.Jt,this.scale),h=this.SM(s[1]);if(!h)return;const{angle:r,amplitude:n}=bf(e,this.scale);return{location:e,scale:this.scale,resultTableContent:this.Nv(new Pc,this,r,n,this.Du.getAmplitudeAxis().formatValue).oc(),series:this,fillStyle:this._n,polarPolygon:h}}solveNearestFromScreen(t){return this.Iv(t,!1)}attach(t,i=!0){return super.attach(t,i),ar(t,this.Hs,{fill:this._n,stroke:this.In}),this}mM(){const t=this.Sn.if(this.scale,Xo.Simple).Js(this._n).Fr(this.In).dn(this.getHighlight());return this.fM.push(t),this.Gc(t),t}SM(t){return this.dM.find((i=>i.mo===t))}}class Yf extends df{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.dt="Area Series",this.Gb=[],this.Hb=!1,this.Wb=!1,this.vM=!1;const n=this.Du.getSeries().length;this._n=fr(this.Hs.polarAreaSeriesFillStyle,n),this.In=fr(this.Hs.polarAreaSeriesStrokeStyle,n)}setData(t){const i=(t=>{const i=[];let s,e,h=!1;for(let r=0;r<t.length;r+=1){const n=t[r];let o=!0;if(s){o=!1;const t=n.angle-s.angle;if(wh(t,0))o=!0;else{const i=Math.sign(t);void 0===e?(e=i,o=!0):e===i&&(o=!0)}}o?i.push(n):h=!0,s=n}return{progressivePoints:i,userDataModified:h}})(t);return i.userDataModified&&!1===this.vM&&(console.warn(`${this.dt} setData data format is faulty. Consecutive 'angle' values should progress in the same direction! Invalid data points have been removed.`),this.vM=!0),this.Gb=i.progressivePoints,this.Hb=!0,this.Nb=Sf(this.Gb),this.Sn.Ss(),this}setFillStyle(t){return this._n="function"==typeof t?t(this._n):t,this.Sn.Ss(),this}getFillStyle(){return this._n}setStrokeStyle(t){return this.In="function"==typeof t?t(this.In):t,this.Sn.Ss(),this}getStrokeStyle(){return this.In}setConnectDataAutomaticallyEnabled(t){return this.Wb=t,this.Sn.Ss(),this}getConnectDataAutomaticallyEnabled(){return this.Wb}Le(){return this.Ky&&this.Gb.length>0&&this.getVisible()}attach(t,i=!0){return super.attach(t,i),ar(t,this.Hs,{fill:this._n,stroke:this.In}),this}}class Xf extends Yf{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.bM=this.Sn.if(this.scale,Xo.Simple).dn(this.getHighlight()),this.Gc(this.bM)}Nl(){if(this.Hb||this.scale.Yb()){const t=this.Gb,i=!0===this.Wb?pf(t.concat((t=>{if(0===t.length)return t;const i=t[0],s=t[t.length-1];if(wh(i.angle,s.angle))return t;const e=1*Math.sign(s.angle-i.angle);let h=0;const r=[];for(let t=s.angle+e;!wh(t%360,i.angle%360);t+=e)if(r.push({angle:t,amplitude:0}),h+=1,h>360)return[];for(let t=0;t<r.length;t+=1)r[t].amplitude=mf(s.amplitude,i.amplitude,(t+1)/(r.length+1));return r})(t)),this.scale):[...pf(t,this.scale),{x:0,y:0}];this.bM.jo(i).Js(this._n).Fr(this.In),this.Hb=!1,this.bM._e()}}Kc(t,i){t.dn(i),this.Sn.Ss()}Iv(t,i){const s=this.bM.Iv(t);if(!s)return;const{angle:e,amplitude:h}=bf(s,this.scale);return Uc(s,this.scale,this.Nv(new Pc,this,e,h,this.Du.getAmplitudeAxis().formatValue).oc(),this,this._n)}solveNearestFromScreen(t){return this.Iv(t,!1)}}class Zf extends Tn{constructor(){super(...arguments),this.Ji="RadialScale",this.xM={start:0,end:1},this.MM=!1,this._M=0,this.Et=e(0,0),this.wM=[0,0],this.AM=[0,0],this.o=!0,this.Pi=!0,this.kM=!0,this.CM=!0,this.TM={x:0,y:0},this.ki={x:{displacement:0,scaling:0,highPrecisionOffset:0},y:{displacement:0,scaling:0,highPrecisionOffset:0}}}Ab(t,i){return t===this.xM.start&&i===this.xM.end||(this.xM={start:t,end:i},this.kM=!0,this.IM()),this}wb(){return this.xM}_b(){return this.xM.end>=this.xM.start}Db(t){this.MM=t,this.CM=!0}Ob(){return!1===this.MM}Bb(t){this._M=t,this.CM=!0}Ib(){return this._M}Ri(){return!1}Zt(t,i,s,e){return this.x=new kn(t.x,i.x,s.x,e?e.x:void 0),this.y=new kn(t.y,i.y,s.y,e?e.y:void 0),this}Di(){return this.ki}Yb(){return this.kM}FM(){return this.CM}qi(){return this.Pi}Qi(){return this.TM}Rt(){return this.o=!1,this.Pi=!1,this.kM=!1,this.CM=!1,this}zt(){return this.o=!0,this.Pi=!0,this.kM=!0,this.CM=!0,this}Gt(t,i){return"object"==typeof t?(this.Et.x=t.x,this.Et.y=t.y):(this.Et.x=t,this.Et.y=i),this.IM(),this}Yi(t){return this.wM=t,this.IM(),this}Xi(t){return this.AM=t,this.IM(),this}bi(){return e(this.wM[0]+this.wM[1],this.AM[0]+this.AM[1])}xi(){return this.Et}IM(){const t=this.xM,i=e(this.x.Mi(this.Et.x),this.y.Mi(this.Et.y)),s=this.wM[0]+this.wM[1],h=this.AM[0]+this.AM[1],r=Math.max(i.x-s,0),n=Math.max(i.y-h,0),o=.5*(r>n?n:r),a=[this.wM[0]+Math.max((r-2*o)/2,0),this.wM[1]+Math.max((r-2*o)/2,0)],u=[this.AM[0]+Math.max((n-2*o)/2,0),this.AM[1]+Math.max((n-2*o)/2,0)],l=Math.abs(t.end-t.start);this.x.Gt(this.Et.x).yi(a).Vt(-l,l),this.y.Gt(this.Et.y).yi(u).Vt(-l,l),this.TM={x:this.x.getPixelSize(),y:this.y.getPixelSize()},this.ki={x:this.x.Di(),y:this.y.Di()},this.zt()}Fi(t,i){const s=this.Qi();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}ts(t,i,s,e){const h=this.Qi(),r=Kr(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class Kf extends Qc{constructor(i,s,e,h,r,n,o){super(i,s,e,s.Fm("polarChart bg",0),s.bm("polarChart ui"),h,s.vs.Hs.polarChartBackgroundFillStyle,s.vs.Hs.polarChartBackgroundStrokeStyle,s.vs.Hs.polarChartTitleFont,s.vs.Hs.polarChartTitleFillStyle,o),this.xv=t.AutoCursorModes.snapToClosest,this.kd=[],this.Jr=!0,this.PM=(t,i,s,e,h)=>{this.lb.Gt(e,h)},this.Id=Jh(this.kd),this.DM=t=>{this.kd.push(t)},this.BM=()=>this.Sp,this.zd.nr||this.zd.rr||this.vs.er(4),this.OM=s.PS("polarChart series bg",0),this.LM=s.vy("polarChart axis gridlines",0),this.EM=s.vy("polarChart series",1),this.RM=s.vy("polarChart axis lines",2),this.zM=s.vy("polarChart axis ticks",3),this.lb=e.d2({scaleXYConstructor:Zf}),this.onResize(this.PM),this.Bm.Ks("Polar Chart");const a=Ph(n?n.autoCursorBuilder:void 0,Hc);this.Tv=a.vv(this._v,this.uiScale,this.uiScale,this.Hs),this.Ap=this.OM.nf(this.lb).Js(this.Hs.polarChartSeriesBackgroundFillStyle).Fr(th).Fa(0).Pa(360).La(0),this.kp=this.OM.nf(this.lb).Js(Ie).Fr(this.Hs.polarChartSeriesBackgroundStrokeStyle).Fa(0).Pa(360).La(0),super.wp(this.Ap,this.kp),this.Im(r,this.pixelScale),this.VM=new nf(this,this.lb,this.Hs,!(!n||!0!==n.disableAnimations),this.LM,this.RM,this.zM,this.El,this.BM),this.NM=new af(this,this.lb,this.Hs,!(!n||!0!==n.disableAnimations),this.LM,this.RM,this.zM,this.El),n&&!0===n.disableAnimations&&this.setAnimationsEnabled(!1)}addLineSeries(){const t=new xf(this.EM,this,this.bp,this.lb,this.Hs,this.vs.El);return this.Cp(t),t}addPointSeries(){const t=new _f(this.EM,this,this.bp,this.lb,this.Hs,this.vs.El);return this.Cp(t),t}addPointLineSeries(){const t=new Mf(this.EM,this,this.bp,this.lb,this.Hs,this.vs.El);return this.Cp(t),t}addAreaSeries(){const t=new Xf(this.EM,this,this.bp,this.lb,this.Hs,this.vs.El);return this.Cp(t),t}addPolygonSeries(){const t=new $f(this.EM,this,this.bp,this.lb,this.Hs,this.vs.El);return this.Cp(t),t}getSeries(){return this.Sp}addSector(){const t=new cf(this.EM,this,this.Id,this.lb,this.Hs,this.vs.El);return this.DM(t),t}getAmplitudeAxis(){return this.VM}getRadialAxis(){return this.NM}Nl(){var t,i;super.Nl(),_l.zm(this.Bm,this.Pm);for(const t of this.Sp)t.ep();this.VM.Ne(),this.NM.Ne();for(const t of this.Sp)t.Nl();for(let t=1;t<=2;t+=1){const i=this.VM.Nl(),s=this.NM.Nl(),e=_l.Rm(this.Bm,this.Pm),h=[this.Gn.left+s,this.Gn.right+s],r=[this.Gn.bottom+s,this.Gn.top+s+e];this.lb.Yi(h).Xi(r);const n=4;if(!(!this.GM||Math.abs(this.GM.amplitude-i)>=n||Math.abs(this.GM.radial-s)>=n)||1!==t){this.GM={amplitude:i,radial:s};break}}const s=this.lb.wb().start,e=this.lb.wb().end,h=this.lb._b()?((null===(t=this.GM)||void 0===t?void 0:t.radial)||0)*this.lb.x.getPixelSize()+e-s:((null===(i=this.GM)||void 0===i?void 0:i.radial)||0)*this.lb.x.getPixelSize()+s-e;this.Ap.Da(h).Ea(360),this.kp.Da(h).Ea(360);for(const t of this.kd)t.Nl();this.Fv(!1);for(const t of this.Sp)t.hp();return super.Tm(),this.HM(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.VM.setAnimationsEnabled(t),this.NM.setAnimationsEnabled(t),this}setMouseInteractions(t){return this.Jr=t,this}getMouseInteractions(){return this.Jr}getMinimumSize(){return e(qf,qf)}HM(){}forEachAxis(t){return t(this.VM),t(this.NM),this}dispose(){return this.OM.Pt(),this.LM.Pt(),this.EM.Pt(),this.RM.Pt(),this.zM.Pt(),this.kd.slice().forEach((t=>t.dispose())),super.dispose()}jf(){return[...this.Sp,...this.kd]}}const qf=300;class Jf extends Cl{}class Qf extends Jf{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.dt="Slice",this.l=0,this.Vm=!1,this.WM=Ie,this.Gm=Ie,this.Hm=this.l,this.jm=$e((()=>this.Du.vs.Ss())),this.Ym=()=>{this.Xm=void 0},this.index=t,this.Du=e,this.scale=h,this.Rc=r,this.bM=i.if(h,Xo.Simple).dn(this.getHighlight()),this.Gc(this.bM),this.ns=s.$e(h).dn(this.getHighlight()),this.Gc(this.ns,{isText:!0})}setValue(t){return this.Du.getAnimationsEnabled()?this.getVisible()&&this.Jm(this.Hm,t):this.Hm=t,this.l=t,this.Du.vs.Ss(),this}getValue(){return this.l}setVisible(t){return!1===t?this.Du.getAnimationsEnabled()&&this.Hm>0?(this.Xm&&(this.Xm.finish(!1),this.Xm=void 0),this.Jm(this.Hm,0,(()=>super.setVisible(!1)))):(this.Hm=0,super.setVisible(!1)):this.Du.getAnimationsEnabled()?(this.Xm&&(this.Xm.finish(!1),this.Xm=void 0),super.setVisible(!0),this.Jm(this.Hm,this.l)):(this.Hm=this.l,super.setVisible(!0)),this}Jm(t,i,s){this.Xm=this.jm(300,Ue.ease)([[t,i]],(([t])=>{this.Hm=t,this.Du.vs.Ss()})),this.Xm.onEveryAnimationEnd(this.Ym),s&&this.Xm.onAnimationEnd(s)}setStyle(t,i,s,e){this.WM=t,this.Gm=s,this.bM.Js(this.WM).Fr(i),this.ns.Js(this.Gm).te(e);for(let t=0;t<this.mc.length;t+=1)this.styleAttachedEntry(this.mc[t])}getAnimatedValue(){return this.Hm}Kc(t,i){return t.dn(i),this.Du.vs.Ss(),this}attach(t,i=!0){return super.attach(t,i),this.styleAttachedEntry(t),this}styleAttachedEntry(t){ar(t,this.Hs,{fill:this.WM,stroke:this.bM.Pr()})}}var td;t.FunnelSliceModes=void 0,(td=t.FunnelSliceModes||(t.FunnelSliceModes={}))[td.VariableHeight=0]="VariableHeight",td[td.VariableWidth=1]="VariableWidth";const id=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},sd=(i,s,e,h,r,n=0,o=t.FunnelSliceModes.VariableHeight,a)=>{s=id(s,h.x),e=id(e,h.x);const u=i.length;let l=0,c=0;l=i.reduce(((t,i)=>t+i.getAnimatedValue()),0);let f={x:a-s/2,y:h.y+r.bottom},d={x:a+s/2,y:h.y+r.bottom},g={x:0,y:r.bottom},m={x:0,y:r.bottom},y=0,p=0;if(n)for(let s=0;s<i.length;s+=1){const e=10;p+=i[s].getAnimatedValue();const a=o===t.FunnelSliceModes.VariableWidth?(h.y-n*u)/u:h.y+r.bottom-p/l*h.y;if(o===t.FunnelSliceModes.VariableWidth){n=a-n<e?Math.max(20,a-e):n;break}0!==y&&y-a-n<e&&(n=Math.max(0,y-a-e)),y=a}const S=(s-e)/2/h.y;for(let y=0;y<u;y+=1){const p=i[y];c+=p.getAnimatedValue();const v=o===t.FunnelSliceModes.VariableWidth?(h.y-n*u)/u:h.y+r.bottom-c/l*h.y;let b=0;y>0&&(f={x:g.x+S*n,y:g.y-n},d={x:m.x-S*n,y:m.y-n}),b=(s+c/l*(e-s))/2,g={x:a-b,y:parseInt(`${o===t.FunnelSliceModes.VariableWidth?f.y-v:v}`,10)},m={x:a+b,y:parseInt(`${o===t.FunnelSliceModes.VariableWidth?d.y-v:v}`,10)},d.x>=f.x&&m.x>g.x&&p.bM.jo([g,f,d,m])}};class ed extends Ml{constructor(i,s,e,h,r,n,o){super(i,s,e,s.Fm("funnelChart bg",0),s.bm("funnelChart ui"),h,s.vs.Hs.funnelChartBackgroundFillStyle,s.vs.Hs.funnelChartBackgroundStrokeStyle,s.vs.Hs.funnelChartTitleFont,s.vs.Hs.funnelChartTitleFillStyle,n),this.Qm=[],this.ty=Al.None,this.ey=!0,this.oy=0,this.UM=80,this.jM=20,this.$M=0,this.YM=t.FunnelSliceModes.VariableHeight,this.gy=!0,this.yy=t=>{const i=this.Qm.indexOf(t);i>=0&&(this.Qm.splice(i,1),this.py())},this.zd.nr||this.zd.rr||this.vs.er(5),this.my=this.Hs.effectsText,this.Sy=s.vy("funnelChart bottom",0),this.by=s.vy("funnelChart top",1),this.Bm.Ks("Funnel Chart"),this.iy=this.Hs.funnelChartSliceFillStylePalette,this.sy=this.Hs.funnelChartSliceStrokeStyle,this.hy=this.Hs.funnelChartSliceLabelFont,this.ny=this.Hs.funnelChartSliceLabelFillStyle,o&&this.setAnimationsEnabled(!1),this.Im(r,this.pixelScale)}addSlice(t,i){const s=new Qf(this.oy,this.Sy,this.by,this,this.pixelScale,this.yy,this.Hs,this.vs.El);return this.oy+=1,s.setName(t),s.setValue(i),s.El.Vc.ee(this.my),s.El.Nc.ee(this.gy),this.Qm.push(s),this.vs.Ss(),s.setHighlightOnHover(this.ey),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Qm}setHeadWidth(t){return this.UM=t,this.vs.Ss(),this}getHeadWidth(){return this.UM}setNeckWidth(t){return this.jM=t,this.vs.Ss(),this}getNeckWidth(){return this.jM}setSliceGap(t){return this.$M=Math.min(Math.max(t,0),20),this.vs.Ss(),this}setSliceMode(t){return this.YM=t,this.vs.Ss(),this}getFunnelSliceMode(){return this.YM}setLUT(t){return this.Ef=t,this.vs.Ss(),this}setSliceFillStyle(t){return this.iy=t,this.vs.Ss(),this}getSliceFillStyle(){return this.iy}setSliceStrokeStyle(t){return this.sy="function"==typeof t?t(this.sy):t,this.vs.Ss(),this}getSliceStrokeStyle(){return this.sy}setSliceEffect(t){return this.gy=t,this.Qm.forEach((i=>i.El.Nc.ee(t))),this.vs.Ss(),this}getSliceEffect(){return this.gy}setSliceSorter(t){return this.ty=t,this.Qm=this.Qm.sort(this.ty),this.vs.Ss(),this}getSliceSorter(){return this.ty}setLabelFillStyle(t){return this.ny="function"==typeof t?t(this.ny):t,this.vs.Ss(),this}getLabelFillStyle(){return this.ny}setLabelFont(t){return this.hy="function"==typeof t?t(this.hy):t,this.vs.Ss(),this}getLabelFont(){return this.hy}setLabelEffect(t){return this.my=t,this.Qm.forEach((i=>i.El.Vc.ee(t))),this.vs.Ss(),this}getLabelEffect(){return this.my}setLabelFormatter(t){return this.My=t,this.vs.Ss(),this}getLabelFormatter(){return this.My}setSliceHighlightOnHover(t){return this.ey=t,this.Qm.forEach((i=>i.setHighlightOnHover(t))),this}Nl(){super.Nl(),_l.zm(this.Bm,this.Pm),super.Tm();const t=_l.Rm(this.Bm,this.Pm),i=e(this.pixelScale.x.getInnerInterval()-(this.Gn.left+this.Gn.right),this.pixelScale.y.getInnerInterval()-(this.Gn.bottom+this.Gn.top+t)),s=e(this.Gn.left+i.x/2,this.Gn.bottom+i.y/2);this.Qm=this.Qm.sort(this.ty);for(let t=0,{length:i}=this.Qm;t<i;t+=1)this.xy(this.Qm[t],t);const h=this.Qm.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const n=[];for(let t=0;t<h.length;t+=1)n.push((o=h[t].getAnimatedValue())>0?o/r:0);var o;for(let t=0;t<h.length;t+=1){const i=h[t];i.ns.Ks(this.My(i,n[t]))._e()}n.push(r),this._y(h,n,s,i)}xy(t,i){t.setStyle(this.Ef?new De({color:this.Ef.getColors(t.getAnimatedValue())}):this.iy(i),this.sy,this.ny,this.hy)}py(){this.Qm=this.Qm.sort(this.ty),this.vs.Ss()}jf(){return this.Qm}dispose(){return this.Sy.Pt(),this.by.Pt(),this.Qm.slice().forEach((t=>t.dispose())),super.dispose()}}const hd=(i,s,e)=>{const h=i.$o();if(h.length>0){let i;const r=(h[1].y-h[0].y)/2+h[0].y;return i=s===t.FunnelLabelSide.Left?(h[0].x-h[1].x)/2+h[1].x-e:(h[2].x-(4===h.length?h[3].x:h[1].x))/2+(4===h.length?h[3].x:h[1].x)+e,{x:i,y:r}}},rd=t=>{const i=t.$o();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class nd extends ed{constructor(){super(...arguments),this.My=kl.NamePlusValue,this.wy=10,this.XM=t.FunnelLabelSide.Left,this.ZM=t.SliceLabelIndices.LabelsOnSides,this.ky=[],this.Cy=this.Hs.funnelChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.Cy=t;for(let t=0;t<this.ky.length;t+=1)this.ky[t].za(this.Cy);return this.vs.Ss(),this}getLabelConnectorStyle(){return this.Cy}setLabelConnectorGap(t){return this.wy=t,this.vs.Ss(),this}getLabelConnectorGap(){return this.wy}setLabelSide(t){return this.XM=t,this.vs.Ss(),this}getLabelSide(){return this.XM}_y(i,s,h,r){const n=this.wy;let o=0;for(let t=0;t<i.length;t+=1)o=Math.max(o,i[t].ns.xi().x);const a=r.x+this.Gn.left+this.Gn.right,u=this.XM===t.FunnelLabelSide.Right?(this.Gn.left+(a-(this.Gn.right+o)))/2:(this.Gn.left+o+(a-this.Gn.right))/2,l=r.x-o,c=e(l,r.y);sd(i,this.UM,this.jM,c,this.Gn,this.$M,this.YM,u),this.KM(i,this.XM===t.FunnelLabelSide.Left?-1:1,-1,h,r);for(let t=0;t<this.ky.length;t+=1)this.ky[t].setVisible(!1);for(let t=0;t<i.length;t+=1)i[t].getVisible()&&this.Ty(this.qM(i[t],-1,h,n))}getMinimumSize(){return e(500,300)}KM(t,i,s,h,r){if(0===t.length)return;const n=h.x+i*r.x*.5,o=1===s?Math.max:Math.min;let a;for(let h=0;h<t.length;h+=1){const r=t[h];if(0===r.bM.$o().length)r.ns.setVisible(!1);else{let t;r.ns.setVisible(!0),a&&(t=a.ns.io().y+s*(a.ns.xi().y+10));const h=(hd(r.bM,this.XM,0)||e(0,0)).y,u=void 0===t?h:o(h,t);r.ns.Qn(e(n,u)).ho(i).no(0),a=r}}}qM(i,s,h,r){const n=i.bM,o=i.ns,a=hd(n,this.XM,r);if(a){const i={x:nn(this.XM===t.FunnelLabelSide.Left?o.io().x-s*(r+o.xi().x):o.io().x+s*(r+o.xi().x),a,h).x,y:on(o.io().y,a,h).y};return[a,i,e(this.XM===t.FunnelLabelSide.Left?o.io().x-s*(r+o.xi().x):o.io().x+s*(r+o.xi().x),i.y)]}}Ty(t){if(t){let i;for(let t=0;t<this.ky.length;t+=1)if(!this.ky[t].getVisible()){i=this.ky[t].setVisible(!0);break}void 0===i&&(i=this.by.Iy(this.pixelScale,void 0,[Ll.InternalUI]).za(this.Cy),this.ky.push(i)),i.Oo().Bo(t)}}}class od extends ed{constructor(){super(...arguments),this.My=kl.Name,this.ZM=t.SliceLabelIndices.LabelsInsideSlices}_y(t,i,s,e){const h=this.Gn.left+e.x/2;sd(t,this.UM,this.jM,e,this.Gn,this.$M,this.YM,h);for(let i=0;i<t.length;i+=1){const s=t[i],e=s.bM,h=s.ns,r=rd(e);r&&h.Qn(r).ho(0).no(0)}}getMinimumSize(){return e(200,200)}}const ad={LabelsOnSides:nd,LabelsInsideSlices:od};var ud,ld;t.FunnelLabelSide=void 0,(ud=t.FunnelLabelSide||(t.FunnelLabelSide={}))[ud.Right=0]="Right",ud[ud.Left=1]="Left";class cd extends Ml{constructor(t,i,s,e,h,r,n){super(t,i,s,i.Fm("gaugeChart bg",0),i.bm("gaugeChart ui"),e,i.vs.Hs.gaugeChartBackgroundFillStyle,i.vs.Hs.gaugeChartBackgroundStrokeStyle,i.vs.Hs.gaugeChartTitleFont,i.vs.Hs.gaugeChartTitleFillStyle,r),this.Qm=[],this.yy=t=>{const i=this.Qm.indexOf(t);i>=0&&this.Qm.splice(i,1)},this.zd.nr||this.zd.rr||this.vs.er(6),this.Sn=i.vy("gaugeChart layer",0),this.by=i.vy("gaugeChart top layer",1),this.Bm.Ks("Gauge Chart"),this.Im(h,this.pixelScale);const o=Ua();this.onBackgroundTouchStart(o.onTouchStart),this.onBackgroundTouchMove(o.onTouchMove),this.onBackgroundTouchEnd(o.onTouchEnd),n&&this.setAnimationsEnabled(!1)}dispose(){return this.Sn.Pt(),this.by.Pt(),this.Qm.slice().forEach((t=>t.dispose())),super.dispose()}}class fd extends cd{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.ba=90,this.xa=-270,this.JM={min:this.ba,max:this.xa},this.QM=$e((()=>this.Sn.Ss())),this.t_=()=>{this.i_=void 0},this.s_=i.vy("radialGaugeChart bg arc",2),this.e_=this.Sn.nf(this.pixelScale).Js(this.Hs.gaugeChartEmptyGaugeFillStyle).Fr(this.Hs.gaugeChartEmptyGaugeStrokeStyle)}setAngleInterval(t,i){t===i?i-=360:Math.abs(i-t)>360&&(i-=(i-t)%360);const s=this.ba,e=this.xa,h=this.JM;return this.getAnimationsEnabled()?this.h_(h,{min:t,max:i}):(h.min=t,h.max=i,this.ba=t,this.xa=i),this.wt.emit("angleIntervalChange",this,{min:s,max:e},{min:t,max:i}),this.vs.Ss(),this}getAngleInterval(){return{min:this.ba,max:this.xa}}setGaugeFillStyle(t){return this.e_.Js(t),this.vs.Ss(),this}setGaugeStrokeStyle(t){return this.e_.Fr(t),this.vs.Ss(),this}h_(t,i,s){this.i_=this.QM(1e3,Ue.ease)([[t.min,i.min],[t.max,i.max]],(([t,i])=>{this.JM={min:t,max:i},this.ba=t,this.xa=i,this.Sn.Ss()})),this.i_.onEveryAnimationEnd(this.t_),s&&this.i_.onAnimationEnd(s)}onAngleIntervalChange(t){return this.wt.on("angleIntervalChange",t)}offAngleIntervalChange(t){return this.wt.off(t,"angleIntervalChange")}dispose(){return super.dispose(),this.s_.Pt(),this}}class dd extends Cl{r_(t){return this.wt.on("valueChange",t)}n_(t){return this.wt.on("valueIntervalChange",t)}offValueChange(t){return this.wt.off(t,"valueChange")}offIntervalChange(t){return this.wt.off(t,"valueIntervalChange")}attach(t,i=!0){return super.attach(t,i),this.styleAttachedEntry(t),this}styleAttachedEntry(t){ar(t,this.Hs,{fill:this.o_})}}class gd extends dd{onValueChange(t){return this.r_(t)}onIntervalChange(t){return this.n_(t)}}class md extends gd{constructor(t,i,s,e,h,r,n){super(s,h,r,n),this.ba=0,this.xa=0,this.a_=0,this.u_=0,this.l_=0,this.c_=100,this.f_=!0,this.Hm=this.l,this.Um=this.getVisible(),this.jm=vr(),this.d_=t=>{this.Hm=t,this.Du.vs.Ss()},this.g_=t,this.Ze=i,this.Du=s,this.scale=e,this.o_=this.Hs.gaugeChartGaugeFillStyle,this.qm=t.nf(e).Js(this.o_).Fr(th).dn(this.getHighlight()),this.Gc(this.qm),this.m_=i.$e(e).dn(this.getHighlight()),this.Gc(this.m_,{isText:!0}),this.y_=i.$e(e).dn(this.getHighlight()),this.Gc(this.y_,{isText:!0}),this.ns=i.$e(e).dn(this.getHighlight()),this.Gc(this.ns,{isText:!0}),this.m_.Js(r.gaugeChartIntervalLabelsFillStyle).te(r.gaugeChartIntervalLabelsFont),this.y_.Js(r.gaugeChartIntervalLabelsFillStyle).te(r.gaugeChartIntervalLabelsFont),this.ns.Js(r.gaugeChartValueLabelFillStyle).te(r.gaugeChartValueLabelFont),this.setName("Gauge Slice")}Nl(){const t=this.Du.getDataLabelFormatter(),i=this.ba/90<this.xa/90?1:-1;let s=this.Du.getAnimationsEnabled()?this.Hm:this.l;const[e,h]=this.l_<this.c_?[this.l_,this.c_]:[this.c_,this.l_];s<e?s=e:s>h&&(s=h);const r=this.xa-i*this.u_,n=this.ba+i*this.a_,o=this.c_-this.l_,a=(0!==o?(r-n)/o:1/0)*(s-this.l_);this.qm.Fa(n).Pa(n+a);const u="function"==typeof t?t(s,{getInnerStart:()=>e,getInnerEnd:()=>h}):t.format(s);this.ns.Ks(u)}p_(){const t=this.Du.getIntervalLabelFormatter(),i="function"==typeof t?t(this.l_,{getInnerStart:()=>this.l_,getInnerEnd:()=>this.c_}):t.format(this.l_);return this.m_.Ks(i)._e(),this.m_.xi()}S_(){const t=this.Du.getIntervalLabelFormatter(),i="function"==typeof t?t(this.c_,{getInnerStart:()=>this.l_,getInnerEnd:()=>this.c_}):t.format(this.c_);return this.y_.Ks(i)._e(),this.y_.xi()}setName(t){return super.setName(t),this.Du.vs.Ss(),this}setValue(t){const i=this.l;return this.Du.getAnimationsEnabled()?this.Um&&this.jm(i,t,this.d_):this.Hm=t,this.l=t,this.wt.emit("valueChange",this,i,t),this.Du.vs.Ss(),this}getValue(){return this.l}setVisible(t){return this.Um=t,!1===t?this.Du.getAnimationsEnabled()&&this.Hm>0?this.jm(this.Hm,0,this.d_,{onCompleted:()=>super.setVisible(!1)}):(this.Hm=0,super.setVisible(!1)):this.Du.getAnimationsEnabled()?(super.setVisible(!0),this.jm(this.Hm,this.l,this.d_)):(this.Hm=this.l,super.setVisible(!0)),this}setInterval(t,i){const s=this.l_,e=this.c_;return this.wt.emit("valueIntervalChange",this,{min:s,max:e},{min:t,max:i}),this.l_=t,this.c_=i,this.Du.vs.Ss(),this}setIntervalLabelsFont(t){return this.m_.te(t),this.y_.te(t),this.Du.vs.Ss(),this}getIntervalLabelsFont(){return this.m_.Qs()}setIntervalLabelsFillStyle(t){return this.m_.Js(t),this.y_.Js(t),this.Du.vs.Ss(),this}getIntervalLabelsFillStyle(){return this.m_.qs()}setIntervalLabelsVisible(t){return t?(this.m_.setVisible(!0),this.y_.setVisible(!0)):(this.m_.setVisible(!1),this.y_.setVisible(!1)),this.f_=t,this}getIntervalLabelsVisible(){return this.f_}setAngleInterval(t,i){return this.ba=t,this.xa=i,this.Du.vs.Ss(),this}setMinAngle(t){return this.ba=t,this.Du.vs.Ss(),this}setMaxAngle(t){return this.xa=t,this.Du.vs.Ss(),this}setMarginInDegrees(t=this.a_,i=this.u_){return t!==this.a_&&(this.a_=t),i!==this.u_&&(this.u_=i),this.Du.vs.Ss(),this}setFillStyle(t){this.o_="function"==typeof t?t(this.o_):t;const i=this.o_;this.qm.Js(i);for(let t=0;t<this.mc.length;t+=1)this.styleAttachedEntry(this.mc[t]);return this.Du.vs.Ss(),this}v_(t){return this.ns.Js(t),this.Ze.Ss(),this}b_(){return this.ns.qs()}getAnimatedValue(){return this.Hm}}function yd(t,i,s,h,r,n=Math.floor(Math.sqrt(h>r?25*h:25*r))){const o=Array(n+2),a=Math.PI;let u=0,l=0;const c=i*a/180,f=(s*a/180-c)/n;for(o[u]=e(t.x,t.y),u+=1;u<=n+1;)o[u]=e(t.x+h*Math.cos(c+l*f),t.y+r*Math.sin(c+l*f)),u+=1,l+=1;return[o,n]}class pd extends fd{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.Of=20,this.x_=new Intl.NumberFormat,this.M_=new Intl.NumberFormat,this.__=!1,this.w_=5;const o=new md(this.Sn,this.by,this,this.pixelScale,this.yy,this.Hs,this.vs.El);this.A_=o,this.Qm.push(o),this.setPadding(10)}Nl(){super.Nl(),_l.zm(this.Bm,this.Pm),super.Tm();const t=_l.Rm(this.Bm,this.Pm),i=Nr([this.A_.p_(),this.A_.S_()]),s=e(this.pixelScale.x.getInnerInterval()-(this.Gn.left+this.Gn.right+2*i.max.x),this.pixelScale.y.getInnerInterval()-(this.Gn.bottom+this.Gn.top+1*i.max.y+t)),h=Math.max(.5*Math.min(s.x,s.y),0),r=e(this.Gn.left+i.max.x+.5*s.x,this.Gn.bottom+i.max.y+.5*s.y),n=this.__?this.k_(r,h):r,o=this.e_.In.getThickness(),a=h-.5*o,u=h-this.Of;let l=u/h*100;l=l>100||l<0?99:l;const c=100*(1-(this.Of-o)/h);this.C_(n,u)&&(this.e_.Da(h).La(l),this.A_.qm.Da(a).La(c));const f=.5*(d=h,(g=this.xa-this.ba)/(2*Math.PI*d*(g/360))*o);var d,g;this.e_.Fa(this.ba).Pa(this.xa).Qn(n),this.A_.qm.Qn(n),this.A_.ns.Qn(n),this.Ef&&this.A_.setFillStyle(new De({color:this.Ef.getColors(this.A_.getAnimatedValue())})),this.A_.setMinAngle(this.ba).setMaxAngle(this.xa).setMarginInDegrees(f,f).Nl();const m=this.e_.Ma();if(this.A_.getIntervalLabelsVisible()){this.T_(this.ba,this.xa,n,m+this.w_);const t=this.A_.m_._e().rs(),i=this.A_.y_._e().rs();Fr(t,i)&&this.I_(t,i,n,m+this.w_)}}C_(t,i){const s=Jr(this.A_.ns._e().xi(),.5),e=t.x+i,h=t.x-i,r=t.y+i,n=t.y-i;return!(t.x+s.x>e||t.x-s.x<h||t.y+s.y>r||t.y-s.y<n)}I_(t,i,s,h){const r=Pr(t,i),[n,o]=[fn(an(this.ba)),fn(an(this.xa))],[a,u]=n!==o||1!==n&&3!==n?[tn(r.min,s),tn(r.max,s)]:[tn(e(r.min.x,r.max.y),s),tn(e(r.max.x,r.min.y),s)],l=a.x*u.x+a.y*u.y,c=qr(a)*qr(u),f=.7*un(Math.acos(l/c)),[d,g]=this.F_();this.T_(this.ba-d*f,this.xa-g*f,s,h)}F_(){const t=this.xa-this.ba,i=Math.sign(t);let s=Math.sign(this.ba),e=Math.sign(this.xa);return s===e&&(i>=0?s=-e:e=-s),[s,e]}k_(t,i){const[s]=yd(t,this.ba,this.xa,i,i),h=Nr(s),r=.5*(h.max.x-h.min.x),n=.5*(h.max.y-h.min.y);return Qr(tn(t,e(h.min.x+r,h.min.y+n)),t)}T_(t,i,s,h){const r=an(t),n=an(i);this.A_.m_.Qn(Yr(e(s.x+h,s.y),s,-r)),this.A_.y_.Qn(Yr(e(s.x+h,s.y),s,-n)),this.A_.m_.ao(e(-Math.cos(r),-Math.sin(r))),this.A_.y_.ao(e(-Math.cos(n),-Math.sin(n)))}getDefaultSlice(){return this.A_}setAutoScaling(t){return this.__=t,this.vs.Ss(),this}getAutoScaling(){return this.__}setDataLabelFormatter(t){return this.M_=t,this.vs.Ss(),this}getDataLabelFormatter(){return this.M_}setIntervalLabelFormatter(t){return this.x_=t,this.vs.Ss(),this}getIntervalLabelFormatter(){return this.x_}setIntervalLabelPadding(t){return this.w_=t,this.vs.Ss(),this}getIntervalLabelPadding(){return this.w_}setThickness(t){return this.Of=t,this}setLUT(t){return this.Ef=t,this.vs.Ss(),this}setDataLabelFont(t){return this.A_.ns.te(t),this.vs.Ss(),this}getDataLabelFont(){return this.A_.ns.Qs()}getMinimumSize(){return e(500,300)}setDataLabelFillStyle(t){return this.A_.v_(t),this.vs.Ss(),this}getDataLabelFillStyle(){return this.A_.b_()}jf(){return this.Qm}dispose(){return this.A_.dispose(),super.dispose()}}class Sd extends Cl{}class vd extends Sd{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.dt="Slice",this.l=0,this.Vm=!1,this.WM=Ie,this.Gm=Ie,this.Hm=this.l,this.jm=$e((()=>this.Du.vs.Ss())),this.Ym=()=>{this.Xm=void 0},this.index=t,this.Du=e,this.scale=h,this.Rc=r,this.bM=i.if(h,Xo.Simple).dn(this.getHighlight()),this.Gc(this.bM),this.ns=s.$e(h).dn(this.getHighlight()),this.Gc(this.ns,{isText:!0})}setValue(t){return this.Du.getAnimationsEnabled()?this.getVisible()&&this.Jm(this.Hm,t):this.Hm=t,this.l=t,this.Du.vs.Ss(),this}getValue(){return this.l}setVisible(t){return!1===t?this.Du.getAnimationsEnabled()&&this.Hm>0?(this.Xm&&(this.Xm.finish(!1),this.Xm=void 0),this.Jm(this.Hm,0,(()=>super.setVisible(!1)))):(this.Hm=0,super.setVisible(!1)):this.Du.getAnimationsEnabled()?(this.Xm&&(this.Xm.finish(!1),this.Xm=void 0),super.setVisible(!0),this.Jm(this.Hm,this.l)):(this.Hm=this.l,super.setVisible(!0)),this}Jm(t,i,s){this.Xm=this.jm(300,Ue.ease)([[t,i]],(([t])=>{this.Hm=t,this.Du.vs.Ss()})),this.Xm.onEveryAnimationEnd(this.Ym),s&&this.Xm.onAnimationEnd(s)}setStyle(t,i,s,e){this.WM=t,this.Gm=s,this.bM.Js(this.WM).Fr(i),this.ns.Js(this.Gm).te(e);for(let t=0;t<this.mc.length;t+=1)this.styleAttachedEntry(this.mc[t])}getAnimatedValue(){return this.Hm}attach(t,i=!0){return super.attach(t,i),this.styleAttachedEntry(t),this}styleAttachedEntry(t){ar(t,this.Hs,{fill:this.WM,stroke:this.bM.Pr()})}}t.PyramidSliceModes=void 0,(ld=t.PyramidSliceModes||(t.PyramidSliceModes={}))[ld.VariableHeight=0]="VariableHeight",ld[ld.VariableWidth=1]="VariableWidth";const bd=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},xd=(i,s,e,h,r,n=0,o=t.PyramidSliceModes.VariableHeight,a)=>{s=bd(s,h.x),e=bd(e,h.x);const u=i.length;let l=0,c=0;l=i.reduce(((t,i)=>t+i.getAnimatedValue()),0);let f={x:a-s/2,y:h.y+r.bottom},d={x:a+s/2,y:h.y+r.bottom},g={x:0,y:r.bottom},m={x:0,y:r.bottom},y=0,p=0;if(n)for(let s=0;s<i.length;s+=1){const e=10;p+=i[s].getAnimatedValue();const a=o===t.PyramidSliceModes.VariableWidth?(h.y-n*u)/u:h.y+r.bottom-p/l*h.y;if(o===t.PyramidSliceModes.VariableWidth){n=a-n<e?Math.max(20,a-e):n;break}0!==y&&y-a-n<e&&(n=Math.max(0,y-a-e)),y=a}const S=(s-e)/2/h.y;for(let y=0;y<u;y+=1){const p=i[y];c+=p.getAnimatedValue();const v=o===t.PyramidSliceModes.VariableWidth?(h.y-n*u)/u:h.y+r.bottom-c/l*h.y;let b=0;y>0&&(f={x:g.x+S*n,y:g.y-n},d={x:m.x-S*n,y:m.y-n}),b=(s+c/l*(e-s))/2,g={x:a-b,y:parseInt(`${o===t.PyramidSliceModes.VariableWidth?f.y-v:v}`,10)},m={x:a+b,y:parseInt(`${o===t.PyramidSliceModes.VariableWidth?d.y-v:v}`,10)},d.x>=f.x&&m.x>=g.x&&p.bM.jo([g,f,d,m])}};class Md extends Ml{constructor(i,s,e,h,r,n,o){super(i,s,e,s.Fm("pyramidChart bg",0),s.bm("pyramidChart ui"),h,s.vs.Hs.pyramidChartBackgroundFillStyle,s.vs.Hs.pyramidChartBackgroundStrokeStyle,s.vs.Hs.pyramidChartTitleFont,s.vs.Hs.pyramidChartTitleFillStyle,n),this.Qm=[],this.ty=Al.None,this.iy=this.Hs.pyramidChartSliceFillStylePalette,this.sy=this.Hs.pyramidChartSliceStrokeStyle,this.ey=!0,this.hy=this.Hs.pyramidChartSliceLabelFont,this.ny=this.Hs.pyramidChartSliceLabelFillStyle,this.oy=0,this.UM=0,this.jM=80,this.$M=0,this.YM=t.PyramidSliceModes.VariableHeight,this.gy=!0,this.yy=t=>{const i=this.Qm.indexOf(t);i>=0&&(this.Qm.splice(i,1),this.py())},this.zd.nr||this.zd.rr||this.vs.er(8),this.my=this.Hs.effectsText,this.Sy=s.vy("pyramidChart bottom",0),this.by=s.vy("pyramidChart top",1),this.Bm.Ks("Pyramid Chart"),o&&this.setAnimationsEnabled(!1),this.Im(r,this.pixelScale)}addSlice(t,i){const s=new vd(this.oy,this.Sy,this.by,this,this.pixelScale,this.yy,this.Hs,this.vs.El);return this.oy+=1,s.setName(t),s.setValue(i),s.El.Vc.ee(this.my),s.El.Nc.ee(this.gy),this.Qm.push(s),this.vs.Ss(),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Qm}setNeckWidth(t){return this.jM=t,this.vs.Ss(),this}getNeckWidth(){return this.jM}setSliceGap(t){return this.$M=Math.min(Math.max(t,0),20),this.vs.Ss(),this}setSliceMode(t){return this.YM=t,this.vs.Ss(),this}getPyramidSliceMode(){return this.YM}setLUT(t){return this.Ef=t,this.vs.Ss(),this}setSliceFillStyle(t){return this.iy=t,this.vs.Ss(),this}getSliceFillStyle(){return this.iy}setSliceStrokeStyle(t){return this.sy="function"==typeof t?t(this.sy):t,this.vs.Ss(),this}getSliceStrokeStyle(){return this.sy}setSliceEffect(t){return this.gy=t,this.Qm.forEach((i=>i.El.Nc.ee(t))),this.vs.Ss(),this}getSliceEffect(){return this.gy}setSliceSorter(t){return this.ty=t,this.Qm=this.Qm.sort(this.ty),this.vs.Ss(),this}getSliceSorter(){return this.ty}setLabelFillStyle(t){return this.ny="function"==typeof t?t(this.ny):t,this.vs.Ss(),this}getLabelFillStyle(){return this.ny}setLabelFont(t){return this.hy="function"==typeof t?t(this.hy):t,this.vs.Ss(),this}getLabelFont(){return this.hy}setLabelEffect(t){return this.my=t,this.Qm.forEach((i=>i.El.Vc.ee(t))),this.vs.Ss(),this}getLabelEffect(){return this.my}setLabelFormatter(t){return this.My=t,this.vs.Ss(),this}getLabelFormatter(){return this.My}setSliceHighlightOnHover(t){return this.ey=t,this.Qm.forEach((i=>i.setHighlightOnHover(t))),this}Nl(){super.Nl(),_l.zm(this.Bm,this.Pm),super.Tm();const t=_l.Rm(this.Bm,this.Pm),i=e(this.pixelScale.x.getInnerInterval()-(this.Gn.left+this.Gn.right),this.pixelScale.y.getInnerInterval()-(this.Gn.bottom+this.Gn.top+t)),s=e(this.Gn.left+i.x/2,this.Gn.bottom+i.y/2);this.Qm=this.Qm.sort(this.ty);for(let t=0,{length:i}=this.Qm;t<i;t+=1)this.xy(this.Qm[t],t);const h=this.Qm.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const n=[];for(let t=0;t<h.length;t+=1)n.push((o=h[t].getAnimatedValue())>0?o/r:0);var o;for(let t=0;t<h.length;t+=1){const i=h[t];i.ns.Ks(this.My(i,n[t]))._e()}n.push(r),this._y(h,n,s,i)}xy(t,i){t.setStyle(this.Ef?new De({color:this.Ef.getColors(t.getAnimatedValue())}):this.iy(i),this.sy,this.ny,this.hy)}py(){this.Qm=this.Qm.sort(this.ty),this.vs.Ss()}jf(){return this.Qm}dispose(){return this.Sy.Pt(),this.by.Pt(),this.Qm.slice().forEach((t=>t.dispose())),super.dispose()}}const _d=(i,s,e)=>{const h=i.$o();if(h.length>0){let i;const r=(h[1].y-h[0].y)/2+h[0].y;return i=s===t.PyramidLabelSide.Left?(h[0].x-h[1].x)/2+h[1].x-e:(h[2].x-(4===h.length?h[3].x:h[1].x))/2+(4===h.length?h[3].x:h[1].x)+e,{x:i,y:r}}},wd=t=>{const i=t.$o();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class Ad extends Md{constructor(){super(...arguments),this.My=kl.NamePlusValue,this.wy=10,this.XM=t.PyramidLabelSide.Left,this.ZM=t.SliceLabelIndices.LabelsOnSides,this.ky=[],this.Cy=this.Hs.pyramidChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.Cy=t;for(let t=0;t<this.ky.length;t+=1)this.ky[t].za(this.Cy);return this.vs.Ss(),this}getLabelConnectorStyle(){return this.Cy}setLabelConnectorGap(t){return this.wy=t,this.vs.Ss(),this}getLabelConnectorGap(){return this.wy}setLabelSide(t){return this.XM=t,this.vs.Ss(),this}getLabelSide(){return this.XM}_y(i,s,h,r){const n=this.wy;let o=0;for(let t=0;t<i.length;t+=1)o=Math.max(o,i[t].ns.xi().x);const a=r.x+this.Gn.left+this.Gn.right,u=this.XM===t.PyramidLabelSide.Right?(this.Gn.left+(a-(this.Gn.right+o)))/2:(this.Gn.left+o+(a-this.Gn.right))/2,l=r.x-o,c=e(l,r.y);xd(i,this.UM,this.jM,c,this.Gn,this.$M,this.YM,u),this.KM(i,this.XM===t.PyramidLabelSide.Left?-1:1,-1,h,r);for(let t=0;t<this.ky.length;t+=1)this.ky[t].setVisible(!1);for(let t=0;t<i.length;t+=1)if(i[t].getVisible()){const s=this.qM(i[t],-1,h,n);s&&this.Ty(s)}}getMinimumSize(){return e(500,300)}KM(t,i,s,h,r){if(0===t.length)return;const n=h.x+i*r.x*.5,o=1===s?Math.max:Math.min;let a;for(let h=0;h<t.length;h+=1){const r=t[h];let u;0===r.bM.$o().length?r.ns.setVisible(!1):r.ns.setVisible(!0),a&&(u=a.ns.io().y+s*(a.ns.xi().y+10));const l=_d(r.bM,this.XM,0);if(l){const t=l.y,s=void 0===u?t:o(t,u);r.ns.Qn(e(n,s)).ho(i).no(0)}a=r}}qM(i,s,h,r){const n=i.bM,o=i.ns,a=_d(n,this.XM,r);if(a){const i={x:nn(this.XM===t.PyramidLabelSide.Left?o.io().x-s*(r+o.xi().x):o.io().x+s*(r+o.xi().x),a,h).x,y:on(o.io().y,a,h).y};return[a,i,e(this.XM===t.PyramidLabelSide.Left?o.io().x-s*(r+o.xi().x):o.io().x+s*(r+o.xi().x),i.y)]}}Ty(t){let i;for(let t=0;t<this.ky.length;t+=1)if(!this.ky[t].getVisible()){i=this.ky[t].setVisible(!0);break}void 0===i&&(i=this.by.Iy(this.pixelScale,void 0,[Ll.InternalUI]).za(this.Cy),this.ky.push(i)),i.Oo().Bo(t)}}class kd extends Md{constructor(){super(...arguments),this.My=kl.Name,this.ZM=t.SliceLabelIndices.LabelsInsideSlices}_y(t,i,s,e){const h=this.Gn.left+e.x/2;xd(t,this.UM,this.jM,e,this.Gn,this.$M,this.YM,h);for(let i=0;i<t.length;i+=1){const s=t[i].bM,e=t[i].ns,h=wd(s);h&&e.Qn(h).ho(0).no(0)}}getMinimumSize(){return e(200,200)}}const Cd={LabelsOnSides:Ad,LabelsInsideSlices:kd};var Td;t.PyramidLabelSide=void 0,(Td=t.PyramidLabelSide||(t.PyramidLabelSide={}))[Td.Right=0]="Right",Td[Td.Left=1]="Left";const Id=(t,i,s,e,h,r)=>(t.alignmentX=(h+Math.PI/2)%(2*Math.PI)<=Math.PI?-1:1,t.alignmentY=h%(2*Math.PI)<=Math.PI?-1:1,t.paddingX=Math.cos(h)*r,t.paddingY=Math.sin(h)*r,t),Fd=(t,i,s,e,h,r,n,o)=>{if(0===i)return t.paddingX=o,t.alignmentX=-1,t};var Pd;t.SpiderWebMode=void 0,(Pd=t.SpiderWebMode||(t.SpiderWebMode={}))[Pd.Normal=0]="Normal",Pd[Pd.Circle=1]="Circle";class Dd{constructor(t,i,s,e,h,r,n,o){this.wt=new We,this.P_=t,this.Ze=i,this.scale=s,this.chart=e,this.tag=h,this.axisScale=r,this.D_=n,this.B_=o,this.O_=this.P_.rc(this.scale).setMouseInteractions(!1),this.L_=this.Ze.$e(this.scale).Ks(this.tag).setMouseInteractions(!1),this.E_=this.D_(this,this.Ze.Iy(this.scale,void 0,[Ll.InternalUI])).za(this.chart.getNibStyle()),this.B_.Hc([this.L_])}_y(i,s,h,r,n,o,a){const u=s.length,l=s[h>0?h-1:u-1],c=s[h],f=s[h<u-1?h+1:0],d=this.chart.getNibLength();this.O_.Ua(i).Pa(c).za(this.chart.getAxisStyle()),this.E_.Oo().Bo(o===t.SpiderWebMode.Normal?[zr(c,l,Ah(.5*d/qr(tn(l,c)),0,1)),c,zr(c,f,Ah(.5*d/qr(tn(f,c)),0,1))]:((t,i,s,h,r=2)=>{const n=h/s,o=[];for(let a=-h/2;a<=h/2;a+=r){const r=n*(a/h)+i,u=e(t.x+Math.cos(r)*s,t.y+Math.sin(r)*s);o.push(u)}return o})(i,r,n,d)),a?this.L_.setVisible(!0).Qn(Qr(c,e(a.paddingX,a.paddingY))).ho(a.alignmentX).no(a.alignmentY):this.L_.setVisible(!1)}getLabelSize(){return this.L_.te(this.chart.getAxisLabelFont()).Js(this.chart.getAxisLabelStyle())._e().xi()}dispose(){this.O_&&this.O_.dispose(),this.L_&&this.L_.dispose(),this.E_&&this.E_.dispose()}}const Bd=(t,i,s,e,h)=>t.addRow(i.getName()).addRow("Axis:","",e).addRow("Value:","",h(s));class Od extends ff{constructor(i,s,e,h,r,n,o,a,u,l,c){super(i,u,l,c),this.dt="Spider Series",this.$a=new Map,this.dc=t.HighlightModes.onHover,this.Nv=Bd,this.Xb=8,this.Vn=0,this.R_=vr(),this.z_={},this.V_={},this.Um=this.getVisible(),this.N_=1,this.G_=((t,i)=>{const s=$e((()=>{}));let e,h,r=1;return(n,o,a)=>{if(n===h)return;h=n;const u=(null==a?void 0:a.easing)||Ue.ease,l=(null==a?void 0:a.durationMs)||1e3;e&&(e.finish(!1),e=void 0),!1===n?o&&r?(e=s(l,u)([[r,0]],(([i])=>{r=i,t(r)})),e.onAnimationEnd((()=>{e=void 0,i(!1)}))):(r=0,i(!1)):o?(i(!0),e=s(l,u)([[r,1]],(([i])=>{r=i,t(r)})),e.onAnimationEnd((()=>{e=void 0}))):(r=1,i(!0))}})((t=>{this.N_=t,this.Sn.vs.Ss()}),(t=>{super.setVisible(t)})),this.Du=i,this.Sn=s,this.Zb=h,this.H_=r,this.DS=n,this.W_=o,this.U_=a,this.scale=e;const f=this.Du.getSeries().length;this.j_=fr(l.spiderSeriesFillStyle,f),this.Y_=fr(l.spiderSeriesStrokeStyle,f),this.X_=fr(l.spiderSeriesPointFillStyle,f)}Le(){return this.Ky&&this.$a.size>0&&this.getVisible()}addPoints(...t){t=t.filter((t=>void 0!==t.axis));for(let i=0;i<t.length;i+=1)this.H_(t[i].axis);if(this.Du.getAnimationsEnabled()&&void 0!==this.z_){const i=new Map;let s;t.forEach((t=>i.set(t.axis,t.value))),this.R_(0,1,(t=>{i.forEach(((i,e)=>{const h=(null==s?void 0:s.get(e))||0;this.$a.set(e,h+t*(i-h)),this.Sn.vs.Ss()}))}),{easing:this.z_.easing,durationMs:this.z_.durationMs,onStart:()=>{s=new Map(this.$a)}})}else for(let i=0;i<t.length;i+=1){const s=t[i].axis;this.$a.set(s,t[i].value)}return this.Sn.Ss(),this}getValue(t,i=!1){const s=this.$a.get(t),e=this.Du.getOriginValue();if(void 0!==s)return i?e+this.N_*(s-e):s}setAnimationAddPoints(t,i){return this.z_=t?{easing:t,durationMs:i}:void 0,this.Sn.Ss(),this}setVisibleStateChangedAnimation(t,i){return this.V_=t?{easing:t,durationMs:i}:void 0,this.Sn.Ss(),this}setCursorResultTableFormatter(t){return this.Nv=t,this.Du.vs.Ss(),this}getCursorResultTableFormatter(){return this.Nv}setCursorEnabled(t){return super.setCursorEnabled(t)}setFillStyle(t){return this.j_="function"==typeof t?t(this.j_):t,this.bM&&(this.bM.Js(this.j_),this.Sn.Ss()),this}getFillStyle(){return this.j_}setStrokeStyle(t){return this.Y_="function"==typeof t?t(this.Y_):t,this.bM&&(this.bM.Fr(this.Y_),this.Sn.Ss()),this}getStrokeStyle(){return this.Y_}setPointFillStyle(t){return this.X_="function"==typeof t?t(this.X_):t,this.Kb&&(this.Kb.Js(this.X_),this.Sn.Ss()),this}getPointFillStyle(){return this.X_}setPointSize(t){return this.Xb=t,this.Kb&&this.Kb.Gt(t),this}getPointSize(){return this.Xb}getPointShape(){return this.Zb}setPointRotation(t){return this.Vn=t,this.Kb&&this.Kb.ie(t),this.Sn.Ss(),this}getPointRotation(){return this.Vn}Nl(){if(super.Nl(),!this.Ye){const t=new Array(this.DS.length),i=this.Du.getOriginValue();for(let s=0;s<this.DS.length;s+=1){const e=this.$a.get(this.DS[s].tag);t[s]=void 0!==e?this.W_(this.DS[s].tag,i+this.N_*(e-i)):this.W_(this.DS[s].tag,i)}Qh(t),t.length>=3&&(this.bM||(this.bM=this.Sn.if(this.scale,Xo.Simple).Fr(this.Y_).Js(this.j_).dn(this.getHighlight()),this.Gc(this.bM)),this.bM.jo(t),this.Kb||(this.Kb=this.Sn.pp(this.scale).Gt(this.Xb).Io(this.Zb).ie(this.Vn).Js(this.X_).dn(this.getHighlight()),this.Gc(this.Kb)),this.Kb.Oo().Bo(t))}}attach(t,i=!0){return super.attach(t,i),ar(t,this.Hs,{fill:this.j_,stroke:this.Y_}),this}Z_(){for(let t=0;t<this.mc.length;t+=1)ar(this.mc[t],this.Hs,{fill:this.j_,stroke:this.Y_})}Iv(t,i){if(this.bM){const i=this.U_(t);if(void 0!==i&&this.$a.has(i.tag)){const t=this.$a.get(i.tag),s=this.W_(i.tag,t);return Uc(s,this.scale,this.Nv(new Pc,this,t,i.tag,this.Du.formatValue).oc(),this,this.j_)}}}solveNearestFromScreen(t){return this.Iv(t,!1)}Kc(t,i){return t.dn(i),this.Sn.Ss(),this}setVisible(t){var i,s;return this.Um=t,this.G_(t,this.Du.getAnimationsEnabled()&&void 0!==this.V_,{easing:null===(i=this.V_)||void 0===i?void 0:i.easing,durationMs:null===(s=this.V_)||void 0===s?void 0:s.durationMs}),this}}const Ld=(t,i)=>{const s=Math.PI/2-2*t*Math.PI/i;return s>=0?s:s+2*Math.PI},Ed=t=>Nr(t.L_.rs()),Rd=t=>Nr(t.rs()),zd=(i,s,e,h)=>i.La(0).Qn(e).Fa(90).Pa(-270).Ea(s===t.SpiderWebMode.Circle?void 0:h.length),Vd={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},Nd={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},Gd=()=>{Nd.alignmentX=0,Nd.alignmentY=0,Nd.paddingX=0,Nd.paddingY=0};class Hd extends Qc{constructor(i,s,h,r,n,o,u){super(i,s,h,s.Fm("spiderChart bg",0),s.bm("spiderChart ui"),r,s.vs.Hs.spiderChartBackgroundFillStyle,s.vs.Hs.spiderChartBackgroundStrokeStyle,s.vs.Hs.spiderChartTitleFont,s.vs.Hs.spiderChartTitleFillStyle,u),this.xv=t.AutoCursorModes.onHover,this.Gn=c(20,20,20,20),this.axisScale=rh.d1({scale1DConstructor:kn,dimension:"x"}).Vt(0,1),this.DS=[],this.K_=[],this.q_=[],this.J_=Pn.expansion,this.Q_=!0,this.tw=Fd,this.iw=Id,this.Jr=!0,this.sw=t.SpiderWebMode.Normal,this.ew=4,this.hw=this.Hs.spiderChartWebStyle,this.rw=this.Hs.spiderChartScaleLabelFillStyle,this.nw=this.Hs.spiderChartScaleLabelFont,this.ow=5,this.aw=this.Hs.spiderChartAxisLabelFillStyle,this.uw=this.Hs.spiderChartAxisLabelFont,this.lw=5,this.cw=this.Hs.spiderChartAxisStrokeStyle,this.fw=this.Hs.spiderChartAxisNibStrokeStyle,this.rd=10,this.dw=c(),this.hasAxis=t=>this.DS.reduce(((i,s)=>i||s.tag===t),!1),this.formatValue=t=>this.axisScale.Wi(t,wn.Numeric),this.gw=()=>(t=>{const i=t.length;for(let s=0;s<i;s+=1)for(let e=s+1;e<i;e+=1)if(Ir(t[s],t[e]))return!0;return!1})(this.DS.map(Ed).concat(this.q_.map(Rd))),this.mw=()=>this.yw.nf(this.pixelScale).setMouseInteractions(!1),this.pw=t=>t.dispose(),this.Sw=()=>this.Xd.$e(this.pixelScale).setMouseInteractions(!1),this.bw=t=>t.dispose(),this.xw=t=>this.formatValue(this.axisScale.getInnerStart()+t*(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart())),this.Mw=(t,i)=>{let s,h;const r=()=>{void 0!==this._w&&this._w.finish(),s=a(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),h=this.J_,this.J_=void 0},n=(i,h,r,n,o)=>{const a=e(r.x-h.x,h.y-r.y),u=this.DS.findIndex((i=>i===t));if(u>=0&&void 0!==s){const i=Ld(u,this.DS.length),h=e(Math.cos(i),Math.sin(i)),r=a.x*h.x+a.y*h.y,n=qr(tn(t.O_.Hi(),t.O_.Gi())),l=s.min+(s.max-s.min)*Math.max(1+r/n,.01);this.axisScale.Vt(s.min,l),Zh(o),this.vs.Ss()}},o=()=>{if(s=void 0,void 0!==h)if(this.bs){const t=a(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),i=this.ww(),s=h;if(void 0!==i){const e=s.start(t.min,t.max,i.min,i.max),h=s.end(t.min,t.max,i.min,i.max);this._w=this.fm.vs.Sh(300,Ue.ease)([[0,1]],(([i])=>{this.axisScale.Vt(t.min+i*(e-t.min),t.max+i*(h-t.max))})),this._w.onAnimationEnd((()=>{this._w=void 0,this.J_=s}))}else this.J_=h}else this.J_=h;h=void 0};i.setMouseEnterEventHandler(this.Aw).setMouseLeaveEventHandler(this.kw).setMouseDragStartEventHandler(r).setMouseDragEventHandler(((t,i,s,h,r)=>n(0,e(i.clientX,i.clientY),h,0,i))).setMouseDragStopEventHandler(o);const u=Ua(new $a(((t,i,s)=>{this.Aw(t),r(),Zh(s)}),n,((t,i,s,e)=>{this.kw(t),o(),Zh(e)})));return i.setTouchStartEventHandler(u.onTouchStart).setTouchMoveEventHandler(u.onTouchMove).setTouchEndEventHandler(u.onTouchEnd)},this.Cw=t=>{this.Q_&&!this.hasAxis(t)&&this.addAxis(t)},this.W_=(t,i)=>{for(const s of this.DS)if(s.tag===t){const t=Math.max(Math.min((i-this.axisScale.getInnerStart())/(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart()),1),0);return zr(s.O_.Hi(),s.O_.Gi(),t)}},this.U_=t=>{if(0===this.DS.length)return;const i=tn(oh(t,this.engine.scale,this.pixelScale),this.DS[0].O_.Hi()),s=Math.atan2(i.y,i.x);let e,h=wr;for(const t of this.DS){const i=tn(t.O_.Gi(),t.O_.Hi()),r=Math.atan2(i.y,i.x),n=Math.abs(s-r);n<h&&(e=t,h=n)}return e},this.Aw=t=>{this.Jr&&(t.za(this.fw),this.Dm.Ss())},this.kw=t=>{t.za(this.fw),this.Dm.Ss()},this.zd.nr||this.zd.rr||this.vs.er(9),this.OM=s.PS("spiderChart series bg",0),this.yw=s.vy("spiderChart web shapes",0),this.Tw=s.vy("spiderChart axis bg",1),this.Zv=s.vy("spiderChart plotting",2),this.Xd=s.vy("spiderChart fg",3),this.B_=this.El.Ug().ee(this.Hs.effectsText),this.Bm.Ks("Spider Chart");const l=Ph(o?o.autoCursorBuilder:void 0,Gc);this.Tv=l.vv(this._v,this.uiScale,this.uiScale,this.Hs),this.Ap=this.OM.nf(this.pixelScale).Js(this.Hs.spiderChartSeriesBackgroundFillStyle).Fr(th).Fa(90).Pa(-270).La(0),this.kp=this.OM.nf(this.pixelScale).Js(Ie).Fr(this.Hs.spiderChartSeriesBackgroundStrokeStyle).Fa(90).Pa(-270).La(0),super.wp(this.Ap,this.kp),o&&!0===o.disableAnimations&&this.setAnimationsEnabled(!1),this.Im(n,this.pixelScale)}addAxis(t){if("string"==typeof t){if(!this.hasAxis(t)){const i=new Dd(this.Tw,this.Xd,this.pixelScale,this,t,this.axisScale,this.Mw,this.B_);this.DS.push(i)}}else t&&this.DS.push(t);return this.B_.Hc(this.DS.map((t=>t.L_))),this.Dm.Ss(),this}addSeries(i=t.PointShape.Circle){const s=new Od(this,this.Zv,this.pixelScale,i,this.Cw,this.DS,this.W_,this.U_,this.bp,this.Hs,this.vs.El);return this.Cp(s),s}getSeriesCount(){return this.Sp.length}getSeries(){return this.Sp}setWebMode(t){return this.sw=t,this.Dm.Ss(),this}getWebMode(){return this.sw}setWebCount(t){return this.ew=t,this.Dm.Ss(),this}getWebCount(){return this.ew}setWebStyle(t){return this.hw="function"==typeof t?t(this.hw):t,this.Dm.Ss(),this}getWebStyle(){return this.hw}setScaleLabelStyle(t){return this.rw="function"==typeof t?t(this.rw):t,this.Dm.Ss(),this}getScaleLabelStyle(){return this.rw}setScaleLabelFont(t){return this.nw="function"==typeof t?t(this.nw):t,this.Dm.Ss(),this}getScaleLabelFont(){return this.nw}setScaleLabelPadding(t){return this.ow=t,this.Dm.Ss(),this}getScaleLabelPadding(){return this.ow}setScaleLabelStrategy(t){return this.tw=t,this.Dm.Ss(),this}setScaleLabelFormatter(t){return this.formatValue=t,this.Dm.Ss(),this}setAxisLabelStyle(t){return this.aw="function"==typeof t?t(this.aw):t,this.Dm.Ss(),this}getAxisLabelStyle(){return this.aw}setAxisLabelFont(t){return this.uw="function"==typeof t?t(this.uw):t,this.Dm.Ss(),this}getAxisLabelFont(){return this.uw}setAxisLabelEffect(t){return this.B_.ee(t),this.vs.Ss(),this}getAxisLabelEffect(){return this.B_.re()}setAxisLabelPadding(t){return this.lw=t,this.Dm.Ss(),this}getAxisLabelPadding(){return this.lw}setAxisLabelStrategy(t){return this.iw=t,this.Dm.Ss(),this}setAxisStyle(t){return this.cw="function"==typeof t?t(this.cw):t,this.Dm.Ss(),this}getAxisStyle(){return this.cw}setNibStyle(t){return this.fw="function"==typeof t?t(this.fw):t,this.Dm.Ss(),this}getNibStyle(){return this.fw}setNibLength(t){return this.rd=t,this.Dm.Ss(),this}getNibLength(){return this.rd}setAutoAxis(t){return this.Q_=t,this}getAutoAxis(){return this.Q_}setMouseInteractions(t){return this.Jr=t,this}getMouseInteractions(){return this.Jr}setAxisScrollStrategy(t){return this.J_=t,this.Dm.Ss(),this}getAxisScrollStrategy(){return this.J_}setAxisInterval(t,i=0){return this.axisScale.Vt(i,t),this.Dm.Ss(),this}getOriginValue(){return this.axisScale.getInnerStart()}getEdgeValue(){return this.axisScale.getInnerEnd()}Nl(){super.Nl(),_l.zm(this.Bm,this.Pm);const t=this.DS.length,i=_l.Rm(this.Bm,this.Pm),s=e(this.pixelScale.x.getInnerInterval()-(this.Gn.left+this.Gn.right),this.pixelScale.y.getInnerInterval()-(this.Gn.bottom+this.Gn.top+i)),h=((t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}))(0,0,0,0);if(void 0!==this.iw){const i=Math.min(s.x,s.y)/2;for(let s=0;s<t;s+=1){const r=Ld(s,t),n=Math.cos(r),o=Math.sin(r),a=this.DS[s].getLabelSize();Gd();const u=this.iw(Nd,s,t,this.DS[s].tag,r,this.lw),l=e(n*i+u.paddingX,o*i+u.paddingY);n>0?h.right=Math.max(h.right,l.x+.5*(1-u.alignmentX)*a.x-i):h.left=Math.max(h.left,-l.x+.5*(u.alignmentX+1)*a.x-i),o>0?h.top=Math.max(h.top,l.y+.5*(1-u.alignmentY)*a.y-i):h.bottom=Math.max(h.bottom,-l.y+.5*(u.alignmentY+1)*a.y-i)}}if(this.J_){const t=this.ww();if(void 0!==t){const i=this.J_.start(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max),s=this.J_.end(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max);this.axisScale.Vt(i,s)}}const r=e(this.pixelScale.x.getInnerStart()+(h.left+this.pixelScale.x.getInnerInterval()-h.right)/2,this.pixelScale.y.getInnerStart()+(h.bottom+this.pixelScale.y.getInnerInterval()-h.top)/2),n=Math.min(s.x/2-(h.left+h.right)/2,s.y/2-(h.bottom+h.top)/2);this.dw=c(this.oi.left+this.Gn.left+h.left,this.oi.top+this.Gn.top+i+h.top,this.oi.right+this.Gn.right+h.right,this.oi.bottom+this.Gn.bottom+h.bottom),this._y(r,n);for(const t of this.Sp)t.ep();for(const t of this.Sp)t.Nl();super.Tm(),this.Fv(!1);for(const t of this.Sp)t.hp()}dispose(){return this.OM.Pt(),this.yw.Pt(),this.Tw.Pt(),this.Zv.Pt(),this.Xd.Pt(),super.dispose()}getMinimumSize(){return e(this.dw.left+this.dw.right+100,this.dw.bottom+this.dw.top+100)}_y(t,i){const s=this.DS.length,h=[];for(let r=0;r<s;r+=1){const n=Ld(r,s),o=e(t.x+Math.cos(n)*i,t.y+Math.sin(n)*i);h.push(o)}zd(this.Ap,this.sw,t,h),zd(this.kp,this.sw,t,h),this.Ap.Da(i),this.kp.Da(i),((t,i,s,e,h,r,n,o)=>{const a=t.length,u=r.length,l=i>0&&u>1;for(let u=0;u<Math.max(i,a);u+=1)if(l&&u<i){u>=a&&t.push(n());const o=t[u];zd(o,s,e,r);const l=h*((u+1)/i);o.Da(l)}else u<t.length&&o(t[u]);t.length=l?i:0})(this.K_,this.ew,this.sw,t,i,h,this.mw,this.pw);for(const t of this.K_)t.Js(Ie).Fr(this.hw);for(let e=0;e<s;e+=1){const r=this.DS[e],n=Ld(e,s);Gd();const o=void 0!==this.iw?this.iw(Nd,e,s,this.DS[e].tag,n,this.lw):void 0;r._y(t,h,e,n,i,this.sw,o)}((t,i,s,h,r,n,o,a,u,l)=>{const c=r.length,f=t.length;let d=0;if(void 0!==i)for(let u=0;u<c;u+=1){const g=r[u].tag,m=Ld(u,c);for(let r=0;r<s+ +(0===u);r+=1){Vd.alignmentX=0,Vd.alignmentY=0,Vd.paddingX=0,Vd.paddingY=0;const y=i(Vd,u,c,g,m,r,s,h);if(void 0!==y){d>=f&&t.push(a());const i=t[d];d+=1;const h=(s-r)/s,c=zr(n,o[u],h);i.Qn(Qr(c,e(y.paddingX,y.paddingY))).ho(y.alignmentX).no(y.alignmentY).Ks(l(h))}}}for(let i=d;i<f;i+=1)u(t[i]);t.length=d})(this.q_,this.tw,this.ew,this.ow,this.DS,t,h,this.Sw,this.bw,this.xw);for(const t of this.q_)t.Js(this.rw).te(this.nw)}ww(){let t,i;const s=this.getSeriesCount()>1;for(const e of this.DS)for(const h of this.Sp){const r=h.getValue(e.tag,s);void 0!==r&&(t=void 0===t?r:Math.min(t,r),i=void 0===i?r:Math.max(i,r))}if(void 0!==t&&void 0!==i)return a(t,i)}}const Wd={getWidth:t=>t.x,getHeight:t=>t.y,toVec2:(t,i)=>({x:t,y:i}),toPoint:(t,i)=>e(t,i)},Ud={getWidth:t=>t.y,getHeight:t=>t.x,toVec2:(t,i)=>({x:i,y:t}),toPoint:(t,i)=>e(i,t)},jd={defaultDragMouseStyle:t.MouseStyles.Horizontal,getTitleTextRotation:()=>0,Ee:t=>t.getXMin(),Re:t=>t.getXMax(),Ve:t=>t.Py().x},$d={defaultDragMouseStyle:t.MouseStyles.Vertical,getTitleTextRotation:t=>90*t,Ee:t=>t.getYMin(),Re:t=>t.getYMax(),Ve:t=>t.Py().y},Yd={...Wd,...jd},Xd={...Ud,...$d};class Zd extends Za{constructor(t,i,s,e){super(),this.Xe=[],this.Gl=0,this.tf=!0,this.wt=new We,this.Iw=t=>(this.Xe.push(t),this.Il(t),t.setMouseInteractions(this.tf),t),this.getHighlight=()=>this.Gl,this.Sn=t,this.scale=i,this.Fw=s,this.Hs=e}Pw(){return this.Xe}onHighlight(t){return this.wt.on("highlight",t)}offHighlight(t){return this.wt.off(t)}dispose(){return this.Xe.forEach(Mh),this.Fw&&this.Fw(this),this.Sn.vs.Ss(),this.wt.emit("dispose",this),this}setVisible(t){return super.setVisible(t),this.Xe.forEach((i=>i.setVisible(t))),this.Sn.vs.Ss(),this}onDispose(t){return this.wt.on("dispose",t)}offDispose(t){return this.wt.off(t,"dispose")}setHighlight(t){return this.Gl=pr(t),this.Sn.Ss(),this}setMouseInteractions(t){this.tf=t;for(let t=0;t<this.Xe.length;t+=1)this.Xe[t].setMouseInteractions(this.tf);return this}getMouseInteractions(){return this.tf}}class Kd extends Vf{constructor(){super(...arguments),this.Dw=[],this.Fw=t=>{t.Pw().forEach((t=>this.Wc(t)));const i=this.Dw.findIndex((i=>i===t));i>=0&&this.Dw.splice(i,1),this.Sn.Ss()}}clear(){return this.Dw.slice().forEach(Mh),this.Dw.length=0,this.gc=0,this.Sn.Ss(),this}Bw(t,i){void 0!==i?this.Dw.splice(i,0,t):this.Dw.push(t),t.Pw().forEach((t=>this.Gc(t,{setEventHandlers:!1}))),t.onMouseEnter(((t,i)=>this.bc(t,i))),t.onMouseLeave(((t,i)=>this.Mc(t,i))),t.onMouseClick(((t,i)=>this.kc(t,i))),t.onMouseDoubleClick(((t,i)=>this.Cc(t,i))),t.onMouseDown(((t,i)=>this.Tc(t,i))),t.onMouseUp(((t,i)=>this.Ic(t,i))),t.onMouseMove(((t,i)=>this.wc(t,i))),t.onMouseDragStart(((t,i,s)=>this.Fc(t,i,s))),t.onMouseDrag(((t,i,s,e,h)=>this.Pc(t,i,s,e,h))),t.onMouseDragStop(((t,i,s,e)=>this.Dc(t,i,s,e))),t.onMouseWheel(((t,i)=>this.Bc(t,i))),t.onTouchStart(((t,i)=>this.Oc(t,i))),t.onTouchMove(((t,i)=>this.Lc(t,i))),t.onTouchEnd(((t,i)=>this.Ec(t,i))),this.Sn.Ss()}Kc(t,i){t.setHighlight(i)}Ow(t){return this.Dw.find((i=>i.Pw().includes(t)))}setCursorEnabled(t){return super.setCursorEnabled(t)}}class qd extends Zd{}class Jd extends Kd{constructor(){super(...arguments),this.Lw=void 0,this.Ew=()=>{this.Lw=void 0}}Le(){return this.Ky&&this.Dw.length>0&&this.getVisible()}setDefaultStyle(t){this.Rw=t,this.Dw.forEach(t),t(this.zw);for(let t=0;t<this.mc.length;t+=1)this.Vw(this.mc[t]);return this}setCursorResultTableFormatter(t){return this.Nv=t,this.Du.vs.Ss(),this}getCursorResultTableFormatter(){return this.Nv}Iv(t,i){const s=jf(t,i?this.Dw.filter((t=>t.getVisible()&&t.getIsUnderMouse())):this.Dw.filter((t=>t.getVisible())),this.Nw,Lr);if(void 0!==s)return{location:oh(s[0],this.Sn.vs.Jt,this.scale),scale:this.scale,resultTableContent:this.Nv(new Pc,this,s[1]).oc(),series:this,fillStyle:s[1].getDominantStyle(),figure:s[1]}}solveNearestFromScreen(t){return this.Iv(t,!1)}Bw(t){super.Bw(t),this.Rw&&this.Rw(t)}clear(){return this.Lw=void 0,super.clear()}getXMax(){return this.Lw||(this.Lw=this.Gw()),this.Lw.max.x}getXMin(){return this.Lw||(this.Lw=this.Gw()),this.Lw.min.x}getYMax(){return this.Lw||(this.Lw=this.Gw()),this.Lw.max.y}getYMin(){return this.Lw||(this.Lw=this.Gw()),this.Lw.min.y}Py(){return e(0,0)}Gw(){const t=a(h(wr,wr),h(Ar,Ar));for(let i=0;i<this.Dw.length;i+=1)if(this.Dw[i].getVisible()){const s=this.Dw[i].getBoundaries();t.min.x=Math.min(t.min.x,s.min.x),t.min.y=Math.min(t.min.y,s.min.y),t.max.x=Math.max(t.max.x,s.max.x),t.max.y=Math.max(t.max.y,s.max.y)}return t}attach(t,i=!0){return super.attach(t,i),this.Vw(t),this}Vw(t){ar(t,this.Hs,{fill:this.zw.getDominantStyle()})}}class Qd extends qd{constructor(t,i,s,e,h,r,n,o,u,l,c,f){super(t,i,s,f),this.Sn=t,this.scale=i,this.dimensionStrategy=e,this.start=h,this.end=r,this.lowerExtreme=n,this.lowerQuartile=o,this.median=u,this.upperQuartile=l,this.upperExtreme=c,this.boundaries=a(this.dimensionStrategy.toPoint(h,n),this.dimensionStrategy.toPoint(r,c))}getBoundaries(){return this.boundaries}}class tg extends Qd{constructor(t,i,s,e,h,r,n,o,a,u,l,c,f){super(t,i,s,e,h,r,n,o,a,u,l,c),this.Hw=1,this.Ww=1,this.Uw=this.Iw(this.Sn.Zc(this.scale)),this.jw=this.Iw(this.Sn.rc(this.scale)),this.$w=this.Iw(this.Sn.rc(this.scale)),this.Yw=this.Iw(this.Sn.rc(this.scale)),this.Xw=this.Iw(this.Sn.rc(this.scale)),this.Zw=this.Iw(this.Sn.rc(this.scale)),this.Sn=t,this.scale=i,this.dimensionStrategy=e,this.start=h,this.end=r,this.lowerExtreme=n,this.lowerQuartile=o,this.median=a,this.upperQuartile=u,this.upperExtreme=l,this.Kw=this.Hs.boxSeriesBodyFillStyle,this.qw=this.Hs.boxSeriesBodyStrokeStyle,this.Ra=this.Hs.boxSeriesStrokeStyle,this.Jw=this.Hs.boxSeriesMedianStrokeStyle,this.Uw.Js(this.Kw).Fr(this.qw),this.jw.za(this.Ra),this.$w.za(this.Ra),this.Yw.za(this.Ra),this.Xw.za(this.Ra),this.Zw.za(this.Jw),this._e()}setBodyWidth(t){return this.Hw=t,this._e(),this}getBodyWidth(){return this.Hw}setBodyFillStyle(t){return this.Kw="function"==typeof t?t(this.Kw):t,this.Uw.Js(this.Kw),this.Sn.Ss(),this}getBodyFillStyle(){return this.Kw}setBodyStrokeStyle(t){return this.qw="function"==typeof t?t(this.qw):t,this.Uw.Fr(this.qw),this.Sn.Ss(),this}getBodyStrokeStyle(){return this.qw}setTailWidth(t){return this.Ww=t,this._e(),this}getTailWidth(){return this.Ww}setStrokeStyle(t){this.Ra="function"==typeof t?t(this.Ra):t;const i=this.Ra;return this.jw.za(i),this.$w.za(i),this.Yw.za(i),this.Xw.za(i),this.Sn.Ss(),this}getStrokeStyle(){return this.Ra}setMedianStrokeStyle(t){return this.Jw="function"==typeof t?t(this.Jw):t,this.Zw.za(this.Jw),this.Sn.Ss(),this}getMedianStrokeStyle(){return this.Jw}_e(){this.Uw.Qn(this.dimensionStrategy.toPoint((this.start+this.end-this.Hw*(this.end-this.start))/2,this.lowerQuartile)).Gt(this.dimensionStrategy.toPoint((this.end-this.start)*this.Hw,this.upperQuartile-this.lowerQuartile)),this.jw.Ua(this.dimensionStrategy.toPoint((this.start+this.end)/2,this.lowerQuartile)).Pa(this.dimensionStrategy.toPoint((this.start+this.end)/2,this.lowerExtreme)),this.$w.Ua(this.dimensionStrategy.toPoint((this.start+this.end)/2,this.upperQuartile)).Pa(this.dimensionStrategy.toPoint((this.start+this.end)/2,this.upperExtreme)),this.Yw.Ua(this.dimensionStrategy.toPoint((this.start+this.end-this.Ww*(this.end-this.start))/2,this.lowerExtreme)).Pa(this.dimensionStrategy.toPoint((this.start+this.end+this.Ww*(this.end-this.start))/2,this.lowerExtreme)),this.Xw.Ua(this.dimensionStrategy.toPoint((this.start+this.end-this.Ww*(this.end-this.start))/2,this.upperExtreme)).Pa(this.dimensionStrategy.toPoint((this.start+this.end+this.Ww*(this.end-this.start))/2,this.upperExtreme)),this.Zw.Ua(this.dimensionStrategy.toPoint((this.start+this.end-this.Hw*(this.end-this.start))/2,this.median)).Pa(this.dimensionStrategy.toPoint((this.start+this.end+this.Hw*(this.end-this.start))/2,this.median)),this.Sn.Ss()}getDominantStyle(){return this.Uw.qs()}}class ig extends Zd{constructor(t,i,s,e,h){super(t,i,s,h),this.Ln=0,this.Qw=0,this.tA=0,this.iA=0,this.sA=0,this.eA=0,this.hA=-1,this.Sn=t,this.scale=i,this.positive=e,this.Hs=h}rA(t,i,s,e,h,r){return this.Ln=t,this.Qw=i,this.tA=s,this.iA=e,this.sA=h,this.hA=r,this.nA(),this.Sn.Ss(),this}Go(t){return this.eA=t,this.nA(),this.Sn.Ss(),this}getPosition(){return this.Ln}getOpen(){return this.Qw}getHigh(){return this.tA}getLow(){return this.iA}getClose(){return this.sA}oA(){return this.eA}getDataIndices(){return this.hA}}class sg extends ig{constructor(){super(...arguments),this.Ra=this.Hs.ohlcCandleStrokeStyle,this.Kw=this.positive?this.Hs.ohlcCandleBodyFillStylePositive:this.Hs.ohlcCandleBodyFillStyleNegative,this.qw=this.positive?this.Hs.ohlcCandleBodyStrokeStylePositive:this.Hs.ohlcCandleBodyStrokeStyleNegative,this.aA=this.Iw(this.Sn.rc(this.scale)),this.Uw=this.Iw(this.Sn.Zc(this.scale)),this.uA=this.Iw(this.Sn.rc(this.scale))}setStrokeStyle(t){return this.Ra="function"==typeof t?t(this.Ra):t,this.nA(),this}getStrokeStyle(){return this.Ra}setBodyFillStyle(t){return this.Kw="function"==typeof t?t(this.Kw):t,this.nA(),this}getBodyFillStyle(){return this.Kw}setBodyStrokeStyle(t){return this.qw="function"==typeof t?t(this.qw):t,this.nA(),this}getBodyStrokeStyle(){return this.qw}getDominantStyle(){return this.Kw}nA(){const t=this.Gl;this.aA.Ua(e(this.Ln,this.iA)).Pa(e(this.Ln,Math.min(this.sA,this.Qw))).za(this.Ra).dn(t),this.Uw.Js(this.Kw).Fr(this.qw).dn(t),this.uA.Ua(e(this.Ln,Math.max(this.sA,this.Qw))).Pa(e(this.Ln,this.tA)).za(this.Ra).dn(t),this.Sn.Ss()}_e(){const t=e(this.Ln-this.eA/2,Math.min(this.sA,this.Qw)),i=tn(this.sA!==this.Qw?e(this.Ln+this.eA/2,Math.min(this.sA,this.Qw)+Math.abs(this.sA-this.Qw)):{x:this.Ln+this.eA/2,y:this.scale.Fi(t,{x:0,y:2}).y},t);this.Uw.Qn(t).Gt(i)}}class eg extends ig{constructor(){super(...arguments),this.lA=this.positive?this.Hs.ohlcBarStrokeStylePositive:this.Hs.ohlcBarStrokeStyleNegative,this.cA=this.Iw(this.Sn.rc(this.scale)),this.fA=this.Iw(this.Sn.rc(this.scale)),this.dA=this.Iw(this.Sn.rc(this.scale))}setStrokeStyle(t){return this.lA="function"==typeof t?t(this.lA):t,this.nA(),this}getStrokeStyle(){return this.lA}getDominantStyle(){const t=this.lA;return t instanceof sh?t.getFillStyle():Ie}nA(){const t=this.Gl;this.cA.Ua(e(this.Ln-this.eA/2,this.Qw)).Pa(e(this.Ln,this.Qw)).za(this.lA).dn(t),this.dA.Ua(e(this.Ln,this.sA)).Pa(e(this.Ln+this.eA/2,this.sA)).za(this.lA).dn(t),this.fA.Ua(e(this.Ln,this.iA)).Pa(e(this.Ln,this.tA)).za(this.lA).dn(t),this.Sn.Ss()}_e(){}}const hg={Candlestick:sg,Bar:eg};var rg;t.StepOptions=void 0,(rg=t.StepOptions||(t.StepOptions={}))[rg.before=0]="before",rg[rg.middle=.5]="middle",rg[rg.after=1]="after";const ng=(t,i)=>{const s=[],h=t.length,r=i;if(h>0){let i=0,n=t[0];s[i]=n,i+=1;for(let o=1;o<h;o+=1){const h=t[o];if(r<=0)s[i]=e(n.x,h.y),i+=1;else{const t=n.x*(1-r)+h.x*r;s[i]=e(t,n.y),i+=1,s[i]=e(t,h.y),i+=1}s[i]=h,i+=1,n=h}}return s},og=(t,i)=>{const s=t*t,h=s*t,r=1-t,n=r*r,o=n*r;return e(o*i[0].x+3*t*n*i[1].x+3*s*r*i[2].x+h*i[3].x,o*i[0].y+3*t*n*i[1].y+3*s*r*i[2].y+h*i[3].y)},ag=(t,i=32)=>{if(2===t.length)return[t[0],t[1]];const s=(t=>{const i=1e-5,s=t.length-1,h=Array(s);if(s>1){let r=e(0,0),n=e(0,0),o=e(0,0),a=Zr(tn(t[1],t[0]));const u=3;let l=0,c=0;for(let f=0;f<s;f+=1){const d=Array(4);if(d[0]=t[f],d[1]=t[f],d[3]=t[f+1],d[2]=t[f+1],o=a,r=n,f+1<s?(a=t[f+2]===t[f+1]?e(0,0):Zr(tn(t[f+2],t[f+1])),n=Zr(Qr(o,a))):n=e(0,0),t[f+1].y===t[f].y)l=0,c=0;else{const s=t[f+1].x-t[f].x;l=Math.abs(r.x)>i?Math.abs(s/(u*r.x)):1,c=Math.abs(n.x)>i?Math.abs(s/(u*n.x)):1}d[1]=Qr(Jr(r,l),d[1]),d[2]=tn(d[2],Jr(n,c)),h[f]=d}}return h.length>0?h:[]})(t),h=s.length,r=Array(h*i);let n=0;for(let t=0;t<h;t+=1)for(let e=0;e<=i;e+=1)r[n]=og(e/i,s[t]),n+=1;return r};class ug extends Uf{constructor(t,i,s,h,r,n,o,u,l,c,f,d,g,m){super(t,i,s,h,r,n,o,u,l,f,d),this.Jx=[],this.dt="Point Line series",this.rM=1e5,this.Xb=5,this.Vn=0,this.yo=!1,this.po=!1,this.So=!1,this.gA=!0,this.mA="nearest-x",this.yA=1,this.pA=[],this.SA=t=>{if(this.Jx.length>0){const i=this.Jx[this.Jx.length-1];if(t.length>0){const s=i.To(),h=i.Co(),r=s.length+h.length-+i.ua();if(r>=this.rM){const n=h.length>0?h[h.length-1]:s[i.ua()?r:r-1],o=e((n.x+t[0].x)/2,(n.y+t[0].y)/2);i.Bo(o,a(e(o.x,o.y),e(o.x,o.y))).la(!0),this.vA([o].concat(t)).aa(!0)}else i.Bo(t,this.eM)}}else t.length>0&&this.vA(t)},this.bA=t=>{if(this.pA.length>0){const i=this.pA[this.pA.length-1];t.length>0&&((i.To().length+i.Co().length)*this.yA>=this.rM?this.xA(t):i.Bo(t))}else t.length>0&&this.xA(t)},this.MA=(t,i)=>{const s=t.Iv(i);if(s)return oh(s,this.scale,this.Sn.vs.Jt)},this._A=(t,i)=>{const s=t.wA(i);if(s)return oh(s,this.scale,this.Sn.vs.Jt)},this.Zb=c,this.AA=g,this.kA=fr(f.pointLineSeriesFillStyle,m),this.Ra=fr(this.Hs.pointLineSeriesStrokeStyle,m)}add(t){return super.add(t),this}oM(){return Gf(this.pA)}setStrokeStyle(t){this.Ra="function"==typeof t?t(this.Ra):t;const i=this.Ra;for(let t=0;t<this.Jx.length;t+=1)this.Jx[t].za(i);return this.Sn.Ss(),this}getStrokeStyle(){return this.Ra}setPointFillStyle(t){this.kA="function"==typeof t?t(this.kA):t;const i=this.kA;for(let t=0;t<this.pA.length;t+=1)this.pA[t].Js(i);return this.Sn.Ss(),this}getPointFillStyle(){return this.kA}setPointSize(t){this.Xb=t;for(let i=0;i<this.pA.length;i+=1)this.pA[i].Gt(t);return this.Sn.Ss(),this}getPointSize(){return this.Xb}getPointShape(){return this.Zb}setPointRotation(t){this.Vn=t;for(let i=0;i<this.pA.length;i+=1)this.pA[i].ie(t);return this.Sn.Ss(),this}getPointRotation(){return this.Vn}setIndividualPointSizeEnabled(t){this.yo=t;for(let i=0;i<this.pA.length;i+=1)this.pA[i].Fo(t);return this.Sn.Ss(),this}getIndividualPointSizeEnabled(){return this.yo}setIndividualPointRotationEnabled(t){this.po=t;for(let i=0;i<this.pA.length;i+=1)this.pA[i].Po(t);return this.Sn.Ss(),this}getIndividualPointRotationEnabled(){return this.po}setIndividualPointValueEnabled(t){this.So=t;for(let i=0;i<this.pA.length;i+=1)this.pA[i].Do(t);return this.Sn.Ss(),this}getIndividualPointValueEnabled(){return this.So}setVisible(t){return super.setVisible(t),this.pA.forEach((i=>i.setVisible(t))),this}setCursorInterpolationEnabled(t){return this.gA=t,this.Sn.vs.Ss(),this}getCursorInterpolationEnabled(){return this.gA}setCursorSolveBasis(t){return this.mA=t,this.Jx.forEach((i=>i.ko(xo(t)))),this.pA.forEach((i=>i.ko(xo(t)))),this.Sn.Ss(),this}getCursorSolveBasis(){return this.mA}Rf(){return ur(this.kA)||ur(this.Ra.getFillStyle())}Ux(t){}Kc(t,i){t.dn(i),this.Sn.Ss()}nM(t){const i=this.Jx.length>0?this.Jx[this.Jx.length-1].To().length+this.Jx[this.Jx.length-1].Co().length-+this.Jx[this.Jx.length-1].ua():void 0;Nf(t,i,this.rM,this.SA),Nf(t,i,this.rM,this.bA)}xA(t,i){const s=this.Sn.pp(this.scale).Bo(t,i).setMouseInteractions(this.fc).Js(this.kA).Io(this.Zb).Gt(this.Xb).ie(this.Vn).Fo(this.yo).Po(this.po).Do(this.So).ko(xo(this.mA)).dn(this.getHighlight());return this.Gc(s),this.pA.push(s),s}vA(t,i){const s=this.Sn.Iy(this.scale,void 0,[Ll.UserSeries,...this.AA]).Bo(t,i).setMouseInteractions(this.fc).za(this.Ra).ko(xo(this.mA)).dn(this.getHighlight());return this.Gc(s),this.Jx.push(s),s}attach(t,i=!0){return ar(t,this.Hs,{stroke:this.Ra,fill:this.kA}),super.attach(t,i)}getPointAmount(){return this.pA.reduce(((t,i)=>t+i.Lo()+i.Eo()),this.$a.length)}clear(){super.clear();for(let t=0;t<this.Jx.length;t+=1)this.Wc(this.Jx[t]),this.Jx[t].dispose();this.Jx.length=0;for(let t=0;t<this.pA.length;t+=1)this.Wc(this.pA[t]),this.pA[t].dispose();return this.pA.length=0,this}hM(t,i,s,e){super.hM(t,i,s,e),this.tM.hM(this.pA,i,s,e,this.scale,(t=>{this.Wc(t)}))}Iv(t,i,s=this.gA){const e=s?jf(t,i?this.Jx.filter((t=>t.getIsUnderMouse())):this.Jx,this._A,"nearest-x"===this.mA?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.mA?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2):jf(t,i?this.pA.filter((t=>t.getIsUnderMouse())):this.pA,this.MA,"nearest-x"===this.mA?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.mA?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==e){const t=oh(e[0],this.Sn.vs.Jt,this.scale),i=e[1]instanceof ea?e[1].Va():e[1].qs(),s=i instanceof sh?i.getFillStyle():void 0,h=i instanceof Be?e[0].color?new De({color:e[0].color}):new De({color:i.getFallbackColor()}):i;return Uc(t,this.scale,this.Nv(new Pc,this,t.x,t.y,t).oc(),this,s||h)}}solveNearestFromScreen(t,i=this.gA){return this.Iv(t,!1,i)}}const lg=32,cg=(t,i)=>t.Co().length>=i?t.Co().slice(-i):Array.prototype.concat(t.To(),t.Co()).slice(-i),fg=(t,i,s)=>{const e=Array.prototype.concat(t.To(),t.Co()).slice(0,-s-1).concat(i.slice(s+1,2*s+2));t.Oo().Bo(e)._e()};class dg extends ug{constructor(t,i,s,e,h,r,n,o,a,u,l,c,f,d){super(t,i,s,e,h,r,n,o,a,u,l,c,f,d),this.dt="Spline Series",this.yA=lg,this.rM=8e3,this.CA=t=>{if(0===t.length)return;const i=this.pA.length;if(i>0){const s=i>1,e=this.pA[i-1];if(s){const s=Array.prototype.concat(e.To(),e.Co()),h=s.length;if(h*lg>=this.rM){const s=cg(e,3),h=Array.prototype.concat(s,t),r=ag(h,lg);fg(this.Jx[i-1],r,lg),this.vA(r.slice(66))}else if(h<5){const e=this.pA[i-2],h=cg(e,3),r=Array.prototype.concat(h,s,t),n=ag(r,lg),o=this.Jx[i-1],a=n.slice(66);o.Oo().Bo(a)._e()}else{const s=this.Jx[i-1],h=Array.prototype.concat(s.To(),s.Co()),r=cg(e,4),n=Array.prototype.concat(r,t),o=ag(n,lg),a=h.slice(0,-66).concat(o.slice(33));s.Oo().Bo(a)._e()}}else{const s=Array.prototype.concat(e.To(),e.Co()),h=s.length,r=this.Jx[i-1];if(h*lg>=this.rM){const i=cg(e,3),s=Array.prototype.concat(i,t),h=ag(s,lg);fg(this.Jx[0],h,lg),this.vA(h.slice(66))}else if(h+t.length>1){const i=Array.prototype.concat(s,t),e=ag(i,lg);r.Oo().Bo(e)._e()}else r.Bo(t)}}else{const i=t.length>0?ag(t,lg):t,s=Nr(i);this.vA(i,s)}this.bA(t)}}setCursorInterpolationEnabled(t){return super.setCursorInterpolationEnabled(t)}nM(t){const i=this.pA.length,s=this.pA.length>0?this.pA[i-1].To().length+this.pA[i-1].Co().length:void 0;Nf(t,s,Math.ceil(this.rM/this.yA),this.CA)}solveNearestFromScreen(t,i=this.gA){if(i)return super.solveNearestFromScreen(t,i);const s=jf(t,this.pA,this.MA,"nearest-x"===this.mA?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.mA?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==s){const t=oh(s[0],this.Sn.vs.Jt,this.scale);return Uc(t,this.scale,this.Nv(new Pc,this,t.x,t.y,t).oc(),this,s[1].qs())}}}class gg{constructor(){this.Ji="FreeformPattern",this.qo={type:"disabled",packager:(t,i,s)=>t.slice()}}hM(t,i,s,e,h,r){if(e>0){const h=Math.trunc((i-e)/s);if(h>0&&t.length>1){const i=t.splice(0,h);for(let t=0;t<i.length;t+=1)r(i[t]),i[t].dispose()}}}TA(t,i){const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)}getXMax(t=[],i){return Nh(t,Bh,Math.max,Rh,i)}getXMin(t=[],i){return Nh(t,Dh,Math.min,Eh,i)}getYMax(t=[],i){return Nh(t,Lh,Math.max,Vh,i)}getYMin(t=[],i){return Nh(t,Oh,Math.min,zh,i)}}const mg=t=>{switch(t){case"normal":default:return 1;case"high":return.25}},yg=ue({qo:{type:"disabled",packager:(t,i,s)=>t.slice()}});class pg extends yg{hM(t,i,s,e,h,r){if(e>0){const i=Math.ceil(e/s),n=t.length-i;if(n>0){const i=this.IA(t,h);if(i>0){const s=n-i>0?i:n;if(s>0){for(let i=0;i<s;i+=1)r(t[i]),t[i].dispose();t.splice(0,s)}}}}}}const Sg=(t,i)=>{const s=i.si();return t?Math.min(s,t):s},vg=(t,i)=>{const s=i.ei();return t?Math.max(s,t):s};class bg extends pg{TA(t,i){return Math.abs(t.x-i.x)}getYMax(t=[],i){return t.reduce(vg,i?i.max.y:void 0)}getYMin(t=[],i){return t.reduce(Sg,i?i.min.y:void 0)}}const xg=(t,i)=>{const s=i.ti();return t?Math.min(s,t):s},Mg=(t,i)=>{const s=i.ii();return t?Math.max(s,t):s};class _g extends pg{TA(t,i){return Math.abs(t.y-i.y)}getXMax(t=[],i){return t.reduce(Mg,i?i.max.x:void 0)}getXMin(t=[],i){return t.reduce(xg,i?i.min.x:void 0)}}const wg={horizontalProgressive:new class extends bg{constructor(){super({qo:mo()}),this.Ji="HorizontalProgressivePattern"}IA(t,i){const s=t.length,e=Math.min(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.x.Fi(t[r].ii(),t[r].Yo())<e&&(h+=1);return h}getXMax(t=[],i){return void 0!==i?i?i.max.x:void 0:t.length>0?t[t.length-1].ii():void 0}getXMin(t=[],i){return t.length>0&&t[0].Lo()>0?t[0].ti():i?i.min.x:void 0}setPrecision(t){return this.set("_columnPackaging",mo(mg(t)))}},horizontalRegressive:new class extends bg{constructor(){super({qo:yo()}),this.Ji="HorizontalRegressivePattern"}IA(t,i){const s=t.length,e=Math.max(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.x.Fi(t[r].ti(),-t[r].Yo())&&(h+=1);return h}getXMax(t=[],i){return t.length>0&&t[0].Lo()>0?t[0].ii():i?i.max.x:void 0}getXMin(t=[],i){return void 0!==i?i?i.min.x:void 0:t.length>0?t[t.length-1].ti():void 0}setPrecision(t){return this.set("_columnPackaging",yo(mg(t)))}},verticalProgressive:new class extends _g{constructor(){super({qo:po()}),this.Ji="VerticalProgressivePattern"}IA(t,i){const s=t.length,e=Math.min(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.y.Fi(t[r].ei(),t[r].Xo())<e&&(h+=1);return h}getYMax(t=[],i){return void 0!==i?i?i.max.y:void 0:t.length>0?t[t.length-1].ei():void 0}getYMin(t=[],i){return t.length>0&&t[0].Lo()>0?t[0].si():i?i.min.y:void 0}setPrecision(t){return this.set("_columnPackaging",po(mg(t)))}},verticalRegressive:new class extends _g{constructor(){super({qo:So()}),this.Ji="VerticalRegressivePattern"}IA(t,i){const s=t.length,e=Math.max(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.y.Fi(t[r].si(),-t[r].Xo())&&(h+=1);return h}getYMax(t=[],i){return t.length>0&&t[0].Lo()>0?t[0].ei():i?i.max.y:void 0}getYMin(t=[],i){return void 0!==i?i?i.min.y:void 0:t.length>0?t[t.length-1].si():void 0}setPrecision(t){return this.set("_columnPackaging",So(mg(t)))}},freeform:new gg};class Ag extends ug{constructor(t,i,s,h,r,n,o,u,l,c,f,d,g,m){super(t,i,s,h,r,n,o,u,wg.horizontalProgressive,l,f,d,g,m),this.dt="Step Series",this.SA=t=>{const i=this.Jx.length>0?this.Jx[this.Jx.length-1].To().length+this.Jx[this.Jx.length-1].Co().length:void 0;Nf(t,i,this.rM,this.FA)},this.FA=t=>{const i=t.length;if(this.Jx.length>0){const s=this.Jx[this.Jx.length-1];if(i>0){const i=s.To(),h=s.Co(),r=h.length>0?h[h.length-1]:i[i.length-1],n=ng([r].concat(t),this.ut);n.shift();const o=e((r.x+n[0].x)/2,(r.y+n[0].y)/2),u=Array.prototype.concat(o,n);(h.length>0?i.length+h.length:i.length)>=this.rM?(s.Bo(o,a(e(o.x,o.y),e(o.x,o.y))).la(!0),this.vA(u).aa(!0),this.xA(t)):s.Bo(u)}}else i>0&&this.vA(ng(t,this.ut));this.bA(t)},this.ut=c,void 0===this.AA.find((t=>"DataPattern"===t.type))&&this.AA.push({type:"DataPattern",args:{pattern:"ProgressiveX"}})}}class kg extends Uf{constructor(t,i,s,e,h,r,n,o,a,u,l,c,f,d){super(t,i,s,e,h,r,n,o,a,u,l),this.Jx=[],this.dt="Line Series",this.gA=!0,this.rM=void 0,this.mA="nearest-x",this.Ya=void 0,this.Rf=()=>ur(this.Ra.getFillStyle()),this.PA=(t,i)=>{const s=t.$b(i);if(s)return oh(s,this.scale,this.Sn.vs.Jt)},this._A=(t,i)=>{const s=t.wA(i);if(s)return oh(s,this.scale,this.Sn.vs.Jt)},this.AA=c,this.hr=d,this.Ra=fr(this.Hs.lineSeriesStrokeStyle,f),this.DA={individualLookupValuesEnabled:void 0!==(null==d?void 0:d.individualLookupValuesEnabled)&&d.individualLookupValuesEnabled}}add(t){return super.add(t),this}setMouseInteractions(t){return super.setMouseInteractions(t)}setStrokeStyle(t){this.Ra="function"==typeof t?t(this.Ra):t;const i=this.Ra;for(let t=0;t<this.Jx.length;t+=1)this.Jx[t].za(i);return this.Sn.Ss(),this}getStrokeStyle(){return this.Ra}setDataCleaning(t){return this.Ya=t,this.Jx.forEach((t=>t.Xa(this.Ya))),this.Sn.Ss(),this}setCursorInterpolationEnabled(t){return this.gA=t,this.Sn.vs.Ss(),this}getCursorInterpolationEnabled(){return this.gA}setCursorSolveBasis(t){return this.mA=t,this.Jx.forEach((i=>i.ko(xo(t)))),this.Sn.Ss(),this}getCursorSolveBasis(){return this.mA}Ux(t){}nM(t){let i=this.Jx[0];i||(i=this.vA(),this.Jx.push(i),this.Gc(i)),i.Bo(t)}vA(){return this.Sn.Iy(this.scale,this.DA,[Ll.UserSeries,...this.AA]).za(this.Ra).Xa(this.Ya).ko(xo(this.mA)).dn(this.getHighlight())}attach(t,i=!0){return ar(t,this.Hs,{stroke:this.Ra}),super.attach(t,i)}Kc(t,i){t.dn(i),this.Sn.Ss()}hM(t,i,s,e){}Iv(t,i,s=this.gA){const e=jf(t,i?this.Jx.filter((t=>t.getIsUnderMouse())):this.Jx,s?this._A:this.PA,"nearest-x"===this.mA?(t,i)=>Math.abs(t.x-i.x):"nearest-y"===this.mA?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==e){const t=oh(e[0],this.Sn.vs.Jt,this.scale),i=e[1].Va();return Uc(t,this.scale,this.Nv(new Pc,this,t.x,t.y,t).oc(),this,i instanceof sh?i.getFillStyle():void 0)}}solveNearestFromScreen(t,i=this.gA){return this.Iv(t,!1,i)}}class Cg extends qd{constructor(t,i,s,h,r,n){super(t,i,s,r),this.BA={x:0,y:0,width:0,height:0},this.OA={x1:0,y1:0,x2:0,y2:0},this.vo=a(e(0,0),e(0,0)),this._n=fr(r.rectangleSeriesFillStyle,n),this.Sn=t,this.Ew=h,this.scale=i,this.In=fr(r.rectangleSeriesStrokeStyle,n),this.Xc=this.Iw(this.Sn.Zc(this.scale)).Js(this._n).Fr(this.In)}getBoundaries(){return this.vo}setDimensions(t){return"x"in t?(this.BA=t,this.OA={x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}):(this.OA=t,this.BA={x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}),this.Xc.Qn(e(this.BA.x,this.BA.y)).Gt(e(this.BA.width,this.BA.height)),this.vo=Nr([this.BA,e(this.BA.x+this.BA.width,this.BA.y+this.BA.height)]),this.Ew(),this.Sn.Ss(),this}getDimensionsPositionAndSize(){return this.BA}getDimensionsTwoPoints(){return this.OA}setFillStyle(t){return this._n="function"==typeof t?t(this._n):t,this.Xc.Js(this._n),this.Sn.Ss(),this}getFillStyle(){return this._n}setStrokeStyle(t){return this.In="function"==typeof t?t(this.In):t,this.Xc.Fr(this.In),this.Sn.Ss(),this}getStrokeStyle(){return this.In}getDominantStyle(){return this.Xc.qs()}}class Tg extends Jd{constructor(t,i,s,h,r,n,o,a,u,l,c){super(t,i,s,h,r,n,o,a,u,l),this.dt="Rectangle Series",this.Nv=(t,i,s)=>{const e=s.getDimensionsPositionAndSize();return t.addRow(i.dt).addRow("X","",i.axisX.formatValue(e.x)).addRow("Y","",i.axisX.formatValue(e.y)).addRow("Width","",i.axisX.formatValue(e.width)).addRow("Height","",i.axisX.formatValue(e.height))},this.Nw=t=>{const i=t.getDimensionsPositionAndSize(),s=e(i.x+i.width/2,i.y+i.height/2);return oh(s,this.scale,this.Sn.vs.Jt)},this.LA=c,this.zw=new Cg(this.Sn,this.scale,_h,_h,this.Hs,this.LA).dispose()}Ux(t){}add(t){const i=new Cg(this.Sn,this.scale,this.Fw,this.Ew,this.Hs,this.LA).setDimensions(t);return this.Bw(i),i}}class Ig extends qd{constructor(t,i,s,e,h,r){super(t,i,s,h),this.EA=[],this.vo=kr,this.Sn=t,this.scale=i,this.Ew=e,this._n=fr(h.polygonSeriesFillStyle,r),this.In=fr(h.polygonSeriesStrokeStyle,r),this.bM=this.Iw(this.Sn.if(this.scale,Xo.Simple)).Fr(this.In).Js(this._n)}getBoundaries(){return this.vo}setDimensions(t){return this.EA=t,this.bM.jo(this.EA),this.vo=Nr(this.EA),this.Ew(),this.Sn.Ss(),this}getDimensions(){return this.EA}setFillStyle(t){return this._n="function"==typeof t?t(this._n):t,this.bM.Js(this._n),this.Sn.Ss(),this}getFillStyle(){return this._n}setStrokeStyle(t){return this.In="function"==typeof t?t(this.In):t,this.bM.Fr(this.In),this.Sn.Ss(),this}getStrokeStyle(){return this.In}getDominantStyle(){return this.bM.qs()}}class Fg extends Jd{constructor(t,i,s,h,r,n,o,a,u,l,c){super(t,i,s,h,r,n,o,a,u,l),this.dt="Polygon Series",this.Nv=(t,i,s)=>t.addRow(i.getName()),this.Nw=t=>{const i=t.getBoundaries(),s=e((i.min.x+i.max.x)/2,(i.min.y+i.max.y)/2);return oh(s,this.scale,this.Sn.vs.Jt)},this.LA=c,this.zw=new Ig(this.Sn,this.scale,_h,_h,this.Hs,this.LA).dispose()}Ux(t){if(!(t instanceof In))throw new Error("PolygonSeries can only be attached to a pair of Linear Axes.")}add(t){const i=new Ig(this.Sn,this.scale,this.Fw,this.Ew,this.Hs,this.LA).setDimensions(t);return this.Bw(i),i}}class Pg extends qd{constructor(t,i,s,h,r,n){super(t,i,s,r),this.dimensions={startX:0,startY:0,endX:0,endY:0},this.vo=a(e(0,0),e(0,0)),this.Qc=this.Iw(this.Sn.rc(this.scale)),this.Hs=r,this.Sn=t,this.scale=i,this.Ew=h,this._n=fr(r.segmentSeriesStrokeStyle,n),this.Qc.za(this._n)}getBoundaries(){return this.vo}setDimensions(t){return this.dimensions=t,this.Qc.Ua(e(t.startX,t.startY)).Pa(e(t.endX,t.endY)),this.vo=a(e(Math.min(t.startX,t.endX),Math.min(t.startY,t.endY)),e(Math.max(t.startX,t.endX),Math.max(t.startY,t.endY))),this.Ew(),this.Sn.Ss(),this}getDimensions(){return this.dimensions}setStrokeStyle(t){return this._n="function"==typeof t?t(this._n):t,this.Qc.za(this._n),this.Sn.Ss(),this}getStrokeStyle(){return this._n}getDominantStyle(){const t=this.Qc.Va();return t!==th?t.getFillStyle():Ie}}class Dg extends Jd{constructor(t,i,s,h,r,n,o,a,u,l,c){super(t,i,s,h,r,n,o,a,u,l),this.dt="Segment Series",this.Nv=(t,i,s)=>t.addRow(i.dt).addRow("Start",i.axisX.formatValue(s.getDimensions().startX),",",i.axisY.formatValue(s.getDimensions().startY)).addRow("End",i.axisX.formatValue(s.getDimensions().endX),",",i.axisY.formatValue(s.getDimensions().endY)),this.Nw=t=>{const i=t.getDimensions(),s=e((i.startX+i.endX)/2,(i.startY+i.endY)/2);return oh(s,this.scale,this.Sn.vs.Jt)},this.LA=c,this.zw=new Pg(this.Sn,this.scale,_h,_h,this.Hs,this.LA).dispose()}Ux(t){}add(t){const i=new Pg(this.Sn,this.scale,this.Fw,this.Ew,this.Hs,this.LA).setDimensions(t);return this.Bw(i),i}}class Bg extends qd{constructor(t,i,s,h,r,n){super(t,i,s,r),this.dimensions={x:0,y:0,radiusX:0,radiusY:0},this.vo=a(e(0,0),e(0,0)),this.RA=this.Iw(this.Sn.nf(this.scale)).Ea(50),this.Sn=t,this.scale=i,this.Ew=h,this._n=fr(r.ellipseSeriesFillStyle,n),this.In=fr(r.ellipseSeriesStrokeStyle,n),this.RA.Js(this._n).Fr(this.In)}getBoundaries(){return this.vo}setDimensions(t){return this.dimensions=t,this.RA.Qn(e(t.x,t.y)).Ba(t.radiusX).Oa(t.radiusY),this.vo=a(e(t.x-t.radiusX,t.y-t.radiusY),e(t.x+t.radiusX,t.y+t.radiusY)),this.Ew(),this.Sn.Ss(),this}getDimensions(){return this.dimensions}setFillStyle(t){return this._n="function"==typeof t?t(this._n):t,this.RA.Js(this._n),this.Sn.Ss(),this}getFillStyle(){return this._n}setStrokeStyle(t){return this.In="function"==typeof t?t(this.In):t,this.RA.Fr(this.In),this.Sn.Ss(),this}getStrokeStyle(){return this.In}getDominantStyle(){return this.RA.qs()}}class Og extends Jd{constructor(t,i,s,h,r,n,o,a,u,l,c){super(t,i,s,h,r,n,o,a,u,l),this.dt="Ellipse Series",this.Nv=(t,i,s)=>t.addRow(i.dt).addRow("X","",i.axisX.formatValue(s.getDimensions().x)).addRow("Y","",i.axisY.formatValue(s.getDimensions().y)).addRow("Radius X","",i.axisX.formatValue(s.getDimensions().radiusX)).addRow("Radius Y","",i.axisY.formatValue(s.getDimensions().radiusY)),this.Nw=t=>{const i=t.getDimensions(),s=e(i.x,i.y);return oh(s,this.scale,this.Sn.vs.Jt)},this.LA=c,this.zw=new Bg(this.Sn,this.scale,_h,_h,this.Hs,this.LA).dispose()}Ux(t){if(!(t instanceof In||t instanceof Fn))throw new Error("EllipseSeries only supports Linear Axes")}add(t){const i=new Bg(this.Sn,this.scale,this.Fw,this.Ew,this.Hs,this.LA).setDimensions(t);return this.Bw(i),i}}function Lg(t,i){return t===i?0:t<i?-1:1}function Eg(t,i){return t===i}class Rg{constructor(t){this.left=null,this.right=null,this.length=1,this.value=t}zA(t,i,s,e,h){if(this.left){const{length:r}=this.left;i=this.left.zA(t,i,s,e,h),s+=r}return i=t.call(e,i,this.value,s,h),s+=1,this.right&&(i=this.right.zA(t,i,s,e,h)),i}VA(t,i,s,e,h){return this.right&&(i=this.right.VA(t,i,s,e,h),s-=this.right.length),i=t.call(e,i,this.value,s,h),s-=1,this.left&&(i=this.left.VA(t,i,s,e,h)),i}NA(){this.length=1+(this.left?this.left.length:0)+(this.right?this.right.length:0)}GA(){let t=this;if(t.right){for(t=t.right;t.left;)t=t.left;return t}}HA(){let t=this;if(t.left){for(t=t.left;t.right;)t=t.right;return t}}}class zg{constructor(t,i=Eg,s=Lg){this.root=null,this.length=0,this.contentEquals=i,this.contentCompare=s,t&&(t instanceof Array?t.forEach((t=>this.Bo(t))):this.Bo(t))}WA(t){return!!this.root&&(this.UA(t),this.contentEquals(t,this.root.value))}jA(t,i){return this.zA(((s,e)=>s&&t.call(i,e)),!0)}$A(t,i){return this.zA(((s,e)=>{t.call(i,e)}),void 0)}M(t){if(this.root&&(this.UA(t),this.contentEquals(t,this.root.value)))return this.root}Bo(t){const i=new Rg(t);if(!this.root)return this.root=i,this.length+=1,i;if(this.UA(t),!this.contentEquals(t,this.root.value)){const s=this.contentCompare(t,this.root.value);if(0===s)throw new Error(`SortedSet cannot contain incomparable but inequal values: ${t} and ${this.root.value}`);return s<0?(i.right=this.root,i.left=this.root.left,this.root.left=null,this.root.NA()):(i.left=this.root,i.right=this.root.right,this.root.right=null,this.root.NA()),i.NA(),this.root=i,this.length+=1,i}}YA(t){if(this.root&&(this.UA(t),this.contentEquals(t,this.root.value))){if(this.root.left){const{right:i}=this.root;this.root=this.root.left,this.UA(t),this.root.right=i}else this.root=this.root.right;return this.length-=1,this.root&&this.root.NA(),!0}return!1}XA(){if(this.root){let t=this.root;for(;t.right;)t=t.right;return t}}ZA(){if(this.root){let t=this.root;for(;t.left;)t=t.left;return t}}KA(t){if(this.root)return this.UA(t),this.contentCompare(this.root.value,t)>0?this.root.HA():this.root}qA(t){if(this.root)return this.UA(t),this.contentCompare(this.root.value,t)>=0?this.root.HA():this.root}JA(t){if(this.root)return this.UA(t),this.contentCompare(this.root.value,t)>=0?this.root:this.root.GA()}QA(t){if(this.root)return this.UA(t),this.contentCompare(this.root.value,t)<=0?this.root.GA():this.root}tk(t){t instanceof Array?t.forEach((t=>this.Bo(t))):this.Bo(t)}UA(t){let i,s,e,h,r,n;if(this.root){for(i=new Rg,s=i,e=i,n=new Rg,r=this.root;;){const i=this.contentCompare(t,r.value);if(i<0){if(!r.left)break;if(this.contentCompare(t,r.left.value)<0&&(h=r.left,r.left=h.right,r.NA(),h.right=r,h.NA(),r=h,!r.left))break;h=new Rg,h.right=r,h.left=n.left,n.left=h,e.left=r,e.NA(),e=r,r=r.left}else{if(!(i>0))break;if(!r.right)break;if(this.contentCompare(t,r.right.value)>0&&(h=r.right,r.right=h.left,r.NA(),h.left=r,h.NA(),r=h,!r.right))break;h=new Rg,h.left=r,h.right=n.right,n.right=h,s.right=r,s.NA(),s=r,r=r.right}}for(s.right=r.left,s.NA(),e.left=r.right,e.NA(),r.left=i.right,r.right=i.left;n.left;)n.left.right.NA(),n.left=n.left.left;for(;n.right;)n.right.left.NA(),n.right=n.right.right;r.NA(),this.root=r}}zA(t,i,s){return this.root&&(i=this.root.zA(t,i,0,s,this)),i}VA(t,i,s){return this.root&&(i=this.root.VA(t,i,this.length-1,s,this)),i}Oo(){this.root=null,this.length=0}ik(t,i){let s,e=this.ZA();for(;e;){const h=this.QA(e.value);t.call(i,s?s.value:void 0,e.value,h?h.value:void 0),s=e,e=h}}sk(t,i,s){let e,h=this.ZA(),r=0;for(;h;){const n=this.QA(h.value);i=t.call(s,i,e?e.value:void 0,h.value,n?n.value:void 0,r++,this),e=h,h=n}return i}}class Vg{constructor(t,i){this.key=t,this.value=i}equals(t){return Eg(this.key,t.key)&&Eg(this.value,t.value)}compare(t){return Lg(this.key,t.key)}}class Ng{constructor(t,i=Eg,s=Lg){this.length=0,this.contentEquals=i,this.contentCompare=s,this.store=new zg(void 0,((t,s)=>i(t.key,s.key)),((t,i)=>s(t.key,i.key))),t&&(Array.isArray(t)?t.forEach((t=>this.Bo(t.key,t.value))):this.Bo(t.key,t.value))}M(t){const i=this.store.M(new Vg(t,void 0));return i?i.value.value:void 0}S(t,i){const s=new Vg(t,i),e=this.store.M(s);if(e)return e.value.value=i,e;const h=this.store.Bo(s);return this.length+=1,h}Bo(t,i){return this.S(t,i)}WA(t){return this.store.WA(new Vg(t,void 0))}Oo(){this.store.Oo(),this.length=0}zA(t,i,s){return this.store.zA(((i,e)=>t.call(s,i,e.value,e.key,this)),i,this.store)}VA(t,i,s){return this.store.VA(((i,e)=>t.call(s,i,e.value,e.key,this)),i,this.store)}YA(t){const i=new Vg(t,void 0);return!!this.store.WA(i)&&(this.store.YA(i),this.length--,!0)}$A(t,i){return this.zA(((s,e,h)=>{t.call(i,e,h)}),void 0)}ek(t){return this.store.M(new Vg(t,void 0))||void 0}ik(t,i){let s,e=this.store.ZA();for(;e;){const h=this.store.QA(e.value);t.call(i,s?s.value.value:void 0,e.value.value,h?h.value.value:void 0),s=e,e=h}}sk(t,i,s){let e,h=this.store.ZA(),r=0;for(;h;){const n=this.store.QA(h.value);i=t.call(s,i,e?e.value.value:void 0,h.value.value,n?n.value.value:void 0,r++,this),e=h,h=n}return i}XA(){return this.store.XA()}ZA(){return this.store.ZA()}KA(t){return this.store.KA(new Vg(t,void 0))}qA(t){return this.store.qA(new Vg(t,void 0))}JA(t){return this.store.JA(new Vg(t,void 0))}QA(t){return this.store.QA(new Vg(t,void 0))}}const Gg={minGapNew:1.75,minGapSplit:2,maxGapFuse:1.5},Hg=(t,i)=>Math.min(t,i[3]),Wg=(t,i)=>Math.max(t,i[2]),Ug=(t,i)=>{const s=t.length;if(!(s<2))return[i,t[0].y,t.reduce(bh,Ar),t.reduce(vh,wr),t[s-1].y]},jg=(t,i)=>{let s=[];const e=t.getDataIndices(),h=i.getDataIndices();return Array.isArray(e)?s=s.concat(e):s.push(e),Array.isArray(h)?s=s.concat(h):s.push(h),s},$g=(t,i)=>{if(t.length>0)return i>0?t[t.length-1]:t[0]},Yg=(t,i,s)=>t.addRow(i.getName()).addRow("X","",i.axisX.formatValue(s.getPosition())).addRow("Open","",s.getOpen().toFixed(2)).addRow("High","",s.getHigh().toFixed(2)).addRow("Low","",s.getLow().toFixed(2)).addRow("Close","",s.getClose().toFixed(2));class Xg extends Kd{constructor(i,s,e,r,n,o,u,l,c,f,d,g,m){super(i,s,e,r,n,o,u,l,d,g),this.dt="OHLC Series",this.hk=new Ng,this.Lw=a(h(wr,wr),h(Ar,Ar)),this.rk=0,this.nk=5,this.ak=Gg,this.Ya=void 0,this.uk=void 0,this.lk=void 0,this.ck=!0,this.dc=t.HighlightModes.onHover,this.Nv=Yg,this.fk=c,this.dk=f,this.gk=new this.fk(this.Sn,this.scale,_h,!0,this.Hs).dispose(),this.mk=new this.dk(this.Sn,this.scale,_h,!1,this.Hs).dispose()}Ux(t){if(!(t.x instanceof kn))throw new Error("OHLCSeries must be attached to a Linear X Axis.");this.yk=t.x}setStyle(t){return this.pk=t,this.Sk(),this.Sn.Ss(),this}setPositiveStyle(t){return this.vk=t,this.Sk(),this.Sn.Ss(),this}setNegativeStyle(t){return this.bk=t,this.Sk(),this.Sn.Ss(),this}setFigureWidth(t){return this.nk=t,this.Sn.Ss(),this}getFigureWidth(){return this.nk}setFigureAutoFitting(t){return this.ak=t?Gg:void 0,this.Sn.Ss(),this}getFigureAutoFitting(){return void 0!==this.ak}xk(t,i){return t-i/2<=this.scale.x.getInnerEnd()+.1*this.scale.x.getInnerInterval()&&this.scale.x.getInnerStart()-.1*this.scale.x.getInnerInterval()<=t+i/2}Mk(t,i,s,e){const h=(t=>t[4]>=t[1])(t),r=new(h?this.fk:this.dk)(this.Sn,this.scale,this.Fw,h,this.Hs);return this.Bw(r,e),this._k(r),this.Kc(r,this.getHighlight()),r.rA(t[0],t[1],t[2],t[3],t[4],i).Go(s),r}wk(t){const i=this.rk;return this.rk+=1,this.hk.S(i,t),this.ck=!0,this.wt.emit("dataAdd",this,[t],void 0),i}Sk(){this.Dw.forEach((t=>{this.pk&&this.pk(t),t.positive&&this.vk?this.vk(t):!t.positive&&this.bk&&this.bk(t)}))}_k(t){this.pk&&this.pk(t),t.positive&&this.vk?this.vk(t):!t.positive&&this.bk&&this.bk(t)}Ak(t){return t*this.yk.getPixelSize()}kk(t){return t/this.yk.getPixelSize()}Ck(t){if(!Array.isArray(t))return this.hk.M(t);if(this.hk.M(t[0])&&this.hk.M(t[t.length-1])){let i=0;const s=this.hk.M(t[0])[1];let e=Ar,h=wr;const r=this.hk.M(t[t.length-1])[4];for(let s=0;s<t.length;s+=1){const r=this.hk.M(t[s]);i+=r[0]/t.length,e=Math.max(e,r[2]),h=Math.min(h,r[3])}return[i,s,e,h,r]}}Tk(t,i,s){if(0===this.Dw.length)return;if(this.Dw.length>1){const i=t>0?this.Dw.length-1:0;this.Dw[i].dispose()}let e;do{e=!1;const h=$g(this.Dw,t);if(h){const r=h.getPosition(),n=h.getDataIndices();let o,a=("number"==typeof n?n:n[t>0?n.length-1:0])+t;const u=[],l=[];for(;;){const e=this.hk.M(a);if(!e)break;if(!this.xk(e[0],i))break;if(o){if(Math.abs(r-e[0])>=1.5*s)break;t>0?o[4]=e[4]:o[1]=e[1],o[2]=Math.max(o[2],e[2]),o[3]=Math.min(o[3],e[3])}else o=e.slice();u.push(e[0]),t>0?l.push(a):l.splice(0,0,a),a+=t}if(o){const s=t>0?void 0:0;this.Mk(o,l,i,s),e=!0}}}while(e)}hM(t){var i;if(t&&"maxDataPointCount"in t){const i=t.maxDataPointCount;if(i&&this.hk.length>i){const t=this.rk-1,s=this.hk.store.ZA();if(s){for(let e=t-i;e>=s.value.key;e-=1)this.hk.YA(e);let e=!0;this.Lw.min.y=wr,this.Lw.max.y=Ar;for(let s=1+t-i;s<=t;s+=1){const t=this.hk.M(s);t&&(this.Lw.min.y=Math.min(this.Lw.min.y,t[3]),this.Lw.max.y=Math.max(this.Lw.max.y,t[2]),e&&(this.Lw.min.x=t[0],e=!1))}}}}else if(t&&"minDataPointCount"in t&&t.minDataPointCount){const s=t.minDataPointCount,e=this.scale.x.getInnerStart(),h=this.rk-1;let r=this.hk.store.ZA();if(r){const t=r.value.key;let n;for(let t=r.value.key;t<=h&&!((null===(i=this.hk.M(t))||void 0===i?void 0:i[0])>=e);t+=1)n=t;if(void 0!==n&&n-t>=1e3&&this.hk.length-(n-t)>=s){for(let i=n;i>=t;i-=1)this.hk.YA(i);r=this.hk.store.ZA();let i=!0;if(this.Lw.min.y=wr,this.Lw.max.y=Ar,r)for(let t=r.value.key;t<=h;t+=1){const s=this.hk.M(t);s&&(this.Lw.min.y=Math.min(this.Lw.min.y,s[3]),this.Lw.max.y=Math.max(this.Lw.max.y,s[2]),i&&(this.Lw.min.x=s[0],i=!1))}}}}return this}setDataCleaning(t){return this.Ya=t,this.Sn.Ss(),this}hp(){super.hp(),this.hM(this.Ya);const t=this.yk.getPixelSize(),i=this.uk,s=a(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd()),e=this.lk,h=this.Ak(this.nk),r=!e||s.max-s.min!=e.max-e.min,n=this.Dw.length;if(!e||s.min>e.min)for(let t=0;t<this.Dw.length;t+=1){const i=this.Dw[t];if(this.xk(i.getPosition(),h))break;i.dispose(),t-=1}if(!e||s.max<e.max)for(let t=this.Dw.length-1;t>=0;t-=1){const i=this.Dw[t];if(this.xk(i.getPosition(),h))break;i.dispose()}if(0===this.Dw.length&&this.hk.length>0)for(let t=0;t<this.rk;t+=1){const i=this.hk.M(t);if(i&&this.xk(i[0],h)){this.Mk(i,t,h);break}}if(this.Dw.length>0){const n=this.ak?h*this.ak.minGapNew:0;if((r||!e||s.min<e.min)&&(this.Tk(-1,h,n),this.ck=!0),(r||!e||this.ck||s.max>e.max)&&(this.Tk(1,h,n),this.ck=!0),this.ak){const s=h*this.ak.maxGapFuse,e=h*this.ak.minGapSplit;if(void 0===i||t!==i||this.ck){let t,i;do{t=!1;for(let i=0;i<this.Dw.length;i+=1){const s=this.Dw[i],r=s.getDataIndices();if("number"!=typeof r&&r.length>1){const n=s.getPosition(),o=i>0?this.Dw[i-1]:void 0,a=i<this.Dw.length-1?this.Dw[i+1]:void 0;if((!o||n-o.getPosition()>=1.5*e)&&(!a||a.getPosition()-n>=1.5*e)){t=!0,s.dispose();const e=r.length,n=Math.round(e/2),o=r.splice(n,e-n),a=this.Ck(r),u=this.Ck(o);void 0!==a&&this.Mk(a,r,h,i),void 0!==u&&this.Mk(u,o,h,i+1),i+=1}}}}while(t);do{i=!1;for(let t=0;t<this.Dw.length;t+=1){const e=this.Dw[t],r=t<this.Dw.length-1?this.Dw[t+1]:void 0;if(void 0!==r&&r.getPosition()-e.getPosition()<=s){i=!0;const s=(e.getPosition()+r.getPosition())/2,n=e.getOpen(),o=Math.max(e.getHigh(),r.getHigh()),a=Math.min(e.getLow(),r.getLow()),u=r.getClose(),l=jg(e,r);e.dispose(),r.dispose(),this.Mk([s,n,o,a,u],l,h,t)}}}while(i)}}}if(t!==i){for(let t=0;t<this.Dw.length;t+=1)this.Dw[t].Go(h);this.uk=t}n!==this.Dw.length&&this.qx();for(let t=0;t<this.Dw.length;t+=1)this.Dw[t]._e();this.lk=s,this.ck=!1}Iv(t,i){const s=this.Dw.length;if(i){const t=this.Dw.find((t=>t.getIsUnderMouse()));return t&&{location:e(t.getPosition(),t.getClose()),scale:this.scale,resultTableContent:this.Nv(new Pc,this,t).oc(),series:this,fillStyle:t.getDominantStyle(),ohlcSegment:t}}if(s>0){const i=((t,i,s)=>{if(t<s(0)||s(i)<t)return;let e=0;const h=i;for(;e!==i;){const h=Math.ceil((e+i)/2);t<s(h)?i=h-1:e=h}const r=Math.abs(t-s(e));return e<h&&Math.abs(t-s(e+1))<r?e+1:e})(oh(t,this.Sn.vs.Jt,this.scale).x,s-1,(t=>this.Dw[t].getPosition()));if(void 0===i)return;const h=this.Dw[i];return{location:e(h.getPosition(),h.getClose()),scale:this.scale,resultTableContent:this.Nv(new Pc,this,h).oc(),series:this,fillStyle:h.getDominantStyle(),ohlcSegment:h}}}solveNearestFromScreen(t){return this.Iv(t,!1)}setCursorResultTableFormatter(t){return this.Nv=t,this.Du.vs.Ss(),this}getCursorResultTableFormatter(){return this.Nv}setCursorEnabled(t){return super.setCursorEnabled(t)}clear(){return this.hk.Oo(),this.ck=!0,this.Lw.min.x=wr,this.Lw.min.y=wr,this.Lw.max.x=Ar,this.Lw.max.y=Ar,this.wt.emit("dataClear",this),super.clear()}getXMax(){return this.Lw.max.x}getXMin(){return this.Lw.min.x}getYMax(){return this.Lw.max.y}getYMin(){return this.Lw.min.y}Py(){return e(this.nk/2,0)}oM(){const t=[];return this.hk.$A((i=>{t.push(i)})),t}aM(t){return this.wt.on("dataAdd",t)}uM(t){return this.wt.off(t)}lM(t){return this.wt.on("dataClear",t)}cM(t){return this.wt.off(t)}attach(t,i){return super.attach(t,i),ar(t,this.Hs,{fill:this.gk.getDominantStyle(),fill2:this.mk.getDominantStyle(),behavior:{colorStep:!0}}),this}}class Zg extends Xg{add(t){if(t.length>0){if(Array.isArray(t[0])){const i=t;for(let t=0;t<i.length;t+=1)super.wk(i[t]);this.Lw.min.x=Math.min(this.Lw.min.x,i[0][0]),this.Lw.max.x=Math.max(this.Lw.max.x,i[i.length-1][0]),this.Lw.min.y=i.reduce(Hg,this.Lw.min.y),this.Lw.max.y=i.reduce(Wg,this.Lw.max.y)}else{const i=t;super.wk(i),this.Lw.min.x=Math.min(this.Lw.min.x,i[0]),this.Lw.max.x=Math.max(this.Lw.max.x,i[0]),this.Lw.min.y=Math.min(this.Lw.min.y,i[3]),this.Lw.max.y=Math.max(this.Lw.max.y,i[2])}this.Sn.Ss()}return this}Le(){return this.Ky&&this.hk.length>0&&this.getVisible()}}class Kg extends Xg{constructor(){super(...arguments),this.$a=[]}Le(){return this.Ky&&(this.hk.length>0||this.$a.length>0)&&this.getVisible()}add(t){Array.isArray(t)?this.addPoints(t):this.addPoint(t);const i=this.$a[this.$a.length-1];return this.sM=i?{x:i.x,y:i.y}:void 0,this}addPoint(t){return this.$a.push(t),this.Sn.Ss(),this.Lw.min.x=Math.min(this.Lw.min.x,t.x),this.Lw.max.x=Math.max(this.Lw.max.x,t.x),this.Lw.min.y=Math.min(this.Lw.min.y,t.y),this.Lw.max.y=Math.max(this.Lw.max.y,t.y),this}addPoints(t){return t.length>0&&(this.$a=this.$a.concat(t),this.Sn.Ss(),this.Lw.min.x=Math.min(this.Lw.min.x,t[0].x),this.Lw.max.x=Math.max(this.Lw.max.x,t[t.length-1].x),this.Lw.min.y=t.reduce(vh,this.Lw.min.y),this.Lw.max.y=t.reduce(bh,this.Lw.max.y)),this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.sM?this.sM.x+i:0),this.add(Hf(t,i,e)),this}hp(){if(this.hM(this.Ya),this.$a.length>0){let t;if(void 0!==this.Ik)t=this.Ik;else{const i=this.ak?this.ak.minGapNew:1;t=this.Ak(this.nk*i)}const i=void 0!==this.Fk?this.Fk:this.$a[0].x,s=((t,i,s)=>{const e=[],h=[];let r=!1;for(;t.length>0;){for(let n=0;n<t.length;n+=1){const o=t[n];if(h.push(o),r=o.x>=s+i,r){const r=Ug(h,s+i/2);void 0!==r&&(e.push(r),t.splice(0,h.length-1)),s+=i;break}}if(h.length=0,!r)break}return e})(this.$a,t,i);if(s.length>0){for(let t=0;t<s.length;t+=1)this.wk(s[t]);this.Fk=s[s.length-1][0]+t/2}}super.hp()}setPackingResolution(t){return this.Ik=t,this}getLastPoint(){return this.sM}}const qg={Normal:Zg,AutomaticPacking:Kg},Jg=(t,i,s)=>t.addRow(i.getName()).addRow("Lower extreme","",s.lowerExtreme.toFixed(2)).addRow("Lower quartile","",s.lowerQuartile.toFixed(2)).addRow("Median","",s.median.toFixed(2)).addRow("Upper quartile","",s.upperQuartile.toFixed(2)).addRow("Upper extreme","",s.upperExtreme.toFixed(2));class Qg extends Jd{constructor(t,i,s,e,h,r,n,o,a,u,l,c,f){super(t,i,s,e,h,r,n,o,l,c),this.dt="Box Series",this.Nv=Jg,this.Nw=t=>oh(this.Uc.toPoint((t.start+t.end)/2,t.median),this.scale,this.Sn.vs.Jt),this.Pk=a,this.Uc=u,this.zw=new this.Pk(this.Sn,this.scale,this.Fw,this.Uc,0,0,0,0,0,0,0,this.Hs).dispose()}Ux(t){if(!(t instanceof In||t instanceof Fn))throw new Error("BoxSeries only supports Linear Axes")}add(t){const i=new this.Pk(this.Sn,this.scale,this.Fw,this.Uc,t.start,t.end,t.lowerExtreme,t.lowerQuartile,t.median,t.upperQuartile,t.upperExtreme,this.Hs),s=i.boundaries;return this.Lw=this.Lw?Hr(this.Lw,s):s,this.Sn.Ss(),this.Bw(i),i}}class tm extends Vf{constructor(){super(...arguments),this.Jx=[],this.$a=[],this.Dk=[],this.Bk=[],this.Uh=!1,this.rM=1e3,this.Qx=0,this.dc=t.HighlightModes.onHover,this.qo={type:"disabled",packager:(t,i,s)=>t.slice()},this.gA=!0,this.Ok=[],this.Lk=[],this.Ek=!1,this.Rf=()=>ur(this.Rk)||ur(this.zk),this.Vk=t=>{const i=t.length;if(this.Jx.length>0){const s=this.Jx.length-1,h=this.Jx[s];if(i>0){const[i,s]=h.To(),[n,o]=h.Co();if((n?i.length+n.length:i.length)>=this.rM){const u=n&&n.length>0?n[n.length-1]:i[i.length-1],l=o&&o.length>0?o[o.length-1]:s[i.length-1],c=(u.x+t[0].position)/2,f=nn(c,u,e(t[0].position,t[0].high)).y,d=nn(c,l,e(t[0].position,t[0].low)).y,g=r(c,f,d);h.Bo(g,a(e(c,d),e(c,f))).la(!0),this.Nk([g].concat(t)).aa(!0)}else h.Bo(t)}}else i>0&&this.Nk(t)},this.Gk=t=>{const i=this.Ok,s=t.length;if(this.Ok.length>0){if(s>0){const s=i[i.length-1],h=s.To(),r=s.Co();if(h.length+r.length>=this.rM){const n=r.length>0?r[r.length-1]:h[h.length-1],o=(n.x+t[0].x)/2,u=nn(o,n,e(t[0].x,t[0].y)).y,l=e(o,u);s.Bo(l,a(e(o,u),e(o,u))).la(!0),i.push(this.Hk([l].concat(t),this.eM).aa(!0))}else s.Bo(t)}}else s>0&&i.push(this.Hk(t))},this.Wk=t=>{const i=this.Lk,s=t.length;if(this.Lk.length>0){if(s>0){const s=i[i.length-1],h=s.To(),r=s.Co();if(h.length+r.length>=this.rM){const n=r.length>0?r[r.length-1]:h[h.length-1],o=(n.x+t[0].x)/2,u=nn(o,n,e(t[0].x,t[0].y)).y,l=e(o,u);s.Bo(l,a(e(o,u),e(o,u))).la(!0),i.push(this.Uk([l].concat(t)).aa(!0))}else s.Bo(t)}}else s>0&&i.push(this.Uk(t))},this.jk=(t,i)=>{const s=t.$b(i);if(s)return[oh(s[0],this.scale,this.Sn.vs.Jt),oh(s[1],this.scale,this.Sn.vs.Jt)]},this.$k=(t,i)=>{const s=t.wA(i);if(s)return[oh(s[0],this.scale,this.Sn.vs.Jt),oh(s[1],this.scale,this.Sn.vs.Jt)]}}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.Qx=void 0!==i&&i>0?i:0,this.Sn.Ss(),this}clear(){for(let t=0;t<this.Jx.length;t+=1)this.Wc(this.Jx[t]),this.Jx[t].dispose();for(let t=0;t<this.Ok.length;t+=1)this.Wc(this.Ok[t]),this.Ok[t].dispose();for(let t=0;t<this.Lk.length;t+=1)this.Wc(this.Lk[t]),this.Lk[t].dispose();return this.$a.length=0,this.Dk.length=0,this.Bk.length=0,this.eM=void 0,this.Jx.length=0,this.Ok.length=0,this.Lk.length=0,this.gc=0,this.Sn.Ss(),this.wt.emit("dataClear",this),this}getPointAmount(){return this.Jx.reduce(((t,i)=>t+i.Lo()+i.Eo()),this.$a.length)}setCursorInterpolationEnabled(t){return this.gA=t,this.Sn.vs.Ss(),this}getCursorInterpolationEnabled(){return this.gA}setCursorResultTableFormatter(t){return this.Nv=t,this.Du.vs.Ss(),this}setCursorEnabled(t){return super.setCursorEnabled(t)}getCursorResultTableFormatter(){return this.Nv}getXMax(){return Nh(this.Jx,Bh,Math.max,Rh,this.eM)}getXMin(){return Nh(this.Jx,Dh,Math.min,Eh,this.eM)}getYMax(){return Nh(this.Jx,Lh,Math.max,Vh,this.eM)}getYMin(){return Nh(this.Jx,Oh,Math.min,zh,this.eM)}Py(){const t=e(0,0);for(const i of this.Jx)t.x=Math.max(t.x,i.Yo()),t.y=Math.max(t.y,i.Xo());return t}Le(){return this.Ky&&this.getPointAmount()>0&&this.getVisible()}Ux(t){}iM(t,i,s){this.$a=hr(this.$a,t,{canReturnB:!1}),this.Dk=hr(this.Dk,i,{canReturnB:!1}),this.Bk=hr(this.Bk,s,{canReturnB:!1}),this.Sn.Ss()}Yk(t,i,s,e){this.Xk(i,s,e),this.iM(Array.isArray(t)?t:[t],i,s)}Xk(t,i,s){const e=Hr(Nr(t),Nr(i));this.eM?this.eM=Hr(this.eM,e):this.eM=e,s&&(this.eM=Hr(this.eM,s))}IA(){const t=this.Jx.length,i=Math.min(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd());let s=0;if(t>1)for(let e=0;e<t-1;e+=1)this.scale.x.Fi(this.Jx[e].ii(),this.Jx[e].Yo())<i&&(s+=1);return s}hM(t,i,s,e){if(s>0){const h=Math.ceil(s/i),r=t.length-h;if(r>0&&e>0){const i=r-e>0?e:r;if(i>0){for(let s=0;s<i;s+=1)this.Wc(t[s]),t[s].dispose();t.splice(0,i)}}}}Zk(t){const i=this.Jx.length>0?this.Jx[this.Jx.length-1]:void 0,s=i?i.To()[0].length+(i.Co()[0]?i.Co()[0].length:0):void 0;Nf(t,s,this.rM,this.Vk)}Kk(t){const i=this.Ok.length>0?this.Ok[this.Ok.length-1].To().length+this.Ok[this.Ok.length-1].Co().length:void 0;Nf(t,i,this.rM,this.Gk)}qk(t,i){const s=this.Ok.length>0?this.Ok[this.Ok.length-1].To().length+this.Ok[this.Ok.length-1].Co().length:void 0;Nf(t,s,this.rM,this.Gk),Nf(i,s,this.rM,this.Wk)}Nk(t,i){const s=this.Sn.Jk(this.scale).Bo(t,i).Js(this.Rk).na(this.zk).ha(this.qo).dn(this.getHighlight());return this.Jx.push(s),this.Gc(s),s}Qk(t,i,s){const e=this.Sn.Iy(this.scale,void 0,[Ll.UserSeries]).Bo(t,s).setMouseInteractions(!1).za(i).dn(this.getHighlight());return this.Gc(e),e}Hk(t,i){return this.Qk(t,this.tC,i)}Uk(t,i){return this.Qk(t,this.iC,i)}sC(t){this.Rk="function"==typeof t?t(this.Rk):t;const i=this.Rk;for(let t=0;t<this.Jx.length;t+=1)this.Jx[t].Js(i);this.Sn.Ss()}eC(t){this.zk="function"==typeof t?t(this.zk):t;const i=this.zk;for(let t=0;t<this.Jx.length;t+=1)this.Jx[t].na(i);this.Sn.Ss()}hC(){return this.Rk}oa(){return this.zk}rC(t){this.tC="function"==typeof t?t(this.tC):t;const i=this.tC;for(let t=0;t<this.Ok.length;t+=1)this.Ok[t].za(i);this.Sn.Ss()}nC(t){this.iC="function"==typeof t?t(this.iC):t;const i=this.iC;for(let t=0;t<this.Lk.length;t+=1)this.Lk[t].za(i);this.Sn.Ss()}oC(){return this.tC}aC(){return this.iC}Kc(t,i){t.dn(i),this.uC(i),this.Sn.Ss()}uC(t){for(let i=0;i<this.Ok.length;i+=1)this.Ok[i].dn(t);for(let i=0;i<this.Lk.length;i+=1)this.Lk[i].dn(t)}ep(){if(super.ep(),this.Ek=!1,this.Qx>0){const t=this.Jx.length,i=this.IA();this.hM(this.Jx,this.rM,this.Qx,i);const s=this.Jx.length;this.Ok.length>0&&this.hM(this.Ok,this.rM,this.Qx,i),this.Lk.length>0&&this.hM(this.Lk,this.rM,this.Qx,i),t!==s&&this.qx(),this.Ek=!0}}Nl(){if(super.Nl(),this.$a.length>0&&(this.Zk(this.$a),this.lC(this.Dk,this.Bk),this.Ek=!0),this.Ek){const t=this.getBoundaries();for(const i of this.Jx)i.cn(t);for(const i of this.Ok)i.cn(t);for(const i of this.Lk)i.cn(t)}}hp(){this.eM=void 0,this.$a.length=0,this.Dk.length=0,this.Bk.length=0}Iv(t,i,s=this.gA){const e=((t,i,s)=>{let e,h,r=Number.MAX_VALUE;for(let n=0;n<i.length;n+=1){const o=i[n],a=s(o,t);if(a){const i=Lr(t,a[0]),s=Lr(t,a[1]);(void 0===e||i<r||s<r)&&(e=a,h=o,i<r?r=i:s<r&&(r=s))}}return e&&h?[e,h]:void 0})(t,i?this.Jx.filter((t=>t.getIsUnderMouse())):this.Jx,s?this.$k:this.jk);if(void 0!==e&&void 0!==e[0]){const t=oh(e[0][0],this.Sn.vs.Jt,this.scale),i=oh(e[0][1],this.Sn.vs.Jt,this.scale);return Uc(t,this.scale,this.Nv(new Pc,this,t.x,t.y,i.y).oc(),this,e[1].qs())}}solveNearestFromScreen(t,i=this.gA){return this.Iv(t,!1,i)}}const im=(t,i,s,e,h)=>t.addRow(i.getName()).addRow("Position","",i.axisX.formatValue(s)).addRow("Value","",i.axisY.formatValue(e)).addRow("Base","",i.axisY.formatValue(h));class sm extends tm{constructor(t,i,s,e,h,r,n,o,a=0,u,l){super(t,i,s,e,h,r,n,o,u,l),this.dt="Area Series",this.Nv=im,this.cC=a}add(t){const i=Array.isArray(t)?t:[t];if(i.length>0){const t=this.fC(i),[s,h]=this.dC(t);this.Yk(t,s,h,a(e(wr,this.cC),e(Ar,this.cC)));const r=this.$a[this.$a.length-1];this.sM=r?{position:r.position,high:r.high,low:r.low}:void 0,this.wt.emit("dataAdd",this,i,this.eM)}return this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.sM?this.sM.position+i:0),this.add(Hf(t,i,e)),this}aM(t){return this.wt.on("dataAdd",t)}uM(t){return this.wt.off(t)}lM(t){return this.wt.on("dataClear",t)}cM(t){return this.wt.off(t)}}class em extends sm{constructor(){super(...arguments),this.iC=th}lC(t){return this.Kk(t)}dC(t){const i=t.length,s=Array(i);for(let h=0;h<i;h+=1){const i=t[h];s[h]=e(i.position,i.high)}return[s,[]]}setStrokeStyle(t){return this.rC(t),this}getStrokeStyle(){return this.oC()}}class hm extends em{constructor(t,i,s,e,h,r,n,o,a,u,l,c){super(t,i,s,e,h,r,n,o,a,u,l);const f=c;this.Rk=fr(this.Hs.areaSeriesPositiveFillStyle,f),this.zk=Ie,this.tC=fr(this.Hs.areaSeriesPositiveStrokeStyle,f)}fC(t){return this.gC(t)}gC(t){const i=[];return 1===t.length?this.mC(t[0],i):this.yC(t,i),i}mC(t,i,s=0){const e=this.cC;return i[s]=t.y<e?r(t.x,e,e):r(t.x,t.y,e),s+1}yC(t,i,s=0){let h=0;const n=t.length-1,o=this.cC;for(;h<n;){const n=t[h],a=t[h+=1];if(n.y>=o){const t=r(n.x,n.y,o);if(0!==s&&Gh(i[s-1],t)||(i[s]=t,s+=1),a.y<o){const t=dn(e(Ar,o),e(wr,o),n,a);t&&(i[s]=r(t.x,t.y,o),s+=1),i[s]=r(a.x,o,o),s+=1}else i[s]=r(a.x,a.y,o),s+=1}else{const t=r(n.x,o,o);if(0!==s&&Gh(i[s-1],t)||(i[s]=t,s+=1),a.y>=o){const t=dn(e(Ar,o),e(wr,o),n,a);t&&(i[s]=r(t.x,t.y,o),s+=1),i[s]=r(a.x,a.y,o),s+=1}else i[s]=r(a.x,o,o),s+=1}}return s}oM(){return Gf(this.Jx,(t=>t[0]||[]))}setFillStyle(t){return this.sC(t),this}getFillStyle(){return this.hC()}attach(t,i=!0){return ar(t,this.Hs,{fill:this.Rk,stroke:this.tC}),super.attach(t,i)}}class rm extends em{constructor(t,i,s,e,h,r,n,o,a,u,l){super(t,i,s,e,h,r,n,o,a,u,l);const c=t.getSeries().length;this.Rk=Ie,this.zk=fr(this.Hs.areaSeriesNegativeFillStyle,c),this.tC=fr(this.Hs.areaSeriesNegativeStrokeStyle,c)}fC(t){return this.pC(t)}pC(t){const i=[];return 1===t.length?this.mC(t[0],i):this.yC(t,i),i}mC(t,i,s=0){const e=this.cC;return i[s]=t.y>e?r(t.x,e,e):r(t.x,t.y,e),s+1}yC(t,i,s=0){let h=0;const n=t.length-1,o=this.cC;for(;h<n;){const n=t[h],a=t[h+=1];if(n.y<=o){const t=r(n.x,n.y,o);if(0!==s&&Gh(i[s-1],t)||(i[s]=t,s+=1),a.y>o){const t=dn(e(Ar,o),e(wr,o),n,a);t&&(i[s]=r(t.x,t.y,o),s+=1),i[s]=r(a.x,o,o),s+=1}else i[s]=r(a.x,a.y,o),s+=1}else{const t=r(n.x,o,o);if(0!==s&&Gh(i[s-1],t)||(i[s]=t,s+=1),a.y<=o){const t=dn(e(Ar,o),e(wr,o),n,a);t&&(i[s]=r(t.x,t.y,o),s+=1),i[s]=r(a.x,a.y,o),s+=1}else i[s]=r(a.x,o,o),s+=1}}return s}oM(){return Gf(this.Jx,(t=>t[1]))}setFillStyle(t){return this.eC(t),this}getFillStyle(){return this.oa()}attach(t,i=!0){return ar(t,this.Hs,{fill:this.zk,stroke:this.tC}),super.attach(t,i)}}class nm extends sm{constructor(t,i,s,e,h,r,n,o,a,u,l){super(t,i,s,e,h,r,n,o,a,u,l);const c=t.getSeries().length;this.Rk=fr(this.Hs.areaSeriesBipolarHighFillStyle,c),this.tC=fr(this.Hs.areaSeriesBipolarHighStrokeStyle,c),this.zk=fr(this.Hs.areaSeriesBipolarLowFillStyle,c),this.iC=fr(this.Hs.areaSeriesBipolarLowStrokeStyle,c)}fC(t){return this.SC(t)}lC(t,i){return this.qk(t,i)}SC(t){let i=0;const s=[],e=t.length,h=this.cC;return e>0&&(this.vC&&(this.vC.y<=h&&h<=t[0].y||this.vC.y>=h&&h>=t[0].y)&&(s[i]=r(.5*(this.vC.x+t[0].x),h,h),i+=1),this.vC=t[e-1],1===e?this.mC(t[0],s,i):this.yC(t,s)),s}mC(t,i,s=0){return i[s]=r(t.x,t.y,this.cC),s+1}yC(t,i){let s=0,e=0;const h=t.length-1,n=this.cC;for(;e<h;){const h=t[e],o=t[e+=1],a=r(h.x,h.y,n);if(0!==s&&Gh(i[s-1],a)||(i[s]=a,s+=1),h.y<=n&&n<=o.y||h.y>=n&&n>=o.y){const t=h.y,e=o.y,a=n,u=t===e?o.x:mf(h.x,o.x,(a-t)/(e-t));i[s]=r(u,n,n),s+=1}i[s]=r(o.x,o.y,n),s+=1}return s}dC(t){const i=t.length,s=Array(i),h=Array(i),r=this.cC;for(let n=0;n<i;n+=1){const i=t[n];i.high>r?(s[n]=e(i.position,i.high),h[n]=e(i.position,r)):i.high<r?(s[n]=e(i.position,r),h[n]=e(i.position,i.high)):(s[n]=e(i.position,i.high),h[n]=e(i.position,i.high))}return[s,h]}oM(){return Gf(this.Jx,(t=>t[0]))}setPositiveFillStyle(t){return this.sC(t),this}setNegativeFillStyle(t){return this.eC(t),this}setPositiveStrokeStyle(t){return this.rC(t),this}setNegativeStrokeStyle(t){return this.nC(t),this}getPositiveFillStyle(){return this.hC()}getNegativeFillStyle(){return this.oa()}getPositiveStrokeStyle(){return this.oC()}getNegativeStrokeStyle(){return this.aC()}attach(t,i=!0){return ar(t,this.Hs,{fill:this.Rk,fill2:this.zk,behavior:{colorStep:!0}}),super.attach(t,i)}}const om={Positive:hm,Negative:rm,Bipolar:nm},am=(t,i,s,e,h)=>t.addRow(i.getName()).addRow("Position","",i.axisX.formatValue(s)).addRow("High","",i.axisY.formatValue(e)).addRow("Low","",i.axisY.formatValue(h));class um extends tm{constructor(t,i,s,e,h,r,n,o,a,u,l){super(t,i,s,e,h,r,n,o,a,u),this.dt="Area Range Series",this.Nv=am;const c=l;this.Rk=fr(this.Hs.areaRangeSeriesFillStyle,c),this.tC=fr(this.Hs.areaRangeSeriesStrokeStyle,c),this.zk=fr(this.Hs.areaRangeSeriesFillStyleInverted,c),this.iC=fr(this.Hs.areaRangeSeriesStrokeStyleInverted,c)}add(t){const i=Array.isArray(t)?t:[t],[s,e]=o(i);this.Yk(t,s,e);const h=this.$a[this.$a.length-1];return this.sM=h?{position:h.position,high:h.high,low:h.low}:void 0,this.wt.emit("dataAdd",this,i,this.eM),this}addArraysHighLow(t,i,s=1,e=0){if(t.length!==i.length)throw new Error("arrayHigh and arrayLow lengths are not equal");{let h=e;h||(h=this.sM?this.sM.position+s:0),this.add(((t,i,s=1,e)=>{const h=void 0!==e?e:0,r=new Array(t.length);for(let e=0;e<t.length;e+=1)r[e]={position:h+s*e,high:t[e],low:i[e]};return r})(t,i,s,h))}return this}lC(t,i){this.qk(t,i)}setHighFillStyle(t){return this.sC(t),this}setLowFillStyle(t){return this.eC(t),this}setHighStrokeStyle(t){return this.rC(t),this}setLowStrokeStyle(t){return this.nC(t),this}getHighFillStyle(){return this.hC()}getLowFillStyle(){return this.oa()}getHighStrokeStyle(){return this.oC()}getLowStrokeStyle(){return this.aC()}oM(){return Gf(this.Jx,(t=>{const i=t[0],s=t[1];if(!i||!s)return[];const e=[],h=i.length;for(let t=0;t<h;t+=1)e[t]={position:i[t].x,high:i[t].y,low:s[t].y};return e}))}aM(t){return this.wt.on("dataAdd",t)}uM(t){return this.wt.off(t)}lM(t){return this.wt.on("dataClear",t)}cM(t){return this.wt.off(t)}attach(t,i=!0){return ar(t,this.Hs,{fill:this.Rk,fill2:this.zk,behavior:{colorStep:!0}}),super.attach(t,i)}}class lm extends Uf{constructor(t,i,s,e,h,r,n,o,a,u,l,c){super(t,i,s,e,h,r,n,o,new gg,u,l),this.Jx=[],this.dt="Point series",this.Xb=5,this.Vn=0,this.yo=!1,this.po=!1,this.So=!1,this.rM=void 0,this.MA=(t,i)=>{const s=t.Iv(i);if(s)return oh(s,this.scale,this.Sn.vs.Jt)},this.Zb=a,this._n=fr(u.pointSeriesFillStyle,c)}add(t){return super.add(t),this}Rf(){return ur(this._n)}Ux(t){}attach(t,i=!0){return ar(t,this.Hs,{fill:this._n}),super.attach(t,i)}Kc(t,i){t.dn(i),this.Sn.Ss()}setPointFillStyle(t){this._n="function"==typeof t?t(this._n):t;const i=this._n;for(let t=0;t<this.Jx.length;t+=1)this.Jx[t].Js(i);return this.Sn.Ss(),this}getPointFillStyle(){return this._n}setPointSize(t){this.Xb=t;for(let i=0;i<this.Jx.length;i+=1)this.Jx[i].Gt(t);return this.Sn.Ss(),this}getPointSize(){return this.Xb}getPointShape(){return this.Zb}setPointRotation(t){this.Vn=t;for(let i=0;i<this.Jx.length;i+=1)this.Jx[i].ie(t);return this.Sn.Ss(),this}getPointRotation(){return this.Vn}setIndividualPointSizeEnabled(t){this.yo=t;for(let i=0;i<this.Jx.length;i+=1)this.Jx[i].Fo(t);return this.Sn.Ss(),this}getIndividualPointSizeEnabled(){return this.yo}setIndividualPointRotationEnabled(t){this.po=t;for(let i=0;i<this.Jx.length;i+=1)this.Jx[i].Po(t);return this.Sn.Ss(),this}getIndividualPointRotationEnabled(){return this.po}setIndividualPointValueEnabled(t){this.So=t;for(let i=0;i<this.Jx.length;i+=1)this.Jx[i].Do(t);return this.Sn.Ss(),this}getIndividualPointValueEnabled(){return this.So}nM(t){let i=this.Jx[0];i||(i=this.vA()),i.Bo(t)}vA(){const t=this.Sn.pp(this.scale).Io(this.Zb).Gt(this.Xb).ie(this.Vn).Fo(this.yo).Po(this.po).Do(this.So).Js(this._n).dn(this.getHighlight());return this.Jx.push(t),this.Gc(t),t}Iv(t,i){const s=jf(t,i?this.Jx.filter((t=>t.getIsUnderMouse())):this.Jx,this.MA,Lr);if(void 0!==s){const t=oh(s[0],this.Sn.vs.Jt,this.scale),i=s[1].qs(),e=i instanceof Be?s[0].color?new De({color:s[0].color}):new De({color:i.getFallbackColor()}):i;return Uc(t,this.scale,this.Nv(new Pc,this,t.x,t.y,t).oc(),this,e)}}solveNearestFromScreen(t){return this.Iv(t,!1)}setCursorResultTableFormatter(t){return super.setCursorResultTableFormatter(t)}}class cm{constructor(t,i,s,e){this.bC=!1,this.wt=new We,this.chart=s,this.xC=e,this.gr=t.gr,this.Pu=e||Na,this.MC=yh.document.createElement("div"),this.MC.style.position="absolute",this.MC.style.pointerEvents="none",yh.document.body.append(this.MC);const h=()=>{const t=s.engine.container.getBoundingClientRect();this.MC.style.left=`${t.left}px`,this.MC.style.top=`${t.top}px`,this.MC.style.width=`${t.width}px`,this.MC.style.height=`${t.height}px`};h(),s.onResize(h),this._C(this.MC),this.wC(),this.AC(),this.kC(),this.CC(i),this.chart.TC().push(this)}_C(t){this.IC=yh.document.createElement("div"),this.IC.style.pointerEvents="all",t.append(this.IC),this.FC=yh.document.createElement("div"),this.PC=new Pa(this.gr,this.Pu,this.chart,this.FC),this.DC=yh.document.createElement("table"),this.DC.style.borderSpacing="0",this.IC.appendChild(this.PC.Nu()),this.IC.appendChild(this.FC),this.FC.appendChild(this.DC)}AC(){let t=0,i=0,s=0,e=0,h=!1;this.bC=!1,this.IC.onmousedown=r=>{r=r||yh.event,s=r.clientX,e=r.clientY,h=!0,yh.document.onmouseup=t=>{this.bC?this.IC.addEventListener("click",Zh,!0):this.IC.removeEventListener("click",Zh,!0),h=!1,this.bC=!1,yh.document.onmouseup=null,yh.document.onmousemove=null},yh.document.onmousemove=r=>{r=r||yh.event,h&&(t=s-r.clientX,i=e-r.clientY,s=r.clientX,e=r.clientY,this.bC=!0,this.IC.style.top=this.IC.offsetTop-i+"px",this.IC.style.left=this.IC.offsetLeft-t+"px",this.IC.style.removeProperty("right"),this.IC.style.removeProperty("bottom"))}}}kC(){let t=0,i=0,s=0,e=0,h=!1;this.IC.ontouchstart=r=>{r=r||yh.event,s=r.touches[0].clientX,e=r.touches[0].clientY,h=!0,this.IC.ontouchend=()=>{h=!1,yh.document.ontouchend=null,yh.document.ontouchmove=null},this.IC.ontouchmove=r=>{h&&(Zh(r),r=r||yh.event,t=s-r.touches[0].clientX,i=e-r.touches[0].clientY,s=r.touches[0].clientX,e=r.touches[0].clientY,this.IC.style.top=this.IC.offsetTop-i+"px",this.IC.style.left=this.IC.offsetLeft-t+"px",this.IC.style.removeProperty("right"),this.IC.style.removeProperty("bottom"))}}}wC(){this.IC.style.setProperty("top","10px"),this.IC.style.setProperty("left","10px"),this.IC.style.position="absolute",this.IC.style.display="flex",this.IC.style.alignItems="flex-start",this.FC.style.setProperty("display","none")}removePositionProperty(){this.IC.style.removeProperty("top"),this.IC.style.removeProperty("left"),this.IC.style.removeProperty("bottom"),this.IC.style.removeProperty("right")}setPositionProperty(i){switch(this.removePositionProperty(),i){case t.OSMPosition.BottomLeft:this.IC.style.setProperty("bottom","10px"),this.IC.style.setProperty("left","10px");break;case t.OSMPosition.TopLeft:this.IC.style.setProperty("top","10px"),this.IC.style.setProperty("left","10px");break;case t.OSMPosition.BottomRight:this.IC.style.setProperty("bottom","10px"),this.IC.style.setProperty("right","10px");break;case t.OSMPosition.TopRight:default:this.IC.style.setProperty("top","10px"),this.IC.style.setProperty("right","10px")}}CC(t){for(let i=0;i<t.length;i+=1){const s=this.DC.insertRow();for(let e=0;e<t[i].length;e+=1){const h=s.insertCell(),r=t[i][e];"object"!=typeof r?this.BC(r,h):this.addCustomButton(r,h)}}}BC(i,s){switch(i){case t.OnScreenMenuButtonType.ZoomIn:this.OC(new Ma(this.gr,this.chart,this.Pu),s);break;case t.OnScreenMenuButtonType.ZoomInX:this.OC(new _a(this.gr,this.chart,this.Pu),s);break;case t.OnScreenMenuButtonType.ZoomInY:this.OC(new wa(this.gr,this.chart,this.Pu),s);break;case t.OnScreenMenuButtonType.ZoomOut:this.OC(new Aa(this.gr,this.chart,this.Pu),s);break;case t.OnScreenMenuButtonType.ZoomOutX:this.OC(new ka(this.gr,this.chart,this.Pu),s);break;case t.OnScreenMenuButtonType.ZoomOutY:this.OC(new Ca(this.gr,this.chart,this.Pu),s);break;case t.OnScreenMenuButtonType.ZoomToFit:this.OC(new Ia(this.gr,this.chart,this.Pu),s);break;case t.OnScreenMenuButtonType.ToggleAnimations:this.OC(new Ta(this.gr,this.chart,this.Pu),s);break;default:console.error(`No predefined button like "${t.OnScreenMenuButtonType[i]}" exists.`)}}OC(t,i){i.rowSpan=t.Au.rows,i.colSpan=t.Au.columns,t.Vu(i)}addCustomButton(t,i){const s=new Fa(this.gr,t,this.chart);return this.OC(s,i),this}dispose(){this.MC.remove(),this.wt.emit("dispose",this)}onDispose(t){return this.wt.on("dispose",t)}offDispose(t){return this.wt.off(t,"dispose")}}const fm=(t,i,s)=>t.addRow(i.getName()).addRow("X:","",i.axisX.formatValue(s.x)).addRow("Y:","",i.axisY.formatValue(s.y)).addRow("Intensity:","",s.intensity.toFixed(1));class dm extends Vf{constructor(t,i,s,e,h,r,n,o,a,u,l,c){super(t,i,s,e,h,r,n,o,u,l),this.dt="Heatmap Grid Series",this.Nv=fm,this.gA=!1,this.LC=a,this.Hs=u;const f=c;this._n=fr(u.heatmapGridSeriesFillStyle,f),this.eu=fr(this.Hs.heatmapGridSeriesWireframeStyle,f);const d=a.start||{x:0,y:0},g=a.end?{x:(a.end.x-d.x)/a.columns,y:(a.end.y-d.y)/a.rows}:a.step||{x:1,y:1},m={heatmapDataType:"intensity",dataOrder:a.dataOrder||"columns",columns:a.columns,rows:a.rows,start:d,step:g};this.hr=m,this.EC=this.Sn.RC(this.scale,[],m).Js(this._n).hu(this.eu).dn(this.getHighlight()),this.Gc(this.EC),this.setHighlightOnHover(!1)}clear(){return this.EC.Oo(),this.Sn.Ss(),this.wt.emit("dataClear",this),this}setWireframeStyle(t){return this.eu="function"==typeof t?t(this.eu):t,this.EC.hu(this.eu),this.Sn.Ss(),this.wt.emit("styleChange",this),this}getWireframeStyle(){return this.eu}setCursorInterpolationEnabled(t){return this.gA=t,this.Sn.vs.Ss(),this}getCursorInterpolationEnabled(){return this.gA}setCursorEnabled(t){return super.setCursorEnabled(t)}setIntensityInterpolation(t){return t=t||"disabled",this.EC.oS(t),this.Sn.Ss(),this.wt.emit("styleChange",this),this}getIntensityInterpolation(){return this.EC.aS()}Le(){return this.Ky&&this.getVisible()}Rf(){return ur(this._n)}attach(t,i){return super.attach(t,i),ar(t,this.Hs,{fill:this._n}),this}zC(t){this.EC.zC().forEach((i=>{t.EC.uS(i)}))}cM(t){return this.wt.off(t)}lM(t){return this.wt.on("dataClear",t)}VC(t){return this.wt.on("styleChange",t)}NC(t){return this.wt.off(t)}Iv(t,i,s=this.gA){const e=oh(t,this.Sn.vs.Jt,this.scale),h=i?this.EC.getIsUnderMouse()?this.EC:void 0:this.EC;if(!h)return;const r=s?h.GC(e):h.Iv(e);return r?Uc(r,this.scale,this.Nv(new Pc,this,{x:r.x,y:r.y,column:r.column,row:r.column,intensity:r.cellValue}).oc(),this):void 0}solveNearestFromScreen(t,i=this.gA){return this.Iv(t,!1,i)}getXMax(){const t=this.EC;return t?t.ii():void 0}getXMin(){const t=this.EC;return t?t.ti():void 0}getYMax(){const t=this.EC;return t?t.ei():void 0}getYMin(){const t=this.EC;return t?t.si():void 0}Py(){const t=e(0,0);return t.x=Math.max(t.x,this.EC.Yo()),t.y=Math.max(t.y,this.EC.Xo()),t}Ux(t){if(!(t instanceof In))throw new Error("HeatmapGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof In&&t.Ri())throw new Error("HeatmapGridSeries can not be attached to a high precision Axis.")}Kc(t,i){t.dn(i),this.Sn.Ss()}Nl(){return super.Nl(),this.EC.cn(this.getBoundaries()),this}}class gm extends dm{constructor(t,i,s,e,h,r,n,o,a,u,l,c){super(t,i,s,e,h,r,n,o,a,u,l,c),this.Nv=fm}invalidateIntensityValues(t){if(Array.isArray(t)){if(0===t.length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.hr.dataOrder?t.length:t[0].length,rows:"rows"===this.hr.dataOrder?t.length:t[0].length},s="columns"===this.hr.dataOrder?this.hr.columns:this.hr.rows,e="columns"===this.hr.dataOrder?this.hr.rows:this.hr.columns;if(i.x>s||i.y>e){if(!0===this.chart.zd.mr){const t=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.hr.columns}x${this.hr.rows}, input ${i.columns}x${i.rows}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;yh.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.EC.uS({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.hr.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.hr.dataOrder?t.values.length:t.values[0].length},s="columns"===this.hr.dataOrder?t.iColumn:t.iRow,e=s+i.primary-1,h="columns"===this.hr.dataOrder?t.iRow:t.iColumn,r=h+i.secondary-1,n=("columns"===this.hr.dataOrder?this.hr.columns:this.hr.rows)-1,o=("columns"===this.hr.dataOrder?this.hr.rows:this.hr.columns)-1;if(s<0||h<0){if(!0===this.chart.zd.mr){const i=`HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niColumn: ${t.iColumn}, iRow: ${t.iRow}.\nNo intensity values will be invalidated.`;yh.console.warn(i)}return this}if(e>n||r>o){if(!0===this.chart.zd.mr){const s=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.hr.columns}x${this.hr.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;yh.console.warn(s)}const s=Math.max(e-n,0),h=i.primary-s,a=Math.max(r-o,0),u=[];for(let i=0;i<h;i+=1)u[i]=t.values[i].slice(0,a>0?-a:void 0);t={iColumn:t.iColumn,iRow:t.iRow,values:u}}this.EC.uS({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.wt.emit("invalidateIntensity",this,t),this.Sn.Ss(),this}setFillStyle(t){return this._n="function"==typeof t?t(this._n):t,this.EC.Js(this._n),this.wt.emit("styleChange",this),this.Sn.Ss(),this}getFillStyle(){return this._n}setCursorResultTableFormatter(t){return this.Nv=t,this.Du.vs.Ss(),this}getCursorResultTableFormatter(){return this.Nv}HC(t){return this.wt.on("invalidateIntensity",t)}WC(t){return this.wt.off(t)}}class mm extends Vf{constructor(t,i,s,e,h,r,n,o,a,u,l,c){super(t,i,s,e,h,r,n,o,u,l),this.dt="Scrolling Heatmap Grid Series",this.Nv=fm,this.gA=!1;const f=c;this._n=fr(u.heatmapScrollingGridSeriesFillStyle,f),this.eu=fr(this.Hs.heatmapScrollingGridSeriesWireframeStyle,f);const d={scrollDimension:"columns",heatmapDataType:"intensity",start:{x:0,y:0},step:{x:1,y:1},...a};this.hr=d;const g=[{type:"DataPattern",args:{pattern:"columns"===d.scrollDimension?d.step.x>0?"ProgressiveX":"RegressiveX":d.step.y>0?"ProgressiveY":"RegressiveY",regularProgressiveStep:!0}}];this.UC=this.Sn.jC(this.scale,g,d).Js(this._n).hu(this.eu).dn(this.getHighlight()),this.Gc(this.UC),this.setHighlightOnHover(!1)}clear(){return this.UC.Oo(),this.Sn.Ss(),this}setWireframeStyle(t){return this.eu="function"==typeof t?t(this.eu):t,this.UC.hu(this.eu),this.Sn.Ss(),this}getWireframeStyle(){return this.eu}setPixelInterpolationMode(t){return t=t||"disabled",this.UC.oS(t),this.Sn.Ss(),this}getPixelInterpolationMode(){return this.UC.aS()}setCursorInterpolationEnabled(t){return this.gA=t,this.Sn.vs.Ss(),this}getCursorInterpolationEnabled(){return this.gA}setCursorEnabled(t){return super.setCursorEnabled(t)}setDataCleaning(t){return this.UC.Xa(t),this.Sn.Ss(),this}Le(){return this.Ky&&this.getVisible()}Rf(){return ur(this._n)}attach(t,i){return super.attach(t,i),ar(t,this.Hs,{fill:this._n}),this}Js(t){return this._n="function"==typeof t?t(this._n):t,this.UC.Js(this._n),this.Sn.Ss(),this}Iv(t,i,s=this.gA){const e=oh(t,this.Sn.vs.Jt,this.scale),h=i?this.UC.getIsUnderMouse()?this.UC:void 0:this.UC;if(!h)return;const r=s?h.GC(e):h.Iv(e);return r?Uc(r,this.scale,this.Nv(new Pc,this,{x:r.x,y:r.y,column:r.column,row:r.column,intensity:r.cellValue}).oc(),this):void 0}solveNearestFromScreen(t,i=this.gA){return this.Iv(t,!1,i)}Ux(t){if(!(t instanceof In))throw new Error("HeatmapScrollingGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof In&&t.Ri())throw new Error("HeatmapScrollingGridSeries can not be attached to a high precision Axis.")}getXMax(){return this.UC.ii()||0}getXMin(){return this.UC.ti()||0}getYMax(){return this.UC.ei()||0}getYMin(){return this.UC.si()||0}Py(){const t=e(0,0);return t.x=Math.max(t.x,this.UC.Yo()),t.y=Math.max(t.y,this.UC.Xo()),t}Kc(t,i){t.dn(i),this.Sn.Ss()}}class ym extends mm{constructor(t,i,s,e,h,r,n,o,a,u,l,c){super(t,i,s,e,h,r,n,o,a,u,l,c),this.Nv=fm}addIntensityValues(t){if(0===t.length||0===t[0].length)return this;const i=t.length,s=t[0].length,e=("columns"===this.hr.scrollDimension?t.length:t[0].length,"rows"===this.hr.scrollDimension?t.length:t[0].length,0+s-1),h=this.hr.resolution-1;if(e>h){if(!0===this.chart.zd.mr){const t=`HeatmapScrollingGridSeries.addIntensityValues intensity matrix overflow.\nGrid resolution: ${this.hr.resolution}, input ${i}x${s}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;yh.console.warn(t)}const e=[];for(let s=0;s<i;s+=1)e[s]=t[s].slice(0,h+1);t=e}return this.UC.gS(t),this.Sn.Ss(),this}setFillStyle(t){return this.Js(t),this}getFillStyle(){return this._n}setCursorResultTableFormatter(t){return this.Nv=t,this.Du.vs.Ss(),this}getCursorResultTableFormatter(){return this.Nv}}const pm=(...t)=>(i,s)=>t.forEach((t=>t.forEach((t=>{t.Jt.Gt(i),t.Bg.Gt(s)})))),Sm=(t,i)=>{const s=t.indexOf(i);-1!==s&&t.splice(s,1)},vm=e(10,10);var bm;t.AxisPosition=void 0,(bm=t.AxisPosition||(t.AxisPosition={}))[bm.Top=0]="Top",bm[bm.Bottom=1]="Bottom",bm[bm.Left=2]="Left",bm[bm.Right=3]="Right";const xm=new Set([t.AxisPosition.Top,t.AxisPosition.Bottom,t.AxisPosition.Left,t.AxisPosition.Right]),Mm=t=>t.Ne(),_m=t=>t.setStopped(!0),wm=t=>t.getChartInteractionFitByDrag()?t.fit(!0).setStopped(!1):void 0,Am=t=>{let i=!1,s={type:"linear"};if(t&&(void 0!==t.opposite&&(i=t.opposite),t.type&&"linear-highPrecision"===t.type&&(s={type:"linear-highPrecision"}),t.type&&"logarithmic"===t.type)){let i=10;if(t.base)if("E"===t.base||"e"===t.base||"natural"===t.base)i="e";else if("number"==typeof t.base)i=t.base;else if("string"==typeof t.base)try{i=Number(t.base)}catch(i){console.warn(`Unidentified logarithmic base "${t.base}"`)}s={base:i,type:"logarithmic"}}return{opposite:i,type:s}},km=(t,i)=>{const s="linear-highPrecision"===t.Us.type||"linear-highPrecision"===i.Us.type,e="logarithmic"===t.Us.type||"logarithmic"===i.Us.type;if(s&&e){const s=`Invalid Axis combination | 'logarithmic' can't be combined with 'linear-highPrecision' (x: ${t.Us.type}, y: ${i.Us.type})`;throw new Error(s)}};var Cm,Tm,Im,Fm;!function(t){t[t.seriesBackground=0]="seriesBackground",t[t.gridLine0=1]="gridLine0",t[t.gridLine1=2]="gridLine1",t[t.gridLine2=3]="gridLine2",t[t.highlightersBelow=4]="highlightersBelow"}(Cm||(Cm={})),function(t){t[t.plotting=0]="plotting",t[t.highlightersAbove=1]="highlightersAbove",t[t.fg=2]="fg"}(Tm||(Tm={})),function(t){t[t.axisUi=0]="axisUi"}(Im||(Im={}));class Pm extends Qc{constructor(i,s,h,r,n,o,a){super(i,s,h,s.Fm("chartXY bg",0),s.bm("chartXY ui"),r,s.vs.Hs.chartXYBackgroundFillStyle,s.vs.Hs.chartXYBackgroundStrokeStyle,s.vs.Hs.chartXYTitleFont,s.vs.Hs.chartXYTitleFillStyle,a),this.$C=this.ym.d2({scaleXYConstructor:In}),this.YC=[],this.XC=[],this.ZC=[],this.KC=[],this.qC=new Map,this.JC=!0,this.QC=!0,this.tT=!0,this.ud=2,this.iT=!0,this.sT=!0,this.eT=[],this.hT=this.Dm.Zc(this.$C).Js(Ie).Fr(th).setMouseInteractions(!1),this.rT=this.Dm.rc(this.$C).za(th).setMouseInteractions(!1),this.nT=this.Dm.rc(this.$C).za(th).setMouseInteractions(!1),this.oT=this.Hs.chartXYZoomingRectangleFillStyle,this.aT=this.Hs.chartXYZoomingRectangleStrokeStyle,this.uT=this.Hs.chartXYFittingRectangleFillStyle,this.lT=this.Hs.chartXYFittingRectangleStrokeStyle,this.cT=t.MouseStyles.Default,this.fT=t.MouseStyles.Move,this.dT=t.MouseStyles.ZoomIn,this.gT=t.MouseStyles.Default,this.mT=void 0,this.yT=Dm,this.Wx=0,this.pT=pm(this.XC,this.YC),this.ST=pm(this.ZC,this.KC),this.vT=(t,i,s,h,r)=>{this.pT(h,r),this.ST(r,h),this.$C.Gt(h,r);const n=this.XC.map((t=>t.im())),o=this.YC.map((t=>t.im())),a=this.ZC.map((t=>t.im())),u=this.KC.map((t=>t.im())),l=n.reduce(Dr,0),c=o.reduce(Dr,0),f=a.reduce(Dr,0),d=u.reduce(Dr,0),g=this.bT(f,d,c,l),m=this.$C.x.getCellSize()-(g.left+g.right),y=this.$C.y.getCellSize()-(g.bottom+g.top),p=[g.left,g.right],S=[g.bottom,g.top];this.$C.x.Vt(0,m),this.$C.y.Vt(0,y),this.$C.Yi(p),this.$C.Xi(S),this.Ap.Gt(e(m,y));for(let t=0;t<this.XC.length;t+=1)this.XC[t].Jt.yi(p);for(let t=0;t<this.YC.length;t+=1)this.YC[t].Jt.yi(p);for(let t=0;t<this.ZC.length;t+=1)this.ZC[t].Jt.yi(S);for(let t=0;t<this.KC.length;t+=1)this.KC[t].Jt.yi(S);this.vs.Ss()},this.xT=(t,i)=>{this.qC.set(t,i)},this.Cg=t=>{this.XC.includes(t)?Sm(this.XC,t):this.YC.includes(t)?Sm(this.YC,t):this.ZC.includes(t)?Sm(this.ZC,t):this.KC.includes(t)&&Sm(this.KC,t),this.qC.delete(t),this.vs.Ss()},this.MT=(t=!1)=>{const i=t=>(i,s,e,h)=>(s.Nl(i,e,h.length),i+s.im()*t),s=this.XC.reduce(i(-1),0),h=this.YC.reduce(i(1),0),r=this.ZC.reduce(i(-1),0),n=this.KC.reduce(i(1),0),o=this.bT(r,n,h,s),a=this.$C.x.getCellSize()-(o.left+o.right),l=this.$C.y.getCellSize()-(o.bottom+o.top),c=[o.left,o.right],f=[o.bottom,o.top];this.$C.x.Vt(0,a),this.$C.y.Vt(0,l),this.$C.x.yi(c),this.$C.y.yi(f);for(const t of this.XC)t.Jt.yi(c);for(const t of this.YC)t.Jt.yi(c);for(const t of this.ZC)t.Jt.yi(f);for(const t of this.KC)t.Jt.yi(f);if((!this.GM||Math.abs(this.GM.bottom-s)>=4||Math.abs(this.GM.left-r)>=4||Math.abs(this.GM.right-n)>=4||Math.abs(this.GM.top-h)>=4)&&!t)return void this.MT(!0);this.GM={bottom:s,left:r,top:h,right:n},this.Ap.Qn(e(0,0)).Gt(e(a,l)),this.kp.Qn(e(0,0)).Gt(e(a,l));const d=this.getDefaultAxisX(),g=this.getDefaultAxisY();if(!d||!g)return;const m=u(d.Jt.pi(),g.Jt.pi(),d.Jt.vi(),g.Jt.vi());this.Zv._S(m),this.Ag._S(m),this.kg._S(m),this.am&&this.am();const y=t=>(i,s,e,h)=>(s.tm(i),i+s.im()*t);return this.XC.reduce(y(-1),0),this.YC.reduce(y(1),0),this.ZC.reduce(y(-1),0),this.KC.reduce(y(1),0),m},this.addAreaSeries=t=>{const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();km(i,s);const e=t&&t.baseline?t.baseline:0,h=new(t&&t.type?t.type:om.Positive)(this,this.bp,this.Zv,i,s,this._T(i),this._T(s),this.vm,e,this.Hs,this.vs.El,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Sp.length);return this.Cp(h),h},this.addAreaRangeSeries=t=>{const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();km(i,s);const e=new um(this,this.bp,this.Zv,i,s,this._T(i),this._T(s),this.vm,this.Hs,this.vs.El,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Sp.length);return this.Cp(e),e},this.wT=!1,this.AT=!1,this.jx=()=>{(this.JC||this.QC)&&(this.mT=this.engine.setMouseStyle(this.cT))},this.$x=()=>{this.wT=!1,this.engine.restoreMouseStyle(this.mT)},this.Yx=(t,i,s)=>{var e,h;const r=Ph(null===(e=this.zd.dr)||void 0===e?void 0:e.chartXYRectangleZoomFitMouseButton,0),n=Ph(null===(h=this.zd.dr)||void 0===h?void 0:h.chartXYPanMouseButton,2);this.engine.restoreMouseStyle(this.mT);const o=this.Dm.vs.uh(i.clientX,i.clientY);s===r&&(this.JC||this.QC)?(this.kT(t,o),Zh(i)):s===n&&this.iT&&(this.mT=this.engine.setMouseStyle(this.fT),this.AT=!0,Zh(i))},this.Qy=(t,i,s,h,r)=>{var n,o;const a=e(i.clientX,i.clientY),u=Ph(null===(n=this.zd.dr)||void 0===n?void 0:n.chartXYRectangleZoomFitMouseButton,0),l=Ph(null===(o=this.zd.dr)||void 0===o?void 0:o.chartXYPanMouseButton,2);s===u&&(this.JC||this.QC)?(this.CT(t,h,a),Zh(i)):s===l&&this.iT&&(this.TT(Jr(r,-1)),Zh(i)),this.Dm.Ss()},this.Xx=(t,i,s,h)=>{var r,n;const o=Ph(null===(r=this.zd.dr)||void 0===r?void 0:r.chartXYRectangleZoomFitMouseButton,0),a=Ph(null===(n=this.zd.dr)||void 0===n?void 0:n.chartXYPanMouseButton,2);if(s===o&&(this.JC||this.QC)){const s=e(i.clientX,i.clientY);this.IT(t,h,s),Zh(i)}else s===a&&this.iT&&Zh(i);this.engine.restoreMouseStyle(this.mT),this.Ap.getIsUnderMouse()&&(this.mT=this.engine.setMouseStyle(this.cT)),this.wT=!1,this.AT=!1},this.Jy=(t,i)=>{if(this.tT){const t=this.Dm.vs.uh(i.clientX,i.clientY);this.FT(t,e(dr(i),dr(i))),Zh(i)}},this.PT=(t,i,s,e)=>{},this.DT=(t,i,s,h,r,n)=>{if(this.iT){const t=e(-(h.x+r.x)/2,-(h.y+r.y)/2);this.TT(t),Zh(n),this.AT=!0}if(this.tT){const t=this.engine.clientLocation2Engine(i.x,i.y),o=this.engine.clientLocation2Engine(s.x,s.y),a=tn(e(Math.abs(t.x-h.x-(o.x-r.x)),Math.abs(t.y-h.y-(o.y-r.y))),e(Math.abs(t.x-o.x),Math.abs(t.y-o.y)));this.forEachAxisX((t=>{t.getChartInteractionZoomByWheel()&&t.Qt(t.Jt.Fi(t.getInterval().start,-a.x),t.Jt.Fi(t.getInterval().end,a.x),!1,!0,"interactionZoom")})),this.forEachAxisY((t=>{t.getChartInteractionZoomByWheel()&&t.Qt(t.Jt.Fi(t.getInterval().start,-a.y),t.Jt.Fi(t.getInterval().end,a.y),!1,!0,"interactionZoom")})),Zh(n),this.wT=!0}},this.BT=(t,i,s,e)=>{this.AT=!1,this.wT=!1},this.OT=(t,i,s)=>{(this.QC||this.JC)&&(this.kT(t,i),Zh(s))},this.LT=(t,i,s,e,h)=>{(this.QC||this.JC)&&(this.CT(t,i,s),Zh(h))},this.ET=(t,i,s,e)=>{(this.QC||this.JC)&&(this.IT(t,i,s),Zh(e))},this.zd.nr||this.zd.rr||this.vs.er(0),this.setPadding({right:24}),this.OM=s.PS("chartXY series bg",Cm.seriesBackground),this.RT=[Cm.gridLine0,Cm.gridLine1,Cm.gridLine2].map((t=>s.PS(`chartXY gridline #${t}`,t))),this.Ag=s.PS("chartXY highlighters below",Cm.highlightersBelow),this.Zv=s.vy("chartXY plotting",Tm.plotting),this.kg=s.vy("chartXY highlighters above",Tm.highlightersAbove),this.Xd=s.vy("chartXY fg",Tm.fg),this.zT=s.VT("chartXY axisUi",Im.axisUi),this.$C.x.Vt(0,this.uiScale.x.getCellSize()-(this.oi.left+this.oi.right+this.Gn.left+this.Gn.right)),this.$C.y.Vt(0,this.uiScale.y.getCellSize()-(this.oi.bottom+this.oi.top+this.Gn.bottom+this.Gn.top)),this.$C.Gt(this.uiScale.xi().x,this.uiScale.xi().y),this.Ap=this.OM.Zc(this.$C).Js(this.Hs.chartXYSeriesBackgroundFillStyle).Fr(th),this.kp=this.kg.Zc(this.$C).Js(Ie).Fr(this.Hs.chartXYSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.wp(this.Ap,this.kp),this.setSeriesBackgroundEffect(!1);const l=Ph(o?o.autoCursorBuilder:void 0,Pf);this.Tv=l.vv(this._v,this.$C,this.$C,this.Hs),this.addAxisX(o&&o.defaultAxisX),this.addAxisY(o&&o.defaultAxisY),this.onResize(this.vT),this.Bm.Ks("ChartXY"),this.tp=Ua(new $a(this.OT,this.LT,this.ET,1),new Ya(this.PT,this.DT,this.BT)),this.onSeriesBackgroundMouseEnter(this.jx),this.onSeriesBackgroundMouseLeave(this.$x),this.onSeriesBackgroundMouseWheel(this.Jy),this.onSeriesBackgroundMouseDragStart(this.Yx),this.onSeriesBackgroundMouseDrag(this.Qy),this.onSeriesBackgroundMouseDragStop(this.Xx),this.onSeriesBackgroundTouchStart(this.tp.onTouchStart),this.onSeriesBackgroundTouchMove(this.tp.onTouchMove),this.onSeriesBackgroundTouchEnd(this.tp.onTouchEnd),o&&!0===o.disableAnimations&&this.setAnimationsEnabled(!1),this.Im(n,this.$C)}getMinimumSize(){const t={x:0,y:0};t.x+=this.oi.left+this.oi.right+this.Gn.left+this.Gn.right,t.y+=this.oi.top+this.oi.bottom+this.Gn.top+this.Gn.bottom;const i=this.Bm._e().hf(),s=d(Bm(this.yT||Dm),this.Pm);t.x+=i.x+s.left+s.right,t.y+=i.y+s.top+s.bottom;const e={x:0,y:0};return this.forEachAxisX((t=>{e.x=Math.max(e.x,t.im())})),this.forEachAxisY((t=>{e.y=Math.max(e.y,t.im())})),t.x+=e.x,t.y+=e.y,t.x+=vm.x,t.y+=vm.y,t}getSeries(){return this.Sp}addChartMarkerXY(t=Df,i,s){const e=this.vm(),h=new Rf(e,this.uiScale,i||this.getDefaultAxisX(),s||this.getDefaultAxisY(),t,this.dm(e),this.Hs);return this.km(h),h}addAxisX(t){const{opposite:i,type:s}=Am(t);let e;e="linear"===s.type?this.ym.d1({dimension:"x",scale1DConstructor:kn}):"linear-highPrecision"===s.type?this.ym.d1({dimension:"x",scale1DConstructor:kn}).Ei():this.ym.d1({dimension:"x",scale1DConstructor:pn}).Ti(s.base),e.Gt(this.$C.x.xi());const h=i?this.YC:this.XC,r=new dl(this.Ag,this.RT,this.Xd,this.zT,this.Ag,this.kg,this.vs.El,e,this.$C.y,Yd,this,i?100:0,this.Cg,this.xT,this.Hs,!this.bs,s);return h.push(r),this.Dm.Ss(),r}addAxisY(t){const{opposite:i,type:s}=Am(t);let e;e="linear"===s.type?this.ym.d1({dimension:"y",scale1DConstructor:kn}):"linear-highPrecision"===s.type?this.ym.d1({dimension:"y",scale1DConstructor:kn}).Ei():this.ym.d1({dimension:"y",scale1DConstructor:pn}).Ti(s.base),e.Gt(this.$C.y.xi());const h=i?this.KC:this.ZC,r=new dl(this.Ag,this.RT,this.Xd,this.zT,this.Ag,this.kg,this.vs.El,e,this.$C.x,Xd,this,i?100:0,this.Cg,this.xT,this.Hs,!this.bs,s);return h.push(r),this.Dm.Ss(),r}dispose(){return this.OM.Pt(),this.Zv.Pt(),this.Xd.Pt(),this.zT.Pt(),this.RT.forEach((t=>t.Pt())),this.kg.Pt(),this.Ag.Pt(),this.TC().forEach((t=>t.dispose())),vl(this.$C),this.forEachAxis((t=>{t.dispose()})),this.Sp.slice().forEach((t=>{t.dispose()})),super.dispose()}getDefaultAxisX(){return this.XC[0]?this.XC[0]:this.YC[0]}getDefaultAxisY(){return this.ZC[0]?this.ZC[0]:this.KC[0]}getDefaultAxes(){return[this.getDefaultAxisX(),this.getDefaultAxisY()]}getAxes(...i){const s=i&&i.length>0?new Set(i):xm;return kh(Array.from(s).map((i=>{switch(i){default:case t.AxisPosition.Top:return this.YC;case t.AxisPosition.Bottom:return this.XC;case t.AxisPosition.Left:return this.ZC;case t.AxisPosition.Right:return this.KC}})))}NT(t){let i;return this.forEachAxisX((s=>{i=t===s?"x":i})),this.forEachAxisY((s=>{i=t===s?"y":i})),i}forEachAxisX(t){this.XC.slice().forEach(t),this.YC.slice().forEach(t)}forEachAxisY(t){this.ZC.slice().forEach(t),this.KC.slice().forEach(t)}setTitlePosition(t){return this.yT=t,this.vs.Ss(),this}getTitlePosition(){return this.yT}bT(t,i,s,e){const h=this.yT||Dm;let r,n=d(Bm(h),this.Pm);this.getTitleFillStyle()===Ie||0===this.getTitle().length?(r={x:0,y:0},n={left:0,top:0,right:0,bottom:0}):r=this.Bm._e().hf();const o=Math.abs(e)+this.Gn.bottom+this.oi.bottom,a=Math.abs(s)+this.Gn.top+this.oi.top,u={left:Math.abs(t)+this.Gn.left+this.oi.left,right:Math.abs(i)+this.Gn.right+this.oi.right,top:a,bottom:o},l=this.uiScale.Qi(),{horizontalAlignment:c,verticalAlignment:f,position:g,marginsWithTitle:m}=Om(h,l,u,r,n,this.Gn);return this.Bm.Qn(g).ho(c).no(f),m}Nl(){super.Nl();for(const t of this.Sp)t.ep();for(const t of this.Sp)t.Nl();this.forEachAxis(Mm);let t=!1;this.forEachAxis((i=>{(i.Ue()||i.je())&&(t=!0)}));const i=this.wT||this.AT||!this.sT&&t;this.Fv(i),this.MT(),super.Tm();for(const t of this.Sp)t.hp()}Rt(){for(let t=0;t<this.XC.length;t+=1)this.XC[t].Rt();for(let t=0;t<this.YC.length;t+=1)this.YC[t].Rt();for(let t=0;t<this.ZC.length;t+=1)this.ZC[t].Rt();for(let t=0;t<this.KC.length;t+=1)this.KC[t].Rt();return super.Rt()}_T(t){if(this.qC.has(t))return this.qC.get(t);throw new Error("No attach handler for axis Make sure that passed axes definitely belong to this chart and that they haven't been disposed of.")}addLineSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();km(i,s);let e=wg.freeform;t&&t.dataPattern&&(e="ProgressiveX"===t.dataPattern.pattern?wg.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?wg.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?wg.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?wg.verticalRegressive:wg.freeform);const h=new kg(this,this.bp,this.Zv,i,s,this._T(i),this._T(s),this.vm,e,this.Hs,this.vs.El,El(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Sp.length,t);return this.Cp(h),h}addPointSeries(i){const s=i&&i.xAxis?i.xAxis:this.getDefaultAxisX(),e=i&&i.yAxis?i.yAxis:this.getDefaultAxisY();km(s,e);const h=i&&i.pointShape&&Object.values(t.PointShape).includes(i.pointShape)?"string"==typeof i.pointShape?t.PointShape[i.pointShape]:i.pointShape:t.PointShape.Square,r=new lm(this,this.bp,this.Zv,s,e,this._T(s),this._T(e),this.vm,h,this.Hs,this.vs.El,void 0!==(null==i?void 0:i.automaticColorIndex)?i.automaticColorIndex:this.Sp.length);return this.Cp(r),r}addPointLineSeries(i){const s=i&&i.xAxis?i.xAxis:this.getDefaultAxisX(),e=i&&i.yAxis?i.yAxis:this.getDefaultAxisY();km(s,e);const h=i&&i.pointShape&&Object.values(t.PointShape).includes(i.pointShape)?"string"==typeof i.pointShape?t.PointShape[i.pointShape]:i.pointShape:t.PointShape.Square;let r=wg.freeform;i&&i.dataPattern&&(r="ProgressiveX"===i.dataPattern.pattern?wg.horizontalProgressive:"ProgressiveY"===i.dataPattern.pattern?wg.verticalProgressive:"RegressiveX"===i.dataPattern.pattern?wg.horizontalRegressive:"RegressiveY"===i.dataPattern.pattern?wg.verticalRegressive:wg.freeform);const n=new ug(this,this.bp,this.Zv,s,e,this._T(s),this._T(e),this.vm,r,h,this.Hs,this.vs.El,El(i&&i.dataPattern),void 0!==(null==i?void 0:i.automaticColorIndex)?i.automaticColorIndex:this.Sp.length);return this.Cp(n),n}addStepSeries(i){const s=i&&i.xAxis?i.xAxis:this.getDefaultAxisX(),e=i&&i.yAxis?i.yAxis:this.getDefaultAxisY();km(s,e);const h=i&&i.pointShape?i.pointShape:t.PointShape.Square,r=i&&i.mode?i.mode:t.StepOptions.before,n=new Ag(this,this.bp,this.Zv,s,e,this._T(s),this._T(e),this.vm,h,r,this.Hs,this.vs.El,El(i&&i.dataPattern),void 0!==(null==i?void 0:i.automaticColorIndex)?i.automaticColorIndex:this.Sp.length);return this.Cp(n),n}addSplineSeries(i){const s=i&&i.xAxis?i.xAxis:this.getDefaultAxisX(),e=i&&i.yAxis?i.yAxis:this.getDefaultAxisY();km(s,e);const h=i&&i.pointShape?i.pointShape:t.PointShape.Square;let r=wg.freeform;i&&i.dataPattern&&(r="ProgressiveX"===i.dataPattern.pattern?wg.horizontalProgressive:"RegressiveX"===i.dataPattern.pattern?wg.horizontalRegressive:wg.freeform);const n=new dg(this,this.bp,this.Zv,s,e,this._T(s),this._T(e),this.vm,r,h,this.Hs,this.vs.El,El(i&&i.dataPattern),void 0!==(null==i?void 0:i.automaticColorIndex)?i.automaticColorIndex:this.Sp.length);return this.Cp(n),n}addRectangleSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();km(i,s);const e=new Tg(this,this.bp,this.Zv,i,s,this._T(i),this._T(s),this.vm,this.Hs,this.vs.El,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Sp.length);return this.Cp(e),e}addPolygonSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY(),e=new Fg(this,this.bp,this.Zv,i,s,this._T(i),this._T(s),this.vm,this.Hs,this.vs.El,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Sp.length);return this.Cp(e),e}addSegmentSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();km(i,s);const e=new Dg(this,this.bp,this.Zv,i,s,this._T(i),this._T(s),this.vm,this.Hs,this.vs.El,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Sp.length);return this.Cp(e),e}addEllipseSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();km(i,s);const e=new Og(this,this.bp,this.Zv,i,s,this._T(i),this._T(s),this.vm,this.Hs,this.vs.El,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Sp.length);return this.Cp(e),e}addOHLCSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();km(i,s);const e=t&&t.positiveFigure?t.positiveFigure:hg.Candlestick,h=t&&t.negativeFigure?t.negativeFigure:e,r=new(t&&t.seriesConstructor?t.seriesConstructor:qg.Normal)(this,this.bp,this.Zv,i,s,this._T(i),this._T(s),this.vm,e,h,this.Hs,this.vs.El,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Sp.length);return this.Cp(r),r}addBoxSeries(t){const i=t&&t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t&&t.yAxis?t.yAxis:this.getDefaultAxisY();km(i,s);const e=t&&t.figure?t.figure:tg,h=t&&t.dimensionStrategy?t.dimensionStrategy:Wd,r=new Qg(this,this.bp,this.Zv,i,s,this._T(i),this._T(s),this.vm,e,h,this.Hs,this.vs.El,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Sp.length);return this.Cp(r),r}addHeatmapGridSeries(t){const i=t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t.yAxis?t.yAxis:this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new gm(this,this.bp,this.Zv,i,s,this._T(i),this._T(s),this.vm,t,this.Hs,this.vs.El,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Sp.length),this.Cp(e),e}addHeatmapScrollingGridSeries(t){const i=t.xAxis?t.xAxis:this.getDefaultAxisX(),s=t.yAxis?t.yAxis:this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new ym(this,this.bp,this.Zv,i,s,this._T(i),this._T(s),this.vm,t,this.Hs,this.vs.El,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Sp.length),this.Cp(e),e}addOnScreenMenu(t,i){return new cm(this.zd,t,this,i)}setMouseBackgroundStyle(i=t.MouseStyles.Default){return this.cT=i,this}setMouseZoomStyle(i=t.MouseStyles.ZoomIn){return this.dT=i,this}setMouseFitStyle(i=t.MouseStyles.Default){return this.gT=i,this}setMousePanStyle(i=t.MouseStyles.Move){return this.fT=i,this}setMouseInteractions(t){return this.setMouseInteractionRectangleZoom(t).setMouseInteractionRectangleFit(t).setMouseInteractionWheelZoom(t).setMouseInteractionPan(t)}setMouseInteractionRectangleZoom(t){return this.JC=t,this}getMouseInteractionRectangleZoom(){return this.JC}setMouseInteractionRectangleFit(t){return this.QC=t,this}getMouseInteractionRectangleFit(){return this.QC}setMouseInteractionPan(t){return this.iT=t,this}getMouseInteractionPan(){return this.iT}setMouseInteractionWheelZoom(t){return this.tT=t,this}getMouseInteractionWheelZoom(){return this.tT}setZoomingRectangleFillStyle(t){return this.oT="function"==typeof t?t(this.oT):t,this.Dm.Ss(),this}getZoomingRectangleFillStyle(){return this.oT}setZoomingRectangleStrokeStyle(t){return this.aT="function"==typeof t?t(this.aT):t,this.Dm.Ss(),this}getZoomingRectangleStrokeStyle(){return this.aT}setFittingRectangleFillStyle(t){return this.uT="function"==typeof t?t(this.uT):t,this.Dm.Ss(),this}getFittingRectangleFillStyle(){return this.uT}setFittingRectangleStrokeStyle(t){return this.lT="function"==typeof t?t(this.lT):t,this.Dm.Ss(),this}getFittingRectangleStrokeStyle(){return this.lT}addLegendBox(t,i){const s=super.addLegendBox(t,i);if(void 0===i||i===this.uiScale)if(void 0===t||"vertical"===t.getAlignment())s.setOrigin(Ba.RightCenter).setPosition({x:this.uiScale.x.Kt(this.uiScale.x.Si()-this.Gn.right),y:nh(this.$C.y.Kt(this.$C.y.pi()+this.$C.y.vi()/2),this.$C.y,this.uiScale.y)});else{const t=this.yT||Dm,i=Om(t,this.uiScale.Qi(),this.Gn,this.getTitleFillStyle()===Ie||0===this.getTitle().length?{x:0,y:0}:this.Bm._e().hf(),d(Bm(t),this.Pm),this.Gn).marginsWithTitle.top;s.setOrigin(Ba.RightTop).setPosition(oh({x:this.pixelScale.x.getInnerEnd()-this.Gn.right,y:this.pixelScale.y.getInnerEnd()-i},this.pixelScale,this.uiScale))}return s}kT(t,i){this.forEachAxis(_m);const s=oh(this.engine.clientLocation2Engine(i.x,i.y),this.Dm.vs.Jt,this.$C);this.hT.Qn(s).Gt(e(0,0))}CT(t,i,s){const h=oh(this.engine.clientLocation2Engine(i.x,i.y),this.Dm.vs.Jt,this.$C),r=oh(this.engine.clientLocation2Engine(s.x,s.y),this.Dm.vs.Jt,this.$C),n=Or(r.x,this.$C.x.getInnerStart(),this.$C.x.getInnerEnd())&&Or(r.y,this.$C.y.getInnerStart(),this.$C.y.getInnerEnd()),o=e(Math.min(h.x,r.x),Math.min(h.y,r.y)),a=e(Math.max(h.x,r.x),Math.max(h.y,r.y));this.hT.Qn(o).Gt(tn(a,o));const u=Math.min(a.x-o.x,a.y-o.y)>=10;n&&u&&o.x===h.x&&this.JC?(this.wT=!0,this.hT.Js(this.oT).Fr(this.aT),this.rT.za(th),this.nT.za(th),this.mT=this.engine.setMouseStyle(this.dT,this.mT)):n&&u&&a.x===h.x&&this.QC?(this.wT=!0,this.hT.Js(this.uT).Fr(this.lT),this.rT.za(this.lT).Ua(h).Pa(r),this.nT.za(this.lT).Ua(e(h.x,r.y)).Pa(e(r.x,h.y)),this.mT=this.engine.setMouseStyle(this.gT,this.mT)):(this.wT=!1,this.hT.Fr(th).Js(Ie),this.rT.za(th),this.nT.za(th),this.engine.restoreMouseStyle(this.mT)),this.Dm.Ss()}IT(t,i,s){if(this.wT){const t=oh(this.engine.clientLocation2Engine(s.x,s.y),this.Dm.vs.Jt,this.$C),e=Or(t.x,this.$C.x.getInnerStart(),this.$C.x.getInnerEnd())&&Or(t.y,this.$C.y.getInnerStart(),this.$C.y.getInnerEnd()),h=s.x>=i.x?"zoom":"fit",r=this.hT.io(),n=Qr(r,this.hT.xi()),o=Math.min(this.hT.xi().x,this.hT.xi().y)>=10;e&&o&&"zoom"===h&&this.JC?(this.forEachAxisX((t=>{if(t.getChartInteractionZoomByDrag()){const i=oh(r,this.$C,t.Og).x,s=oh(n,this.$C,t.Og).x;t.Qt(i,s,!0,!0,"interactionSetInterval")}})),this.forEachAxisY((t=>{if(t.getChartInteractionZoomByDrag()){const i=oh(r,this.$C,t.Og).y,s=oh(n,this.$C,t.Og).y;t.Qt(i,s,!0,!0,"interactionSetInterval")}}))):e&&o&&"fit"===h&&this.QC&&this.forEachAxis(wm)}this.hT.Fr(th).Js(Ie),this.rT.za(th),this.nT.za(th),this.Dm.Ss()}pan(t){this.forEachAxisX((i=>{i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.setStopped(!0).pan(t.y)}))}TT(t){this.forEachAxisX((i=>{i.getChartInteractionPanByDrag()&&i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.getChartInteractionPanByDrag()&&i.setStopped(!0).pan(t.y)}))}zoom(t,i){this.forEachAxis(_m),this.forEachAxisX((s=>{s.zoom(s.Jt.Kt(t.x),i.x)})),this.forEachAxisY((s=>{s.zoom(s.Jt.Kt(t.y),i.y)}))}FT(t,i){this.forEachAxis(_m),this.forEachAxisX((s=>{s.getChartInteractionZoomByWheel()&&s.zoom(s.Jt.Kt(t.x),i.x)})),this.forEachAxisY((s=>{s.getChartInteractionZoomByWheel()&&s.zoom(s.Jt.Kt(t.y),i.y)}))}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}jf(){const t=[];return this.forEachAxis((i=>i.jg((i=>t.push(i))))),super.jf().concat(t)}TC(){return this.eT}Zu(){return this.Lm(this.Zv)}setAutoCursorEnabledDuringAxisAnimation(t){return this.sT=t,this}getAutoCursorEnabledDuringAxisAnimation(){return this.sT}forEachAxis(t){return this.forEachAxisX(t),this.forEachAxisY(t),this}}t.ChartXYTitlePositionOptions=void 0,(Fm=t.ChartXYTitlePositionOptions||(t.ChartXYTitlePositionOptions={})).CenterTop="center-top",Fm.RightTop="right-top",Fm.LeftTop="left-top",Fm.CenterBottom="center-bottom",Fm.RightBottom="right-bottom",Fm.LeftBottom="left-bottom",Fm.SeriesCenterTop="series-center-top",Fm.SeriesRightTop="series-right-top",Fm.SeriesLeftTop="series-left-top",Fm.SeriesCenterBottom="series-center-bottom",Fm.SeriesRightBottom="series-right-bottom",Fm.SeriesLeftBottom="series-left-bottom";const Dm=t.ChartXYTitlePositionOptions.CenterTop,Bm=t=>{switch(t){case"center-top":case"series-center-bottom":return{left:0,right:0,top:0,bottom:5};case"left-top":return{left:20,right:0,top:0,bottom:5};case"right-top":return{left:0,right:20,top:0,bottom:5};case"center-bottom":return{left:0,right:0,top:0,bottom:0};case"left-bottom":return{left:20,right:0,top:0,bottom:0};case"right-bottom":return{left:0,right:20,top:0,bottom:0};case"series-center-top":return{left:0,right:0,top:5,bottom:0};case"series-left-top":return{left:5,right:0,top:5,bottom:0};case"series-right-top":return{left:0,right:5,top:5,bottom:0};case"series-left-bottom":return{left:5,right:0,top:0,bottom:5};case"series-right-bottom":return{left:0,right:5,top:0,bottom:5}}return Sr(0,`Unexpected ChartXY title position selection ${t}`)},Om=(t,i,s,e,h,r)=>{e.x,h.left,h.right;const n=e.y+h.bottom+h.top,o=(h.left-h.right)*i.x,a=(h.bottom-h.top)*i.y;switch(t){case"center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-(r.top+h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:o,y:100-(r.top-h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100+o,y:100-(r.top-h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50+o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100+o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"series-center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:s.left*i.x+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100-s.right*i.x+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50,y:s.bottom*i.y+a},marginsWithTitle:s};case"series-left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:s.left*i.x+o,y:s.bottom*i.y+a},marginsWithTitle:s};case"series-right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100-s.right*i.x+o,y:s.bottom*i.y+a},marginsWithTitle:s}}return Sr(0,`Unexpected ChartXY title position selection ${t}`)},Lm=t=>t instanceof Uf||t instanceof sm||t instanceof um||t instanceof gm||t instanceof Xg||t instanceof Ag;class Em{constructor(i,s,e,h,r,n,o,a,u){this.wt=new We,this.GT=new Map,this.Sp=new Map,this.HT=({series:t},i)=>{this.WT&&(i instanceof um||i instanceof Ag||i instanceof gm||i instanceof Uf||i instanceof sm||i instanceof Xg)&&this.WT(t,i)},this.UT=t=>{const i=t.map((t=>t.Us.type));if(1!==[...new Set(i)].length)throw new Error("All ZoomBandChart axes must be of the same type")},this.jT=(t,i,s)=>{0!==this.Sp.size&&void 0!==[...this.Sp.values()].find((({series:t})=>!0===t.getVisible()))||this.$T.Qt(i,s,!1,!1,"zoomBandChart")},this.zd=i,this.YT=h,this.attachedAxes=Array.isArray(r)?r:[r],this.UT(this.attachedAxes);const l=this.attachedAxes[0].chart.NT(this.attachedAxes[0])||"x";this.XT=l,this.Jl="x"===l?Wd:Ud;const c=this.attachedAxes[0].onIntervalChange(this.jT);this.ZT=()=>this.attachedAxes[0].offIntervalChange(c);const f=this.Jl.toVec2("linear"===(d=this.attachedAxes[0].Us).type||"linear-highPrecision"===d.type?d:{type:"logarithmic",base:"number"==typeof d.base?d.base:"e"===d.base?"e":(()=>{throw new Error(`Unhandled logarithmic base: ${d.base}`)})()},void 0);var d;const g=f.x,m=f.y;this.KT=new Pm(i,s,e,_h,o,{...a,defaultAxisX:g,defaultAxisY:m},u).setTitle("Zoom Band Chart").setMouseInteractions(!1).setAutoCursorMode(t.AutoCursorModes.disabled),this.engine=this.KT.engine;const y=this.KT.getDefaultAxisX().setMouseInteractions(!1),p=this.KT.getDefaultAxisY().setMouseInteractions(!1);this.$T=this.Jl.getWidth({x:y,y:p}).setScrollStrategy(Pn.fitting).setAnimationScroll(!1),this.qT(this.Jl.getHeight({x:y,y:p})),this.$T.ue(this.attachedAxes[0].ae()),this.band=this.$T.addBand(n),this.JT(this.band,this.attachedAxes);for(let t=0;t<this.attachedAxes.length;t+=1)for(const i of this.attachedAxes[t].Oe())Lm(i)&&this.Td(i);this.attachedAxes.forEach((t=>{t.chart.Av(((t,i)=>{("x"===l?i.axisX:i.axisY)===this.attachedAxes[0]&&Lm(i)&&this.Td(i)})),t.chart.kv(((t,i)=>{var s;if(this.Sp.has(i)){const t=null===(s=this.Sp.get(i))||void 0===s?void 0:s.series;t&&t.dispose()}}))}))}disposeSeries(t){const i=this.Sp.get(t);if(i){const{clearReferences:s}=i;s(),this.Sp.delete(t),i.series.dispose();const e=this.Jl.getHeight({x:t.axisX,y:t.axisY}),h=this.GT.get(e);h&&0===h.Oe().length&&h!==this.Jl.getHeight({x:this.KT.getDefaultAxisX(),y:this.KT.getDefaultAxisY()})&&(this.GT.delete(e),h.dispose())}return this}setSeriesStyle(t){return this.WT=t,this.Sp.forEach(this.HT),this}getDefaultAxisX(){return this.KT.getDefaultAxisX()}getDefaultAxisY(){return this.KT.getDefaultAxisY()}qT(t){t.setTickStrategy(Dn.Empty).setMouseInteractions(!1).setNibStyle(th).setStrokeStyle(th)}JT(t,i){t.setValueStart(i[0].getInterval().start).setValueEnd(i[0].getInterval().end);let s,e,h=!1,r=!1;i.length>1&&ah(...i),i[0].onIntervalChange(((i,s,n)=>{if(h)return;r=!0;const o=yh.performance.now();e=o,t.setValueStart(s).setValueEnd(n),requestAnimationFrame((()=>requestAnimationFrame((()=>{e!==o||(r=!1)}))))})),t.onValueChange(((t,e,n)=>{if(r)return;h=!0;const o=yh.performance.now();s=o,i[0].Qt(e,n,!1,!0,"zoomBandChart"),requestAnimationFrame((()=>requestAnimationFrame((()=>{s!==o||(h=!1)}))))}))}Td(t){var i;const s=this.Jl.getHeight({x:t.axisX,y:t.axisY});let e=this.GT.get(s);e||(0===this.GT.size?e=this.Jl.getHeight({x:this.KT.getDefaultAxisX(),y:this.KT.getDefaultAxisY()}):(e=this.Jl.getHeight({x:this.KT.addAxisX.bind(this.KT),y:this.KT.addAxisY.bind(this.KT)})(),this.qT(e))),this.GT.set(s,e);const h=this.Jl.getWidth({x:this.$T,y:e}),r=this.Jl.getHeight({x:this.$T,y:e});let n,o;if(t instanceof um){n=this.KT.addAreaRangeSeries({xAxis:h,yAxis:r});const i=n;i.add(t.oM());const s=t.aM(((t,s,e)=>i.add(s))),e=t.onVisibleStateChanged(((t,i)=>{n.setVisible(i)}));o=()=>{t.uM(s),t.offVisibleStateChanged(e)}}else if(t instanceof Ag){const i=t.ut;n=this.KT.addStepSeries({mode:i,xAxis:h,yAxis:r});const s=n;s.add(t.oM());const e=t.aM(((t,i,e)=>s.add(i))),a=t.onVisibleStateChanged(((t,i)=>{n.setVisible(i)}));o=()=>{t.uM(e),t.offVisibleStateChanged(a)}}else if(t instanceof gm){const i={...t.LC,xAxis:void 0,yAxis:void 0},s=this.KT.addHeatmapGridSeries(i);n=s;const e=()=>{s.setWireframeStyle(t.getWireframeStyle()).setIntensityInterpolation(t.getIntensityInterpolation()).setFillStyle(t.getFillStyle())};e();const h=t.VC(e);t.zC(s);const r=t.HC(((t,i)=>{s.invalidateIntensityValues(i)})),a=t.onVisibleStateChanged(((t,i)=>{s.setVisible(i)}));o=()=>{t.NC(h),t.WC(r),t.offVisibleStateChanged(a)}}else{const s={};t instanceof kg&&(s.dataPattern=null===(i=t.hr)||void 0===i?void 0:i.dataPattern);const h=this.KT.addLineSeries({...s,xAxis:this.Jl.getWidth({x:this.$T,y:e}),yAxis:this.Jl.getHeight({x:this.$T,y:e})});if(n=h,t instanceof Xg){const i=t=>{const i=[],s=t.length;for(let e=0;e<s;e+=1){const s=t[e];i.push({x:s[0],y:s[4]})}return i};h.add(i(t.oM()));const s=t.aM(((t,s)=>{h.add(i(s))})),e=t.onVisibleStateChanged(((t,i)=>{n.setVisible(i)}));o=()=>{t.uM(s),t.offVisibleStateChanged(e)}}else{h.add(t.oM());const i=t.aM(((t,i)=>h.add(i))),s=t.onVisibleStateChanged(((t,i)=>{n.setVisible(i)}));o=()=>{t.uM(i),t.offVisibleStateChanged(s)}}}t.onHighlight(((t=!0)=>{n.setHighlight(t)})),n.setMouseInteractions(!1),this.HT({series:n},t);const a=t.lM((()=>{n.clear()})),u=o;o=()=>{t.cM(a),u()},this.Sp.set(t,{series:n,clearReferences:o})}uo(t){this.KT.uo(t)}getMinimumSize(){return this.KT.getMinimumSize()}Rt(){return this.KT.Rt()}zt(){return this.KT.zt()}Nl(){const t=Array.from(new Set(this.attachedAxes.map((t=>t.chart))).values());if("x"===this.XT){const i=t.reduce(((t,i)=>{let s=0;return i.forEachAxisY((t=>{s+=0===t.Fg?t.im():0})),Math.max(t,s)}),0),s=t.reduce(((t,i)=>{let s=0;return i.forEachAxisY((t=>{s+=100===t.Fg?t.im():0})),Math.max(t,s)}),0),e=t.reduce(((t,i)=>Math.max(t,i.getPadding().left)),0),h=t.reduce(((t,i)=>Math.max(t,i.getPadding().right)),0);this.getDefaultAxisY().setThickness(i),this.KT.setPadding({left:e,right:h+s})}else{const i=t.reduce(((t,i)=>{let s=0;return i.forEachAxisX((t=>{s+=0===t.Fg?t.im():0})),Math.max(t,s)}),0),s=t.reduce(((t,i)=>{let s=0;return i.forEachAxisX((t=>{s+=100===t.Fg?t.im():0})),Math.max(t,s)}),0),e=t.reduce(((t,i)=>Math.max(t,i.getPadding().bottom)),0),h=t.reduce(((t,i)=>Math.max(t,i.getPadding().top)),0);this.getDefaultAxisX().setThickness(i),this.KT.setPadding({bottom:e,top:h+s})}return this.KT.Nl()}getTheme(){return this.KT.getTheme()}setTitle(t){return this.KT.setTitle(t),this}getTitle(){return this.KT.getTitle()}setTitleFillStyle(t){return this.KT.setTitleFillStyle(t),this}getTitleFillStyle(){return this.KT.getTitleFillStyle()}setTitleFont(t){return this.KT.setTitleFont(t),this}getTitleFont(){return this.KT.getTitleFont()}setTitleMargin(t){return this.KT.setTitleMargin(t),this}getTitleMargin(){return this.KT.getTitleMargin()}setPadding(t){return this.KT.setPadding(t),this}getPadding(){return this.KT.getPadding()}setBackgroundFillStyle(t){return this.KT.setBackgroundFillStyle(t),this}getBackgroundFillStyle(){return this.KT.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.KT.setBackgroundStrokeStyle(t),this}getBackgroundStrokeStyle(){return this.KT.getBackgroundStrokeStyle()}addUIElement(t,i){return this.KT.addUIElement(t,i)}addLegendBox(t,i){return this.KT.addLegendBox(t,i)}saveToFile(t,i,s){return this.KT.saveToFile(t,i,s),this}dispose(){return this.KT.dispose(),this.band.dispose(),this.GT.clear(),this.Sp.clear(),this.YT(this),this}onDispose(t){return this.KT.onDispose((()=>t(this)))}offDispose(t){return this.KT.offDispose(t)}}const Rm=100001,zm=200002,Vm=300001,Nm=410001,Gm=(t,i)=>{const s=Math.floor(99999/i),e=Math.floor(99999/i),h=Math.floor(99998/i),r=Math.floor(99999/(i+1)),n=Math.floor(89999/(i+1)),o=Nm+i*n;let a=0;return{QT:()=>{const i=t.tI("dashboard ui",o+a);return a+=1,i},iI:()=>t.tI("dashboard legend",41e4),sI:i=>{const o=1+i*s,a=Rm+i*e,u=zm+i*h,l=Vm+i*r,c=Nm+i*n;let f=0;return{vs:t,Fm:(i,s)=>{const e=o+s;return t.tI(i,e)},PS:(i,s)=>{const e=a+s;return t.tI(i,e)},vy:(i,s)=>{const e=u+s;return t.tI(i,e)},FS:(i,s,e)=>{const h=u+s;return t.eI(i,h,e)},VT:(i,s)=>{const e=l+s;return t.tI(i,e)},bm:i=>{const s=c+f,e=t.tI(i,s);return f+=1,e},Mm:()=>t.tI("panel legend",400002+i),wv:()=>t.tI("panel cursor",500001+i)}}}};class Hm{constructor(t){this.wt=new We,this.l=t}S(t){return this.l=t,this.wt.emit("set",t),this}M(){return this.l}Tt(t){return this.wt.on("set",t)}Ft(t){return this.wt.off(t,"set")}}const Wm={Ms:!1,_s:0,ws:!1,ks:0,As:!1,Cs:0,Ts:0,gs:Pn.fitting};class Um{constructor(t){this.hI=[],this.rI=t}nI(){let t=this.hI.find((t=>t.isFree));return t||(t={isFree:!1,shape:this.rI()},this.hI.push(t)),t.isFree=!1,t.shape}oI(){this.hI.forEach((t=>{t.isFree=!0}))}aI(){this.hI.filter((t=>t.isFree)).forEach((t=>{t.shape.dispose(),this.hI.splice(this.hI.indexOf(t),1)}))}}const jm=t=>{if(!t||"object"!=typeof t||null===t)return!1;const i=t.type;return!(!i||!["spark-line","spark-bar","spark-win-loss","spark-area","spark-pie"].includes(i))},$m=(t,i,s,e,h,r,n,o)=>{const{type:a,data:u}=t;if(0===u.length)return;const l=[e,h];"spark-line"===a&&iy(t,i,l,r,n,o),"spark-bar"===a&&sy({...t,winLoss:!1},i,l,r,n,o),"spark-win-loss"===a&&sy({...t,winLoss:!0},i,l,r,n,o),"spark-area"===a&&ey(t,i,l,r,n,o),"spark-pie"===a&&hy(t,i,l,r,n,o)},Ym=(t,i,s,e)=>({x:Zm(t.x,i.x,s.x,e),y:Km(t.y,i.y,s.y,e)}),Xm=(t,i,s,e)=>({position:Zm(t.position,i.x,s.x,e),high:Km(t.high,i.y,s.y,e),low:Km(t.low,i.y,s.y,e)}),Zm=(t,i,s,e)=>{const h=Ah(t,i,i+s);return e[0].x+e[1].x*(h-i)/s},Km=(t,i,s,e)=>{const h=Ah(t,i,i+s);return e[0].y+e[1].y*(h-i)/s},qm=(t,i,s,e,h,r,n,o)=>{for(const a of t)"point"===a.type&&Jm(a,i,s,h,r,n,o),"axis-band"===a.type&&Qm(a,s,h,r,n,o),"constant-line"===a.type&&ty(a,s,e,h,r,n,o)},Jm=(i,s,e,h,r,n,o)=>{const{value:a,fillStyle:u,shape:l,size:c,rotation:f}=i;let d={x:NaN,y:NaN};if("start"===a&&(d=s[0]),"end"===a&&(d=s[s.length-1]),"min"===a){d=s[0];for(const t of s)d=d.y<t.y?d:t}if("max"===a){d=s[0];for(const t of s)d=d.y>t.y?d:t}("object"!=typeof a||(d=Ym(a,e,h,r),((t,i)=>{const s=i[0],e=i[1],h=t.x,r=t.y;return s.x<=h&&h<=s.x+e.x&&s.y<=r&&r<=s.y+e.y})(d,r)))&&n.pointSet.nI().Oo().Io(void 0!==l?l:t.PointShape.Circle).ie(f||0).Gt(c||5).Js(u||o.sparkPointChartFillStyle).Bo(d)},Qm=(t,i,s,h,r,n)=>{const{axis:o,start:a,end:u,fillStyle:l,strokeStyle:c}=t;let f=e(Ar,wr),d=e(Ar,wr);"x"===o&&(f=Ym({x:a,y:Ar},i,s,h),d=Ym({x:u,y:wr},i,s,h)),"y"===o&&(f=Ym({x:Ar,y:a},i,s,h),d=Ym({x:wr,y:u},i,s,h));const g=h[0],m=h[1],y=Ah(f.x,g.x,g.x+m.x),p=Ah(f.y,g.y,g.y+m.y),S=Ah(d.x,g.x,g.x+m.x),v=Ah(d.y,g.y,g.y+m.y);r.rect.nI().Vo(y).No(p).Gt(e(S-y,v-p)).Js(l||n.sparkChartBandFillStyle).Fr(c||n.sparkChartBandStrokeStyle).Fr(th)},ty=(t,i,s,h,r,n,o)=>{const{axis:a,value:u,strokeStyle:l}=t,c=u||0,f=i.y,d=s.y,g=i.x,m=s.x,y=[];if("y"===a&&f<=c&&c<=d){const t=Ym(e(g,c),{x:g,y:f},h,r),i=Ym(e(m,c),{x:g,y:f},h,r);y.push([t,i])}if("x"===a&&g<=c&&c<=m){const t=Ym(e(c,f),{x:g,y:f},h,r),i=Ym(e(c,d),{x:g,y:f},h,r);y.push([t,i])}y.length>0&&n.line.nI().za(l||o.sparkChartConstantLineStrokeStyle).Ua(y[0][0]).Pa(y[0][1])},iy=(t,i,s,e,h,r)=>{const{strokeStyle:n,data:o,markers:a}=t,u=o.length;u>1e4&&h.mr&&yh.console.warn("LightningChart JS warning: SparkLineChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact support@lightningchart.com. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let l=wr,c=Ar,f=wr,d=Ar;for(let t=0;t<u;t+=1){const i=o[t];l=Math.min(l,i.x),c=Math.max(c,i.x),f=Math.min(f,i.y),d=Math.max(d,i.y)}const g={x:c-l,y:d-f},m=o.map((t=>Ym(t,{x:l,y:f},g,s)));i.lineSet.nI().dn(r).za(n||e.sparkLineChartStrokeStyle).Oo().Bo(m),a&&qm(a,m,{x:l,y:f},{x:c,y:d},g,s,i,e)},sy=(t,i,s,e,h,r)=>{const{data:n,fillStyle:o,strokeStyle:a,threshold:u,winFillStyle:l,lossFillStyle:c}=t,f=t.barSize||1,d=t.gap||1,g=t.winLoss,m=u||0,y=d/f*1;let p=wr,S=Ar;if(g)p=-1,S=1;else for(const t of n)p=Math.min(p,t),S=Math.max(S,t);const v={x:0,y:g?-1:Math.min(0,p)},b={x:1*n.length+(n.length-1)*y,y:g?2:Math.max(S,1e-5)};n.map(((t,i)=>{const e={x:1*(i+1)+i*y,y:g?t>=m?1:0:t},h=Ym({x:1*i+i*y,y:g?t>=m?0:-1:0},v,b,s),r=Ym(e,v,b,s);return{value:t,position:h,width:r.x-h.x,height:r.y-h.y}})).forEach((t=>{var s;i.rect.nI().dn(r).Qn(t.position).Ho(t.height).Go(t.width).Js((s=t.value,g?(s>=m?l:c)||e.sparkBarChartFillStyle:o||e.sparkBarChartFillStyle)).Fr(a||e.sparkBarChartStrokeStyle)}))},ey=(t,i,s,e,h,n)=>{const{data:o,fillStyle:a,strokeStyle:u,markers:l}=t,c=o.length;c>1e4&&h.mr&&yh.console.warn("LightningChart JS warning: SparkAreaChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact support@lightningchart.com. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let f=wr,d=Ar,g=wr,m=Ar;for(let t=0;t<c;t+=1){const i=o[t];f=Math.min(f,i.x),d=Math.max(d,i.x),g=Math.min(g,i.y),m=Math.max(m,i.y)}const y={x:d-f,y:m-g},p=[],S=[];for(const t of o){const i=r(t.x,t.y,g);p.push(Xm(i,{x:f,y:g},y,s)),S.push(Ym(t,{x:f,y:g},y,s))}i.junction.nI().dn(n).Oo().Bo(p).Js(a||e.sparkAreaChartFillStyle),i.lineSet.nI().dn(n).Oo().Bo(S).za(u||e.sparkAreaChartStrokeStyle),l&&qm(l,S,{x:f,y:g},{x:d,y:m},y,s,i,e)},hy=(t,i,s,h,r,n)=>{const{data:o,strokeStyle:a}=t,u=o.map((t=>"number"==typeof t?t:t.value)),l=o.map((t=>"object"==typeof t?t.fillStyle:void 0)),c=u.reduce(((t,i)=>t+i),0),f=Ym(e(50,50),{x:0,y:0},{x:100,y:100},s),d=s[1],g=d.x<=d.y?d.x/2:d.y/2;let m=90;u.forEach(((t,s)=>{const e=t/c*360;i.arc.nI().dn(n).Qn(f).Da(g).La(0).Fa(m).Pa(m+e).Js(l[s]||fr(h.sparkPieChartFillStyle,s)).Fr(a||h.sparkPieChartStrokeStyle),m+=e}))};var ry,ny,oy;!function(t){t[t.UpToDown=0]="UpToDown",t[t.LeftToRight=1]="LeftToRight"}(ry||(ry={})),function(t){t[t.Vertical=0]="Vertical",t[t.Horizontal=1]="Horizontal",t[t.Both=2]="Both"}(ny||(ny={})),function(t){t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right"}(oy||(oy={}));class ay extends Za{constructor(t,i,s,e,h){super(),this.Qu=!1,this.BA={x:0,y:0,height:20,width:20},this.uI={x:10,y:10},this.Sn=t,this.lI=h,this.cI=new wu(t,i,s,_h,e).setMouseInteractions(!0),this.fI=t.if(i,Xo.Simple).Js(e.dataGridScrollBarButtonArrowFillStyle).Fr(e.dataGridScrollBarButtonArrowStrokeStyle).setMouseInteractions(!1),this.Il(this),this.cI.onMouseEnter((t=>t.setHighlight(1))),this.cI.onMouseLeave((t=>t.setHighlight(0)))}dI(){switch(this.lI){case oy.Up:this.fI.jo([{x:this.BA.x,y:this.BA.y+this.uI.y/2},{x:this.BA.x+this.uI.x/2,y:this.BA.y-this.uI.y/2},{x:this.BA.x-this.uI.x/2,y:this.BA.y-this.uI.y/2}]);break;case oy.Down:this.fI.jo([{x:this.BA.x-this.uI.x/2,y:this.BA.y+this.uI.y/2},{x:this.BA.x+this.uI.x/2,y:this.BA.y+this.uI.y/2},{x:this.BA.x,y:this.BA.y-this.uI.y/2}]);break;case oy.Left:this.fI.jo([{x:this.BA.x-this.uI.x/2,y:this.BA.y},{x:this.BA.x+this.uI.x/2,y:this.BA.y+this.uI.y/2},{x:this.BA.x+this.uI.x/2,y:this.BA.y-this.uI.y/2}]);break;case oy.Right:this.fI.jo([{x:this.BA.x-this.uI.x/2,y:this.BA.y+this.uI.y/2},{x:this.BA.x+this.uI.x/2,y:this.BA.y},{x:this.BA.x-this.uI.x/2,y:this.BA.y-this.uI.y/2}])}}Qn(t){return this.BA.x=t.x,this.BA.y=t.y,this}io(){return e(this.BA.x,this.BA.y)}Gt(t){return this.BA.height=t.x,this.BA.width=t.y,this}xi(){return{x:this.BA.height,y:this.BA.width}}onMouseDown(t){return this.cI.onMouseDown(t)}onMouseUp(t){return this.cI.onMouseUp(t)}setFillStyle(t){return this.cI.setFillStyle(t),this}getFillStyle(){return this.cI.getFillStyle()}setStrokeStyle(t){return this.cI.setStrokeStyle(t),this}getStrokeStyle(){return this.cI.getStrokeStyle()}Nl(){return this.cI.Nl(),this.dI(),this}_e(){return this.cI.setSize(e(this.BA.height,this.BA.width)).setPosition(e(this.BA.x,this.BA.y)),this}setVisible(t){return this.cI.setVisible(t),this.fI.setVisible(t),this}dispose(){return this.cI.dispose(),this.fI.dispose(),this}setMouseInteractions(t){return this.cI.setMouseInteractions(t),this}getMouseInteractions(){return this.cI.getMouseInteractions()}onHighlight(t){return this.wt.on("highlight",t)}offHighlight(t){return this.wt.off(t)}getHighlight(){return this.cI.getHighlight()}setHighlight(t){return this.cI.setHighlight(pr(t)),this.wt.emit("highlight",Boolean(t)),this.Sn.Ss(),this}}const uy=(t,i)=>Math.min(Math.max(t,i.getInnerStart()),i.getInnerEnd());class ly{constructor(i,s,h,r,n,o,a){this.af={x:0,y:0},this.BA={x:0,y:0,height:0,width:0},this.wt=new We,this.gI={min:e(0,0),max:e(0,0)},this.Cx=!1,this.Tx=!1,this.mI={x:0,y:0},this.Pl=void 0,this.yI=e(0,0),this.pI={x:0,y:0},this.SI=0,this.vI=15,this.Ix=(i,s,e)=>{this.Cx=!0,this.Xd.Ss();const h=this.bI.getDraggingMode(),r=this.bI.getDraggingMode()===t.UIDraggingModes.notDraggable?h:e||h;this.Pl=this.Xd.vs.oh(r===t.UIDraggingModes.notDraggable?t.MouseStyles.Restricted:r===t.UIDraggingModes.draggable?t.MouseStyles.Move:r===t.UIDraggingModes.onlyHorizontal?t.MouseStyles.Horizontal:t.MouseStyles.Vertical),this.xI&&clearInterval(this.xI)},this.Fx=()=>{this.Cx=!1,this.Xd.Ss(),this.Xd.vs.ah(this.Pl)},this.Px=t=>(this.Tx=!0,this.mI=oh(this.Xd.vs.uh(t.x,t.y),this.Xd.vs.Jt,this.scale),!0),this.MI=(t,i)=>(this._I(i),this.xI=setInterval((()=>this._I(i)),300),!0),this.wI=()=>(clearInterval(this.xI),!0),this.Dx=(i,s)=>{const h=this.bI.getDraggingMode();if(h!==t.UIDraggingModes.notDraggable){const r=s||h,n=oh(this.Xd.vs.uh(i.x,i.y),this.Xd.vs.Jt,this.scale),o=e(r!==t.UIDraggingModes.onlyVertical?uy(n.x,this.scale.x):this.BA.x,r!==t.UIDraggingModes.onlyHorizontal?uy(n.y,this.scale.y):this.BA.y),a=e(o.x-this.mI.x,o.y-this.mI.y),u=e(this.bI.getPosition().x+a.x,this.bI.getPosition().y+a.y),l=this.AI(u),c={x:Math.abs(this.yI.x-l.x),y:Math.abs(this.yI.y-l.y)};return this.kI(c),this.pI.y>a.y&&(this.mI=n),this.Nl(),!0}return!1},this.Bx=(t,i)=>{this.Tx=!1,Zh(i),this.Xd.Ss()},this.Xd=i,this.fm=s,this.scale=r,this.contentScale=n,this.CI=a,this.TI=new ay(i,h,r,o,a===ry.UpToDown?oy.Up:oy.Left).setStrokeStyle(o.dataGridScrollBarButtonStrokeStyle).setFillStyle(o.dataGridScrollBarButtonFillStyle),this.II=new ay(i,h,r,o,a===ry.UpToDown?oy.Down:oy.Right).setStrokeStyle(o.dataGridScrollBarButtonStrokeStyle).setFillStyle(o.dataGridScrollBarButtonFillStyle),this.bI=new wu(i,h,r,_h,o).setFillStyle(o.dataGridScrollBarFillStyle).setStrokeStyle(o.dataGridScrollBarStrokeStyle).setMouseInteractions(!0).setDraggingMode(a===ry.UpToDown?t.UIDraggingModes.onlyVertical:a===ry.LeftToRight?t.UIDraggingModes.onlyHorizontal:t.UIDraggingModes.notDraggable),this.FI=new wu(s,h,r,_h,o).setFillStyle(o.dataGridScrollBarBackgroundFillStyle).setStrokeStyle(o.dataGridScrollBarBackgroundStrokeStyle).setMouseInteractions(!0),this.bI.onMouseEnter(this.Ix),this.bI.onMouseLeave(this.Fx),this.bI.onMouseDragStart(((t,i)=>this.Px(e(i.clientX,i.clientY))&&Zh(i))),this.bI.onMouseDrag(((t,i)=>this.Dx(e(i.clientX,i.clientY))&&Zh(i))),this.bI.onMouseDragStop(this.Bx),this.bI.onTouchStart(((t,i)=>this.Px(e(i.clientX,i.clientY))&&Zh(i))),this.bI.onTouchMove(((t,i)=>this.Dx(e(i.clientX,i.clientY))&&Zh(i))),this.bI.onTouchEnd(this.Bx),this.TI.onMouseDown(((t,i)=>this.MI(t,i)&&Zh(i))),this.II.onMouseDown(((t,i)=>this.MI(t,i)&&Zh(i))),this.TI.onMouseUp(((t,i)=>this.wI()&&Zh(i))),this.II.onMouseUp(((t,i)=>this.wI()&&Zh(i))),this.FI.onMouseWheel(((t,i)=>this.DI(i))),this.bI.onMouseWheel(((t,i)=>this.DI(i))),this.FI.onMouseDown(((t,i)=>this.MI(t,i)&&Zh(i))),this.FI.onMouseUp(((t,i)=>this.wI()&&Zh(i)))}BI(t){return this.BA=t,this}Go(t){return this.BA.width=t,this}oA(){return this.BA.width}OI(t){return this.yI=t,this}LI(t){return this.af=t,this}EI(){return this.af}RI(t){return this.vI=t,this}zI(){return this.CI}VI(t){let i;switch(this.CI){case ry.UpToDown:return i=t>0?Math.min(this.yI.y-this.gI.max.y,this.pI.y+t):Math.max(0,this.pI.y+t),i!==this.pI.y&&(this.kI({x:0,y:i}),this.Nl(),!0);case ry.LeftToRight:return i=Math.min(this.gI.max.x-this.yI.x,this.pI.x+t),i!==this.pI.x&&(this.kI({y:0,x:i}),this.Nl(),!0);default:return!1}}NI(t){let i;switch(this.CI){case ry.UpToDown:return i=Math.max(0,this.pI.y-t),i!==this.pI.y&&(this.kI({x:0,y:i}),this.Nl(),!0);case ry.LeftToRight:return i=t>0?Math.max(0,this.pI.x-t):Math.min(this.gI.max.x-this.yI.x,this.pI.x-t),i!==this.pI.x&&(this.kI({x:i,y:0}),this.Nl(),!0);default:return!0}}GI(t){switch(this.CI){case ry.UpToDown:return this.wt.on("scrollY",t);case ry.LeftToRight:return this.wt.on("scrollX",t)}return this.wt.on("scrollY",t)}AI(t){switch(this.CI){case ry.UpToDown:if(t.y>this.gI.min.y)return e(t.x,this.gI.min.y);if(t.y<this.gI.max.y)return e(t.x,this.gI.max.y);break;case ry.LeftToRight:if(t.x<this.gI.min.x)return e(this.gI.min.x,t.y);if(t.x>this.gI.max.x)return e(this.gI.max.x,t.y)}return t}DI(t){t.deltaY>0&&this.HI()&&Zh(t),t.deltaY<0&&this.WI()&&Zh(t)}_I(t){const i=oh(this.Xd.vs.uh(t.clientX,t.clientY),this.Xd.vs.Jt,this.scale);let s;const h=this.bI.getPosition(),r=this.bI.getSize();this.UI(i,h,r)?clearInterval(this.xI):(s=this.CI===ry.UpToDown?e(0,i.y-h.y>0?this.vI:-this.vI):e(h.x-i.x>0?this.vI:-this.vI,0),(s.x>0||s.y>0)&&this.jI(0!==s.x?Math.abs(s.x):Math.abs(s.y)),(s.x<0||s.y<0)&&this.$I(0!==s.x?Math.abs(s.x):Math.abs(s.y)))}UI(t,i,s){return this.CI===ry.UpToDown?t.y<i.y+s.y/2&&t.y>i.y-s.y/2:t.x>i.x-s.x/2&&t.x<i.x+s.x/2}YI(t){this.gI=t}jI(t){switch(this.CI){case ry.UpToDown:{const i=Math.max(0,this.pI.y-t);return i!==this.pI.y&&(this.kI({x:0,y:i}),this.Nl(),!0)}case ry.LeftToRight:{const i=Math.max(0,this.pI.x-t);return i!==this.pI.x&&(this.kI({x:i,y:0}),this.Nl(),!0)}default:return!1}}$I(t){switch(this.CI){case ry.UpToDown:{let i;return i=this.af.x>this.BA.height?Math.min(this.yI.y-this.gI.max.y,this.pI.y+t):0,i!==this.pI.y&&(this.kI({x:0,y:i}),this.Nl(),!0)}case ry.LeftToRight:{const i=Math.min(this.gI.max.x-this.yI.x,this.pI.x+t);return i!==this.pI.x&&(this.kI({y:0,x:i}),this.Nl(),!0)}default:return!1}}WI(){return this.jI(this.vI)}HI(){return this.$I(this.vI)}kI(t){if(t.x===this.pI.x&&t.y===this.pI.y)return;let i;switch(this.pI=t,this.CI){case ry.UpToDown:i=this.pI.y*this.SI*this.contentScale.Qi().y,this.wt.emit("scrollY",ny.Vertical,i),this.Xd.vs.Ss();break;case ry.LeftToRight:i=this.pI.x*this.SI*this.contentScale.Qi().x,this.wt.emit("scrollX",ny.Horizontal,i)}}setVisible(t){return this.TI.setVisible(t),this.II.setVisible(t),this.FI.setVisible(t),this.bI.setVisible(t),this}dispose(){return this.TI.dispose(),this.II.dispose(),this.FI.dispose(),this.bI.dispose(),this.xI&&clearInterval(this.xI),this}_e(){switch(this.XI(),this.ZI(),this.CI){case ry.UpToDown:this.TI.Qn({x:this.BA.x,y:this.BA.y+this.BA.height-this.TI.xi().x/2}).Gt(e(this.BA.width,this.BA.width))._e(),this.II.Qn({x:this.BA.x,y:this.BA.y+10}).Gt(e(this.BA.width,this.BA.width))._e(),this.FI.setSize({x:this.BA.width,y:this.BA.height-2*this.TI.xi().x}).setPosition({x:this.BA.x,y:this.BA.y+this.II.xi().y+this.FI.getSize().y/2}),this.bI.setSize(e(this.BA.width,this.KI())),this.yI={x:this.BA.x,y:this.TI.io().y-this.TI.xi().y/2-this.bI.getSize().y/2},this.YI({min:{x:this.BA.x,y:this.TI.io().y-this.TI.xi().y/2-this.bI.getSize().y/2},max:{x:this.BA.x,y:this.II.io().y+this.II.xi().x/2+this.bI.getSize().y/2}});break;case ry.LeftToRight:this.TI.Qn({x:this.BA.x,y:this.BA.y}).Gt(e(this.BA.height,this.BA.height))._e(),this.II.Qn({x:this.BA.x+this.BA.width-this.II.xi().x,y:this.BA.y}).Gt(e(this.BA.height,this.BA.height))._e(),this.FI.setSize({y:this.BA.height,x:this.BA.width-2*this.TI.xi().y}).setPosition({x:this.BA.x+this.TI.xi().x/2+this.FI.getSize().x/2,y:this.BA.y}),this.bI.setSize(e(this.KI(),this.BA.height)),this.yI={x:this.TI.io().x+this.TI.xi().x/2+this.bI.getSize().x/2,y:this.BA.y},this.YI({min:{x:this.TI.io().x+this.TI.xi().x/2+this.bI.getSize().x/2,y:this.BA.y},max:{x:this.II.io().x-this.II.xi().x/2-this.bI.getSize().x/2,y:this.BA.y}})}return this.qI(),this}XI(){switch(this.CI){case ry.UpToDown:this.JI()||this.setVisible(!1),this.JI()&&this.setVisible(!0);break;case ry.LeftToRight:this.QI()||this.setVisible(!1),this.QI()&&this.setVisible(!0)}}ZI(){switch(this.CI){case ry.UpToDown:this.JI()||this.kI({x:0,y:0});break;case ry.LeftToRight:this.QI()||this.kI({x:0,y:0})}}JI(){return this.af.x>this.BA.height}QI(){return this.af.y>this.BA.width}KI(){switch(this.CI){case ry.UpToDown:return this.BA.height*(this.BA.height-2*this.TI.xi().x)/this.af.x;case ry.LeftToRight:return this.BA.width*(this.BA.width-2*this.TI.xi().y)/this.af.y;default:return 0}}qI(){switch(this.CI){case ry.UpToDown:this.SI=(this.af.x-this.BA.height)/(this.gI.min.y-this.gI.max.y);break;case ry.LeftToRight:this.SI=(this.af.y-this.BA.width)/(this.gI.max.x-this.gI.min.x)}}Nl(){switch(this.TI.Nl(),this.II.Nl(),this.FI.Nl(),this.CI){case ry.UpToDown:this.bI.setPosition({x:this.BA.x,y:this.TI.io().y-this.TI.xi().y/2-this.bI.getSize().y/2-this.pI.y}).Nl();break;case ry.LeftToRight:this.bI.setPosition({y:this.BA.y,x:this.TI.io().x+this.TI.xi().x/2+this.bI.getSize().x/2+this.pI.x}).Nl()}return this}}class cy{constructor(t,i,s,e,h,r,n){switch(this.Xd=t,this.fm=i,this.scale=e,this.contentScale=h,n){case ny.Vertical:this.tF=this.iF(s,r,ry.UpToDown);break;case ny.Horizontal:this.sF=this.iF(s,r,ry.LeftToRight);break;case ny.Both:this.tF=this.iF(s,r,ry.UpToDown),this.sF=this.iF(s,r,ry.LeftToRight)}this.eF=Ua(new $a(void 0,((t,i,s,e,h)=>{var r,n;0!==e.x&&(null===(r=this.sF)||void 0===r?void 0:r.NI(e.x))&&Zh(h),0!==e.y&&(null===(n=this.tF)||void 0===n?void 0:n.VI(e.y))&&Zh(h)})))}iF(t,i,s){return new ly(this.Xd,this.fm,t,this.scale,this.contentScale,i,s)}oA(){return 20}LI(t){var i,s;return null===(i=this.tF)||void 0===i||i.LI(t),null===(s=this.sF)||void 0===s||s.LI(t),this}hF(t){var i;return null===(i=this.sF)||void 0===i||i.RI(t),this}rF(t){var i;return null===(i=this.tF)||void 0===i||i.RI(t),this}nF(t){const i=this.tF;return i&&i.DI(t),this}oF(t){return this.eF.onTouchStart(this,t),this}aF(t){return this.eF.onTouchMove(this,t),this}uF(t){return this.eF.onTouchEnd(this,t),this}onScroll(t){var i,s;return null===(i=this.sF)||void 0===i||i.GI(t),null===(s=this.tF)||void 0===s||s.GI(t),this}dispose(){var t,i;return null===(t=this.tF)||void 0===t||t.dispose(),null===(i=this.sF)||void 0===i||i.dispose(),this}Nl(){var t,i;return null===(t=this.tF)||void 0===t||t.Nl(),null===(i=this.sF)||void 0===i||i.Nl(),this}_e(){var t,i,s,e;const h=this.scale.x,r=this.scale.y;return null===(t=this.tF)||void 0===t||t.BI({x:h.getInnerEnd()-10,y:r.getInnerStart()+20,height:r.getInnerEnd()-20,width:20}),null===(i=this.sF)||void 0===i||i.BI({x:h.getInnerStart()+10,y:r.getInnerStart()+10,height:20,width:h.getInnerEnd()-20}),null===(s=this.tF)||void 0===s||s._e(),null===(e=this.sF)||void 0===e||e._e(),this}}const fy=ue({width:void 0,height:void 0,lF:void 0,cF:_h,fF:_h});class dy extends fy{constructor(t,i,s,e){super({...e,lF:t,cF:i,fF:s})}dispose(){return this.fF(this),this}setWidth(t){const i=this.set("width",t);return this.cF(i),i}getWidth(){return this.get("width")}setHeight(t){const i=this.set("height",t);return this.cF(i),i}getHeight(){return this.get("height")}setSize(t,i){const s=this.withMutations((s=>{s.set("width",t).set("height",i)}));return this.cF(s),s}xi(){if(!this.lF)return{x:0,y:0};const t=this.lF.width,i=this.lF.height,s=this.width,e=this.height;return"number"==typeof s&&"number"==typeof e?{x:s,y:e}:"number"==typeof s?{x:s,y:i*s/t}:"number"==typeof e?{x:t*e/i,y:e}:{x:t,y:i}}}var gy;t.ImageFitMode=void 0,(gy=t.ImageFitMode||(t.ImageFitMode={}))[gy.Fill=0]="Fill",gy[gy.Fit=1]="Fit",gy[gy.Stretch=2]="Stretch",gy[gy.Center=3]="Center",gy[gy.Tile=4]="Tile";const my=ue({source:void 0,surroundingColor:pe(0,0,0,0),sourceMissingColor:pe(0,0,0,0),fitMode:t.ImageFitMode.Fill});class yy extends my{constructor(t){super(t),this.type="fillstyle"}setSource(t){return this.set("source",t)}getSource(){return this.get("source")}setSurroundingColor(t){return t instanceof ye?this.set("surroundingColor",t):this.set("surroundingColor",t(this.get("surroundingColor")))}getSurroundingColor(){return this.get("surroundingColor")}setSourceMissingColor(t){return t instanceof ye?this.set("sourceMissingColor",t):this.set("sourceMissingColor",t(this.get("sourceMissingColor")))}getSourceMissingColor(){return this.get("sourceMissingColor")}setFitMode(t){return this.set("fitMode",t)}getFitMode(){return this.get("fitMode")}}class py extends Ml{constructor(t,i,s,e,h,r){super(t,i,s,i.Fm("dataGrid bg",0),i.bm("dataGrid ui"),e,i.vs.Hs.dataGridBackgroundFillStyle,i.vs.Hs.dataGridBackgroundStrokeStyle,i.vs.Hs.dataGridTitleFont,i.vs.Hs.dataGridTitleFillStyle,r),this.dF=[],this.gF=[],this.mF=[],this.yF=new Map,this.pF=!0,this.SF=!0,this.vF=!0,this.bF=!0,this.xF=!0,this.MF=!0,this._F=!0,this.wF=!0,this.AF=!0,this.kF=!0,this.CF=!0,this.TF=!0,this.IF=!0,this.FF=!0,this.PF=!0,this.DF=!0,this.BF=new Set,this.OF=new Set,this.LF=!0,this.EF=!0,this.RF=(t,i)=>{t.borders=void 0===i?My:{...t.borders,...i},this.zF(t),this.TF=!0,this.vs.Ss()},this.zF=t=>{t.borders&&(!1===t.borders.top&&this.VF(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!1}:{...this.NF,bottom:!1}})),!1===t.borders.bottom&&this.VF(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!1}:{...this.NF,top:!1}})),!1===t.borders.left&&this.VF(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!1}:{...this.NF,right:!1}})),!1===t.borders.right&&this.VF(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!1}:{...this.NF,left:!1}})),!0===t.borders.top&&this.VF(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!0}:{...this.NF,bottom:!0}})),!0===t.borders.bottom&&this.VF(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!0}:{...this.NF,top:!0}})),!0===t.borders.left&&this.VF(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!0}:{...this.NF,right:!0}})),!0===t.borders.right&&this.VF(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!0}:{...this.NF,left:!0}})))},this.GF=(t,i)=>{const s=this.yF.get(t);s&&this.wt.emit(Sy.cellMouseEnter,s,i)},this.HF=(t,i)=>{const s=this.yF.get(t);s&&this.wt.emit(Sy.cellMouseLeave,s,i)},this.WF=(t,i)=>{const s=this.yF.get(t);s&&this.wt.emit(Sy.cellMouseClick,s,i)},this.UF=(t,i)=>{const s=this.yF.get(t);s&&this.wt.emit(Sy.cellMouseDoubleClick,s,i)},this.jF=(t,i)=>{const s=this.yF.get(t);s&&this.wt.emit(Sy.cellMouseDown,s,i)},this.$F=(t,i)=>{const s=this.yF.get(t);s&&this.wt.emit(Sy.cellMouseUp,s,i)},this.YF=(t,i)=>{const s=this.yF.get(t);s&&this.wt.emit(Sy.cellMouseMove,s,i)},this.XF=(t,i)=>{const s=this.yF.get(t);s&&this.wt.emit(Sy.cellMouseDrag,s,i)},this.ZF=(t,i)=>{const s=this.yF.get(t);s&&this.wt.emit(Sy.cellMouseDragStart,s,i)},this.KF=(t,i)=>{const s=this.yF.get(t);s&&this.wt.emit(Sy.cellMouseDragStop,s,i)},this.qF=(t,i)=>{const s=this.yF.get(t);s&&(this.wt.emit(Sy.cellMouseWheel,s,i),!i.defaultPrevented&&this.LF&&this.JF.nF(i))},this.QF=(t,i)=>{const s=this.yF.get(t);s&&(this.wt.emit(Sy.cellTouchStart,s,i),!i.defaultPrevented&&this.EF&&this.JF.oF(i))},this.tP=(t,i)=>{const s=this.yF.get(t);s&&(this.wt.emit(Sy.cellTouchMove,s,i),!i.defaultPrevented&&this.EF&&this.JF.aF(i))},this.iP=(t,i)=>{const s=this.yF.get(t);s&&(this.wt.emit(Sy.cellTouchEnd,s,i),!i.defaultPrevented&&this.EF&&this.JF.uF(i))},this.zd.rr||this.zd.ar||this.vs.er(2),this.Bm.Ks("Data Grid"),this.sP=s.d2({scaleXYConstructor:In}),this.sP.x.Ig=Wm,this.eP=s.d2({scaleXYConstructor:In}),this.hP={x:0,y:0},this.rP=this.Hs.dataGridTextFont,this.nP=this.Hs.dataGridTextFillStyle,this.NF={top:!0,bottom:!0,left:!0,right:!0},this.oP=this.Hs.dataGridCellBackgroundFillStyle,this.aP=this.Hs.dataGridBorderStrokeStyle,this.uP="left-center",this.lP={left:5,right:5,bottom:5,top:5},this.cP=i.PS("dataGrid grid bg",0),this.fP=i.PS("dataGrid cell bg",1),this.dP=i.vy("dataGrid cell content",0),this.gP=i.vy("dataGrid scrollbar bg",1),this.mP=i.vy("dataGrid scrollbar fg",2),this.JF=this.yP(),this.onBackgroundMouseWheel(((t,i)=>{this.LF&&this.JF.nF(i)})),this.onBackgroundTouchStart(((t,i)=>{this.EF&&this.JF.oF(i)})),this.onBackgroundTouchMove(((t,i)=>{this.EF&&this.JF.aF(i)})),this.onBackgroundTouchEnd(((t,i)=>{this.EF&&this.JF.uF(i)})),this.pP=this.cP.Zc(this.sP).Js(this.Hs.dataGridBackgroundFillStyle).Fr(th).setMouseInteractions(!1),this.SP=this.dP.Jg(this.sP).setMouseInteractions(!1),this.vP=new Um((()=>this.fP.Zc(this.sP).setMouseInteractions(!0).setMouseEnterEventHandler(this.GF).setMouseLeaveEventHandler(this.HF).setMouseClickEventHandler(this.WF).setMouseDoubleClickEventHandler(this.UF).setMouseDownEventHandler(this.jF).setMouseUpEventHandler(this.$F).setMouseMoveEventHandler(this.YF).setMouseDragEventHandler(this.XF).setMouseDragStartEventHandler(this.ZF).setMouseDragStopEventHandler(this.KF).setMouseWheelEventHandler(this.qF).setTouchStartEventHandler(this.QF).setTouchMoveEventHandler(this.tP).setTouchEndEventHandler(this.iP))),this.bP=new Um((()=>this.dP.Zc(this.sP).setMouseInteractions(!1))),this.xP=new Um((()=>this.dP.$e(this.sP).setMouseInteractions(!1)));const n=new Um((()=>this.dP.Iy(this.sP,{},[Ll.InternalUI,{type:"DataPattern",args:{pattern:"ProgressiveX"}}]).setMouseInteractions(!1))),o=new Um((()=>this.dP.rc(this.sP).setMouseInteractions(!1))),a=new Um((()=>this.dP.pp(this.sP).setMouseInteractions(!1))),u=new Um((()=>this.dP.Zc(this.sP).setMouseInteractions(!1))),l=new Um((()=>this.dP.Jk(this.sP).setMouseInteractions(!1))),c=new Um((()=>this.dP.nf(this.sP).setMouseInteractions(!1)));this.MP={lineSet:n,line:o,pointSet:a,rect:u,junction:l,arc:c},this._P=()=>{n.oI(),o.oI(),a.oI(),u.oI(),l.oI(),c.oI()},this.wP=()=>{this.vP.aI(),this.bP.aI(),this.xP.aI(),n.aI(),o.aI(),a.aI(),u.aI(),l.aI(),c.aI()},this.Im(h,this.uiScale),this.onResize((()=>{this.pF=!0,this.vs.Ss(),this.sP.Gt(this.pixelScale.xi()),this.eP.Gt(this.pixelScale.xi())})),this.AP=this.El.Ug([this.pP])}getMinimumSize(){return{x:200,y:200}}setAnimationsEnabled(t){return this}jf(){return[]}dispose(){return super.dispose(),this.cP.Pt(),this.fP.Pt(),this.dP.Pt(),this.gP.Pt(),this.mP.Pt(),vl(this.sP),vl(this.eP),this.JF.dispose(),this}Rt(){return super.Rt(),this.sP.Rt(),this.eP.Rt(),this}zt(){return super.zt(),this.sP.zt(),this.eP.zt(),this}setBackgroundEffect(t){return this.AP.ee(t),this.vs.Ss(),this}getBackgroundEffect(){return this.AP.re()}setInteractionScrollOnWheel(t){return this.LF=t,this}getInteractionScrollOnWheel(){return this.LF}setInteractionPanOnTouch(t){return this.EF=t,this}getInteractionPanOnTouch(){return this.EF}onCellMouseEnter(t){return this.wt.on(Sy.cellMouseEnter,t)}offCellMouseEnter(t){return this.wt.off(t)}onCellMouseLeave(t){return this.wt.on(Sy.cellMouseLeave,t)}offCellMouseLeave(t){return this.wt.off(t)}onCellMouseClick(t){return this.wt.on(Sy.cellMouseClick,t)}offCellMouseClick(t){return this.wt.off(t)}onCellMouseDoubleClick(t){return this.wt.on(Sy.cellMouseDoubleClick,t)}offCellMouseDoubleClick(t){return this.wt.off(t)}onCellMouseDown(t){return this.wt.on(Sy.cellMouseDown,t)}offCellMouseDown(t){return this.wt.off(t)}onCellMouseUp(t){return this.wt.on(Sy.cellMouseUp,t)}offCellMouseUp(t){return this.wt.off(t)}onCellMouseMove(t){return this.wt.on(Sy.cellMouseMove,t)}offCellMouseMove(t){return this.wt.off(t)}onCellMouseDrag(t){return this.wt.on(Sy.cellMouseDrag,t)}offCellMouseDrag(t){return this.wt.off(t)}onCellMouseDragStart(t){return this.wt.on(Sy.cellMouseDragStart,t)}offCellMouseDragStart(t){return this.wt.off(t)}onCellMouseDragStop(t){return this.wt.on(Sy.cellMouseDragStop,t)}offCellMouseDragStop(t){return this.wt.off(t)}onCellMouseWheel(t){return this.wt.on(Sy.cellMouseWheel,t)}offCellMouseWheel(t){return this.wt.off(t)}onCellTouchStart(t){return this.wt.on(Sy.cellTouchStart,t)}offCellTouchStart(t){return this.wt.off(t)}onCellTouchMove(t){return this.wt.on(Sy.cellTouchMove,t)}offCellTouchMove(t){return this.wt.off(t)}onCellTouchEnd(t){return this.wt.on(Sy.cellTouchEnd,t)}offCellTouchEnd(t){return this.wt.off(t)}setGridBackgroundFillStyle(t){return this.pP.Js(t),this.vs.Ss(),this}getGridBackgroundFillStyle(){return this.pP.qs()}setCellContent(t,i,s,e,h){if("number"==typeof s&&void 0!==e&&void 0!==h){const n=s,o=e,a=h;let u=[];for(let s=t;s<t+n;s+=1)for(let t=i;t<i+o;t+=1){const i=this.VF(s,t);i&&u.push(i)}r=u,u=Array.from(new Set(r));let l={highlight:0};for(const t of u){const i=this.dF.indexOf(t);i<0||(l={...l,highlight:t.highlight,textFont:t.textFont,textFillStyle:t.textFillStyle,contentAlignment:t.contentAlignment,borders:t.borders,padding:t.padding,backgroundFillStyle:t.backgroundFillStyle},this.dF.splice(i,1))}const c={...l,column:t,row:i,columnSpan:n,rowSpan:o,content:a};this.dF.push(c),this.bF=!0,"string"==typeof c.content||"number"==typeof c.content?this.SF=!0:this.vF=!0,this.vs.Ss()}else this.kP(t,i,s);var r;return this}setColumnContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.kP(t,e,s)}return this}setRowContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.kP(e,t,s)}return this}setTableContent(t){const i=t.length;if(0===i)return this;const s=t[0].length;if(0===s)return this;for(let e=0;e<s;e+=1)for(let s=0;s<i;s+=1){const i=t[s][e];this.kP(e,s,i)}return this}setColumnWidth(t,i){let s=this.gF.find((i=>i.column===t));return s||(s={column:t,min:void 0,max:void 0},this.gF.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.gF.splice(this.gF.indexOf(s),1):(s.min=i,s.max=i),this.MF=!0,this.vs.Ss(),this}setRowHeight(t,i){let s=this.mF.find((i=>i.row===t));return s||(s={row:t,min:void 0,max:void 0},this.mF.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.mF.splice(this.mF.indexOf(s),1):(s.min=i,s.max=i),this.MF=!0,this.vs.Ss(),this}setColumnPaddings(t,i){return"number"==typeof i&&(i=f(i,i,i,i)),this.CP(t,(t=>this.TP(t,i))),this}setRowPaddings(t,i){return"number"==typeof i&&(i=f(i,i,i,i)),this.IP(t,(t=>this.TP(t,i))),this}setCellPadding(t,i,s){return"number"==typeof s&&(s=f(s,s,s,s)),this.VF(t,i,(t=>this.TP(t,s))),this}setCellsPaddings(t){return"number"==typeof t&&(t=f(t,t,t,t)),this.lP={...this.lP,...t},this.FP((t=>this.TP(t,this.lP))),this}setCellBorders(t,i,s){return this.VF(t,i,(t=>this.RF(t,s))),this}setRowBorders(t,i){return this.IP(t,(t=>this.RF(t,i))),this}setColumnBorders(t,i){return this.CP(t,(t=>this.RF(t,i))),this}setCellsBorders(t){return this.NF=void 0===t?My:t,this.FP((t=>this.RF(t,this.NF))),this}setCellsBorderStrokeStyle(t){return this.aP="function"==typeof t?t(this.aP):t,this.FF=!0,this.vs.Ss(),this}setColumnTextFillStyle(t,i){return this.CP(t,(t=>this.PP(t,i))),this}setRowTextFillStyle(t,i){return this.IP(t,(t=>this.PP(t,i))),this}setCellTextFillStyle(t,i,s){return this.VF(t,i,(t=>this.PP(t,s))),this}setCellsTextFillStyle(t){return this.nP="function"==typeof t?t(this.nP):t,this.FP((t=>this.PP(t,this.nP))),this}setColumnTextFont(t,i){return this.CP(t,(t=>this.DP(t,i))),this}setRowTextFont(t,i){return this.IP(t,(t=>this.DP(t,i))),this}setCellTextFont(t,i,s){return this.VF(t,i,(t=>this.DP(t,s))),this}setCellsTextFont(t){return this.rP="function"==typeof t?t(this.rP):t,this.FP((t=>this.DP(t,this.rP))),this}setColumnContentAlignment(t,i){return this.CP(t,(t=>this.BP(t,i))),this}setRowContentAlignment(t,i){return this.IP(t,(t=>this.BP(t,i))),this}setCellContentAlignment(t,i,s){return this.VF(t,i,(t=>this.BP(t,s))),this}setCellsContentAlignment(t){return this.uP=t,this.FP((t=>this.BP(t,this.uP))),this}setCellBackgroundFillStyle(t,i,s){return this.VF(t,i,(t=>this.OP(t,s))),this}setColumnBackgroundFillStyle(t,i){return this.CP(t,(t=>this.OP(t,i))),this}setRowBackgroundFillStyle(t,i){return this.IP(t,(t=>this.OP(t,i))),this}setCellsBackgroundFillStyle(t){return this.oP="function"==typeof t?t(this.oP):t,this.FP((t=>this.OP(t,this.oP))),this}setCellHighlight(t,i,s){return this.VF(t,i,(t=>{t.highlight=pr(s)})),this.IF=!0,this.vs.Ss(),this}setColumnHighlight(t,i){const s=pr(i);return this.CP(t,(t=>{t.highlight=s})),this.IF=!0,this.vs.Ss(),this}setRowHighlight(t,i){const s=pr(i);return this.IP(t,(t=>{t.highlight=s})),this.IF=!0,this.vs.Ss(),this}removeCell(t,i){return this.VF(t,i,(t=>this.dF.splice(this.dF.indexOf(t),1))),this.xF=!0,this.vs.Ss(),this}removeRow(t){return this.IP(t,(t=>this.dF.splice(this.dF.indexOf(t),1))),this.dF.filter((i=>i.row>t)).forEach((t=>{t.row-=1})),this.xF=!0,this.vs.Ss(),this}removeColumn(t){return this.CP(t,(t=>this.dF.splice(this.dF.indexOf(t),1))),this.dF.filter((i=>i.column>t)).forEach((t=>{t.column-=1})),this.xF=!0,this.vs.Ss(),this}removeCells(){return this.dF.splice(0),this.xF=!0,this.vs.Ss(),this}getColumnMax(){return 0===this.dF.length?0:this.dF.reduce(((t,i)=>Math.max(t,i.column+i.columnSpan-1)),0)}getRowMax(){return 0===this.dF.length?0:this.dF.reduce(((t,i)=>Math.max(t,i.row+i.rowSpan-1)),0)}Nl(){super.Nl(),_l.zm(this.Bm,this.Pm);const t=Math.round(this.aP.Ct()),i=t/2;let s=this.SF||this.vF||this.bF||this.xF||this.MF||this._F||this.CF||this.TF||this.FF||this.DF;if(s){this.dF.forEach((t=>{this.OF.add(t.column)})),this.dF.forEach((t=>{this.BF.add(t.row)})),this.xP.oI();const e=this.LP(i),h=this.EP(this.OF.size,e),r=this.RP(this.BF.size,e),n=h.reduce(Dr,0)+t,o=r.reduce(Dr,0)+t,a=new Array(h.length+1).fill(0).map(((t,i)=>h.reduce(((t,s,e)=>t+(e<i?s:0)),0))),u=new Array(r.length+1).fill(0).map(((t,i)=>r.reduce(((t,s,e)=>t+(e<i?s:0)),0)));if(this.zP){const t=this.zP.columnWidths.every(((t,i)=>t===h[i])),i=this.zP.rowHeights.every(((t,i)=>t===r[i]));t&&i&&(s=!1)}this.zP={columnWidths:h,rowHeights:r,dataGridWidth:n,dataGridHeight:o,columnWidthsCumulative:a,rowHeightsCumulative:u,cellsContentSizes:e}}const e=s||this.vF||this.bF||this.xF||this.wF||this.AF||this.kF||this.TF||this.IF||this.FF||this.pF||this.DF;if((e||this.PF)&&this.zP){const s=this.pixelScale.getInnerIntervalPixels(),h=_l.Rm(this.Bm,this.Pm),r=[this.Gn.left+i,this.Gn.right+i],n=[this.Gn.bottom+i,this.Gn.top+h+i],o={x:s.x-r[0]-r[1],y:s.y-n[0]-n[1]},a=[this.Gn.left,this.Gn.right],u=[this.Gn.bottom,this.Gn.top+h],l={x:Math.round(s.x-a[0]-a[1]),y:Math.round(s.y-u[0]-u[1])},c={x:Math.ceil(i),y:Math.floor(l.y-i)};this.eP.Yi(r).Xi(n).Zi(0,o.x).Ki(0,o.y),this.JF.LI({x:this.zP.dataGridHeight,y:this.zP.dataGridWidth})._e().Nl();const f={x:Math.round(this.hP.x),y:Math.round(Math.min(0,this.hP.y))};this.sP.Yi(a).Xi(u).Zi(f.x,l.x+f.x).Ki(f.y,l.y+f.y),this.pP.Qn({x:c.x,y:c.y});const d={x:this.sP.x.pi(),y:this.sP.y.pi()+this.JF.oA(),width:this.sP.x.vi()+t-this.JF.oA(),height:this.sP.y.vi()+t};this.dP._S(d),this.fP._S(d),this.cP._S(d),e&&this.VP(c,this.zP,t)}this.wP(),this.pF=!1,this.SF=!1,this.vF=!1,this.bF=!1,this.xF=!1,this.MF=!1,this._F=!1,this.wF=!1,this.AF=!1,this.kF=!1,this.CF=!1,this.TF=!1,this.IF=!1,this.FF=!1,this.PF=!1,this.DF=!1}LP(t){const i=[],s={left:Math.ceil(t),right:Math.ceil(t),top:Math.ceil(t),bottom:Math.ceil(t)};for(const t of this.dF){const{content:e}=t,h={...this.lP,...t.padding};let r,n,o,a={x:0,y:0};if("string"==typeof e||"number"==typeof e){const i=String(e);r=this.xP.nI(),a=r.Ks(i).te(t.textFont||this.rP)._e().hf()}if(jm(e)&&(n=e,a={x:200,y:50}),e instanceof dy){const t=this.vs.NP(e);t.GP()?(o=e,a=o.xi()):t.HP((()=>{this.DF=!0,this.vs.Ss()}))}if(r||n||o){h.top=Math.round(h.top),h.left=Math.round(h.left),h.right=Math.round(h.right),h.bottom=Math.round(h.bottom);const e={x:Math.round(a.x+h.left+h.right+s.left+s.right),y:Math.round(a.y+h.top+h.bottom+s.top+s.bottom)};i.push({cell:t,contentSize:e,text:r,sparkChart:n,icon:o,cellPadding:h,cellMargin:s})}}return i}VP(i,s,e){const{dataGridWidth:h,dataGridHeight:r,cellsContentSizes:n,columnWidths:o,columnWidthsCumulative:a,rowHeights:u,rowHeightsCumulative:l}=s,c={x:h-e,y:-r+e};this.pP.Gt(c),this.SP.za(this.aP),this.yF.clear(),this.vP.oI(),this.bP.oI(),this._P();const f=[];for(const s of n){const{cell:h,text:r,sparkChart:n,icon:c,cellPadding:d,cellMargin:g}=s,m={column:h.column,row:h.row},y={x:i.x+a[h.column],y:i.y-l[h.row+h.rowSpan]},p={x:y.x+g.left,y:y.y+g.bottom},S={x:p.x+d.left,y:p.y+d.bottom},v={x:new Array(h.columnSpan).fill(0).reduce(((t,i,s)=>t+o[h.column+s]),0),y:new Array(h.rowSpan).fill(0).reduce(((t,i,s)=>t+u[h.row+s]),0)},b={x:v.x-g.left-g.right,y:v.y-g.top-g.bottom},x={x:b.x-d.left-d.right,y:b.y-d.top-d.bottom};if(r){const t=xy(S,x,h.contentAlignment||this.uP);r.Qn(t[0]).ao({x:t[1],y:t[2]}).Js(this.WP(h.textFillStyle||this.nP,h.content,this.nP)).dn(h.highlight)}const M=this.WP(h.backgroundFillStyle||this.oP,h.content);if(M!==Ie){const t=this.vP.nI();t.Qn(y).Gt(v).Js(M).Fr(th).dn(h.highlight),this.yF.set(t,m)}const _=h.borders||this.NF;if(_&&by(y,v,_,e,f),n){const t=S,i=x;$m(n,this.MP,this.sP,t,i,this.Hs,this.zd,h.highlight)}if(c){const i=c.xi(),s=xy(S,x,h.contentAlignment||this.uP);this.bP.nI().Qn({x:s[0].x+i.x*(-.5-s[1]/2),y:s[0].y+i.y*(-.5-s[2]/2)}).Gt(i).Js(new yy({source:c.lF,fitMode:t.ImageFitMode.Stretch})).Fr(th).dn(h.highlight)}}this.SP.Oo();for(const t of f)this.SP.Bo(t[0],t[1])}EP(t,i){const s=new Array(t).fill(0);for(const t of this.OF.values()){const e=i.filter((i=>t>=i.cell.column&&t+1<=i.cell.column+i.cell.columnSpan)).reduce(((t,i)=>{const s=i.contentSize.x/i.cell.columnSpan;return Math.max(t,s)}),0),h=this.gF.find((i=>i.column===t)),r=h?Ah(e,void 0!==h.min?h.min:Ar,void 0!==h.max?h.max:wr):e;s[t]=r}return s}RP(t,i){const s=new Array(t).fill(0);for(const t of this.BF.values()){const e=i.filter((i=>t>=i.cell.row&&t+1<=i.cell.row+i.cell.rowSpan)).reduce(((t,i)=>{const s=i.contentSize.y/i.cell.rowSpan;return Math.max(t,s)}),0),h=this.mF.find((i=>i.row===t)),r=h?Ah(e,void 0!==h.min?h.min:Ar,void 0!==h.max?h.max:wr):e;s[t]=r}return s}WP(t,i,s){if(t instanceof Le){try{const s=Number(i);return new De({color:t.getPalette().getColors(s)})}catch(t){}return s||Ie}return t}PP(t,i){t.textFillStyle="function"==typeof i?i(t.textFillStyle||this.nP):i,this.kF=!0,this.vs.Ss()}DP(t,i){t.textFont="function"==typeof i?i(t.textFont||this.rP):i,this.CF=!0,this.vs.Ss()}OP(t,i){t.backgroundFillStyle="function"==typeof i?i(t.backgroundFillStyle||this.oP):i,this.AF=!0,this.vs.Ss()}BP(t,i){t.contentAlignment=i,this.wF=!0,this.vs.Ss()}TP(t,i){t.padding={...t.padding,...i},this._F=!0,this.vs.Ss()}kP(t,i,s){let e=this.VF(t,i);e?e.content=s:(e={column:t,row:i,columnSpan:1,rowSpan:1,content:s,highlight:0},this.dF.push(e),this.bF=!0),"string"==typeof e.content||"number"==typeof e.content?this.SF=!0:this.vF=!0,this.vs.Ss()}FP(t){this.dF.forEach((i=>t(i)))}VF(t,i,s){const e=this.dF.find((s=>t>=s.column&&t+1<=s.column+s.columnSpan&&i>=s.row&&i+1<=s.row+s.rowSpan));return e&&s&&s(e),e}CP(t,i){const s=this.dF.filter((i=>t>=i.column&&t+1<=i.column+i.columnSpan));for(const t of s)t&&i(t)}IP(t,i){const s=this.dF.filter((i=>t>=i.row&&t+1<=i.row+i.rowSpan));for(const t of s)t&&i(t)}yP(){return new cy(this.mP,this.gP,this.eP,this.eP,this.sP,this.Hs,ny.Both).onScroll(((t,i)=>{this.zP&&(t===ny.Vertical&&(this.hP.y=-i),t===ny.Horizontal&&(this.hP.x=i),this.PF=!0,this.vs.Ss())})).hF(50).rF(12)}}const Sy={cellMouseEnter:"cellMouseEnter",cellMouseLeave:"cellMouseLeave",cellMouseClick:"cellMouseClick",cellMouseDoubleClick:"cellMouseDoubleClick",cellMouseDown:"cellMouseDown",cellMouseUp:"cellMouseUp",cellMouseMove:"cellMouseMove",cellMouseDrag:"cellMouseDrag",cellMouseDragStart:"cellMouseDragStart",cellMouseDragStop:"cellMouseDragStop",cellMouseWheel:"cellMouseWheel",cellTouchStart:"cellTouchStart",cellTouchMove:"cellTouchMove",cellTouchEnd:"cellTouchEnd"};var vy;t.DataGridCellContentAlignmentOptions=void 0,(vy=t.DataGridCellContentAlignmentOptions||(t.DataGridCellContentAlignmentOptions={})).Center="center",vy.RightCenter="right-center",vy.LeftCenter="left-center",vy.RightTop="right-top",vy.LeftTop="left-top",vy.RightBottom="right-bottom",vy.LeftBottom="left-bottom",vy.CenterTop="center-top",vy.CenterBottom="center-bottom";const by=(t,i,s,e,h)=>{const r={x:t.x,y:t.y},n={x:t.x,y:t.y+i.y},o={x:t.x+i.x,y:t.y},a={x:t.x+i.x,y:t.y+i.y};s.top&&h.push([n,a]),s.bottom&&h.push([r,o]),s.left&&h.push([r,n]),s.right&&h.push([o,a])},xy=(t,i,s)=>{const h=t.x,r=t.x+i.x,n=t.x+i.x/2,o=t.y+i.y,a=t.y,u=t.y+i.y/2;switch(s){case"left-center":return[e(h,u),-1,0];case"right-center":return[e(r,u),1,0];case"center":return[e(n,u),0,0];case"left-bottom":return[e(h,a),-1,-1];case"right-bottom":return[e(r,a),1,-1];case"center-bottom":return[e(n,a),0,-1];case"left-top":return[e(h,o),-1,1];case"right-top":return[e(r,o),1,1];case"center-top":return[e(n,o),0,1]}return Sr(0,`Unidentified DataGrid cell content alignment option: ${s}`)},My={top:!1,bottom:!1,left:!1,right:!1},_y=(t,i)=>i?t.x:t.y,wy=(t,i,s,e)=>1===i&&e===(s?t.columnIndex:t.rowIndex)||-1===i&&e===(s?t.columnIndex+t.columnSpan:t.rowIndex+t.rowSpan),Ay=(t,i,s,e,h,r)=>{const n=i.length,o=Math.sign(e),a=[],u=i.reduce(((t,i)=>t+i));for(let t=1;t<=n-1;t+=1)a.push(_y(h,r)*i.slice(0,t).reduce(((t,i)=>t+i),0)/u);const l=a.map((t=>0));let c=a[s-1]+e;for(let i=s;i>0&&i<n;i+=o){const e=t.filter((t=>wy(t,o,r,i))).reduce(((t,i)=>Math.max(t,_y(i.panel.getMinimumSize()||{x:0,y:0},r))),20),n=a[i-1];if(1===o&&c>_y(h,r)-e||-1===o&&c<0+e){l.fill(0);break}if(i!==s&&(1===o?n>c:n<c))break;l[i-1]=c-n,c+=e*o}const f=l.map(((t,i)=>a[i]+t)),d=f.map(((t,i)=>(t-(i>0?f[i-1]:0))/_y(h,r)));return d.push(1-d.reduce(((t,i)=>t+i),0)),d};class ky{constructor(t,i,s,e,h){this.Ye=!1,this.dF=new Array,this.wt=new We,this.UP=[],this.rm=[],this.jP=void 0,this.$P=!0,this.YP=!0,this.XP=!0,this.ZP=([t,i])=>{this.uiScale.Gt(t,i),this.pixelScale.Gt(t,i).Zi(0,this.uiScale.x.getCellSize()).Ki(0,this.uiScale.y.getCellSize()),this.YP=!0,this.vs.Ss()},this.KP=[],this.qP=t=>{for(let i=0;i<this.dF.length;i+=1)if(this.dF[i].panel===t){this.dF.splice(i,1),this.$P=!0,this.vs.Ss();break}},this.JP=t=>{const i=this.UP.indexOf(t);i>=0&&this.UP.splice(i,1)},this.gm=t=>{const i=this.rm.indexOf(t);i>=0&&this.rm.splice(i,1)},this.QP=(t,i,s,e,h)=>{if(this.tD(i,s,e,h)){const r={panel:t,columnIndex:i,rowIndex:s,columnSpan:e,rowSpan:h};return this.dF.push(r),this.iD(r),this.$P=!0,t}throw new uh("Out of dashboard range.")},this.sD=i.numberOfRows,this.eD=i.numberOfColumns,this.zd=t,this.hD=i,this.rD=e;const r=this.eD*this.sD;this.nD={x:new Hm(new Array(this.eD).fill(1)),y:new Hm(new Array(this.sD).fill(1))},this.Hs=s.Hs,this.oD=this.Hs.dashboardSplitterStyle,this.bs=void 0===i.disableAnimations||!i.disableAnimations,this.aD=Gm(s,r),this.uD=s.tI("dashboard splitters",400001),this.Gx=()=>this.aD.QT(),this.xm=this.aD.iI(),this.El=s.El.Rl(this,{lD:{}}),this.El.lD.ee(this.Hs.effectsDashboardSplitters);const n=s.xi();this.uiScale=rh.d2({scaleXYConstructor:In}).Zi(0,100).Ki(0,100).Gt(n),this.pixelScale=rh.d2({scaleXYConstructor:In}).Zi(0,this.uiScale.x.getCellSize()).Ki(0,this.uiScale.y.getCellSize()).Gt(n),this.cD=s.fD.bind(s),this.dD=s.gD.bind(s),this.mD=s.yD.bind(s),this.pD=s.SD.bind(s),this.Ar=s.Ar.bind(s),this.Cr=s.Cr.bind(s),this.engine=s.pm,this.vs=s.Sm,s.Zr(this.ZP),s.Ss(),this.vD(),this.setAnimationsEnabled(this.bs);const o=("dashboard-resize",{on:(a=this.wt).on.bind(a,"dashboard-resize"),off:a.off.bind(a)});var a;this.createChartXY=t=>{const i=Cy(t,this.hD,this.bs);return this.QP(new Pm(this.zd,this.aD.sI(this.bD(t.columnIndex,t.rowIndex)),this.xD(i,this.nD),this.qP,h,i,o),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createSpiderChart=t=>{const i=Cy(t,this.hD,this.bs);return this.QP(new Hd(this.zd,this.aD.sI(this.bD(t.columnIndex,t.rowIndex)),this.xD(i,this.nD),this.qP,h,i,o),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPolarChart=t=>{const i=Cy(t,this.hD,this.bs);return this.QP(new Kf(this.zd,this.aD.sI(this.bD(t.columnIndex,t.rowIndex)),this.xD(i,this.nD),this.qP,h,i,o),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPieChart=t=>{const i=Cy(t,this.hD,this.bs),s=i&&i.type?i.type:jl;return this.QP(new s(this.zd,this.aD.sI(this.bD(t.columnIndex,t.rowIndex)),this.xD(i,this.nD),this.qP,h,o,i.disableAnimations),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createGaugeChart=t=>{const i=Cy(t,this.hD,this.bs),s=i&&i.type?i.type:pd;return this.QP(new s(this.zd,this.aD.sI(this.bD(t.columnIndex,t.rowIndex)),this.xD(i,this.nD),this.qP,h,o,i.disableAnimations),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createFunnelChart=t=>{const i=Cy(t,this.hD,this.bs),s=i&&i.type?i.type:nd;return this.QP(new s(this.zd,this.aD.sI(this.bD(t.columnIndex,t.rowIndex)),this.xD(i,this.nD),this.qP,h,o,i.disableAnimations),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPyramidChart=t=>{const i=Cy(t,this.hD,this.bs),s=t&&t.type?t.type:Ad;return this.QP(new s(this.zd,this.aD.sI(this.bD(t.columnIndex,t.rowIndex)),this.xD(i,this.nD),this.qP,h,o,i.disableAnimations),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createUIPanel=t=>{const i=Cy(t,this.hD,this.bs);return this.QP(new bl(this.zd,this.aD.sI(this.bD(t.columnIndex,t.rowIndex)),this.xD(i,this.nD),this.qP,h,o),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createLegendBoxPanel=t=>{const i=Cy(t,this.hD,this.bs);return this.QP(new wc(this.zd,this.aD.sI(this.bD(t.columnIndex,t.rowIndex)),this.xD(i,this.nD),this.qP,h,o),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createZoomBandChart=t=>{const i=Cy(t,this.hD,this.bs),s=void 0===i.bandAboveSeries||i.bandAboveSeries;return this.QP(new Em(this.zd,this.aD.sI(this.bD(t.columnIndex,t.rowIndex)),this.xD(i,this.nD),this.qP,i.axis,s,h,i,o),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createMapChart=t=>{const i=Cy(t,this.hD,this.bs);return this.QP(new tf(this.zd,this.aD.sI(this.bD(t.columnIndex,t.rowIndex)),this.xD(i,this.nD),this.qP,h,i,o),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createChart3D=t=>{const i=Cy(t,this.hD,this.bs),s=new Mc(this.zd,this.aD.sI(this.bD(t.columnIndex,t.rowIndex)),this.xD(i,this.nD),this.qP,h,o,i);return this.QP(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createDataGrid=t=>{const i=Cy(t,this.hD,this.bs),s=new py(this.zd,this.aD.sI(this.bD(t.columnIndex,t.rowIndex)),this.xD(i,this.nD),this.qP,h,o);return this.QP(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)}}bD(t,i){return t+i*this.eD}xD(t,i){return{d1:s=>new s.scale1DConstructor("x"===s.dimension?t.columnIndex:t.rowIndex,"x"===s.dimension?t.columnSpan:t.rowSpan,"x"===s.dimension?this.eD:this.sD,"x"===s.dimension?i.x:i.y),d2:s=>(new s.scaleXYConstructor).Zt({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.eD,y:this.sD},i),d3:()=>new eh({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.eD,y:this.sD},i)}}setWidth(t){return t instanceof Array||(t=[t,t]),this.cD(t[0]),this.dD(t[1]),this}setHeight(t){return t instanceof Array||(t=[t,t]),this.mD(t[0]),this.pD(t[1]),this}getWidth(){return this.Ar()}getHeight(){return this.Cr()}setBackgroundFillStyle(t){return this.engine.setBackgroundFillStyle(t),this.uD.Ss(),this}getBackgroundFillStyle(){return this.engine.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.engine.setBackgroundStrokeStyle(t),this.uD.Ss(),this}getBackgroundStrokeStyle(){return this.engine.getBackgroundStrokeStyle()}getTheme(){return this.Hs}setSplitterStyle(t){const i=this.oD;return this.oD="function"==typeof t?t(this.oD):t,this.MD(i),this}getSplitterStyle(){return this.oD}setSplitterEffect(t){return this.El.lD.ee(t),this.vs.Ss(),this}getSplitterEffect(){return this.El.lD.re()}setAnimationHighlight(t){return this.XP=t,this.KP.forEach((i=>this.vs.wr.eh(i.line,t))),this}getAnimationHighlight(){return this.XP}MD(t){for(const t of this.KP)t.line.za(this.oD);this.vD()}setColumnWidth(t,i){const s=this.nD.x.M();return t>=0&&t<s.length&&(s[t]=i,this.nD.x.S(s)),this.YP=!0,this.vs.Ss(),this.wt.emit("dashboard-resize"),this}getColumnWidth(t){const i=this.nD.x.M();if(t>=i.length)throw new uh("Column index is out of dashboard range.");return i[t]}setRowHeight(t,i){const s=this.nD.y.M();return t>=0&&t<s.length&&(s[Math.abs(s.length-1-t)]=i,this.nD.y.S(s)),this.vs.Ss(),this.wt.emit("dashboard-resize"),this}getRowHeight(t){const i=this.nD.y.M();if(t>=i.length)throw new uh("Row index is out of dashboard range.");return i[Math.abs(i.length-1-t)]}_D(t,i,s){if(s&&Math.abs(t.x)>0)this.wD(i,t.x);else{if(s||!(Math.abs(t.y)>0))return;this.AD(i,t.y)}this.wt.emit("dashboard-resize");for(const t of this.dF)t.panel.zt();this.vs.Ss()}AD(t,i){const s=Ay(this.dF,this.nD.y.M(),t,i,this.pixelScale.xi(),!1);this.nD.y.S(s),this.YP=!0,this.vs.Ss()}wD(t,i){const s=Ay(this.dF,this.nD.x.M(),t,i,this.pixelScale.xi(),!0);this.nD.x.S(s),this.YP=!0,this.vs.Ss()}kD(){this.KP.forEach((t=>t.line.dispose())),this.KP.length=0;for(let t=1;t<=this.eD-1;t+=1)for(let i=0;i<=this.sD-1;i+=1)if(void 0!==this.dF.find((s=>Or(i,s.rowIndex,s.rowIndex+s.rowSpan-1)&&(t===s.columnIndex||t===s.columnIndex+s.columnSpan)))){const s=Ua(new $a((()=>{this.CD(t)}),((i,s,e,h,r)=>{this._D(h,t,!0),Zh(r)}),(()=>{this.TD(t)}))),e=this.uD.rc(this.pixelScale).za(this.oD).setMouseEnterEventHandler((()=>{this.CD(t)})).setMouseLeaveEventHandler((()=>{this.TD(t)})).setMouseDragEventHandler(((i,s,e,h,r)=>{this._D(r,t,!0),Zh(s)})).setTouchStartEventHandler(s.onTouchStart).setTouchMoveEventHandler(s.onTouchMove).setTouchEndEventHandler(s.onTouchEnd);this.vs.wr.th(e,(t=>e.dn(t)),{animationEnabled:this.XP}),this.KP.push({row:i,column:t,line:e,alignment:"vertical"})}for(let t=1;t<=this.sD-1;t+=1)for(let i=0;i<=this.eD-1;i+=1)if(void 0!==this.dF.find((s=>Or(i,s.columnIndex,s.columnIndex+s.columnSpan-1)&&(t===s.rowIndex||t===s.rowIndex+s.rowSpan)))){const s=Ua(new $a((()=>{this.ID(t)}),((i,s,e,h,r)=>{this._D(h,t,!1),Zh(r)}),(()=>{this.FD(t)}))),e=this.uD.rc(this.pixelScale).za(this.oD).setMouseEnterEventHandler((()=>{this.ID(t)})).setMouseLeaveEventHandler((()=>{this.FD(t)})).setMouseDragEventHandler(((i,s,e,h,r)=>{this._D(r,t,!1),Zh(s)})).setTouchStartEventHandler(s.onTouchStart).setTouchMoveEventHandler(s.onTouchMove).setTouchEndEventHandler(s.onTouchEnd);this.vs.wr.th(e,(t=>e.dn(t)),{animationEnabled:this.XP}),this.KP.push({row:t,column:i,line:e,alignment:"horizontal"})}this.El.lD.Hc(this.KP.map((t=>t.line)))}PD(){const t=this.pixelScale.xi(),i=this.nD.x.M(),s=i.reduce(((t,i)=>t+i)),h=this.nD.y.M(),r=h.reduce(((t,i)=>t+i));this.KP.forEach((n=>{if("vertical"===n.alignment){const o=e(t.x*i.slice(0,n.column).reduce(((t,i)=>t+i),0)/s,t.y*h.slice(0,n.row).reduce(((t,i)=>t+i),0)/r),a=e(o.x,t.y*h.slice(0,n.row+1).reduce(((t,i)=>t+i),0)/r);n.line.Ua(o).Pa(a)}else{const o=e(t.x*i.slice(0,n.column).reduce(((t,i)=>t+i),0)/s,t.y*h.slice(0,n.row).reduce(((t,i)=>t+i),0)/r),a=e(t.x*i.slice(0,n.column+1).reduce(((t,i)=>t+i),0)/s,o.y);n.line.Ua(o).Pa(a)}}))}CD(i){this.KP.forEach((t=>{"vertical"===t.alignment&&t.column===i&&(this.vs.wr.ih(t.line,1),this.uD.DD(t.line))})),this.jP=this.engine.setMouseStyle(t.MouseStyles.ResizeColumn),this.vs.Ss()}ID(i){this.KP.forEach((t=>{"horizontal"===t.alignment&&t.row===i&&(this.vs.wr.ih(t.line,1),this.uD.DD(t.line))})),this.jP=this.engine.setMouseStyle(t.MouseStyles.ResizeRow),this.vs.Ss()}TD(t){this.KP.forEach((i=>{"vertical"===i.alignment&&i.column===t&&this.vs.wr.ih(i.line,0)})),this.engine.restoreMouseStyle(this.jP),this.vs.Ss()}FD(t){this.KP.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&this.vs.wr.ih(i.line,0)})),this.engine.restoreMouseStyle(this.jP),this.vs.Ss()}setAnimationsEnabled(t){return this.bs=t,this.getCells().filter((t=>t.panel instanceof Ml)).forEach((i=>i.panel.setAnimationsEnabled(t))),this.setAnimationHighlight(this.bs),this}getAnimationsEnabled(){return this.bs}getCells(){return this.dF.slice()}dispose(){return this.Ye||(this.dF.slice().forEach((t=>t.panel.dispose())),this.UP.slice().forEach((t=>t.dispose())),this.rm.slice().forEach((t=>t.dispose())),this.Ye=!0,this.rD(),this.wt.emit("dispose",this)),this}onDispose(t){return this.wt.on("dispose",t)}offDispose(t){return this.wt.off(t,"dispose")}saveToFile(t,i,s){return ml(this.engine,t,i,s),this}BD(){this.$P&&(this.kD(),this.$P=!1,this.YP=!0),this.YP&&(this.PD(),this.YP=!1);for(const t of this.dF)t.panel.Nl();return this.UP.forEach((t=>t._e())),this.UP.forEach((t=>t.Nl())),this.rm.forEach((t=>t._e())),this.rm.forEach((t=>t.Nl())),this}Rt(){for(const t of this.dF)t.panel.Rt();return this.pixelScale.x.Rt(),this.pixelScale.y.Rt(),this.uiScale.x.Rt(),this.uiScale.y.Rt(),this}zt(){for(const t of this.dF)t.panel.zt();return this.pixelScale.x.zt(),this.pixelScale.y.zt(),this.uiScale.x.zt(),this.uiScale.y.zt(),this}addUIElement(t=Hu,i=this.uiScale){i=pl(i);const s=yl(t,this.Gx(),this.uiScale,i,this.JP,this.Hs);return this.UP.push(s),s}addLegendBox(i=tl,s=this.uiScale){s=pl(s);const e=yl(i,this.xm,this.uiScale,s,this.gm,this.Hs);return e.setDraggingMode(t.UIDraggingModes.notDraggable),this.rm.push(e),e}tD(t,i,s,e){return i>=0&&t>=0&&i+e<=this.sD&&t+s<=this.eD}iD(t){const i=this.oD,s=i===th?0:i.getThickness()/2,e={left:t.columnIndex>0?s:0,top:t.rowIndex<this.sD-1?s:0,right:t.columnIndex<this.eD-1?s:0,bottom:t.rowIndex>0?s:0};t.panel.uo(e)}vD(){this.uiScale.x.yi([0,0]),this.uiScale.y.yi([0,0]),this.pixelScale.x.yi([0,0]),this.pixelScale.y.yi([0,0]);for(const t of this.dF)this.iD(t);this.vs.Ss()}}const Cy=(t,i,s)=>{const e={...t,columnSpan:t.columnSpan||1,rowSpan:t.rowSpan||1,disableAnimations:void 0!==t.disableAnimations?t.disableAnimations:!s};var h,r;return e.rowIndex=(h=e.rowIndex,r=e.rowSpan,i.numberOfRows-(h+r)),e},Ty="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAACXBIWXMAACxLAAAsSwGlPZapAAAE7mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNy4yLWMwMDAgNzkuMWI2NWE3OSwgMjAyMi8wNi8xMy0xNzo0NjoxNCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIzLjUgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMi0wNy0yMFQxMjowODo1OCswMzowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjItMDktMDdUMTU6MDc6MjErMDM6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjItMDktMDdUMTU6MDc6MjErMDM6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjIwMGQwMzM2LWEyOTktZjU0YS05MmYzLTg0NzlmNWM5MzEyMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyMDBkMDMzNi1hMjk5LWY1NGEtOTJmMy04NDc5ZjVjOTMxMjIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyMDBkMDMzNi1hMjk5LWY1NGEtOTJmMy04NDc5ZjVjOTMxMjIiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjIwMGQwMzM2LWEyOTktZjU0YS05MmYzLTg0NzlmNWM5MzEyMiIgc3RFdnQ6d2hlbj0iMjAyMi0wNy0yMFQxMjowODo1OCswMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIzLjUgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ptd9sFgAABOuSURBVHic7Zx7dFXVncc/55x77r1JIBBCSIhAkiYoQkArUhCrtrRVBHWm1WpptdbxMV1o26mOnXb6sEttq7aOVjtabWdq2/FZ2ooMY2tFK1YlgLwfCYQYkEdISEJCEu6957Hnj98+9557c8NjtY6sWfzWOuuce84++/nd399v/377XEMpBcAll1zCEFIEXGkYxidM0ywxDAPDMLISBHn4vo9SCqVU+tr3/fSR+9v3fTzPw/f9d5VSi5VSS3v6DL70qX185fN7YWCoKg0hBvx59zfZ0z+DiJk4zpffcxkNXIf0pwJeBt54X2sE44D/BD4PtOl7FcAvgWuA9uPJ7KqrrkpfR46S9gzTNH9pmuYZpmlimuYgUAFpMJmmmQaMYRj4vg9AAMbgdz7xff9GpdQS4Dql6Aw9GgZYQM9RW2aAr47WpPdN5gB3AY8DhcAS4Ebgt8g4VCGD2w+MAlJAn363DDiAALIUSOh01frcodOV6PdGAHv1vQ8AXcDBUF3G6XSTgTqddyD1+l4MOAXYg0yGglC6QmBkqIxBkh4Fy7Jyn401DGOJZVnjLctKgyofW4WPgIWUUscEqCAPANfj0oGk9RQwF+noawEDeCTvi2bo2oDGzktpP1xPxEwesbz3SWYBvwO+rH+PBc4DmhHWiABR4B912krgnxCWuxeoBTzgBeDbwBeA04A48BDwH8Bv9HsbgO8C9yOgjOp3lgI/A2YDvQh4VgBuqJ6nA+XAkwgAnwD+AvwQOBsB9+/08fhQjU0DyzTNrAeGYXwjANVQwMoFVC6YgrRyMvSRLb6ClGuQchSjhif46FkHLvzkBZ1vkWIa8LTu3EPZlRNmaj14Pnv7P4hpeHgqyu6+GRiG0m0/4eQMoFGfJwEfQgD1K0T1PA7cgoDhXgR0ceCrCGOMBq5CQHOJzuNfgGnA3cBLwFTgDgQMv0c64nbgIgRodcC5CHv6Oq/ncuo5C/gTcD0wAXgFAd9IhC0vBoYjQB5S0sCKRLJUSJFpmpdZlkUkEiGsBvMBK2wzBWnC6XzfwPMVGCoLwEqBaSjOPrWXOdPb+ci0TsrHpcBjJoovE+XhrLmEdFVP/ym82XYbnYm69E0DpZnqhARVFBmksQiguoCbgK0Iw/ybTtcC2MAmxAT4HjKwqxDmmgt8CgHNIeAfEBb7bwRohxBG8hHArQFu0GleAeYjTBSosH26rEAMBPi36zom9bs7EWa9BrgaAZ13pAan0WTbdvj+KNM0RwXAsixrEGDysVQ+UBmGQV8iwsVnrqeo0OapV2spiCZRymAgGeHSD7XwrRt2ilqzoKstwt2/ql5dEPUerq/rZ2pVP7atQIGvfOx4BVsPf4Oe5Fhs83it+/dNJiFGcT1iswTTZRRiI92PgOzbiB3WBExEwFGDgOpB/Xw3wnxjgOd1useAzyJg8BCAbEXUXZDmfuA24IvAu8A5Ov+1oXqW67p+Ved/DcJWTcBbyAT4JrDuaA0eCljKNE0ViUQGMRYMVoFiV/kYhpcFLMMwSLkRRtjbuGH+dgwjxrJ14+g+ZGFaJl7qAJfN2i3d4MO2HUX86+N1bGwpwDIVv10OhTEfwwCFwnUcPn3lAiZPHott9pNPtZ6gEgd+gcz8sHQBlwJfQwzxWxFjHoRZtiPgeAP4L8SWAlGZX0NWc1v1vX5EtYLQ9jXA13WaVQhr/ghZCH1S5/1DhLUCGQE8gADvcgRUd+ln3Qij3n8sDTYCw/n6668P3x9nmuZm27aLw4wVSLZdBYeTYKgU4OF5XuBCwFcGTduaue/6Vcw5zwUFz71UxyNL60kM9FI9aiPPfK8DTNi6Yzi3/HgKnT0mMdtZrRQzpCwpM5VyqKmp5uqrr8b3vbTBf1Lec/k7hOWqERX45lAJw+6GtMFj2/YxHQGL2bZNxC6gqyfF+RP/zDmnbcfxY5imiWVZ2LbNxs3vMO+DG5hzvguHgRRcOruV2opuWlr38pk5PTKPDFj02il09MQpjPtARqWaZnDArFkzsSzzJKj+b2UjYuBfwRFAlStDGe9pcORjLNM02d/Rx+6d6/n8R1dy1fwetu6YwBtNkzENWUW+va6REnszX79uQExAAB8KRrjMnriBFauiXDTbARcOdtmsbBzFsLiHYZh6ZZcRx3Goqamhrq4Ox3GOu2dOyl8lLfo4LhnSjxUAy7bt9DPLskgkkqxe24zT08CdN7RwzgwgCTVlbZSPPER3/wgaGzfzbutWXnygj8JiJWwVSALmn9NDaXGMgiIFJry1ZTT7DxYQt1N4nthmYVYyDIOZM2diWRaed8TFyEk5QeSIwApUXjQaxfM8du3aw8o1Wzmrags/uHU/ZeWkwy7xohT143fz0+c7Wb1qI9//4gBnTXcyvmMDMSk9qCjz+fuPHRbfbwSWravANBlk+AO4rsuECROora0Ns1UR8A1Ekf4AMSzD8jnEH/ME8PZR+qAcMYTfAX4yRJpPI36lx8leng8lBvDPiOf6Po7goT5O+SCymhuNuBQMJCLxKGL/1AHfRxYFf0tZCJwK3EMm9APSvuHIqjFLzQzpIA3bSr29PWxpfIe9e3Zzw9xmFl6+X5oUZiITqkaspqFhGBfNcrnlswOZWJ+BrEU8XbyvDxve3VPEhndKiNl+umphxvJ9n8LCwly2qkOWvYcQ52Cu3I74Y54/Soeh090KLGJoYH0FcSz+8hjyA3Ek3ou0/N5jfOdIUgD8O+J2yJXNiJP1AaSHv/03KC8sFnAn0qa7QveDCMF+neYeyITihgysGYaB4zh0dHTQ+m4ncfMA9y9s4sNnd4jNlBulcWByVQ+zptjcs7CPSFRJRAsgBo8+PYyPn51gYo2b8eJY8Nqmcg4NRCmIJhlKy0UikVyDfbI+v40sx8NiIt7nOLJcDqQAiXEpMvzZhYQwQIzUEn0dMGAE8efUIMv5XmRJ3od4ooNKGfpZQKkOstzvRmb4MOmFdNkpcqMJIiN0mUE6R+f7IAKq3QhTbyMTyjiAMEccMa7jup0HyTgxLZ13IAYy7cPUMFKnAxndbkQj1Ot+CZh6GBJemqnTDUPY/grEnwaEVoVB6EYfllLK6unppaPLYVp1Fw/d3MCHp3dIVfKF/jwYORx+dcdBJtemMqCKw7pNcW5/uJglbxRI9+qS3cMGyzdUYEcGZxhWi5WVlbmMeqY+b85Tk8AZeC0ChmJEVbQgzsmdupP+gHRwAKzvIAPXBLxIJoTShHjHi5AQyCPAdJ1Hi36nFViPOClBQiZ3AucjIPk94tTcjfiIGoGf6zzR+b2k67YH8XJvRlR0DeI9d4HPIP6slUADMnGayUy02bqMFsTrPlff/5i+Hxy7dP1v088rgNUIYIP+uRsJA72O4KRe1/123TcNul9ORQLqY8KDkB4t04qnD9u2I4qInXKjXDy9ke9e8yqnlPdlwDKEGEDVeDczT0xwEhZPvX4ew4tH8tzLNskeU0qNwNbWkTTvK84LrKPINH3OZ+9MQWaUq6u0CPHD7Edm1ItIR6aQQZ9KJrD6W/3eXIRxNur3QTr+h8CvgbN0Hi3AU8hAn46wCcAMZFfBQWQqzUZY5DfAYgTs1yNquAoB1ScQxnkMAWo5MsiXIj22mqG32UzR59eAZxCn6TQyarENAcp39PGkrt99iPe/WvdZC+JErUScqOsRAIFMxB/p/msELgD+iMRzb0FYKy1pYJUUdlNS1M3weC9Jx3Ys0+Wa85dx3YWvE4u4GZIPS4zsHQaQnc6G59+oZ3vbOD50Vh3Ne4t4eaUtZG3AK+srSTkmxlHiezkLizgSdgDYkid50MmvAxciA/YKMthfIRM8Xa1rPwkxrq9EvNQ/DYpFGCro2KeRQfkDEuUH+BbCJjfq34FqCRhkFTJghcCrCIsu0PUBMSq+iQzubcA8XccgzNKIqBw48t6tYKLdjgD2i6H80e14EgnLrACeRbbaBBH7oD+fRmy1TsTMeJbM5P2xbv8KhFWfQQBZp39nBbPTNtZXL3wUDEi5Ud7trBwbtxNWdeVuAUq+cS+EJS8VUjvOYfJEZzDwbGjeOZrnG+qxrQSWXUht7USe/OMh5s9J0t9rs6JxDNGI0Fuu0zPw7kejUSoqKsKG+wRgPGIjbMtTs3p93gxcpq+fIFPD2fq8FrFNRgHLQu+fps8b9XmWPjeG0gTAadXniaEyg+cKAf55+l4wCUydPthTdTECyPDCYDpicOxEGA1EDeUTE2FLBxlgyABlPWIn/R4Bba5sR2ypM/XvnYj9OFnXDWRChtsayAsI0xaSZxWa8bxHXGzLpSg+cNGk8c2Lqst3W2llkSsFsPiPMRbcMZJX345J1XNydVIWv1g2k0TKwjR8XNdlXGUpze21tO6ATe+UsvdAIZbpp0GVe8691jKJjJE5Ok/tApupiRy9ryVgtA2h62BWGvqe0u+DqErIAGM4Yld0ILZKOM1aRM1VI6q3DXERhMuoQNRQM5nFgE9mLAoQltuDMGl4gHP1A4jKrEFU0X59L2CwBkSlzUPU1hRk4gQM26zPZ+jzdsSQadflluj0XeSfxAmGcG1kVoUyfhaKB/EZly8xADFYv30Sd/66iFRyF29sjHGz05edxobFf5nK1l1jiNmH8X0dtPY9ho0Yz5KGNvrdMag0Ew8GVcBYsViMWCwWBlighgL18hpiL3nIkvwDyIDtQtTdFUhUfhZC8R/WHdJMZhYH7DQa6ch9yMCaZMB7D2KHbUaW3m+R8dKdqc/r9Ps2MkgKsccgw3jB7swWXU6TbtP/ICpyOLLSegux9xYhKv1zCGB2IRPARFTXRp1fIxnrNgDzZv0eCDN/UqeZHmq3gUyMPjITJZARZFbKDyL21Yscg+S6G8oQwy2/xGBN00SeeO0ipk4boKPjAKu3DNCx36KszJNuiMIOrQKjdnLQ/veiuOKVTfW4niJuu2nQwWB28jyP4cOHM2LEiPAu1BJkJispjQt15+xDBsFH7AMH2Q1wGmJn3Rh6Zxuy3A9AGLDJOKQVq8iozp8g20jmI53fqc+B7QWiUrsRVpurnweujgqEuYKwSOC6WKXrc6Ou5xn6CNg4YMifI+C+FlGhAaMaCLDG6fxW6vQ2Mo7tyArwGWRj4DSE9ZRuY69+ZxRiizWQvX0ZRP0+ijiIv4So7GMCVnp3A28bIF7d/IHGGLzdWMvPXr4QX5nEYyatra38eXkDT9/Vy/yPJSAJjmfx3Sfn0rinlKiZxMv+aALf93BchfJ9lArthMhK469WSs0I9notWLCACRMmBJ73AsSAz9WRDgKqUt3R3Tpt4IsqQlZYd+vOXoAMWBRRIZ7OdzQCjHAnlyAD2Y8MfCmiAgI1VUEG3MXITA+eVyIDGXyYEDzvROxEU5c7Rj+7D9nxeSWyigwkioDA1G03dZ4xXb8DyMCbOi+lnyudplTnE4ASRJ37utwkQ3++Uqbz6DpCmiN+THFq3jdisGpLDY+9NAdf+UQsh0TCoLKyknHja3h55Sbmf1ya/vyyejbvKqMgmsDzsr/IkUNh4ON6Dq7r4nkeiYT4MaLRaNZeL4BkMklDQwMTJkwIanOYbMderuzWZwPxr1xAxrVQhHT293WaAznvJkLvhyU3ZJTbueEwRy/ZTtvccE74eS2yeo0iE6MIUYV/QnaFhiWVU04gDhmVDAKU3HTJPPUIS277cqXjKM8HSS6w6geliEHDpmoe+cMFKOUTsVzc0HbhqVNOZfOudvz+d9jZMZrfrZhCNJIcBKgwYFzXpby8PB3knjRpEu3t7SxfvjwrLch2nm3btrFz506qqqqOZ3eDiQzQBjIzfA9iJx13tP49Eg9Zpgfsq5D6PsuRJ88JL7nAOj3rVxzWbqnkxy/Mxscnarm4KnvDXzwWIVY8mTVN7SxddxaHEwbRiJNWgfmOZDJJTU0NY8eOpbS0lPXr1zNv3jzWrVtHZ2dnVqwwCC2tWLGCqqoqjkM8/jZxuvdSWpGPRf7fSSTnui79Kw5rtpRz36JzSHk+MTuJ68lqN7xF2fM8ioYV87NlF9DVNwzbSuJ5+T9OzWWtRCLB4cOHaWtr44UXXsDVVBhmLKXUX8NaJ+V9krBfpBK0m8GG1RvHcNeTM+gbUBgqheO4OI7YRcE5ODzXof1gEb7nprcmZ21Rzvny2XGc9AeuixYt4tprr2XNmjV0d3cHn46Zud8rplIp3nzzzbwfzJ6UE0/CwKoGirDgQFfs9e89Pe1A34CBaaSygOR53iBweZ4HyskLptxVn2VZlJSU4Ps+lmXR3t7O0qVLWbhwIUDwsWsiF1i2bdPY2MiOHTuIRnM9siflRJMwsCQMYLP0zU1l89o67bWWmcJ1sxnIcZxBrDTUkctWjuNQVlbG5ZdfTl9fH0opbrrpJlauXIlSitLS0gBYr+dTo77vs3jxYnp7ewftHzspJ5aER+c8YDmKK9c2j+xTvvtwWN3lMlYYQOHfYXbKBZdSip6eHqqrq7nsssvYt28fruty8803U1xcTH9/P0qpXqXUY/kqG4lE2L9/P2vXrj3JWie4hI33Ncj/CgwoFAq1xPO8O5VS3wlWafm2DgeSG4oZ6vP7zs5OHnroIYqKimhpaSEajVJZWUlnZyf9/f0JwzC+QM4WjKwKRyI0NTVx7rnnDtobf1JOHAkD64HgIoCMUuoO13W3GIZxq2maUw3DKMj3xyBhyQesXHC1tbXheR6madLf38+WLVt6gb+YpnkX2bs+B4lhGCSTyaz/hjgpJ578LzXVOI5QBFhrAAAAAElFTkSuQmCC",Iy="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5goDBwssgK9G3QAAEq5JREFUeNrtnHtsFNe9xz8zsw9717s2Zv0Ib0LBJEAOIQkl0Eua3Ju2N6LcNmracG9VqWpVqWrzb1QpUh9qm6pKpVaR2ihR1fSPKgVKm5oktzeBAMmlkIILHGxMCGAMfuHX4rV3vd7HzNw//Ju9441NTJq2AXGk0T7mzJkz5/c939/vfH9n12AW5aGHHlpqmuYi0zQjxmRxAQzDwHVdAFzXnXI4jvOu1xkOw3Ec13GctOM4nceOHeviBi1a6zrgDsABTKBVKTXwT+7TfGAt8CellCPffQRYqpTa837bDbxXhS1bttxrWdYK0zQLlmXlAFfAVQKU9+oHkWmaOI5TAp9hGFMOrwhIDaAWWLpmzZq21tbWY975tra2EFANJFevXm1f59haA8wF2uWZPqG1blZKjWmt5wEx4LxSqqi1rgXGlFIFrXUIqFBKjYrh5yqlhrXWVcBCoMd3LgpEAVMpdVlrXQPcAnQppdI+QDUBw0ACwAOVlFogqLVeDEwopfrlXqbvPjEgrJQaumZgbd26VVmWtdKyrGHLshzTNEuAmomtbNt+F5gcx5m2fcMwsG0by7IAcplMxrp8+bJatmzZ2PPPP9+1cOHCNZlMJgK8Dbg3AGnFgf1KqUExzmKgRmu9FFgGZIEmrfVeQAFdwDngE8Jwu+WalVrrd4BbgXFgqdb6mFLqMvAQEASOa60rgI8AGanzFjAKfBrIAY3AAuB4WT8rgBpgKdCgtT4MhICVwMtaawv4d+AIcG3A+sxnPlNlWdaKQCAwYlmWa5qmYZpmCSzloPLYygOSx1Z+EE1MTGBZFpZl4boupmlimiYDAwOk02mjsbHR/uxnP5vcunXrbbfeeus9uVwuHQwG32hqakrdAG6wQsZ7kdZ6DrAE6BF2aQKalVJ5rfWnxIBJwNBaVwN1QKfW2pS6F6VOVsDXKGBLC6heEhb8L6BT6iwAbgcmgLTn5rTW/wn4mcwUUB1VSp3VWi8A7gIOiWcBuAcYUkp1XrMrDAQCtwQCgVAgEJgIBAL4QeUv5THUdO4uEAiQTqeprKwsMZppmgCMjIywfPlyHnzwQdatW2c0NTXZhmHE2tvbL23atOngDRRi1Yhh4uJqssCfgbuBlFIqL/WCwkJXgNXAYuB1YI4w1xDQIXFRh9Q/JyBdCgwKqBrlfpelTrtcuxFoERCF5F7+iVsNVCqlzsrnSmHLJJDSWn9M6rz2vmKsUCgUDAQCBAIBLMsqsYtXPKbyx1KmaZaA4xXTNEmnJyfEt771LV544QWOHTvGnDlzyOfz2LbN448/zqpVq5iYmCCXyxlPP/201dzcfOEGi92XAwWl1P4yJusClmmt7xX2soB3gLC4w6NKqUsSUN8OPCPMNgrUAyMSIyWlDQ8kKTlXJyAuSqx0CdgkrnQ54Cil/MCqF/f8McCWOgeVUrbW+oqAe7tSqnC1hzVnOhEMBp1gMOgGg0FCoRChUIhgMDjl8IAXDAZL7s4DogfGSCRCR0cHn/zkJ1m/fj33338/tm0TDAbp7e1l5cqVLFmyhKGhIVKpFN/5znf49a9/7RSLxegNBqxLwNHyL5VSfcAeiWFGgZclkC4A/+OxC3AGeFEplZXPeyVOmiPXIax0StrNSrseC43J938FTgpw24D/LetSCnhZmK4C2KuU6pBzc2Ul2/NeD2vMdOIrX/nKymAwuC4QCIz5XaF/Beg4DuFwmOHhYYrFYsnV2bZNsVikurqa/fv3s2zZMp599lnGxsYIh8P8+Mc/5vjx45w9e5annnqKLVu2MD4+zo9+9CNefPFFFi1aFDMM4+iRI0fOcrN8GOLDlSKTjAL7fG77fTFWiY3KGcqyLKqqqqitraW9vZ3Kykq+/OUvE4/HyeVyGIZBIpHg5MmTDA4O8t3vfpdisUg2m8WyLD7/+c9z+vRp5s+fz/33308ul6Ojo4NDhw6xYMECAoFAaXFws3woSo8w557ZgOq9gnc8NxgIBEorQcuyqKmp4cKFC+zbt4+NGzfy2GOPUV9fT0tLC52dnTQ0NHD+/HkOHjzIs88+y5IlS+ju7sayLEZHR1mxYgX19fVs2rSpBMa//OUvZDIZbrnllnfFaTfLP7copcY8V/o3C6SWZZXA5b2PRqMUi0VeffVVWltb+epXv8rXv/51stlsaXXX0dFBX18fzc3NbNu2jc997nP09vaWAn/btslmszz99NNUVFQwMjJCoVCgpaWFaDQ6RZ64Wa7fclVgeYCqrq7Gsiw6Ozt55ZVXcF2XZ555hs2bN3P58mUKhQKhUIimpiZ2797Njh07WLRoEU8++SQjIyPYtl1yofl8nnQ6TVNTE4VCAcuyOHnyJOfPn6e6unrWoNJaN8hS/ZxS6kzZuSCwCSgCh8pU5enamgesA/4qwfR0dT4q43X4vdqT+lXAx2T5/9cPKNYJiuCZEAnBASLAWdGcNotaf/wDjrEMYIN8fEsp5frOzZeVbK9SqviewDIMA8uyqKioIJ1O09rayltvvcWGDRv4wQ9+QHV1NV1dXSWZoVgsUl9fT19fH47j8POf/5xoNEpvb28JqJ4rdV2XTCYDQDQa5ciRI+RyOaqrq7Fte7bgmidaznRAqJRUR/9sQCBa0UrRlaYbWFOAd3GW7SHSwaJrdSFXMW4t8ICIocMidHq62GkRYO8G3vo7EdBdAmBX+lMJrBJQ5WTFeHw2KR3XdV0GBwdpa2tjcHCQxx57jC9+8Yvkcjn6+/un6FqeWHrPPfdQV1fHhg0b6OubtHltbS0HDhxg586d/PSnPy1pYKFQiKGhIU6cOEEsFrvWh40Cg0D/NOfs8nSDgKNWFiyODEhWcl+VQC8Q0VoHRPO5ItfFBKRZEQgbRR+ypT1bDGwAw0opL5+ZA94Eun3AsHyr8azELuXqvDcQjtgnKcy7WTSpN4G3RcsyAEMp5Witb5XUTVZrnZDnLPVHax0Wkdbf3zFPvpA0zRy5zgRySqkrWuuIpI4ywKjv+efI8xTkc2hWrjAcDgdyuZxx7tw54vE43/jGN1i/fj2pVIpcLvcuUAEMDw/zyCOPEA6HGRwcxHGckv71y1/+kjfffJNvfvObrFq1iuHhYaqqqjh8+DDd3d0kEokZc4ozUHO1pCLSMzDQfaLjDEtaYqPM7qIYPSKz+5QMigv8q4xJUWv9tuhOd4pIOADMZzKR/KJc/28ysF4Z0VoflMTscmHUnQLqB0UXMrxZrrVuVUppeabbhRVCYvys3OMPMokWAO1KqZO+oNrl/3OocVHRbxdhtbw/q4B/ERAYAp6s1vqIUuq8uNdPyfi4gKm1PiKT5zaZpIuk7d9L/7IyEUJl6v3MwHIcx0wmkzQ1NfGFL3yBhoYGhoaGSmq7Pxbz3Jdt24RCIRzHIZ/PYxgGsViMffv2kcvlANi+fTs/+clPME2zFLS/j2C9SgZyptVKjbz2yYx7SDSYN2TwF4rRBwSkCXGpZ0Q4XC0GOgNoGehlwGExzKAANS/gHBfQ3c3kToIhmdF5ue8cmQjtwAUByjpxv1prvUhAeo7JhPuEANiS9yuFwS5eZUziUueITByvP4ulP6fl3h6jeq51NXBeQFwF/EkmyzZR4dsEOEuZzBeOSXtV8qxvSz9X+b3HjDrWxMREbt26debXvvY1amtrSSaTUwBg2zbRaJSKioop6Z1isUixOBnDVVVV0dPTw44dO1i6dCl33nknL730EhcuXKCuro6uri7a2tqoqakptTHLUi0Plpoh5omLC5kQYc8EXldKnRXVuCAzMylt1TC59aRbZu+YGCAn6Q6PGc4ppby4rV7uf0Yp1cVkohcf0OPAFWGVWjFOh1KqRyn1jhg/JQH5XWKUV5VSHUqpXpn0KR8IRr30zQwxYC2TyeWzSqlLPhBmfUp8WPpdJ+yZFRfnjaktz9Erk+q8UspjOEfavqyUcsWNt8gkqQRaZ8VYDz/8cH1DQ0Petm3Gx8ensJRt2zQ0NHD06FG2b9/OE088UYqxPGU+GAximia/+93vSgnoO+64g87OTv74xz/yxBNP0NLSwvDwMA0NDSXWm2WJy8AkpxnkChmkYVk5LQAueVtVfPmwlOS/5spMz/hWXrVAUik1IfUbgQFfvBITYF8sa7MADEqcFhcG8oCRFaAje6SqmUwiR+XaFl/7UbnmrLRZKUYfv0q8GZ+hPz0yJv8h7aTleQ0ZnyFfH8eAoFJqHGj2jUeDhALl+tawjPN7K+9tbW2h06dP39fY2LjQtu1MPp+fAirHcairq6Ojo4MvfelLbN++nZGRESKRyFTLx+O88cYbnDhxgkQiUVLeV61axfHjxxkYGODUqVOEw+EpbFX+ehVgTQB1EpSWn6uS2Z0Tmq6UVYw3u+cwuXvAy39N+Jgm5rGN1J8j342X3SNSFlfMATJKqYy0WeG7h2e0tO8eETmf933nB0qVMJAj7FoJ3CqgRWttyLN49SNljFYj16fErTcwuRdsl1LqD+Li475r5gAjAirKnivmY7b3rWM12ra9zLbtwUnPZ0wBVSwWI5VK8atf/YrR0VEcx6GlpYVt27YxNjaG67rEYjF6enpobm4uiZ6u65LL5UgkEmSzWZ5//nkGBgaIx+PXBCoZzHkyg5cA9VrrjBhCC5gSTO4kcGX3wF3Ap7XWw+LSLN9MXSzGTfuAVudL/noDsEhrvQU4KEb2YjxvVi/wgc/bDeox6kLgsi8dUi/ni0qpca11L3Cb1jou/Qj4gmMvAd0A3MvkvitbSKFCa/2iAMtbzCDgW+i7PiostUI0O0fas2VxE5SY7OR06oA3TtK/E+KqrzlXGBXjvEtKiMVijI+P84tf/IJQKMTDDz8MwOHDh0tbZ0KhEIZhsGvXLsbGxohEIti2PWWHqWVZHDhwgPHx8ZKu5e3r8h8zpTF9gfZpeT8urJOX4x0JsFFKHZLVYZ+4hgqJNTyGugKc8Yl7jrigfrk+KfpWv1xryj3e9rmBkAD1HflclEDdM1q/BMheyctq1GOB/5ZFQMrHTrYHFBGA90j7Y3JdRoBbkD6f9k2WsLz37nlSJp0nKSRkvNokVopIbHVpGnc3KJNpUOrNapVlTOMK18sKKF0Oqmw2y3PPPUdvby+JRIJ4PM6uXbsYHx9nz549BAIBYrEYe/bs4Te/+Q1z584t7YKwbXvKa6FQKLXt/16OmG3bR48ePfo3724QF1gQQAaBj8oKZ5eA5u+9M8DwK9XTnLcEmEXpX4VIEy7wB7+a/c/q4weV0on6lqQ4jkM8Hi8xVU9PD4lEglwux9jYGA888AC//e1vOXToENu2baO9vZ3m5uZSzFX+qxyPjQKBAMlkEsdxyGazJcabO3duSZr4gNTqrWKkvBjOAt74R4DKpzVdrSwTqSElzFMhHmP/PwJUs+zj3wYs+UVMVGYPjuNQU1NDJpPhZz/7GT09PTQ0NJTYJp1OE4/HWb58Oe3t7ViWxY4dO0ilUtTV1VEsFt8FKM/tZbNZNm/eTDKZZN26ddTX17N//35ef/11qqurP6htM1nggG+iGBKgjn6I8rX9TG7oy/sU8X6lVI7ruASmER4rgIIHqnQ6zVNPPUV3dzeNjY3k81O34ySTSRYvXgzACy+8QGtrK7W1tVNANd2RyWRYu3YtiUSC7u5uent7efTRR9m1axexWOwDAZZoN50fZgPIqu26/7HIbIAVdBwnV1NTY2QyGfeHP/whly5dYv78+SU1vXylWFlZSX9/P+fOnSMajZaCdD9blQPLMIyS8r5y5Up2797N3r17mTdvnlf/5r6Z67iUrwpjrusSiUTCyWQy/L3vfc85e/YsdXV15PP5kqpeKBRK723bplAokM1mS9uXve+nYyrLsrhy5Qqjo6MkEgn27t3LwYMHefzxxzl8+LC3e9Rwb24hvaGAFQVikUhkYOfOnWeOHz9eWV9fPwVIHmjK33s48INqOnClUinWrFnD4sWL6evrY+PGjezevZuLFy/y/e9/n66uLi8Wm7hpnhvHFd4SDodHe3t7//zkk0/aGzZsuK1YLAYMwyjO9BP5KUpamQ413f84dHd38+1vf5tTp07R19fHxz/+cerq6njttdd49NFHXdu2KxzHGXddd+CmeW4cxgqGw+E/3X333TZAMBh8u1Ao1Ni2bRSLRdf/Cxzv/XSHn6HKP0ciEfbv38/atWuZN28ezz33HLW1tTzyyCPuwYMHrUAgEHNdt/3kyZO5m+a5fotRJjckVq9ePeW3+Pfdd9+9pmmuME2zYJpmzvsTj+lYqzznNx1rGYbBlStXqK+vZ2Jigu7ubrexsdGorKys6O7utiKRSJvW+thN09xAwJqpbN68ealhGItM04yKKywF1v7/cbgauDxgeXHYxMRkCBUKhYxsNusWCoV0MBjsbGtr67ppluu//B9N0zw2U/fnYwAAAABJRU5ErkJggg==",Fy={translation:(t,i,s)=>[1,0,0,0,0,1,0,0,0,0,1,0,t,i,s,1],xRotation(t){const i=Math.cos(t),s=Math.sin(t);return[1,0,0,0,0,i,s,0,0,-s,i,0,0,0,0,1]},yRotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,0,-s,0,0,1,0,0,s,0,i,0,0,0,0,1]},zRotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,s,0,0,-s,i,0,0,0,0,1,0,0,0,0,1]},scaling:(t,i,s)=>[t,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1],translate:(t,i,s,e)=>Fy.multiply(t,Fy.translation(i,s,e)),xRotate:(t,i)=>Fy.multiply(t,Fy.xRotation(i)),yRotate:(t,i)=>Fy.multiply(t,Fy.yRotation(i)),zRotate:(t,i)=>Fy.multiply(t,Fy.zRotation(i)),scale:(t,i,s,e)=>Fy.multiply(t,Fy.scaling(i,s,e)),multiply(t,i){const s=i[0],e=i[1],h=i[2],r=i[3],n=i[4],o=i[5],a=i[6],u=i[7],l=i[8],c=i[9],f=i[10],d=i[11],g=i[12],m=i[13],y=i[14],p=i[15],S=t[0],v=t[1],b=t[2],x=t[3],M=t[4],_=t[5],w=t[6],A=t[7],k=t[8],C=t[9],T=t[10],I=t[11],F=t[12],P=t[13],D=t[14],B=t[15],O=[];return O[0]=s*S+e*M+h*k+r*F,O[1]=s*v+e*_+h*C+r*P,O[2]=s*b+e*w+h*T+r*D,O[3]=s*x+e*A+h*I+r*B,O[4]=n*S+o*M+a*k+u*F,O[5]=n*v+o*_+a*C+u*P,O[6]=n*b+o*w+a*T+u*D,O[7]=n*x+o*A+a*I+u*B,O[8]=l*S+c*M+f*k+d*F,O[9]=l*v+c*_+f*C+d*P,O[10]=l*b+c*w+f*T+d*D,O[11]=l*x+c*A+f*I+d*B,O[12]=g*S+m*M+y*k+p*F,O[13]=g*v+m*_+y*C+p*P,O[14]=g*b+m*w+y*T+p*D,O[15]=g*x+m*A+y*I+p*B,O},inverse(t){const i=[],s=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],u=t[7],l=t[8],c=t[9],f=t[10],d=t[11],g=t[12],m=t[13],y=t[14],p=t[15],S=f*p,v=y*d,b=a*p,x=y*u,M=a*d,_=f*u,w=h*p,A=y*r,k=h*d,C=f*r,T=h*u,I=a*r,F=l*m,P=g*c,D=n*m,B=g*o,O=n*c,L=l*o,E=s*m,R=g*e,z=s*c,V=l*e,N=s*o,G=n*e,H=S*o+x*c+M*m-(v*o+b*c+_*m),W=v*e+w*c+C*m-(S*e+A*c+k*m),U=b*e+A*o+T*m-(x*e+w*o+I*m),j=_*e+k*o+I*c-(M*e+C*o+T*c),$=1/(s*H+n*W+l*U+g*j);return i[0]=$*H,i[1]=$*W,i[2]=$*U,i[3]=$*j,i[4]=$*(v*n+b*l+_*g-(S*n+x*l+M*g)),i[5]=$*(S*s+A*l+k*g-(v*s+w*l+C*g)),i[6]=$*(x*s+w*n+I*g-(b*s+A*n+T*g)),i[7]=$*(M*s+C*n+T*l-(_*s+k*n+I*l)),i[8]=$*(F*u+B*d+O*p-(P*u+D*d+L*p)),i[9]=$*(P*r+E*d+V*p-(F*r+R*d+z*p)),i[10]=$*(D*r+R*u+N*p-(B*r+E*u+G*p)),i[11]=$*(L*r+z*u+G*d-(O*r+V*u+N*d)),i[12]=$*(D*f+L*y+P*a-(O*y+F*a+B*f)),i[13]=$*(z*y+F*h+R*f-(E*f+V*y+P*h)),i[14]=$*(E*a+G*y+B*h-(N*y+D*h+R*a)),i[15]=$*(N*f+O*h+V*a-(z*a+G*f+L*h)),i},projectionPerspective(t,i,s,e){const h=1/Math.tan(t*Math.PI/180/2),r=1/(s-e);return[h/i,0,0,0,0,h,0,0,0,0,(s+e)*r,-1,0,0,s*e*r*2,0]},projectionOrthographic:(t,i,s,e,h,r)=>[2/(i-t),0,0,-(i+t)/(i-t),0,2/(e-s),0,-(e+s)/(e-s),0,0,-2/(r-h),-(r+h)/(r-h),0,0,0,1]};class Py{constructor(t){this.OD=t}}class Dy{constructor(){this.LD=new Array,this.ED=t=>(this.LD.push(t),t),this.RD=this.ED(new Map),this.zD=this.ED(new Map),this.VD=this.ED(new Map),this.ND=this.ED(new Map),this.GD=this.ED(new Map)}HD(){this.LD.forEach((t=>{t.forEach((t=>t.HD())),t.clear()}))}}class By{constructor(t){this.WD=t,this.UD=new Map}jD(t){return!!this.UD.get(t)}M(t){const i=this.UD.get(t);return i&&i.textureInfo}Bo(t){if(t instanceof ke){let i=this.UD.get(t);i&&(i={textureInfo:i.textureInfo,refs:i.refs+1},this.UD.set(t,i))}else t.textureInfo&&this.UD.set(t.lut,{textureInfo:t.textureInfo,refs:1});return this}hn(t){if(!t)return this;let i=this.UD.get(t);return i&&(i={textureInfo:i.textureInfo,refs:i.refs-1},0===i.refs?(this.WD.deleteTexture(i.textureInfo.texture),this.UD.delete(t)):this.UD.set(t,i)),this}$D(){this.UD.forEach((t=>{this.WD.deleteTexture(t.textureInfo.texture)})),this.UD.clear()}YD(t){const i=this.UD.get(t);return i?i.refs:void 0}Bf(){return this.UD.size}}const Oy=t=>new By(t);class Ly{constructor(t,i){this.K=t,this.Et=i,this.XD=!0,this.ZD=null,this.KD=null}}class Ey{constructor(t){this.qD=!1,this.JD=1,this.QD=t,this.tB={K:e(0,0),Et:e(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),XD:!0,ZD:null,KD:null},this.iB=e(64,64),this.sB=new Uint8ClampedArray(this.iB.x*this.iB.y*this.JD)}eB(t,i){if(!t.XD)return null;if(t.ZD&&t.KD){const s=this.eB(t.ZD,i);return null!==s?s:this.eB(t.KD,i)}const s=h(t.Et.x,t.Et.y);if(t.K.x+t.Et.x>=Number.MAX_SAFE_INTEGER&&(s.x=this.iB.x-t.K.x-1),t.K.y+t.Et.y>=Number.MAX_SAFE_INTEGER&&(s.y=this.iB.y-t.K.y-1),t.Et.x===i.x&&t.Et.y===i.y)return t.XD=!1,t;if(s.x<i.x||s.y<i.y)return null;let r,n;const o=s.x-i.x,a=s.y-i.y;let u=o<a;return 0===o&&0===a&&(u=!(t.Et.x>t.Et.y)),u?(r=new Ly(Qr(t.K,{x:0,y:1}),e(t.Et.x,i.y)),n=new Ly(Qr(t.K,{x:0,y:i.y+1}),e(t.Et.x,t.Et.y-1-i.y))):(r=new Ly(Qr(t.K,{x:1,y:0}),e(i.x,t.Et.y)),n=new Ly(Qr(t.K,{x:i.x+1,y:0}),e(t.Et.x-1-i.x,t.Et.y))),t.ZD=r,t.KD=n,this.eB(t.ZD,i)}hB(t,i){const s={rB:!1,K:null};let h=this.eB(this.tB,i);if(null===h)for(;null===h&&this.iB.x<this.QD&&this.iB.y<this.QD;){if(!this.nB(e(2*this.iB.x,2*this.iB.y)))return this.qD=!0,null;s.rB=!0,h=this.eB(this.tB,i)}if(null===h)return this.qD=!0,null;for(let s=0;s<i.y;s+=1)for(let e=0;e<i.x;e+=1){const r=h.K.y+s,n=h.K.x+e;this.sB[r*this.JD*this.iB.x+n*this.JD+0]=t[s*this.JD*i.x+e*this.JD+0]}return s.K=h.K,s}nB(t){if(t.x>this.QD||t.y>this.QD)return!1;const i=new Uint8ClampedArray(t.x*t.y*this.JD);for(let s=0;s<this.iB.y;s+=1)for(let e=0;e<this.iB.x;e+=1)i[s*t.x*this.JD+e*this.JD+0]=this.sB[s*this.iB.x*this.JD+e*this.JD+0];return this.iB=t,this.sB=i,!0}}class Ry{constructor(t){this.oB=new Map,this.QD=t,this.oB.set(this.oB.size,new Ey(this.QD))}aB(t){return this.oB.get(t)}hB(t,i){let s=-1;const e=Array.from(this.oB.values());for(let t=0;t<e.length;t+=1){const i=e[t];if(!i)break;if(!i.qD){s=t;break}}-1===s&&(s=this.oB.size,this.oB.set(this.oB.size,new Ey(this.QD)));const h=this.oB.get(s);if(!h)return null;let r=h.hB(t,i);if(!r&&h.qD){const e=this.oB.size,h=new Ey(this.QD);this.oB.set(e,h),s=e,r=h.hB(t,i)}return r?{uB:s,...r}:null}}var zy;!function(t){t[t.Fail=0]="Fail",t[t.Success=1]="Success",t[t.Resize=2]="Resize"}(zy||(zy={}));const Vy=lr("font-texture");class Ny{constructor(t){this.lB=new Map,this.cB=new Map,this.nn=Vy(),this.OD=t,this.fB=new Ry(this.OD.dB||4096)}gB(){return this.cB.forEach((t=>{this.OD.mB(t)})),this.cB.clear(),this}yB(t,i){const s=this.lB.get(i);if(s)return s.get(t)}pB(t,i,s){let e=this.lB.get(i);if(e||(e=new Map,this.lB.set(i,e)),e.has(t.glyph))return zy.Success;const h=this.fB.hB(s,t.size);if(!h||!h.K)return zy.Fail;h.rB&&this.SB();const r=this.fB.aB(h.uB);if(!r)return zy.Fail;let n=this.cB.get(h.uB);if(!n){const t=this.OD.gl.createTexture();if(!t)throw new lh("Failed to create texture for font!");n=t,this.cB.set(h.uB,t)}const o=h.K,a=r.iB.x,u=r.iB.y,l=-t.offsetX,c=t.baseline-t.size.y,f=-t.offsetX+t.size.x,d=t.baseline,g=o.x/a,m=(o.y+t.size.y)/u,y=(o.x+t.size.x)/a,p=o.y/u,S=[g,m,y,m,g,p,g,p,y,m,y,p],v=[l,c,f,c,l,d,l,d,f,c,f,d],b={origin:o,size:t.size,advanceX:t.advance,baseline:t.baseline,vertices:v,texCoords:S,packerId:h.uB,texture:n};e.set(t.glyph,b);const x=this.OD.gl;return x.pixelStorei(x.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),x.bindTexture(x.TEXTURE_2D,n),x.texImage2D(x.TEXTURE_2D,0,x.LUMINANCE,r.iB.x,r.iB.y,0,x.LUMINANCE,x.UNSIGNED_BYTE,this.OD.vB?r.sB:new Uint8Array(r.sB)),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.LINEAR),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.LINEAR),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.bindTexture(x.TEXTURE_2D,null),h.rB?zy.Resize:zy.Success}SB(){this.lB.forEach((t=>{t.forEach(((i,s)=>{const e=this.fB.aB(i.packerId);if(!e)return;const h=i.origin,r=e.iB.x,n=e.iB.y,o=h.x/r,a=(h.y+i.size.y)/n,u=(h.x+i.size.x)/r,l=h.y/n,c=[o,a,u,a,o,l,o,l,u,a,u,l];i.texCoords=c,t.set(s,i)}))}))}}const Gy=t=>(i,s)=>s%2?i:i+t;class Hy{constructor(t){this.bB=new Map,this.xB=lr("font"),this.MB=new Map,this._B=new Set,this.OD=t}gB(){return this.bB.forEach((t=>t.gB())),this._B.clear(),this}wB(t){this._B.add(t)}AB(t){this._B.delete(t)}kB(t,i){const s=`${i.family} - ${i.weight} - ${i.style} - ${i.variant}`;let h=this.MB.get(s);h||(h=this.xB(),this.bB.set(h,new Ny(this.OD)),this.MB.set(s,h));const r=this.bB.get(h);if(!r)throw new lh("Failed to get font texture!");let n=0,o=0,u=0;const l=t.split(""),c=new Map;let f=0;const d=i.size;for(let t=0;t<l.length;t+=1){const s=l[t],e=Math.ceil(f);let h=r.yB(s,d);if(!h){const e=this.OD.CB(s,i,this.OD.TB());if(!e)continue;const a=r.pB(e[1],d,e[0]);if(a===zy.Resize){this._B.forEach((t=>{t.On.o=!0})),t=-1,f=0,o=0,n=0,c.clear();continue}if(a===zy.Fail)throw new lh("Failed to create glyph");if(h=r.yB(s,d),!h)throw new lh("Failed to get glyph after creation")}if(""!==s.trim()){let t=c.get(h.texture);t||(t={vertices:[],texCoords:[]},c.set(h.texture,t)),t.vertices.push(...h.vertices.map(Gy(e))),t.texCoords.push(...h.texCoords),o=Math.max(o,h.baseline),n=Math.min(n,h.baseline-(h.size.y-1))}f+=h.advanceX}u=f;const g=a(e(0,n),e(u,o)),m=[];return c.forEach(((t,i)=>{m.push({texCoords:new Float32Array(t.texCoords),vertices:new Float32Array(t.vertices),texture:i})})),[m,g]}}class Wy extends Error{constructor(t,i,s){super(`Dynamic shader generation error\n(id: ${i})\n ${s?`when applying feature: ${s.idVertex?`vert: ${s.idVertex}`:""} ${s.idFragment?`frag: ${s.idFragment}`:""}`:""} | ${t}`)}}const Uy=(...t)=>{let i="";for(const s of t){if("object"!=typeof s){i+=`${String(s)},`;continue}const t=[{prefix:"",obj:s}];for(;t.length>0;){const{prefix:s,obj:e}=t.shift();i+=`${s}:`;const h=Object.keys(e).sort();for(const s of h){const h=e[s];"object"==typeof h&&h.__proto__===Object.prototype||Array.isArray(h)?t.push({prefix:s,obj:h}):i+=`${s}=${String(h)},`}}}return i},jy="\nfloat roundUnsigned(float number) {\n    return floor(number + 0.5);\n}",$y="\nfloat linearStep(float step0, float step1, float step) {\n    return clamp((step - step0) / (step1 - step0), 0.0, 1.0);\n}",Yy="\n    // Denormalize 8-bit color channels to integers in the range 0 to 255.\n    ivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {\n      ivec4 bytes = ivec4(inputFloats * 255.0);\n      return (\n        littleEndian\n        ? bytes.abgr\n        : bytes\n      );\n    }\n    \n    // Break the four bytes down into an array of 32 bits.\n    void bytesToBits(const in ivec4 bytes, out bool bits[32]) {\n      for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {\n        float acc = float(bytes[channelIndex]);\n        for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {\n          float powerOfTwo = exp2(float(indexInByte));\n          bool bit = acc >= powerOfTwo;\n          bits[channelIndex * 8 + (7 - indexInByte)] = bit;\n          acc = mod(acc, powerOfTwo);\n        }\n      }\n    }\n    \n    // Compute the exponent of the 32-bit float.\n    float getExponent(bool bits[32]) {\n      const int startIndex = 1;\n      const int bitStringLength = 8;\n      const int endBeforeIndex = startIndex + bitStringLength;\n      float acc = 0.0;\n      int pow2 = bitStringLength - 1;\n      for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n        acc += float(bits[bitIndex]) * exp2(float(pow2--));\n      }\n      return acc;\n    }\n    \n    // Compute the mantissa of the 32-bit float.\n    float getMantissa(bool bits[32], bool subnormal) {\n      const int startIndex = 9;\n      const int bitStringLength = 23;\n      const int endBeforeIndex = startIndex + bitStringLength;\n      // Leading/implicit/hidden bit convention:\n      // If the number is not subnormal (with exponent 0), we add a leading 1 digit.\n      float acc = float(!subnormal) * exp2(float(bitStringLength));\n      int pow2 = bitStringLength - 1;\n      for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n        acc += float(bits[bitIndex]) * exp2(float(pow2--));\n      }\n      return acc;\n    }\n    \n    // Parse the float from its 32 bits.\n    float bitsToFloat(bool bits[32]) {\n      float signBit = float(bits[0]) * -2.0 + 1.0;\n      float exponent = getExponent(bits);\n      bool subnormal = abs(exponent - 0.0) < 0.01;\n      float mantissa = getMantissa(bits, subnormal);\n      float exponentBias = 127.0;\n      return signBit * mantissa * exp2(exponent - exponentBias - 23.0);\n    }\n    \n    // Decode a 32-bit float from the RGBA color channels of a texel.\n    float decodeUbyteRGBAEncodedFloat(vec4 rgba, bool littleEndian) {\n      ivec4 rgbaBytes = floatsToBytes(rgba, littleEndian);\n      bool bits[32];\n      bytesToBits(rgbaBytes, bits);\n      return bitsToFloat(bits);\n    }\n    ",Xy="\nvec4 pickTexel(sampler2D textureSampler, vec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (iTexel * 2.0 + 1.0) * halfTexel);\n}",Zy="\n uvec4 pickTexelUnsigned(usampler2D textureSampler, vec2 iTexel, vec2 textureSize) {\n   vec2 halfTexel = 0.5 / textureSize;\n   return texture2D(textureSampler, (iTexel * 2.0 + 1.0) * halfTexel);\n }",Ky="  \nint modulus(int a, int b) {\n  return (a)-((a)/(b))*(b);\n}",qy="\n#extension GL_OES_standard_derivatives : enable\nfloat computeScreenSpaceWireframe (vec3 barycentric, float lineWidth) {\n  vec3 dist = fwidth(barycentric);\n  vec3 smoothed = smoothstep(dist * ((lineWidth * 0.5) - 0.5), dist * ((lineWidth * 0.5) + 0.5), barycentric);\n  return 1.0 - min(min(smoothed.x, smoothed.y), smoothed.z);\n}",Jy="posAxis",Qy="posWorld",tp="normal",ip="rotatedGeo",sp="uColorTexture",ep="aInstanceGeo",hp={"2D":"\nvoid main(void) {\n    gl_Position = vec4(posWorld, 0.0, 1.0 );\n}\n","3D":"\nuniform mat4 uViewProjectionMatrix;\nvoid main(void) {\n    gl_Position = uViewProjectionMatrix * vec4(posWorld, 1.0);\n}\n"},rp={FragmentShader:"\nuniform float uIsHighlighted;\nuniform vec4 uHighlightColorOffset;\nuniform float uRenderEffectMask;\nvoid main(void) {\n    float antiAliasFactor = 1.0;\n    vec4 fragColorEnd = colorFragment;\n    if (fragColorEnd.a <= 0.0) { discard; }\n    fragColorEnd = clamp(fragColorEnd + uIsHighlighted * uHighlightColorOffset, vec4(0.0), vec4(1.0));\n    fragColorEnd = mix(fragColorEnd, vec4(1.0), uRenderEffectMask * fragColorEnd.a * 1000.0);\n    gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor);\n}\n",Empty:"\nvoid main(void) {\n}\n"};class np{constructor(t){this.modifiers=[],this.modifiers=t}alter(t){const i=new np(this.modifiers.slice());return i.modifiers.push.apply(i.modifiers,t),i}build(t){for(const i of this.modifiers)t=i(t);return t}}const op=(...t)=>i=>{t=t.reverse();for(let s of t)"string"==typeof s&&(s=s.includes("{")||s.endsWith(";")?s:`${s};`,s=s.trim(),i=i.replace("void main(void)",`${s}\nvoid main(void)`));return i},ap=t=>i=>i.replace("void main(void)",`${t}\nvoid main(void)`),up=t=>i=>(t=t.endsWith(";")?t:`${t};`,i.replace(t,"")),lp=(...t)=>i=>{for(let i=0;i<t.length;i+=1)t[i]=t[i].endsWith(";")?t[i]:`${t[i]};`,t[i]=t[i].startsWith("\t")?t[i]:`\t${t[i]}`;const s=t.join("\n");return i.replace("void main(void) {\n",`void main(void) {\n${s}\n`)},cp=(t,...i)=>s=>{for(let t=0;t<i.length;t+=1)i[t]=i[t].endsWith(";")?i[t]:`${i[t]};`,i[t]=i[t].startsWith("\t")?i[t]:`\t${i[t]}`;const e=i.join("\n"),h=s.lastIndexOf(t),r=s.substring(h),n=r.indexOf("\n"),o=r.substring(n),a=`${s.substring(0,h+n)}\n${e}${o}`;return i.forEach((i=>{if(!a.includes(i))throw new Error(`ShaderAfter misusage (not found: "${i}", match: "${t}", result: "${a}")`)})),a},fp=(...t)=>i=>{for(let s of t)if("string"==typeof s){s=s.endsWith(";")?s:`${s};`,s=s.trim(),s=s.startsWith("\t")?s:`\t${s}`;const t=i.lastIndexOf("}");i=`${i.substring(0,t-1)}\n${s}\n}`}return i},dp=(t,i)=>s=>{let e,h;if(t.includes("uniform")||t.includes("attribute")){const i=t.endsWith(";")?t:`${t};`;s=op(i)(s),e=t.split(" ")[2].replace(";","")}else e=t;if(i.includes(" ")){const t=i.endsWith(";")?i:`${i};`;s=op(t)(s),h=i.split(" ")[2].replace(";","")}else h=i;return fp(`\t${h} = ${e};`)(s)},gp=(...t)=>i=>{t=t.reverse();for(const s of t)i=s+i;return i};class mp{constructor(t,i,s,e,h){if(this.id=t,this.shader=s,this.gl=e,this.info=h,!i||!s)throw new ch(`Could not find ${this.IB()} ${this.FB()} shader source code.`);this.gl.shaderSource(s,i),this.gl.compileShader(s)}get src(){return""}IB(){return this.id.toString()}FB(){return this.gl.getShaderParameter(this.shader,this.gl.SHADER_TYPE)===this.gl.FRAGMENT_SHADER?"fragment":"vertex"}}class yp extends mp{constructor(t,i,s,e){super(t,i,s.createShader(s.VERTEX_SHADER),s,e)}}class pp extends mp{constructor(t,i,s,e){super(t,i,s.createShader(s.FRAGMENT_SHADER),s,e)}}class Sp{constructor(t,i,s,e=s.createProgram()){this.PB=new Map,this.DB=new Map,this.WD=s,this.BB=e,this.OB=`${t.IB()} vertex`,this.LB=`${i.IB()} fragment`,s.attachShader(e,t.shader),s.attachShader(e,i.shader),s.bindAttribLocation(e,0,"aPos"),s.linkProgram(e),s.deleteShader(t.shader),s.deleteShader(i.shader),this.allAttributeNames=t.info.allAttributeNames,this.allUniformNames=Array.from(new Set(t.info.allUniformNames.concat(i.info.allUniformNames)).values()),this.vertexSharedRemovedVariables=t.info.removedVariableNames,this.fragmentSharedRemovedVariables=i.info.removedVariableNames}get vertexShaderSrc(){return""}get fragmentShaderSrc(){return""}EB(t){return gr(0,(()=>mr()))}RB(t){const i=this.zB(t);if(void 0===i)throw this.EB(`Could not get ${t} uniform from ${this.OB} and ${this.LB} shaders.`);return i}zB(t){const i=this.PB.get(t);if(i)return i;const s=this.WD.getUniformLocation(this.BB,t);return s?(this.PB.set(t,s),s):void 0}VB(t){const i=this.NB(t);if(void 0===i)throw this.EB(`Could not get ${t} attribute from ${this.OB} and ${this.LB} shaders.`);return i}NB(t){const i=this.DB.get(t);if(i||0===i)return i;const s=this.WD.getAttribLocation(this.BB,t);return s>=0?(this.DB.set(t,s),s):void 0}Pt(){this.WD.deleteProgram(this.BB)}}const vp=(t,i,s)=>()=>{t.GB=i,s&&s()};class bp{constructor(t,i){if(this.HB=0,this.WB=0,this.UB=!1,this.GB=!1,this.jB=!1,this.$B=!1,this.YB=!1,this.XB=new Set,this.ZB=new Set,this.lF=i,this.WD=t,this.KB=null,this.UB=i instanceof yh.HTMLVideoElement,this.lF instanceof yh.HTMLImageElement)this.lF.addEventListener("load",(()=>{this.$B=!0,this.qB()})),this.lF.addEventListener("error",(()=>{this.YB=!0})),this.lF.complete&&(this.$B=!0,this.qB());else if(this.lF instanceof yh.HTMLVideoElement){const t=this;this.lF.addEventListener("canplay",(function(){t.WB=this.videoHeight,t.HB=this.videoWidth,t.$B=!0,t.qB()}),!0),this.lF.addEventListener("play",vp(this,!0,(()=>this.qB()))),this.lF.addEventListener("playing",vp(this,!0,(()=>this.qB()))),this.lF.addEventListener("pause",vp(this,!1)),this.lF.addEventListener("ended",vp(this,!1)),this.lF.readyState>=1&&(this.HB=this.lF.videoWidth,this.WB=this.lF.videoHeight,this.GB=!this.lF.paused,this.$B=!0,this.qB())}else this.$B=!0,this.qB()}wB(t){0===this.ZB.size&&this.$B&&this.qB(),this.ZB.add(t)}AB(t){this.ZB.delete(t),0===this.ZB.size&&this.unbindResources()}JB(t){this.XB.add(t),this.jB&&(t(),this.QB(t))}QB(t){this.XB.delete(t)}qB(){if(this.YB||this.jB||!this.$B)return;const t=this.WD.gl;if(!this.KB&&this.lF&&t){this.KB=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.KB),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const i=0,s=t.RGBA,e=t.RGBA,h=t.UNSIGNED_BYTE,r=this.lF,n=this.HB>0?this.HB:r.width,o=this.WB>0?this.WB:r.height;t.texImage2D(t.TEXTURE_2D,i,s,e,h,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.HB=n,this.WB=o,t.bindTexture(t.TEXTURE_2D,null)}this.jB=!0,this.XB&&this.XB.forEach((t=>{t(),this.QB(t)}))}_e(){const t=this.WD.gl;if(!this.YB&&this.jB&&this.KB){const i=0,s=t.RGBA,e=t.RGBA,h=t.UNSIGNED_BYTE,r=this.lF;r&&(t.bindTexture(t.TEXTURE_2D,this.KB),t.texImage2D(t.TEXTURE_2D,i,s,e,h,r))}}tO(){return this.KB}unbindResources(){return this.jB&&(this.KB&&(this.WD.mB(this.KB),this.KB=null),this.jB=!1),this}}class xp extends Io{constructor(t,i,s){super(t.vs,i,s),this.qy=!0,this.Xy={},this.Zy=l(sc),this.Sn=t,this.Jt=t.Jt}iO(){var t;return this.Zy.o&&this.Zy.M().type!==(null===(t=this.sO)||void 0===t?void 0:t.type)}sp(t){return this.qy=t,this}eO(t){return this.Xy=t,this}}const Mp=t=>[op("uniform float uLookupMin","uniform float uLookupMax","uniform sampler2D uLookupTexture","uniform float uLookupTextureHeightPx"),ap(jy),lp(`float texCoordY = (${t} - uLookupMin) / (uLookupMax - uLookupMin)`,"texCoordY = (roundUnsigned(clamp(texCoordY, 0.0, 1.0) * uLookupTextureHeightPx) / uLookupTextureHeightPx) * (1.0 - (1.0 / uLookupTextureHeightPx)) + (0.5 / uLookupTextureHeightPx)","vec4 colorFragment = texture2D(uLookupTexture, vec2(0.5, texCoordY))")],_p=[op("uniform sampler2D uMaskTexture"),op("varying vec2 vMaskTextureCoord"),cp("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.r")],wp=[op("varying vec3 vPosWorld;","varying vec3 vNormal;","uniform vec3 uCameraLoc;","uniform vec3 uLightLoc;","uniform vec4 uLightColor;","uniform vec4 uAmbientColor;","uniform float uShininess;","uniform float uAmbientReflection;","uniform float uDiffuseReflection;","uniform float uSpecularReflection;"),cp("colorFragment =","float ambientReflection = uAmbientReflection","float diffuseReflection = uDiffuseReflection","float specularReflection = uSpecularReflection","vec3 ambientColor = uAmbientColor.rgb","vec3 diffuseColor = colorFragment.rgb","vec3 specularColor = uLightColor.rgb","vec3 vNormalNormalized = normalize(vNormal)","vNormalNormalized = (float(gl_FrontFacing) * 2.0 - 1.0) * vNormalNormalized","vec3 lightDir = normalize( uLightLoc - vPosWorld )","float lambertian = abs(dot(vNormalNormalized, lightDir))","float specular = 0.0","vec3 R =  reflect(-lightDir, vNormalNormalized)","vec3 V = normalize(uCameraLoc - vPosWorld)","float specAngle = max(dot(R,V),0.0)","specular = pow(specAngle, uShininess)","colorFragment = vec4(ambientReflection * ambientColor + diffuseReflection * lambertian * diffuseColor + specularReflection * specular * specularColor, colorFragment.a)")],Ap=t=>void 0!==t.find((t=>t.idVertex&&t.idVertex.includes("3D"))),kp=t=>void 0!==t.find((t=>{var i;return null===(i=t.idVertex)||void 0===i?void 0:i.match(/lookup:[x|y|z]/)})),Cp=t=>void 0!==t.find((t=>{var i;return null===(i=t.idVertex)||void 0===i?void 0:i.match(/lookup:value/)})),Tp=(t,i,...s)=>{const e=[],h=i?"vec3":"vec2",{axisWorldTranslation:r,scaling:n,translation:o,offset:a,flipXY:u,flipXZ:l,splitPosAttribute:c,normalSource:f}=t,d=[];if("attribute"===f&&e.push(op("attribute vec3 aNormal"),lp("vec3 normal = aNormal")),"linear-highPrecision"!==r)s.forEach((t=>{void 0!==t.attributeNameAxisCoord&&(!0!==c?e.push(lp(`${h} ${t.variableNameAxisCoord} = ${t.attributeNameAxisCoord}`)):e.push(lp(`${h} ${t.variableNameAxisCoord} = ${i?`vec3(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y, ${t.attributeNameAxisCoord}Z)`:`vec2(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y)`}`)))}));else{if(!0===c)throw new Error("splitPosAttribute: true not supported with axisWorldTranslation: linear-highPrecision");s.forEach((t=>{e.push(lp(`${h} ${t.variableNameAxisCoord}_highpart = ${t.attributeNameAxisCoord}_highpart`),lp(`${h} ${t.variableNameAxisCoord}_lowpart = ${t.attributeNameAxisCoord}_lowpart`))}))}if(a&&a.rotation){const t=a.rotation.dataType,i=("uniform"===t?"u":"a")+"Rot";e.push(op(`${t} vec2 ${i}`));const s=ep;e.push(lp(`vec2 rotatedGeo = vec2(${s}.x * ${i}.y + ${s}.y * ${i}.x, ${s}.y * ${i}.y - ${s}.x * ${i}.x)`))}if(a&&e.push(op(`attribute ${h} aInstanceGeo`)),!0===u){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXY");s.forEach((t=>{d.push(`${t.variableNameAxisCoord} = ${i?`vec3(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x, ${t.variableNameAxisCoord}.z)`:`vec2(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`}`)}))}if(!0===l){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXZ");s.forEach((t=>{d.push(`${t.variableNameAxisCoord} = vec3(${t.variableNameAxisCoord}.z, ${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`)}))}if(n){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + scaling");const t=("attribute"===n.dataType?"a":"u")+"Scaling",h=i?"vec3":"vec2";e.push(op(`${n.dataType} ${h} ${t}`)),s.forEach((i=>{d.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} * ${t}`)}))}if(o&&"axis"===o.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + translation (axis)");const t=("attribute"===o.dataType?"a":"u")+"TranslationAxis",h=i?"vec3":"vec2";e.push(op(`${o.dataType} ${h} ${t}`)),s.forEach((i=>{d.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} + ${t}`)}))}if(a&&"axis"===a.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + offset (axis)");const t=("attribute"===a.dataType?"a":"u")+"OffsetAxis",n=!0===a.symmetric?"float":h;e.push(op(`${a.dataType} ${n} ${t}`));const o=a.halved?" * 0.5":"",u=a.rotation?ip:ep,l="offsetGeometry";d.push(`${h} ${l} = ${t} * ${u}${o} * sign(uScale)`),i&&"gpu-calculate"===f&&d.push(`${h} normal = ${u}`),s.forEach((t=>{d.push(`${t.variableNameAxisCoord} = ${t.variableNameAxisCoord} + ${l}`)}))}if(void 0===r||"linear"===r)e.push(op(`uniform ${h} uDisp`,`uniform ${h} uScale`)),s.forEach((t=>{d.push(`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord} - uDisp) / uScale`)}));else if("linear-highPrecision"===r)e.push(op(`uniform ${h} uDisp`,`uniform ${h} uScale`,`uniform ${h} uScaleStart_highpart`,`uniform ${h} uScaleStart_lowpart`)),s.forEach((t=>{d.push(`${h} ${t.variableNameAxisCoord}_hprecision = (${t.variableNameAxisCoord}_highpart - uScaleStart_highpart) + (${t.variableNameAxisCoord}_lowpart - uScaleStart_lowpart)`,`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord}_hprecision - uDisp) / uScale`,`${h} ${t.variableNameAxisCoord} = ${t.variableNameAxisCoord}_highpart + ${t.variableNameAxisCoord}_lowpart`)}));else if("matrix"===r)e.push(op("uniform mat3 uMatrix")),s.forEach((t=>{d.push(`vec2 ${t.variableNameWorldCoord} = (uMatrix * vec3(${t.variableNameAxisCoord}, 1.0)).xy`)}));else if("logarithmic"===r[0]){e.push(op(`uniform ${h} uScaleStart`,`uniform ${h} uScaleStartLog`,`uniform ${h} uScaleInterval`,`uniform ${h} uScaleIntervalLog`,`uniform ${h} uViewportStart`,`uniform ${h} uViewportSize`));const t=i?["x","y","z"]:["x","y"],n=[];t.forEach((t=>{const i=r[1][t];if(void 0!==i){const t=i.base;if("e"===t)return;const s=`float cLog${t} = 1.0 / log(${vn(t).toFixed(1)})`;n.includes(s)||n.push(s)}})),e.push(op(...n)),s.forEach(((i,s)=>{const e=`${s}`,n=[];t.forEach((t=>{const s=t.toUpperCase(),h=r[1][t];if(void 0===h)d.push(`float posPercent${s}${e} = (${i.variableNameAxisCoord}.${t} - uScaleStart.${t}) / uScaleInterval.${t}`);else{const r=h.base,n="e"===r;d.push(`float posLog${s}${e} = log(${i.variableNameAxisCoord}.${t})${n?"":` * cLog${r}`}`,`float posPercent${s}${e} = (posLog${s}${e} - uScaleStartLog.${t}) / uScaleIntervalLog.${t}`)}n.push(`posPercent${s}${e}`)})),d.push(`${h} ${i.variableNameWorldCoord} = uViewportStart + ${h}(${n.join(", ")}) * uViewportSize`)}))}if(a&&"px"===a.sizeUnit){e.push(op("uniform vec2 uRatioPxClip"));const t=("attribute"===a.dataType?"a":"u")+"OffsetPixels",i=!0===a.symmetric?"float":h;e.push(op(`${a.dataType} ${i} ${t}`));const r=a.halved?" * 0.5":"",n=`${t} * ${a.rotation?ip:ep}${r}`;s.forEach((t=>{d.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${n} * uRatioPxClip`)}))}if(a&&"wu"===a.sizeUnit){const t=("attribute"===a.dataType?"a":"u")+"OffsetWU",r=!0===a.symmetric?"float":h;e.push(op(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?ip:ep,u="offsetGeometry";d.push(`${h} ${u} = ${t} * ${o}${n}`),i&&"gpu-calculate"===f&&d.push(`${h} normal = normalize(${u})`),s.forEach((t=>{d.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${u}`)}))}if(a&&"nwu"===a.sizeUnit){e.push(op("uniform float uRatioNwuWu"));const t=("attribute"===a.dataType?"a":"u")+"OffsetNWU",r=!0===a.symmetric?"float":h;e.push(op(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?ip:ep,u="offsetGeometry";d.push(`${h} ${u} = ${t} * ${o}${n}`),i&&"gpu-calculate"===f&&d.push(`${h} normal = normalize(${u})`),s.forEach((t=>{d.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${u} * uRatioNwuWu`)}))}return t.snapToNearestPixel&&(e.push(op("uniform vec2 uViewportSizePx")),s.forEach((t=>{d.push(`${t.variableNameWorldCoord} = 2.0 * floor(((${t.variableNameWorldCoord} + 1.0) * 0.5) * uViewportSizePx + 0.5) / uViewportSizePx - 1.0`)}))),e.push(((t,...i)=>s=>{for(let t=0;t<i.length;t+=1)i[t]=i[t].endsWith(";")?i[t]:`${i[t]};`,i[t]=i[t].startsWith("\t")?i[t]:`\t${i[t]}`;const e=i.join("\n"),h=new RegExp(`(.*${t}.*)`),r=s.replace(h,`${e}\n$1`);return i.forEach((i=>{if(!r.includes(i))throw new Error(`ShaderBefore misusage (not found: \n${i}\nmatch: \n${t}\nresult: \n${r}\n)`)})),r})("gl_Position =",...d)),e},Ip=(t,i,s,e)=>{const h=[],r=t.axisWorldTranslation,n=i?"vec3":"vec2";if("linear"===r)h.push(cp(s,`${n} ${e} = ${s} * uScale + uDisp`));else if("linear-highPrecision"===r)h.push(cp(s,`${n} ${e} = ${s} * uScale + uDisp + uScaleStart_highpart + uScaleStart_lowpart`));else{if("matrix"===r)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("logarithmic"!==r[0])throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");{const t=[`${n} ${s}_percent = (${s} - uViewportStart) / uViewportSize`];(i?["x","y","z"]:["x","y"]).forEach((i=>{const e=i.toUpperCase(),h=r[1][i];if(void 0===h)t.push(`float pos${e}Back = ${s}_percent.${i} * uScaleInterval.${i} + uScaleStart.${i}`);else{const r=h.base,n="e"===r?"1.0":`cLog${r}`;t.push(`float pos${e}Back = pow(2.71828, (${s}_percent.${i} * uScaleIntervalLog.${i} + uScaleStartLog.${i}) / ${n})`)}})),t.push(`${n} ${e} = ${n}(posXBack, posYBack${i?", posZBack":""})`),h.push(cp(s,...t))}}return h},Fp={"2D":{idFeature:"2D",idVertex:"2D",idFragment:"2D",apply:t=>({defaultVertexShader:"2D",defaultFragmentShader:"FragmentShader"})},"3D":{idFeature:"3D",idVertex:"3D",idFragment:"3D",apply:t=>({defaultVertexShader:"3D",defaultFragmentShader:"FragmentShader"})},PointSize:t=>({idFeature:"PointSize",idVertex:`SizePrimitive:${Uy(t)}`,idFragment:void 0,apply:i=>{const s="uniform"===t?"u":"a";return{vertexShaderModifiers:[op(`${t} float ${s}PointSize`,"uniform float uDevicePixelRatio"),fp(`gl_PointSize = ${s}PointSize * uDevicePixelRatio`)]}}}),Color:i=>{const s=i&&i.dataType,e=i&&i.maskTexture;let h,r=`Color:${Uy(i)}`;const n=[],o=[];if("uniform"===s)o.push(op("uniform vec4 uColor"),lp("vec4 colorFragment = uColor"),...e?_p:[]);else if("attribute"===s)h="colorAttribute",n.push(dp("attribute vec4 aColor","varying vec4 vColor")),o.push(op("varying vec4 vColor"),lp("vec4 colorFragment = vColor"));else if("texture"===s)h="colorTexCoord",n.push(dp("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),o.push(op("varying vec2 vTextureCoord"),op("uniform sampler2D uColorTexture"),op("uniform vec4 uColor"),lp("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord)","if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.) {\n                        colorFragment = uColor;\n                    }"));else if(Array.isArray(s)&&"image"===s[0])h="colorTexCoord",n.push(dp("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),s[1]===t.ImageFitMode.Tile?o.push(op("uniform sampler2D uColorTexture"),op("varying vec2 vTextureCoord"),lp("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord);")):o.push(op("uniform sampler2D uColorTexture"),op("varying vec2 vTextureCoord"),op("uniform vec4 uColor"),lp("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord);","if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.){\n                            colorFragment = uColor;\n                        }"));else if(Array.isArray(s)&&"lookup"===s[0]){const t=s[1];if("value"===t)h="lookup:value",n.push(dp("attribute float aLookupValue","varying float vLookupValue"));else{const i=`posAxis.${t}`;h=`lookup:${t}`,n.push(dp(i,"varying float vLookupValue"))}o.push(op("varying float vLookupValue"),...Mp("vLookupValue"))}else if(Array.isArray(s)&&"gradient"===s[0]){r=`Color:${Uy(i)}`;const t=s[1],h=t.getColorStops();t instanceof Ke?o.push(op("uniform vec4 uBounds","uniform vec2 uCenter","uniform vec2 uDistance","uniform float uAspect"),op(...kh(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),ap($y),lp("vec2 uv = vec2((((gl_FragCoord.x)-uBounds.x)/(uBounds.z))*uAspect,((gl_FragCoord.y)-uBounds.y)/(uBounds.w))","float mixVal = distance(uv/uDistance, uCenter/uDistance)","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, mixVal))",...h.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, mixVal));`)),"vec4 colorFragment = color"),...e?_p:[]):t instanceof Je&&(r=`Color:${Uy(i)}`,o.push(op("uniform vec4 uBounds","uniform vec2 uStartPoint","uniform vec2 uEndPoint"),op(...kh(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),ap($y),lp("vec2 uv = gl_FragCoord.xy - uBounds.xy","float magnitude = ((uv.x-uStartPoint.x) * (uEndPoint.x-uStartPoint.x) + (uv.y-uStartPoint.y) * (uEndPoint.y-uStartPoint.y)) / (pow(uEndPoint.x - uStartPoint.x, 2.0) + pow(uEndPoint.y-uStartPoint.y,2.0))","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, magnitude))",...h.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, magnitude))`)),"vec4 colorFragment = color"),...e?_p:[]))}if(!0===e){const t="maskTexture";h=h?`${h} ${t}`:`Color:${t}`,n.push(dp("attribute vec2 aMaskTextureCoord","varying vec2 vMaskTextureCoord"))}return{idFeature:"Color",idVertex:h,idFragment:r,apply:t=>({vertexShaderModifiers:n,fragmentShader:"FragmentShader",fragmentShaderModifiers:o})}},ColorShaded3D:t=>{const{dataType:i,shadingStyle:s,wireframe:e}=t;let h;const r=`ColorShaded3D:${Uy(t)}`,n=[],o=[];if(n.push("phong"===s&&dp(tp,"varying vec3 vNormal"),dp(Qy,"varying vec3 vPosWorld")),"uniform"===i)o.push(op("uniform vec4 uColorDiffuse"),lp("vec4 colorFragment = uColorDiffuse"));else if("attribute"===i)h="per-vertex-color",n.push(dp("attribute vec4 aColor","varying vec4 vColor")),o.push(op("varying vec4 vColor"),lp("vec4 colorFragment = vColor"));else if(Array.isArray(i)){const t=i[1];if("value"===t)h="lookup:value",n.push(dp("attribute float aLookupValue","varying float vLookupValue"));else{const i=`posAxis.${t}`;h=`lookup:${t}`,n.push(dp(i,"varying float vLookupValue"))}o.push(op("varying float vLookupValue"),op("uniform float uLookupMin"),op("uniform float uLookupMax"),op("uniform float uLookupTextureHeightPx"),op("uniform sampler2D uLookupTexture"),ap(jy),lp("float texCoordY = (vLookupValue - uLookupMin) / (uLookupMax - uLookupMin)","texCoordY = (roundUnsigned(clamp(texCoordY, 0.0, 1.0) * uLookupTextureHeightPx) / uLookupTextureHeightPx) * (1.0 - (1.0 / uLookupTextureHeightPx)) + (0.5 / uLookupTextureHeightPx)","vec4 colorFragment = texture2D(uLookupTexture, vec2(0.5, texCoordY))"))}if(e){const t="wireframe";h=h?`${h},${t}`:t,n.push(dp("attribute vec3 aTriangleBary","varying vec3 vTriangleBary")),o.push(op("varying vec3 vTriangleBary"),op("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),ap(qy),cp("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)","colorFragment = mix(colorFragment, uWireframeColor, edge)"))}return"phong"===s&&o.push(...wp),{idFeature:"ColorShaded3D",idVertex:h,idFragment:r,apply:t=>({fragmentShader:"FragmentShader",vertexShaderModifiers:n,fragmentShaderModifiers:o})}},VertexLocation:t=>({idFeature:"VertexLocation",idVertex:`VertexLocation:${Uy(t)}`,idFragment:void 0,apply:i=>{const s=[],e=Ap(i),h=e?"vec3":"vec2";if("linear-highPrecision"!==t.axisWorldTranslation)!0!==t.splitPosAttribute?s.push(op(`attribute ${h} aPos`)):s.push(op("attribute float aPosX"),op("attribute float aPosY"),e&&op("attribute float aPosZ"));else{if(!0===t.splitPosAttribute)throw new Error("splitPosAttribute: true not supported with axisWorldTranslation: linear-highPrecision");s.push(op(`attribute ${h} aPos_highpart`),op(`attribute ${h} aPos_lowpart`))}return s.push(...Tp(t,e,{attributeNameAxisCoord:"aPos",variableNameAxisCoord:Jy,variableNameWorldCoord:Qy})),{vertexShaderModifiers:s}}}),LineInstanced2D:t=>({idFeature:"LineInstanced2D",idVertex:`LineInstanced2D:${Uy(t)}`,idFragment:void 0,apply:i=>({vertexShaderModifiers:[op("uniform float uThicknessPixels"),op("uniform vec2 uRatioPxClip"),"linear-highPrecision"!==t.axisWorldTranslation&&op("attribute vec2 aLocationA"),"linear-highPrecision"!==t.axisWorldTranslation&&op("attribute vec2 aLocationB"),"linear-highPrecision"===t.axisWorldTranslation&&op("attribute vec2 aLocationA_highpart"),"linear-highPrecision"===t.axisWorldTranslation&&op("attribute vec2 aLocationB_highpart"),"linear-highPrecision"===t.axisWorldTranslation&&op("attribute vec2 aLocationA_lowpart"),"linear-highPrecision"===t.axisWorldTranslation&&op("attribute vec2 aLocationB_lowpart"),op("attribute vec2 aSegmentPosition"),op("attribute float aSegmentSide"),...Tp(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),cp("worldB = ","vec2 directionBasis = worldB - worldA","vec2 directionBasisNorm = normalize(directionBasis)","vec2 perpendBasisNorm = vec2(-directionBasisNorm.y, directionBasisNorm.x)","vec2 offset = mix(worldA, worldB, aSegmentSide)","vec2 thicknessDirection = aSegmentPosition.x * directionBasisNorm + aSegmentPosition.y * perpendBasisNorm ","vec2 posWorld = offset + thicknessDirection * uThicknessPixels * uRatioPxClip"),...Cp(i)?[up("attribute float aLookupValue"),up("vLookupValue = aLookupValue"),op("attribute float aLookupValueA"),op("attribute float aLookupValueB"),fp("vLookupValue = mix(aLookupValueA, aLookupValueB, aSegmentSide)")]:[],...kp(i)?Ip(t,!1,Qy,Jy):[]]})}),LineInstanced3D:t=>({idFeature:"LineInstanced3D",idVertex:`LineInstanced3D:${Uy(t)}`,idFragment:void 0,apply:i=>({defaultFragmentShader:"FragmentShader",vertexShaderModifiers:[op("uniform float uOffsetWU"),op("attribute vec3 aLocationA"),op("attribute vec3 aLocationB"),op("attribute float aSegmentPosition"),op("attribute float aPerpendHorizontal"),op("attribute float aPerpendVertical"),...Tp({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},Ap(i),{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),cp("worldB = ","vec3 directionBasis = worldB - worldA","vec3 directionBasisNorm = normalize(directionBasis)","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(directionBasis.y), 0.9 ) ))","vec3 horizontalBasis = normalize( cross( notParallel, directionBasisNorm ) )","vec3 verticalBasis = normalize( cross( horizontalBasis, directionBasisNorm ) )","vec3 normal = aPerpendHorizontal * horizontalBasis + aPerpendVertical * verticalBasis","vec3 posWorld = worldA + aSegmentPosition * directionBasis + normal * uOffsetWU * 0.5"),...kp(i)?Ip({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,Qy,Jy):[]]})}),RoundedEdges3D:{idFeature:"RoundedEdges3D",idVertex:"RoundedEdges3D",idFragment:void 0,apply:t=>({vertexShaderModifiers:[op("attribute vec3 aEdge"),op("uniform float uEdgeRoundness"),cp("posWorld =","vec3 boxSizeWorld = abs( aOffsetAxis / uScale )","float boxMinDimensionWorldXZ = min( boxSizeWorld.x, boxSizeWorld.z )","vec3 edgeRoundAmount = uEdgeRoundness * vec3( boxMinDimensionWorldXZ, min( boxMinDimensionWorldXZ, boxSizeWorld.y ), boxMinDimensionWorldXZ )","posWorld = posWorld + aEdge * edgeRoundAmount")]})},ColorGrid2D:t=>{const i=t.flipXY,s=t.intensityTextureType,e=t.littleEndian;return{idFeature:"ColorGrid2D",idVertex:void 0,idFragment:`ColorGrid2D:${Uy(t)}`,apply:h=>({fragmentShader:"FragmentShader",fragmentShaderModifiers:[op("uniform sampler2D uLookupTexture","uniform vec4 uTileBounds","uniform vec2 uTileDimensions","uniform sampler2D uTileIntensityValues","uniform float uLookupMax","uniform float uLookupMin","uniform float uLookupTextureHeightPx",jy,"ubyte"===s&&Yy),"bilinear"===t.interpolation?lp("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions - 1.0)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensions - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensions - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${i?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${i?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${i?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${i?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===s?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${e})`),"float intensity01 = "+("float"===s?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${e})`),"float intensity10 = "+("float"===s?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${e})`),"float intensity11 = "+("float"===s?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${e})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${i?"lerpFactors.y":"lerpFactors.x"})`,"float texCoordY = (intensityP - uLookupMin) / (uLookupMax - uLookupMin)","texCoordY = (roundUnsigned(clamp(texCoordY, 0.0, 1.0) * uLookupTextureHeightPx) / uLookupTextureHeightPx) * (1.0 - (1.0 / uLookupTextureHeightPx)) + (0.5 / uLookupTextureHeightPx)","vec4 colorFragment = texture2D(uLookupTexture, vec2(0.5, texCoordY))"):lp("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellIndexNormalized = cellIndex / uTileDimensions",`vec4 sample0 = texture2D(uTileIntensityValues, ${i?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensity = "+("float"===s?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${e})`),"float texCoordY = (intensity - uLookupMin) / (uLookupMax - uLookupMin)","texCoordY = (roundUnsigned(clamp(texCoordY, 0.0, 1.0) * uLookupTextureHeightPx) / uLookupTextureHeightPx) * (1.0 - (1.0 / uLookupTextureHeightPx)) + (0.5 / uLookupTextureHeightPx)","vec4 colorFragment = texture2D(uLookupTexture, vec2(0.5, texCoordY))")]})}},DrawToNormalTexture:t=>{const i=t.flipXZ,s=t.vertexIdSource,e=t.normalTextureType,h=t.heightmapTextureType,r=t.littleEndian;return{idFeature:"DrawToNormalTexture",idVertex:`DrawToNormalTexture:${Uy(t)}`,idFragment:`DrawToNormalTexture:${Uy(t)}`,apply:t=>{const n=[],o=[];return n.push(op("uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB","attribute"===s&&"attribute float aVertexID",jy,Ky,Xy,"ubyte"===h&&Yy),lp(void 0===s?"int iVertex = gl_VertexID":"int iVertex = int(roundUnsigned(aVertexID))","int iSecondary = modulus(iVertex, (uTileDimensions.y - 1))","int iPrimary = iVertex / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(uTileDimensions) - 1.0","vec2 halfTexelWorld = 2.0 / (uTileDimensionsMinus1 * 2.0)","vec2 posWorld = vec2(-1.0 + halfTexelWorld.y + iCell.y * 2.0 * halfTexelWorld.y, -1.0 + halfTexelWorld.x + iCell.x * 2.0 * halfTexelWorld.x)","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec3 posAxis0 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"pickTexel(uHeightmapTexture, vec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(pickTexel(uHeightmapTexture, vec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`} ,\n                            uTileStartLocationAxisXZ.y + iCell.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell1 = iCell + vec2(1.0, 0.0)",`vec3 posAxis1 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell1.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"pickTexel(uHeightmapTexture, vec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(pickTexel(uHeightmapTexture, vec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell1.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell2 = iCell + vec2(0.0, 1.0)",`vec3 posAxis2 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell2.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"pickTexel(uHeightmapTexture, vec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(pickTexel(uHeightmapTexture, vec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell2.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell3 = iCell + vec2(1.0, 1.0)",`vec3 posAxis3 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell3.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"pickTexel(uHeightmapTexture, vec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(pickTexel(uHeightmapTexture, vec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell3.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec3 normal = normalize(cross(posAxis2 - posAxis0, posAxis1 - posAxis0) + cross(posAxis1 - posAxis3, posAxis2 - posAxis3))","uint"===e?"vNormalRGB = uvec3(((normal / 2.0) + 0.5) * float(-1u))":"vNormalRGB = (normal / 2.0) + 0.5","gl_PointSize = 1.0")),o.push(op("uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB"),lp("uint"===e?"gl_FragColor = uvec4(vNormalRGB, -1u)":"gl_FragColor = vec4(vNormalRGB, 1.0)")),{vertexShaderModifiers:n,fragmentShaderModifiers:o,fragmentShader:"Empty",hints:["uint"===e&&{type:"fragOutput",fragOutput:"uvec4"}]}}}},SurfaceGrid:t=>{const i=t.fillColor,s=t.interpolation,e=t.flipXZ,h=t.shadingStyle,r=t.wireframe,n=t.instanceIdSource,o=t.normalTextureType,a=t.heightmapTextureType,u=t.intensityTextureType,l=t.littleEndian;return{idFeature:"SurfaceGrid",idVertex:`SurfaceGrid:${Uy(t)}`,idFragment:`SurfaceGrid:${Uy(t)}`,apply:c=>{const f=[],d=[];return f.push(op("attribute vec2 aGeoCellOffset","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===n&&"attribute float aInstanceID",jy,Ky,Xy,"ubyte"===a&&Yy),lp(void 0===n?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 iCellVertex = iCell + aGeoCellOffset","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","vec2 ySampleCoordinate = vec2(iCellVertex.y, iCellVertex.x) / vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x)","float y = "+("float"===a?"pickTexel(uHeightmapTexture, vec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(pickTexel(uHeightmapTexture, vec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${l})`),"vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)","vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * "+(e?"vec2(iCellVertex.y, iCellVertex.x)":"iCellVertex"),"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)")),f.push(...Tp({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:Jy,variableNameWorldCoord:Qy})),"phong"===h&&f.push(dp(Qy,"varying vec3 vPosWorld"),..."uint"===o?[ap(Zy),fp("vec4 normalAxisRGB = vec4(pickTexelUnsigned(uNormalmapTexture, vec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)")]:[fp("vec4 normalAxisRGB = pickTexel(uNormalmapTexture, vec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))")],fp("vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vNormal = normalize(normalAxis * uScale)"),op("varying vec3 vNormal",..."uint"===o?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"])),d.push(op("varying vec3 vTriangleBary")),"uniform"===i?d.push(op("uniform vec4 uColorDiffuse"),lp("vec4 colorFragment = uColorDiffuse")):Array.isArray(i)&&"lookup"===i[0]?"value"===i[1]?(f.push(dp("posAxis.xz","varying vec2 vVertexLocationAxisXZ")),d.push(op("uniform sampler2D uLookupTexture","uniform vec4 uTileBoundsAxisXZ","uniform vec2 uTileDimensionsXZ","varying vec2 vVertexLocationAxisXZ","uniform sampler2D uTileIntensityValues","uniform float uLookupMax","uniform float uLookupMin","uniform float uLookupTextureHeightPx","uniform mat4 uViewProjectionMatrix","uniform vec3 uScale","uniform vec3 uDisp",jy,"ubyte"===u&&Yy),"bilinear"===s?lp("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = (vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensionsXZ - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensionsXZ - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${e?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${e?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${e?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${e?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===u?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${l})`),"float intensity01 = "+("float"===u?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${l})`),"float intensity10 = "+("float"===u?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${l})`),"float intensity11 = "+("float"===u?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${l})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${e?"lerpFactors.y":"lerpFactors.x"})`,"float texCoordY = (intensityP - uLookupMin) / (uLookupMax - uLookupMin)","texCoordY = (roundUnsigned(clamp(texCoordY, 0.0, 1.0) * uLookupTextureHeightPx) / uLookupTextureHeightPx) * (1.0 - (1.0 / uLookupTextureHeightPx)) + (0.5 / uLookupTextureHeightPx)","vec4 colorFragment = texture2D(uLookupTexture, vec2(0.5, texCoordY))"):lp("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = floor((vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ)","vec2 cellIndexNormalized = cellIndex / (uTileDimensionsXZ - 1.0)",`vec4 sample0 = texture2D(uTileIntensityValues, ${e?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensity = sample0.x","float texCoordY = (intensity - uLookupMin) / (uLookupMax - uLookupMin)","texCoordY = (roundUnsigned(clamp(texCoordY, 0.0, 1.0) * uLookupTextureHeightPx) / uLookupTextureHeightPx) * (1.0 - (1.0 / uLookupTextureHeightPx)) + (0.5 / uLookupTextureHeightPx)","vec4 colorFragment = texture2D(uLookupTexture, vec2(0.5, texCoordY))"))):(f.push(dp(`posAxis.${i[1]}`,"varying float vLookupValue")),d.push(op("varying float vLookupValue"),...Mp("vLookupValue"))):void 0===i&&d.push(lp("vec4 colorFragment = vec4(0.0, 0.0, 0.0, 0.0)")),"phong"===h&&d.push(...wp),r&&(f.push(op("attribute vec3 aTriangleBary"),dp("aTriangleBary","varying vec3 vTriangleBary")),d.push(op("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),ap(qy),cp("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",i?"if (edge > 0.0) {\n                                    colorFragment = vec4(mix(colorFragment.rgb, uWireframeColor.rgb, edge * uWireframeColor.a), max(colorFragment.a, uWireframeColor.a));\n                                }":"if (edge > 0.0) {\n                                    colorFragment = uWireframeColor;\n                                  } else {\n                                      discard;\n                                  }"))),{vertexShaderModifiers:f,fragmentShader:"FragmentShader",fragmentShaderModifiers:d}}}},DebugSurfaceGridNormals:t=>({idFeature:"DebugSurfaceGridNormals",idVertex:`DebugSurfaceGridNormals:${Uy(t)}`,idFragment:`DebugSurfaceGridNormals:${Uy(t)}`,apply:i=>({vertexShaderModifiers:[op("attribute float aNormalArrow","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===t.instanceIdSource&&"attribute float aInstanceID",jy,Ky,Xy,"ubyte"===t.heightmapTextureType&&Yy,..."uint"===t.normalTextureType?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"]),lp(void 0===t.instanceIdSource?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","float y00 = "+("float"===t.heightmapTextureType?"pickTexel(uHeightmapTexture, vec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(pickTexel(uHeightmapTexture, vec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y01 = "+("float"===t.heightmapTextureType?"pickTexel(uHeightmapTexture, vec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(pickTexel(uHeightmapTexture, vec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y10 = "+("float"===t.heightmapTextureType?"pickTexel(uHeightmapTexture, vec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(pickTexel(uHeightmapTexture, vec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y11 = "+("float"===t.heightmapTextureType?"pickTexel(uHeightmapTexture, vec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(pickTexel(uHeightmapTexture, vec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y = (y00 + y01 + y10 + y11) / 4.0","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * (0.5 + ${t.flipXZ?"vec2(iCell.y, iCell.x)":"iCell"})`,"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)",..."uint"===t.normalTextureType?["vec4 normalAxisRGB = vec4(pickTexelUnsigned(uNormalmapTexture, vec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)"]:["vec4 normalAxisRGB = pickTexel(uNormalmapTexture, vec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))"],"vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vec3 normalWorld = normalize(normalAxis * uScale)"),..."uint"===t.normalTextureType?[ap(Zy)]:[],...Tp({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:Jy,variableNameWorldCoord:Qy}),cp("posWorld =","vec3 dirArrow = normalWorld","vec3 posArrowStart = posWorld","vec3 posArrowEnd = posWorld + dirArrow * 0.010","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(dirArrow.y), 0.9 ) ))","vec3 dirArrowLeft = normalize(-dirArrow + 0.50 * normalize(cross(dirArrow, notParallel)))","vec3 dirArrowRight = normalize(-dirArrow + 0.50 * normalize(cross(notParallel, dirArrow)))","vec3 posArrowLeft = posArrowEnd + dirArrowLeft * 0.0025","vec3 posArrowRight = posArrowEnd + dirArrowRight * 0.0025","if (aNormalArrow == 0.0) {\n                        posWorld = posArrowStart;\n                    } else if (aNormalArrow == 1.0) {\n                        posWorld = posArrowEnd;\n                    } else if (aNormalArrow == 2.0) {\n                        posWorld = posArrowLeft;\n                    } else if (aNormalArrow == 3.0) {\n                        posWorld = posArrowRight;\n                    }")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[fp("gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0)")]})}),OffsetTowardsCamera:()=>({idFeature:"OffsetTowardsCamera",idVertex:"OffsetTowardsCamera",idFragment:void 0,apply:t=>({vertexShaderModifiers:[op("uniform vec3 uCameraLoc"),cp("posWorld =","posWorld = posWorld + normalize(uCameraLoc) * 0.0025")]})}),AliasedEdge:()=>({idFeature:"AliasedEdge",idVertex:"AliasedEdge",idFragment:"AliasedEdge",apply:t=>({vertexShaderModifiers:[op("attribute float aSegmentInside"),op("varying float vSegmentInside"),op("varying float vSegmentSide"),cp("gl_Position = ","\n                vSegmentInside = aSegmentInside;\n                vSegmentSide = aSegmentSide;\n                ")],fragmentShaderModifiers:[gp("#extension GL_OES_standard_derivatives : enable"),op("uniform float uAALimit"),op("varying float vSegmentInside"),op("varying float vSegmentSide"),cp("antiAliasFactor = ","\n                float dist = (uAALimit - vSegmentInside);\n                vec2 ddist = vec2(dFdx(dist), dFdy(dist));\n                float pixelDist = dist / length(ddist);\n                // additional blurring\n                pixelDist *= 0.5;\n\n                float aa = clamp(0.5 - pixelDist, 0.0, 1.0);\n                if((vSegmentSide <= 0.0 || vSegmentSide >= 1.0) && aa <=0.99){\n                    aa *= 0.5;\n                }\n                antiAliasFactor = aa;\n                ")]})}),Glow1D:t=>({idFeature:"Glow1D",idVertex:`Glow1D:${Uy(t)}`,idFragment:`Glow1D:${Uy(t)}`,apply:()=>{const i=Math.round(t.spreadPx),s=Math.round(t.blurPx),e=i+s,h=t.firstPass,r=[];for(let t=-e;t<=e;t+=1){const i=Math.abs(t);r.push(h?{x:t.toFixed(1),y:"0.0",distPx:i.toFixed(1)}:{x:"0.0",y:t.toFixed(1),distPx:i.toFixed(1)})}return{vertexShaderModifiers:[dp("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[op("uniform sampler2D uTexture"),op("varying vec2 vTextureCoord"),op("uniform vec2 uTextureSize"),h&&op("uniform vec2 uOffsetPx"),!h&&op("uniform sampler2D uTextureFirstGlowPass"),!h&&op("uniform vec4 uGlowColor"),cp("antiAliasFactor =","vec2 oneTexel = vec2(1.0, 1.0) / uTextureSize",...h?[]:["float inverseIntensity =\n                        0.25 * texture2D(uTexture, vTextureCoord).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, 0.0)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, 0.0)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, -oneTexel.y)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, -oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, -oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, oneTexel.y)).a","antiAliasFactor *= 1.0 - (inverseIntensity * inverseIntensity)","if (antiAliasFactor <= 0.0) { discard; }"],"float distancePx = 255.0","vec2 sample_tx = vec2(0.0)",...h?["vec2 texCoordOffset = vTextureCoord - uOffsetPx * oneTexel",...r.map(((t,i)=>[`sample_tx = texCoordOffset + oneTexel * vec2(${t.x}, ${t.y})`,`if (distancePx > ${t.distPx} && sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0 && texture2D(uTexture, sample_tx).a > 0.0) { distancePx = ${t.distPx}; }`])).flat(),"vec4 colorFragment = vec4(distancePx / 255.0, 0.0, 0.0, 1.0)"]:["vec4 sample_horizontal = vec4(0.0)","float horizontal_dist = 255.0","float min_horizontal_dist = 255.0",...r.map(((t,i)=>[`sample_tx = vTextureCoord + oneTexel * vec2(${t.x}, ${t.y})`,"if (sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0) {\n                                            sample_horizontal = texture2D(uTextureFirstGlowPass, sample_tx);\n                                            horizontal_dist = sample_horizontal.r * 255.0;\n                                          }","if (sample_horizontal.a < 0.9) { horizontal_dist = 255.0; }","min_horizontal_dist = min(min_horizontal_dist, horizontal_dist)",`distancePx = min(distancePx, pow(horizontal_dist * horizontal_dist + ${t.y} * ${t.y}, 0.5))`])).flat(),`if (distancePx > ${e.toFixed(1)}) { discard; }`,"vec4 pixelGlowColor = vec4(0.0, 0.0, 0.0, 0.0)",`if (distancePx > ${i.toFixed(1)}) {\n                                        float lerpAmount = (distancePx - ${i.toFixed(1)}) / ${(s+1).toFixed(1)};\n                                        pixelGlowColor = mix(uGlowColor, vec4(uGlowColor.rgb, 0.0), 1.0 - (1.0 - lerpAmount) * (1.0 - lerpAmount));\n                                    } else {\n                                        pixelGlowColor = uGlowColor;\n                                    }`,"vec4 colorFragment = pixelGlowColor"])]}}})},Pp=(t,i,s,e)=>{const h=t.TB(),r=Math.round(Math.min(s.spread,10)*h),n=Math.round(Math.min(s.blur,10)*h),o={x:Math.round(s.offset.x*h),y:Math.round(s.offset.y*h)},a=t.hO(),u=t.rO(),l=t.nO(),c=t.oO(),f=t.aO();t.uO("disabled"),t.sp(!1),t.lO(!1);const d=i.cO();((t,i,s)=>{const e=t.gl,h=t.TB();e.bindFramebuffer(e.FRAMEBUFFER,s.frameBuffer),e.bindRenderbuffer(e.RENDERBUFFER,s.depthBuffer),e.bindTexture(e.TEXTURE_2D,s.texture),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.clear(e.DEPTH_BUFFER_BIT);const r=s.sizeDpr;t.fO(0,0,r.x,r.y),i.forEach((i=>{let s;i instanceof Po?s=i.Sn.Em():i instanceof xp&&(s=i.Sn.MS()),s?t.dO(s.x*h,s.y*h,s.width*h,s.height*h):t.lO(!1),i.BD(2)})),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),t.lO(!1)})(t,e,d);let g=d;const m=r+n+5,y=((t,i,s,e)=>{const h=(t=>{const i=[];for(let s=0;s<t.length;s+=1){let e,h=t[s];do{const t=i.findIndex((t=>Ir(h,t)));e=t>=0?i[t]:void 0,e&&(i.splice(t,1),h=Hr(h,e))}while(e);i.push(h)}return i})(i.map((t=>{const i=t instanceof Po||t instanceof xp?t.Sn.gO(t):kr;if(yr(i))return kr;const h={min:{x:Math.max(i.min.x-s.left,0),y:Math.max(i.min.y-s.bottom,0)},max:{x:Math.min(i.max.x+s.right,e.x),y:Math.min(i.max.y+s.top,e.y)}};return h.max.x<=h.min.x||h.max.y<=h.min.y?kr:h})).filter((t=>!yr(t)))),r=6*h.length,n=new Float32Array(4*r);let o=0;return h.forEach((t=>{const i=en(t.min,e),s=en(t.max,e),h=i,r=s;n[o+0]=i.x,n[o+1]=i.y,n[o+2]=h.x,n[o+3]=h.y,n[o+4]=s.x,n[o+5]=i.y,n[o+6]=r.x,n[o+7]=h.y,n[o+8]=s.x,n[o+9]=s.y,n[o+10]=r.x,n[o+11]=r.y,n[o+12]=s.x,n[o+13]=s.y,n[o+14]=r.x,n[o+15]=r.y,n[o+16]=i.x,n[o+17]=s.y,n[o+18]=h.x,n[o+19]=r.y,n[o+20]=i.x,n[o+21]=i.y,n[o+22]=h.x,n[o+23]=h.y,o+=24})),{vertexBuffer:t.mO(n),vertexCount:r}})(t,e,{left:m+(o.x<0?-o.x:0),top:m+(o.y>0?o.y:0),right:m+(o.x>0?o.x:0),bottom:m+(o.y<0?-o.y:0)},i.yO()),p=i.cO(d,g),S=t.pO(Fp["2D"],Fp.Glow1D({spreadPx:r,blurPx:n,firstPass:!0}),Fp.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,i,s,e,h,r)=>{const n=t.gl;n.bindFramebuffer(n.FRAMEBUFFER,s.frameBuffer),n.bindRenderbuffer(n.RENDERBUFFER,s.depthBuffer),n.bindTexture(n.TEXTURE_2D,s.texture),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.clear(n.DEPTH_BUFFER_BIT),t.fO(0,0,s.sizeDpr.x,s.sizeDpr.y),t.SO(e,((o,a,u,l)=>(t.wB(e),r&&r(o),t.MO(o("uIsHighlighted"),0)._O(o("uHighlightColorOffset"),xe).MO(o("uRenderEffectMask"),0).xO(o("uTexture"),i.texture,0).bO(l("uTextureSize"),[i.sizeDpr.x,i.sizeDpr.y]).bO(o("uScale"),s.uniforms.wO()).bO(o("uDisp"),s.uniforms.AO()).bO(o("uScaling"),[s.size.x,s.size.y]).bO(o("uTranslationAxis"),[0,0]).vO(h.vertexBuffer,void 0,{location:a("aPos"),size:2},{location:a("aTextureCoord"),size:2})._y(n.TRIANGLES,h.vertexCount,0),!0))),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindTexture(n.TEXTURE_2D,null)})(t,g,p,S,y,((i,s,e,h)=>(t.bO(i("uOffsetPx"),[o.x,o.y]),!0))),g=p,t.lO(u),t.kO(f);const v=t.pO(Fp["2D"],Fp.Glow1D({spreadPx:r,blurPx:n,firstPass:!1}),Fp.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,i,s,e,h)=>{const r=t.gl,n={x:t.vs.xi().x,y:t.vs.xi().y};t.fO(0,0,n.x*t.TB(),n.y*t.TB());const o=rh.d2({scaleXYConstructor:In}).Gt(n).Zi(0,n.x).Ki(0,n.y),a=new Lp;a.CO(o),t.SO(s,((o,u,l,c)=>(t.wB(s),h&&h(o),t.MO(o("uIsHighlighted"),0)._O(o("uHighlightColorOffset"),xe).MO(o("uRenderEffectMask"),0).xO(o("uTexture"),i.texture,0).bO(c("uTextureSize"),[i.sizeDpr.x,i.sizeDpr.y]).bO(o("uScale"),a.wO()).bO(o("uDisp"),a.AO()).bO(o("uScaling"),[n.x,n.y]).bO(o("uTranslationAxis"),[0,0]).vO(e.vertexBuffer,void 0,{location:u("aPos"),size:2},{location:u("aTextureCoord"),size:2})._y(r.TRIANGLES,e.vertexCount,0),!0)))})(t,d,v,y,((i,e,h,r)=>(t.xO(i("uTextureFirstGlowPass"),p.texture,1)._O(i("uGlowColor"),s.color),!0))),t.fO(a.x,a.y,a.width,a.height),t.uO(l),t.sp(c),t.TO(y.vertexBuffer)};class Dp{constructor(t){this.IO=[],this.OD=t}FO(t,i){Pp(this.OD,this,i,t)}yO(){const t=this.OD.vs.xi();return{x:Math.ceil(t.x),y:Math.ceil(t.y)}}cO(...t){const i=this.IO,s=this.yO(),e={x:Math.ceil(s.x*this.OD.TB()),y:Math.ceil(s.y*this.OD.TB())},h=this.OD.gl,r=i.find((i=>!t.includes(i)));if(r)return r.sizeDpr.x===e.x&&r.sizeDpr.y===e.y||(r.size=s,r.sizeDpr=e,h.bindTexture(h.TEXTURE_2D,r.texture),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,e.x,e.y,0,h.RGBA,h.UNSIGNED_BYTE,null),h.bindRenderbuffer(h.RENDERBUFFER,r.depthBuffer),h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_COMPONENT16,e.x,e.y),h.bindTexture(h.TEXTURE_2D,null),h.bindRenderbuffer(h.RENDERBUFFER,null),r.scale.Gt(s).Zi(0,s.x).Ki(0,s.y),r.uniforms.CO(r.scale)),r;const n=h.createTexture(),o=this.OD.PO(),a=this.OD.DO();h.bindTexture(h.TEXTURE_2D,n),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,e.x,e.y,0,h.RGBA,h.UNSIGNED_BYTE,null),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),h.bindFramebuffer(h.FRAMEBUFFER,o),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0),h.bindRenderbuffer(h.RENDERBUFFER,a),h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_COMPONENT16,e.x,e.y),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,a),h.bindTexture(h.TEXTURE_2D,null),h.bindFramebuffer(h.FRAMEBUFFER,null),h.bindRenderbuffer(h.RENDERBUFFER,null);const u=rh.d2({scaleXYConstructor:In}).Gt(s).Zi(0,s.x).Ki(0,s.y),l=new Lp;l.CO(u);const c={size:s,sizeDpr:e,texture:n,frameBuffer:o,depthBuffer:a,scale:u,uniforms:l};return i.push(c),c}Pt(){[this.IO].forEach((t=>{t.forEach((t=>{this.OD.BO(t.depthBuffer),this.OD.OO(t.frameBuffer),this.OD.mB(t.texture)})),t.length=0}))}}class Bp{constructor(i,s,h,r,n=!0){this.LO=new Dy,this.EO=new Map,this.RO=new Map,this.zO=[],this.VO=1,this.IS_MACHINE_LITTLE_ENDIAN=(()=>{const t=new Uint32Array([287454020]),i=new Uint8Array(t.buffer);return 68===i[0]||17!==i[0]&&(yh.console.error("Unidentified machine endianness. Some features might behave unexpectedly."),!0)})(),this.qy=!1,this.bO=(t,[i,s])=>(void 0===t||this.gl.uniform2f(t,i,s),this),this.NO=(t,[i,s])=>(void 0===t||this.gl.uniform2i(t,i,s),this),this.GO=(t,[i,s,e,h])=>(void 0===t||this.gl.uniform4f(t,i,s,e,h),this),this.HO=(t,[i,s,e])=>(void 0===t||this.gl.uniform3f(t,i,s,e),this),this.WO=(t,i)=>(void 0===t||this.gl.uniformMatrix3fv(t,!1,i),this),this.UO=(t,i)=>(void 0===t||this.gl.uniformMatrix4fv(t,!1,i),this),this._O=(t,i)=>(void 0===t||this.gl.uniform4f(t,i.r,i.g,i.b,i.a),this),this.MO=(t,i)=>(void 0===t||this.gl.uniform1f(t,i),this),this.jO=(t,i)=>(this.gl.uniform1i(t,i),this),this.xO=(t,i,s)=>{if(void 0===t)return this;if(i){const e=this.gl.TEXTURE0+s;return this.gl.activeTexture(e),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.uniform1i(t,s),this}throw new lh("Could not bind a texture.")},this.$O=i=>(((i,s)=>{s===t.ImageFitMode.Tile?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.REPEAT),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.REPEAT)):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE))})(this.gl,i),this),this.mO=(t,i=!1)=>{const s=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof Float32Array?t:new Float32Array(t),i?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),s)return s;throw new lh("Could not create vertex buffer")},this.YO=(t,i,s)=>{const e=s||this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(t),this.gl.STATIC_DRAW),i&&this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,i instanceof Float32Array?i:new Float32Array(i)),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),e)return e;throw new lh("Could not create vertex buffer")},this.XO=(t,i,s)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,i*Float32Array.BYTES_PER_ELEMENT,s instanceof Float32Array?s:new Float32Array(s)),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.ZO=(t,i,s=!1)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,s?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.KO=t=>{const i=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,i),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),i)return i;throw new lh("Could not create vertex buffer")},this.qO=t=>{const i=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof Float32Array?t:new Float32Array(t),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),i)return i;throw new lh("Could not create float buffer")},this.JO=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,0,0)),this),this.QO=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.vertexAttribPointer(t,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(t)),this),this.vO=(t,i,...s)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t);const e=s.length;let h=0;for(let t=0;t<e;t+=1)h+=s[t].size;for(let t=0;t<e;t+=1){const i=s[t].location;void 0!==i&&i>-1&&this.gl.enableVertexAttribArray(i)}let r=0;for(let t=0;t<e;t+=1){const i=s[t];void 0!==i.location&&i.location>-1&&this.gl.vertexAttribPointer(i.location,i.size,this.gl.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),r+=i.size}if(void 0!==i)for(let t=0;t<e;t+=1){const e=s[t].location;void 0!==e&&e>-1&&this.tL(e,i)}return this},this.iL=(...t)=>{const i=t.length;for(let s=0;s<i;s+=1){const i=t[s];0!==i&&i>-1&&this.gl.disableVertexAttribArray(i)}return this},this.sL=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,4,this.gl.FLOAT,!1,0,0)),this),this.eL=(t,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(t)),this),this.hL=t=>(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t),this),this._y=(t,i,s=0)=>(i>0&&this.gl.drawArrays(t,s,i),this),this.rL=(t,i=this.gl.TRIANGLES,s=0,e=this.gl.UNSIGNED_SHORT)=>(t>0&&this.gl.drawElements(i,t,e,s),this),this.nL=(t,i,s,e)=>{if(e>0&&(this.gl2&&this.gl2.ctx.drawArraysInstanced(t,i,s,e),this.gl1)){if(!this.gl1.oL.ANGLE_instanced_arrays)return yh.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.oL.ANGLE_instanced_arrays.drawArraysInstancedANGLE(t,i,s,e)}return this},this.aL=(t,i,s,e,h=this.gl.UNSIGNED_SHORT)=>{if(e>0&&(this.gl2&&this.gl2.ctx.drawElementsInstanced(t,i,h,s,e),this.gl1)){if(!this.gl1.oL.ANGLE_instanced_arrays)return yh.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.oL.ANGLE_instanced_arrays.drawElementsInstancedANGLE(t,i,h,s,e)}return this},this.tL=(t,i)=>{if(t>-1&&(this.gl2&&this.gl2.ctx.vertexAttribDivisor(t,i),this.gl1)){if(!this.gl1.oL.ANGLE_instanced_arrays)return yh.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.oL.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(t,i)}return this},this.uL=(t,i,s,e=0)=>{const h=this.gl.TEXTURE0+e;this.gl.activeTexture(h),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,i),this.gl.bindTexture(this.gl.TEXTURE_2D,s),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,s,0);const r=this.rO();r&&this.lO(!1),t(),r&&this.lO(!0),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)},this.lL=(t,i,s)=>{const e=yh.document.createElement("canvas").getContext("2d").createImageData(s.x,s.y),h=e.data;return this.gl.readPixels(t,i,s.x,s.y,this.gl.RGBA,this.gl.UNSIGNED_BYTE,h),e},this.Oo=()=>(this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.clear(this.gl.DEPTH_BUFFER_BIT),this),this.cL=t=>(this.gl.clearColor(t.r,t.g,t.b,t.a),this),this.wB=t=>(this.gl.useProgram(t.BB),this),this.fL=!1,this.dL=[],this.vs=i,this.zd=s,this.vs=i,this.gl=h.ctx,this.gL=h.antialias,this.mL=h.lineAntialias,n&&(this.kO(!0),this.yL());const o=[];if(this.oL={WEBGL_lose_context:this.gl.getExtension("WEBGL_lose_context")},Object.keys(this.oL).forEach((t=>{null===this.oL[t]&&o.push(t)})),"webgl2"===h.type)this.gl2={ctx:h.ctx},this.pL=!0;else{const t={ANGLE_instanced_arrays:this.gl.getExtension("ANGLE_instanced_arrays"),EXT_blend_minmax:this.gl.getExtension("EXT_blend_minmax"),OES_element_index_uint:this.gl.getExtension("OES_element_index_uint"),OES_standard_derivatives:this.gl.getExtension("OES_standard_derivatives"),OES_vertex_array_object:this.gl.getExtension("OES_vertex_array_object")};t.OES_standard_derivatives||(this.mL=!1),Object.keys(t).forEach((i=>{null===t[i]&&o.push(i)}));const i={OES_texture_float:this.gl.getExtension("OES_texture_float")};this.pL=!!i.OES_texture_float,this.gl1={ctx:h.ctx,oL:t,optional:i}}this.zO=o,this.dB=this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),this.vB=this.SL(),this.pO=(t=>{const i=t.gl,s=new Map,e=new Map,h=new Map,r={totalMs:0,vertexShaders:0,fragmentShaders:0,programs:0},n=(i,s,e=[])=>{const h=[],r=[],n={allAttributeNames:Array.from(i.matchAll(/attribute\s[^\s]*\s(.*);/g)).map((t=>t[1])),allUniformNames:Array.from(i.matchAll(/uniform\s[^\s]*\s(.*);/g)).map((t=>t[1])),allVaryingNames:Array.from(i.matchAll(/varying\s[^\s]*\s(.*);/g)).map((t=>t[1])),removedVariableNames:[]};if(t.gl1){const t=i.match(/#extension.*/g);t&&r.push(...t),i=i.replace(/#extension.*/g,"")}else if(h.push("#version 300 es"),(i=(i=(i=i.replace(/#extension.*/g,"")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).includes("usampler2D")&&h.push("precision highp usampler2D;"),"vertex"===s)i=i.replace(/varying/g,"out");else{i=i.replace(/varying/g,"in");const t=e.find((t=>"fragOutput"===t.type));i=(i=t?`out ${t.fragOutput} fragOutput;\n${i}`:`out vec4 fragOutput;\n${i}`).replace(/gl_FragColor/g,"fragOutput")}return r&&h.push(...r),h.push("precision highp float;"),h.push("precision highp int;"),{source:i=`${h.join("\n")}\n${i}`,info:n}};return(...o)=>{const a=t.gl2?"webgl2":"webgl1";let u,l,c,f,d,g,m,y,p,S;try{const t=yh.performance.now();u=o.filter((t=>!1!==t&&void 0!==t)),l=(t=>{const i=t.map((t=>t.idVertex)).filter((t=>void 0!==t)).sort().join(" "),s=t.map((t=>t.idFragment)).filter((t=>void 0!==t)).sort().join(" ");return{vertexShaderID:i,fragmentShaderID:s,programID:`vert: ${i} frag: ${s}`}})(u);const v=h.get(l.programID);if(f="new",v)return f="existing",m=v.vertexShaderSrc,y=v.fragmentShaderSrc,v;c=((t,i,s)=>{const{programID:e,vertexShaderID:h,fragmentShaderID:r}=i;let n,o=!1,a=!1;const u=[];let l;const c=[],f=[];if(t.forEach((i=>{const h=i.apply(t,s);if(h.defaultVertexShader&&(o||(n=h.defaultVertexShader)),h.vertexShader){if(n&&o&&n!==h.vertexShader)throw new Wy(`Conflicting vertex shader templates ${n} vs ${h.vertexShader}`,e,i);n=h.vertexShader,o=!0}if(h.vertexShaderModifiers)for(const t of h.vertexShaderModifiers)"function"==typeof t&&u.push(t);if(h.defaultFragmentShader&&(a||(l=h.defaultFragmentShader)),h.fragmentShader){if(l&&a&&l!==h.fragmentShader)throw new Wy(`Conflicting fragment shader templates ${l} vs ${h.fragmentShader}`,e,i);l=h.fragmentShader,a=!0}if(h.fragmentShaderModifiers)for(const t of h.fragmentShaderModifiers)"function"==typeof t&&c.push(t);h.hints&&h.hints.forEach((t=>{t&&f.push(t)}))})),!n)throw new Wy("No vertex shader template defined",e);if(!l)throw new Wy("Fragment shader not defined",e);return{id:e,vertexShader:{id:h,template:n,modifiers:u},fragmentShader:{id:r,template:l,modifiers:c},hints:f}})(u,l,a);const b=l.vertexShaderID;let x=s.get(b);if(x)m=x.src,d="existing";else{d="new";const t=new np(c.vertexShader.modifiers).build(hp[c.vertexShader.template]),{source:e,info:h}=n(t,"vertex");m=e,p=h,x=new yp(b,e,i,h),s.set(b,x),r.vertexShaders+=1}const M=c.fragmentShader;let _;const w=M.id;if(_=e.get(w),_)y=_.src,g="existing";else{g="new";const t=rp[M.template],s=new np([...M.modifiers]).build(t),{source:h,info:o}=n(s,"fragment",c.hints);y=h,S=o,_=new pp(w,h,i,o),e.set(w,_),r.fragmentShaders+=1}const A=new Sp(x,_,i);return h.set(l.programID,A),r.programs+=1,r.totalMs+=yh.performance.now()-t,A}catch(t){throw gr(0,(()=>{const t="Unexpected LightningChart JS rendering error.\nThis can mean a bug in the library, or that it is simply used in unsupported manner (passing wrong type to method, using disposed component, etc).";return yh.alert(t),new Error(t)}))}}})(this),this.vL=Oy(this.gl),this.bL=new Rp(this),this.CB=(t=>{const i=yh.document.createElement("canvas"),s=i.getContext("2d",{willReadFrequently:!0});if(!s)throw new lh("Failed to get Text canvas rendering context");return s.fillStyle="#fff",(h,r,n)=>{const o=`${r.style} ${r.weight} ${r.size*n}px ${r.family}`;s.font=o,s.textBaseline="alphabetic",s.textAlign="left";const a=s.measureText(h);if(0===a.width)return;const u=void 0!==a.actualBoundingBoxLeft&&void 0!==a.actualBoundingBoxRight?Math.ceil(a.actualBoundingBoxLeft+a.actualBoundingBoxRight):Math.ceil(a.width),l=a.width,c=Math.round(r.size*n),f=void 0!==a.actualBoundingBoxLeft?a.actualBoundingBoxLeft:0;i.width=u>0?u:l,i.height=2*c,s.font=o,s.textBaseline="alphabetic",s.textAlign="left",t?(s.clearRect(0,0,i.width,i.height),s.fillStyle="#fff"):(s.fillStyle="rgba(255,255,255,0)",s.fillRect(0,0,i.width,i.height),s.fillStyle="#000"),s.fillText(h,f,c);const d=s.getImageData(0,0,i.width,i.height);let g=0,m=0;const y=d.width;for(let t=0;t<d.height;t+=1){for(let i=0;i<y;i+=1)if(0!==d.data[t*y*4+4*i+3]){g=t;break}if(0!==g)break}for(let t=d.height-1;t>=0;t-=1){for(let i=0;i<y;i+=1)if(0!==d.data[t*y*4+4*i+3]){m=t;break}if(0!==m)break}const p=s.canvas.height/2-g,S=m-g+1,v=y,b=new Uint8ClampedArray(v*S*1);for(let t=0;t<S;t+=1)for(let i=0;i<v;i+=1)b[1*t*v+1*i+0]=d.data[(t+g)*v*4+4*i+3];return[b,{advance:l,offsetX:f,baseline:p,glyph:h,size:e(v,S)}]}})(r),this.xL=new Dp(this),this.ML=this.mO([0,0,1,0,1,1,0,1]),this._L=this.mO([0,0,1,0,0,1,0,1,1,0,1,1])}uO(t){return t!==this.wL&&(this.wL=t,"disabled"===t?this.gl.disable(this.gl.CULL_FACE):"cull-back"===t?(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK)):"cull-front"===t&&(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.FRONT))),this}nO(){return this.wL||"disabled"}sp(t){return t!==this.qy&&(this.qy=t,t?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST)),this}oO(){return this.qy}AL(t){return this.VO=t,this}TB(){return this.VO}kL(t,i=this.gl.RGBA,s=!1,e,h,r=!1,n=this.gl.UNSIGNED_BYTE,o=i){const a=this.gl.createTexture();if(!a)throw new lh("Couldn't reserve Texture.");return this.gl.bindTexture(this.gl.TEXTURE_2D,a),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),t&&null===h?this.gl.texImage2D(this.gl.TEXTURE_2D,0,o,i,n,t):h&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,o,h.x,h.y,0,i,n,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,e?this.gl.NEAREST:this.gl.LINEAR),s?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.generateMipmap(this.gl.TEXTURE_2D)):this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,e?this.gl.NEAREST:this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),a}mB(t){this.gl.deleteTexture(t)}PO(){const t=this.gl.createFramebuffer();if(!t)throw new lh("Couldn't reserve Framebuffer.");return t}OO(t){this.gl.deleteFramebuffer(t)}DO(){const t=this.gl.createRenderbuffer();if(!t)throw new lh("Couldn't reserve Render buffer.");return t}BO(t){this.gl.deleteRenderbuffer(t)}fO(t,i,s,e){return this.CL&&t===this.CL.x&&i===this.CL.y&&s===this.CL.width&&e===this.CL.height||(this.gl.viewport(t,i,s,e),this.CL={x:t,y:i,width:s,height:e}),this}hO(){return this.CL||{x:0,y:0,width:0,height:0}}dO(t,i,s,e){return this.lO(!0),this.gl.scissor(Math.max(t,0),Math.max(i,0),Math.max(s,0),Math.max(e,0)),this}lO(t){return t===this.TL||(t?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this.TL=t),this}kO(t){return t!==this.fL&&(this.fL=t,t&&this.gl.enable(this.gl.BLEND),t||this.gl.disable(this.gl.BLEND)),this}aO(){return this.fL}yL(t,i,s,e){return t?(void 0!==t&&void 0!==i&&(void 0!==s&&void 0!==e?this.gl.blendFuncSeparate(t,i,s,e):this.gl.blendFunc(t,i)),this):(this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),this)}rO(){return void 0!==this.TL&&this.TL}SO(t,i){const s=new zp(this,t),e=i(s.uniform,s.attribute,s,s.uniformOptional);s.finish(e)}TO(t){this.gl.deleteBuffer(t)}IL(t,i,s){this.bO(t.uniform("uCenter"),i.center).bO(t.uniform("uDistance"),i.distance).GO(t.uniform("uBounds"),i.bounds).MO(t.uniform("uAspect"),i.aspectRatio);const e=s.getColorStops();if(e.length<2)throw new Error("Minimum two color stops required");for(let i=0;i<e.length;i+=1)this._O(t.uniform(`color_${i}`),e[i].color).MO(t.uniform(`stop_${i}`),e[i].offset);return this}FL(t,i,s){this.bO(t.uniform("uStartPoint"),i.startPoint).bO(t.uniform("uEndPoint"),i.endPoint).GO(t.uniform("uBounds"),i.bounds);const e=s.getColorStops();if(e.length<2)throw new Error("Minimum two color stops required");for(let i=0;i<e.length;i+=1)this._O(t.uniform(`color_${i}`),e[i].color).MO(t.uniform(`stop_${i}`),e[i].offset);return this}Qs(t){const i=this.EO.get(t);if(!i){const i=new Hy(this);return this.EO.set(t,i),i}return i}PL(t){const i=this.RO.get(t);if(!i){const i=new bp(this,t);return this.DL(t,i),i}return i}DL(t,i){this.RO.set(t,i)}SL(){const t=this.gl,i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,1,1,0,t.ALPHA,t.UNSIGNED_BYTE,new Uint8ClampedArray([0]));const s=0===t.getError();return s||!1!==this.zd.mr&&yh.console.info("LightningChart JS - Uint8ClampedArray is not supported as texture data. The above WebGL error/warning is from the feature detection. There is nothing to worry about."),t.deleteTexture(i),s}BL(t,i,s,e){if(s)this.vO(i,e,{location:t.attribute("aPos_highpart"),size:2},{location:t.attribute("aPos_lowpart"),size:2});else{const s=t.attribute("aPos");this.JO(s,i),void 0!==e&&this.tL(s,e)}return this}OL(){this.oL.WEBGL_lose_context&&this.oL.WEBGL_lose_context.loseContext()}LL(t){if(this.EL&&this.EL.bufferIdsCount>=t)return this.EL.buffer;this.EL&&(this.TO(this.EL.buffer),this.EL=void 0);const i=t,s=new Float32Array(i);for(let t=0;t<i;t+=1)s[t]=t;const e=this.mO(s);return this.EL={buffer:e,bufferIdsCount:i},e}RL(){return this.gl2?void 0:"attribute"}zL(t,i){if("attribute"===this.RL()){const s=this.LL(i);this.vO(s,void 0,{location:t.attribute("aVertexID"),size:1})}return this}VL(){return this.gl2?void 0:"attribute"}NL(t,i){if("attribute"===this.VL()){const s=this.LL(i);this.vO(s,1,{location:t.attribute("aInstanceID"),size:1})}return this}GL(t,i,s,e,h,r,n,o,a){const u=t.createBuffer();return this.dL.push(u),t.bindFramebuffer(t.FRAMEBUFFER,i),t.bindBuffer(t.PIXEL_PACK_BUFFER,u),t.bufferData(t.PIXEL_PACK_BUFFER,a.byteLength,t.STREAM_READ),t.readPixels(s,e,h,r,n,o,0),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),Op(t,t.PIXEL_PACK_BUFFER,u,0,a).then((()=>a)).catch((t=>{throw t})).finally((()=>{t.deleteBuffer(u),this.dL.splice(this.dL.indexOf(u),1)}))}HL(t,i,s,e,h,r,n,o){const a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,t),a.readPixels(i,s,e,h,r,n,o),a.bindFramebuffer(a.FRAMEBUFFER,null)}}const Op=async(t,i,s,e,h,r,n)=>{const o=t.fenceSync(t.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),((t,i,s)=>{const e=void 0!==s.flags?s.flags:0,h=void 0!==s.retryTimeout?s.retryTimeout:10;return new Promise(((s,r)=>{const n=()=>{const o=t.clientWaitSync(i,e,0);return o===t.WAIT_FAILED?r(new Error(`WebGL Sync WAIT_FAILED ${t.getError()}`)):o!==t.TIMEOUT_EXPIRED?s(void 0):void yh.setTimeout(n,h)};yh.setTimeout(n,0)}))})(t,o,{retryTimeout:10}).then((()=>(t.deleteSync(o),t.bindBuffer(i,s),t.getBufferSubData(i,e,h,r,n),t.bindBuffer(i,null),h))).catch((t=>{throw t}))};class Lp{CO(t){if(t instanceof In||t instanceof Zf){const i=t.Di();this.WL=i.x.scaling,this.UL=-i.x.displacement,this.jL=i.y.scaling,this.$L=-i.y.displacement,this.YL=i.x.highPrecisionOffset,this.XL=i.x.highPrecisionOffset-Math.fround(i.x.highPrecisionOffset),this.ZL=i.y.highPrecisionOffset,this.KL=i.y.highPrecisionOffset-Math.fround(i.y.highPrecisionOffset)}else t instanceof Fn&&(this.MixedScaleXY=t.Di());return this}AO(){return[this.UL,this.$L]}wO(){return[this.WL,this.jL]}qL(){return[this.YL,this.ZL]}JL(){return[this.XL,this.KL]}}class Ep{constructor(){this.WL=0,this.jL=0,this.QL=0,this.UL=0,this.$L=0,this.tE=0}iE(t){return this.WL=t.jt(),this.UL=t.getInnerStart()+.5*this.WL*t.$t(),this}sE(t){return this.jL=t.jt(),this.$L=t.getInnerStart()+.5*this.jL*t.$t(),this}eE(t){return this.QL=t.jt(),this.tE=t.getInnerStart()+.5*this.QL*t.$t(),this}wO(){return[this.WL,this.jL,this.QL]}AO(){return[this.UL,this.$L,this.tE]}hE(t,i,s,h,r){const o=e(2*(t-s.x)/(s.width-s.x)-1,2*(i-s.y)/(s.height-s.y)-1),a=Fy.multiply(h,[o.x,o.y,r,1]);return n(a[0],a[1],a[2])}}class Rp{constructor(t){this.OD=t}BD(t,i,s,e,h,r=0){const n=this.OD,o=void 0===e;if(!(e=e||n.PO()))throw new lh("Could not bind a framebuffer.");const a=n.hO(),u=n.aO();n.kO(!1),n.uL((()=>{n.fO(0,0,s.x,s.y),t()}),e,i,r),o&&n.OO(e),this.OD.cL(h),this.OD.fO(a.x,a.y,a.width,a.height),n.kO(u)}}class zp{constructor(t,i){this.rE=[],this.nE=[],this.uniform=t=>{const i=this.shader.RB(t);return this.nE.push({name:t,optional:!1}),i},this.uniformOptional=t=>{const i=this.shader.zB(t);return this.nE.push({name:t,optional:!0}),i},this.attribute=t=>{const i=this.shader.VB(t);return this.rE.push({name:t,location:i}),i},this.glUtils=t,this.shader=i}finish(t){for(const t of this.rE)this.glUtils.iL(t.location),this.glUtils.tL(t.location,0)}}class Vp extends Po{constructor(t,i,s,e,h){super(t,i,s,e),this.oE=new Map,this.aE=t,this.uE=i,this.OD=t.lE(),this.cE=h,this.uE=i}gB(){return this}BD(t){if(!this.cE||0!==t||0===this.oE.size)return this;const i=Array.from(this.oE.values()).map((t=>t.fE.filter((t=>t.dE)).map((t=>t.Xe)).flat().filter((t=>void 0!==t)).filter((t=>t.getVisible())))).flat();if(0===i.length)return this;const s=this.cE;return this.OD.xL.FO(i,s),this}_e(){return this}ii(){return 0}ti(){return 0}ei(){return 0}si(){return 0}Yo(){return 0}Xo(){return 0}Rl(t,i){const s={fE:[]},e=(t,i)=>{const e={Xe:t||[],dE:void 0===i||i};s.fE.push(e);const h={Hc:t=>(e.Xe=t,h),ee:t=>(e.dE=t,h),re:()=>e.dE};return h},h={};Object.keys(i).forEach((t=>{const s=i[t],r=s.shapes||[],n=void 0===s.themeEffectEnabled||s.themeEffectEnabled,o=e(r,n);h[t]=o}));const r={Ug:e,...h};this.oE.set(t,s);const n=t.onDispose((()=>{this.oE.delete(t),t.offDispose(n)}));return r}}const Np=t=>{if(t instanceof In||t instanceof Zf)return t.Ri()?"linear-highPrecision":"linear";if(t instanceof Fn){const i={};return t.x instanceof pn&&(i.x={base:t.x.Ii()}),t.y instanceof pn&&(i.y={base:t.y.Ii()}),["logarithmic",i]}return"linear"};function Gp(i,s,e,h,r,n){let o=s.x.qt(i.max.x),a=s.x.qt(i.min.x),u=s.y.qt(i.max.y),l=s.y.qt(i.min.y),c=o-a,f=u-l;if(c<1){const t=(a+o)/2;a=t-.5,o=t+.5,c=1}if(f<1){const t=(l+u)/2;l=t-.5,u=t+.5,f=1}const d=c/f,g=c*e.x,m=f*e.y,y=c-g,p=f-m,S=g>y?[y,g]:[g,y],v=m>p?[p,m]:[m,p];let b,x,M=1,_=1;switch(h){default:case t.GradientExtent.closestSide:if(b=S[0]/c,x=v[0]/f,r===t.GradientShape.circle){const t=Math.min(b*d,x);M=t,_=t}else M=b*d,_=x;break;case t.GradientExtent.farthestSide:if(b=S[1]/c,x=v[1]/f,r===t.GradientShape.circle){const t=Math.max(b*d,x);M=t,_=t}else M=b*d,_=x;break;case t.GradientExtent.closestCorner:if(x=v[0]/f,r===t.GradientShape.circle){b=S[0]/c*d;const t=Math.sqrt(b*b+x*x);M=t,_=t}else{b=S[0]/c;const t=Math.sqrt(b*b+x*x);M=t*d,_=t}break;case t.GradientExtent.farthestCorner:if(x=v[1]/f,r===t.GradientShape.circle){b=S[1]/c*d;const t=Math.sqrt(b*b+x*x);M=t,_=t}else{b=S[1]/c;const t=Math.sqrt(b*b+x*x);M=t*d,_=t}}return{bounds:[a*n,l*n,c*n,f*n],center:[e.x*d,e.y],distance:[Math.max(M,1e-4),Math.max(_,1e-4)],aspectRatio:d}}function Hp(t,i,s,h){const r=i.x.qt(t.max.x),n=i.x.qt(t.min.x),o=i.y.qt(t.max.y),a=i.y.qt(t.min.y),u=r-n,l=o-a,c=Math.abs(u*Math.sin(s))+Math.abs(l*Math.cos(s)),f=e(u/2-Math.sin(s)*(c/2),l/2-Math.cos(s)*(c/2)),d=e(u/2+Math.sin(s)*(c/2),l/2+Math.cos(s)*(c/2));return{bounds:[n*h,a*h,u*h,l*h],startPoint:[f.x*h,f.y*h],endPoint:[d.x*h,d.y*h]}}const Wp=(t,i,s)=>((t,i,s,h)=>{const r=[];let n=0;const o=Jr(i,s/2);let a,u,l,c,f=t[t.length-1],d=0;for(let s=0;s<t.length;s+=1){a=t[s],u=s===t.length-1?t[0]:t[s+1],s>0&&(f=t[s-1]),ph(a,f)&&(f=Qr(a,Zr(Jr(tn(u,a),-1)))),ph(a,u)&&(u=Qr(a,Zr(Jr(tn(f,a),-1))));const h=en(f,i),g=en(a,i),m=en(u,i),y=Zr(tn(g,h)),p=Zr(tn(m,g)),S=Qr(y,p),v=e(-S.y,S.x),b=e(-y.y,y.x),x=1/rn(v,b),M=qr(v),_=Zr(tn(y,p)),w=Math.sign(rn(v,_))||1,A=sn(v,Jr(o,x)),k=sn(v,Jr(o,-x));if(M<1||x===1/0){let t={x:0,y:0},i={x:0,y:0},s={x:0,y:0},h={x:0,y:0};const l=e(-p.y,p.x),c=Math.sign(rn(y,v))||w,g=sn(b,Jr(o,c)),m=sn(l,Jr(o,c));1===w?(t=g,i=k,s=m,h=k):(t=A,i=g,s=A,h=m);const S=4*Lr(f,a),M=4*Lr(a,u);(x>S||x>M)&&(1===w?(t=g,i=m,s=m,h=g):(t=m,i=g,s=g,h=m));const _=Qr(a,t),C=Qr(a,i),T=Qr(a,s),I=Qr(a,h);r[n]=_,n+=1,r[n]=C,n+=1,r[n]=T,n+=1,r[n]=I,n+=1,d=4}else{const t=Qr(a,A),i=Qr(a,k);r[n]=t,n+=1,r[n]=i,n+=1,d=2}c=l,l=t[s]}return r[n]=r[0],n+=1,r[n]=r[1],n+=1,[r,d,[c,l]]})(t,i,s)[0];class Up extends Yo{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.PB=new Lp,this.gE=kr,this.mE=kr,this.aE=t,this.uE=i,this.yE=r,this.pE=n,this.OD=t.lE()}SE(t,i){let s=0,e=Array(0),h=0;if(void 0!==i){const h=t.length,r=Array(h+i.length);let n=0,o=0;for(;n<h;)r[o]=t[n],r[o+1]=i[n],o+=2,n+=1;e=r,s=this.OD.gl.TRIANGLE_STRIP}else e=t,s=this.OD.gl.TRIANGLE_FAN;const r=Kh(e,this.Jt.Ri());return h=e.length,[e,this.OD.mO(r),h,s]}vE(t,i,s,e){let h=Array(0);if(void 0===i)h=t;else{let s=0,e=0;const r=t.length;for(s=0,e=r,h=Array(r+i.length-2),i.reverse();s<r;)h[s]=t[s],h[e]=i[s],e+=1,s+=1}if(1===s||-1===s)return[Kh(h,this.Jt.Ri()),h.length];const r=Wp(h,e,s);return[Kh(r,this.Jt.Ri()),r.length]}_e(){const t=this.kn(),i=this.Jr.M();if(this.Cn()){const s=Math.abs(this.ot.M()-this.ga.M());this.PB.CO(this.Jt);const h=this.Jt.qi()||t,r=this.Jt.Qi(),n=this.ma.M(),o=this.ya.M(),[u,l]=yd(this.Ln.M(),this.ga.M(),this.ot.M(),this.ma.M(),this.ya.M(),this.Sa.M()),c=this.pa.M(),f=c>0?yd(this.Ln.M(),this.ga.M(),this.ot.M(),this.ma.M()*c/100,this.ya.M()*c/100,l)[0]:[this.Ln.M()],d=u.length-1;if(2===d){const t=(u[d-1].x+u[1].x)/2,i=(u[d-1].y+u[1].y)/2;this.va=e(t,i)}else{const t=Math.floor(d/2);this.va=e(u[t].x,u[t].y)}this.ba=u[1];const g=u.length-1;this.xa=u[g],this.pa.M()&&(u.shift(),f.shift());let m=!1;(this.Ln.o||this.ga.o||this.ot.o||this.ma.o||this.ya.o||this.pa.o||this.Sa.o||h)&&(this.mE=a(e(this.io().x-n,this.io().y-o),e(this.io().x+n,this.io().y+o)),m=!0,this.Ln.o=!1,this.ga.o=!1,this.ot.o=!1,this.ma.o=!1,this.ya.o=!1,this.pa.o=!1,this.Sa.o=!1);const y=this.wn();(m||y)&&this._n!==Ie&&(this.pa.M()?(this.bE&&this.OD.gl.deleteBuffer(this.bE),[this.xE,this.bE,this.ME,this._E]=this.SE(u,f)):(this.bE&&this.OD.gl.deleteBuffer(this.bE),[this.xE,this.bE,this.ME,this._E]=this.SE(u,void 0)),this._n instanceof Ke?this.wE=Gp(this.mE,this.Jt,this._n.getPosition(),this._n.getExtent(),this._n.getShape(),this.OD.TB()):this._n instanceof Je?this.AE=Hp(this.mE,this.Jt,this._n.getAngle(!0),this.OD.TB()):(this.wE=void 0,this.AE=void 0));const p=this._n instanceof De&&this._n,S=this._n instanceof Je&&this._n,v=this._n instanceof Ke&&this._n,b=p||S||v;y&&(this.kE=b?this.OD.pO(Fp["2D"],Fp.Color({dataType:this._n instanceof Ke||this._n instanceof Je?["gradient",this._n]:"uniform"}),Fp.VertexLocation({axisWorldTranslation:Np(this.Jt),normalSource:void 0})):void 0,this.Tn(this._n));const x=this.In;if(x instanceof sh&&(m||this.Dn(x.getThickness())||h)){this.pa.M()?360===s?(u.pop(),f.pop(),[this.CE,this.TE]=this.vE(u,void 0,x.getThickness(),r),this.IE&&this.CE?this.OD.ZO(this.IE,this.CE,!0):!this.IE&&this.CE?this.IE=this.OD.mO(this.CE,!0):this.IE&&!this.CE&&(this.OD.TO(this.IE),this.IE=void 0),[this.FE,this.PE]=this.vE(f,void 0,x.getThickness(),r),this.DE&&this.FE?this.OD.ZO(this.DE,this.FE,!0):!this.DE&&this.FE?this.DE=this.OD.mO(this.FE,!0):this.DE&&!this.FE&&(this.OD.TO(this.DE),this.DE=void 0)):([this.CE,this.TE]=this.vE(u,f,x.getThickness(),r),this.IE&&this.CE?this.OD.ZO(this.IE,this.CE,!0):!this.IE&&this.CE?this.IE=this.OD.mO(this.CE,!0):this.IE&&!this.CE&&(this.OD.TO(this.IE),this.IE=void 0),this.FE&&(this.DE&&this.OD.gl.deleteBuffer(this.DE),this.DE=void 0,this.PE=0)):(360===s&&(u.shift(),u.pop()),[this.CE,this.TE]=this.vE(u,void 0,x.getThickness(),r),this.IE&&this.CE?this.OD.ZO(this.IE,this.CE,!0):!this.IE&&this.CE?this.IE=this.OD.mO(this.CE,!0):this.IE&&!this.CE&&(this.OD.TO(this.IE),this.IE=void 0));const t=x.getFillStyle();t instanceof Ke?this.BE=Gp(this.mE,this.Jt,t.getPosition(),t.getExtent(),t.getShape(),this.OD.TB()):t instanceof Je?this.OE=Hp(this.mE,this.Jt,t.getAngle(!0),this.OD.TB()):(this.BE=void 0,this.OE=void 0),this.LE=t===Ie?void 0:this.OD.pO(Fp["2D"],Fp.Color({dataType:t instanceof Ke||t instanceof Je?["gradient",t]:"uniform"}),Fp.VertexLocation({axisWorldTranslation:Np(this.Jt),normalSource:void 0})),this.Bn(x)}if(m){let t=1,i=1;x instanceof sh&&(t=x.getThickness()*r.x,i=x.getThickness()*r.y),this.gE=a(e(this.mE.min.x-t,this.mE.min.y-i),e(this.mE.max.x+t,this.mE.max.y+i))}this.EE=i&&b?this.EE||this.OD.pO(Fp["2D"],Fp.Color({dataType:"uniform"}),Fp.VertexLocation({axisWorldTranslation:Np(this.Jt),normalSource:void 0})):void 0,this.RE=i&&this.In!==th?this.RE||this.OD.pO(Fp["2D"],Fp.Color({dataType:"uniform"}),Fp.VertexLocation({axisWorldTranslation:Np(this.Jt),normalSource:void 0})):void 0}return this}BD(t){if(this.Cn()){const i=1===t?this.EE:this.kE,s=this._n,e=this.bE;i&&e&&this.OD.wB(i).SO(i,((i,h,r,n)=>{if(this.OD.bO(i("uScale"),this.PB.wO()).bO(i("uDisp"),this.PB.AO()).bO(n("uScaleStart_highpart"),this.PB.qL()).bO(n("uScaleStart_lowpart"),this.PB.JL()).BL(r,e,this.Jt.Ri(),void 0).MO(i("uIsHighlighted"),1===t||2===t?0:this.en)._O(i("uHighlightColorOffset"),this.an).MO(i("uRenderEffectMask"),2===t?1:0),1===t)this.OD._O(i("uColor"),this.pE);else if(s instanceof De)this.OD._O(i("uColor"),s.getColor());else if(s instanceof Ke){if(!this.wE)return!1;this.OD.IL(r,this.wE,s)}else if(s instanceof Je){if(!this.AE)return!1;this.OD.FL(r,this.AE,s)}return this.OD._y(this._E,this.ME),!0}));const h=this.In;h instanceof sh&&(void 0!==this.IE&&this.zE(t,this.IE,this.TE,h),void 0!==this.DE&&this.zE(t,this.DE,this.PE,h))}return this}zE(t,i,s,e){const h=1===t?this.RE:this.LE,r=e.getFillStyle();h&&this.OD.wB(h).SO(h,((h,n,o,a)=>{if(this.OD.bO(h("uScale"),this.PB.wO()).bO(h("uDisp"),this.PB.AO()).BL(o,i,this.Jt.Ri(),void 0).MO(h("uIsHighlighted"),1===t||2===t?0:this.en)._O(h("uHighlightColorOffset"),this.an).MO(h("uRenderEffectMask"),2===t?1:0),1===t)this.OD._O(h("uColor"),this.pE);else if(r instanceof De)this.OD._O(h("uColor"),r.getColor());else if(r instanceof Ke){if(!this.BE)return!1;this.OD.IL(o,this.BE,r)}else if(r instanceof Je){if(!this.OE)return!1;this.OD.FL(o,this.OE,r)}const u=e.getThickness(),l=-1===u||1===u;return this.OD._y(l?this.OD.gl.LINE_LOOP:this.OD.gl.TRIANGLE_STRIP,s),!0}))}gB(){return this.VE&&(this.OD.TO(this.VE),this.VE=void 0),this.NE&&(this.OD.TO(this.NE),this.NE=void 0),this.bE&&(this.OD.TO(this.bE),this.bE=void 0),this.IE&&(this.OD.TO(this.IE),this.IE=void 0),this.DE&&(this.OD.TO(this.DE),this.DE=void 0),this.kE=void 0,this.LE=void 0,this.EE=void 0,this.RE=void 0,this}ii(){return this.mE.max.x}ti(){return this.mE.min.x}ei(){return this.mE.max.y}si(){return this.mE.min.y}Yo(){return xr(this.In)}Xo(){return xr(this.In)}}class jp{constructor(){this.first=0,this.second=1,this.third=2,this.fourth=3,this.fifth=4,this.sixth=5}GE(t){return this.first=t,this.second=t+1,this.third=t+2,this.fourth=t+3,this.fifth=t+4,this.sixth=t+5,t+=6,this}HE(){return this.first=this.second,this.second=this.third,this.third=this.fourth,this.fourth=this.fifth,this.fifth=this.sixth,this.sixth+=1,this}WE(){return this.first=this.third,this.second=this.fourth,this.third=this.fifth,this.fourth=this.sixth,this.fifth=this.fourth+1,this.sixth=this.fifth+1,this}UE(t){const i=t.buffer;let{position:s}=t;return i[s]=this.first,i[s+1]=this.second,i[s+2]=this.third,s+=3,t.position=s,t.next&&this.HE(),this}jE(t){const i=t.buffer;let{position:s}=t;return i[s]=this.first,i[s+1]=this.third,i[s+2]=this.second,i[s+3]=this.third,i[s+4]=this.fourth,i[s+5]=this.second,s+=6,t.position=s,t.next&&this.WE(),this}$E(t,i){i.next=!0,6*t>=i.buffer.length&&(i.buffer=Array(6*t));for(let s=0;s<t;s+=1)this.jE(i);return this}get YE(){return[this.first,this.second,this.third,this.fourth,this.fifth,this.sixth]}}const $p=((t=0)=>(new jp).GE(t))(),Yp=(t,i,s,e,h,r,n,o,a,u)=>(void 0===o&&void 0===n||$p.HE(),r.push(t,i),h.push($p.first,$p.second,$p.third),o=void 0,n=void 0,h.push($p.third,$p.fourth,$p.second),a=$p.third,$p.WE(),u&&r.push(s,e),[n,o,a]),Xp=(t,i,s,e,h,r,n,o,a,u,l)=>{void 0===a&&void 0===o||$p.HE(),n.push(t,i),h.push($p.first,$p.second,$p.third);const c=dn(t,s,i,e);return a=void 0,void 0!==c&&(void 0===a&&(a=c),n.push(a),r.push($p.third,$p.fourth,$p.fifth),u=$p.fourth),$p.WE(),l&&n.push(s,e),[o,a,u]},Zp=(t,i,s,e,h,r,n,o,a,u)=>(void 0===n&&void 0===r||$p.HE(),h.push(t,i),e.push($p.first,$p.second,$p.third),r=s,n=void 0,o=$p.third,u?h.push(s):a=!0,[r,n,o,a]),Kp=(t,i,s,e,h,r,n,o,a,u,l)=>(0!==r.length?(void 0===o&&void 0===n||$p.HE(),$p.HE()):a>0&&($p.HE(),l>0&&(l-=1)),r.push(t),h.push($p.first,$p.second,$p.third),a=$p.second,n=t,o=void 0,u&&r.push(s,e),[n,o,a,l]),qp=(t,i=0)=>{$p.GE(i);const[s,e]=t,h=s.length,r=[],n=[],o=[];let a,u,l=i,c=0,f=s[c],d=e[c],g=s[c],m=e[c],y=!1,p=l>0?g.y!==m.y?2:1:0;if(h>1)for(;c<h-1;){g=f,m=d,c+=1,f=s[c],d=e[c];const t=c===h-1;g.y>m.y?f.y>d.y?[a,u,l]=Yp(g,m,f,d,r,o,a,u,l,t):f.y<d.y?[a,u,l]=Xp(g,m,f,d,r,n,o,a,u,l,t):[a,u,l,y]=Zp(g,m,f,r,o,a,u,l,y,t):g.y<m.y?f.y<d.y?[a,u,l]=Yp(g,m,f,d,n,o,a,u,l,t):f.y>d.y?[a,u,l]=Xp(g,m,f,d,n,r,o,a,u,l,t):[a,u,l,y]=Zp(g,m,f,n,o,a,u,l,y,t):f.y===d.y?(a=g,y&&(o.push(g),y=!1,$p.HE()),0===o.length&&l>0&&p>0&&(p-=1)):f.y>d.y?[a,u,l,p]=Kp(g,0,f,d,r,o,a,u,l,t,p):[a,u,l,p]=Kp(g,0,f,d,n,o,a,u,l,t,p)}return[o,new Uint16Array(r),new Uint16Array(n),l,p]};class Jp extends $o{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.PB=new Lp,this.XE=0,this.do=Array(),this.ZE=0,this.KE=new Uint16Array(0),this.qE=new Uint16Array(0),this.aE=t,this.uE=i,this.yE=r,this.pE=n,this.OD=t.lE()}_e(){const t=this.kn(),i=this.Jr.M(),s=this.Ao;if(this.Cn()){this.PB.CO(this.Jt);const e=this.Jt instanceof Fn==0,h=e?this.Jt.Qi():void 0,r=this.ra(),n=this.Jt.qi()||t,o=s||this.qo.o||n&&"disabled"!==r.type;if(o){if(this.XE=0,this.KE=new Uint16Array(0),this.qE=new Uint16Array(0),this.do.length=0,this.ZE=0,this.Jo>1){const[t,i,s,n]=qp([e?r.packager(this.Zo,h,.5):this.Zo,e?r.packager(this.Ko,h,.5):this.Ko]);this.XE=n,this.KE=i,this.qE=s,this.do=t,this.ZE=t.length}this.qo.o=!1}if(this.ta&&this.xo[0].length>1){const[t,i]=this.xo,s=t.length,[n,o,a,u,l]=qp([e?r.packager(t,h,.5):t,e?r.packager(i,h,.5):i],this.XE);this.XE=u;const c=n.length;for(let t=l;t<c;t+=1)this.do[this.ZE]=n[t],this.ZE+=1;this.KE=gn(this.KE,o),this.qE=gn(this.qE,a);for(let e=l>0||this.Jo>0?1:l;e<s;e+=1)this.Zo[this.Jo]=t[e],this.Ko[this.Jo]=i[e],this.Jo+=1;this.Qo=!0,this.ta=!1,this.xo=[]}const a=this._n,u=this.An!==a,l=a instanceof De&&a,c=a instanceof Ke&&a,f=a instanceof Je&&a,d=a instanceof Le&&["x","y"].includes(a.getLookUpProperty())&&a,g=l||c||f||d,m=this.ia,y=this.fa!==m,p=m instanceof De&&m,S=m instanceof Ke&&m,v=m instanceof Je&&m,b=m instanceof Le&&["x","y"].includes(m.getLookUpProperty())&&m,x=p||S||v||b;if(u||t)if(this.JE=g?this.OD.pO(Fp["2D"],Fp.Color({dataType:f?["gradient",f]:c?["gradient",c]:d?["lookup",d.getLookUpProperty()]:"uniform"}),Fp.VertexLocation({axisWorldTranslation:Np(this.Jt),normalSource:void 0})):void 0,d){if(d&&d.lut.isValid){const t=d.getPalette();this.QE=this.aE.tR(t,this.iR,this.QE),this.iR=t}}else this.aE.vL.hn(this.iR),this.iR=void 0;if(c?this.wE=Gp(this.fn(),this.Jt,c.getPosition(),c.getExtent(),c.getShape(),this.OD.TB()):f?this.AE=Hp(this.fn(),this.Jt,f.getAngle(!0),this.OD.TB()):(this.wE=void 0,this.AE=void 0),y||t)if(this.sR=x?this.OD.pO(Fp["2D"],Fp.Color({dataType:v?["gradient",v]:S?["gradient",S]:b?["lookup",b.getLookUpProperty()]:"uniform"}),Fp.VertexLocation({axisWorldTranslation:Np(this.Jt),normalSource:void 0})):void 0,b){if(b&&b.lut.isValid){const t=b.getPalette();this.eR=this.aE.tR(t,this.hR,this.eR),this.hR=t}}else this.aE.vL.hn(this.hR),this.hR=void 0;if(S?this.rR=Gp(this.fn(),this.Jt,S.getPosition(),S.getExtent(),S.getShape(),this.OD.TB()):v?this.nR=Hp(this.fn(),this.Jt,v.getAngle(!0),this.OD.TB()):(this.rR=void 0,this.nR=void 0),(t||this.Qo||o)&&this.Qo||o){const t=this.do,i=this.ZE,s=new Float32Array(2*i);let e=0,h=0;for(;e<i;)s[h]=t[e].x,s[h+1]=t[e].y,h+=2,e+=1;this.oR&&this.OD.gl.deleteBuffer(this.oR),this.oR=this.OD.mO(s),this.aR&&(this.OD.gl.deleteBuffer(this.aR),this.aR=void 0),g&&(this.aR=this.OD.KO(this.KE),this.uR=this.KE.length),this.lR&&(this.OD.gl.deleteBuffer(this.lR),this.lR=void 0),x&&(this.lR=this.OD.KO(this.qE),this.cR=this.qE.length),this.Qo=!1}this.EE=i&&(x||g)?this.EE||this.OD.pO(Fp["2D"],Fp.Color({dataType:"uniform"}),Fp.VertexLocation({axisWorldTranslation:Np(this.Jt),normalSource:void 0})):void 0,this.Tn(this._n),this.da(this.ia),this.Ao=!1}return this}BD(t){if(this.Cn()){const i=this._n,s=this.ia,e=1===t?this.EE:this.sR;if(e&&this.oR&&this.lR){const i=this.oR,h=this.lR;this.OD.wB(e).SO(e,((e,r,n,o)=>{if(this.OD.JO(r("aPos"),i).hL(h).MO(e("uIsHighlighted"),1===t||2===t?0:this.en)._O(e("uHighlightColorOffset"),this.an).MO(e("uRenderEffectMask"),2===t?1:0),this.Jt instanceof In||this.Jt instanceof Zf?this.OD.bO(e("uScale"),this.PB.wO()).bO(e("uDisp"),this.PB.AO()):this.Jt instanceof Fn&&this.OD.bO(o("uScaleStart"),this.PB.MixedScaleXY.uScaleStart).bO(o("uScaleStartLog"),this.PB.MixedScaleXY.uScaleStartLog).bO(o("uScaleInterval"),this.PB.MixedScaleXY.uScaleInterval).bO(o("uScaleIntervalLog"),this.PB.MixedScaleXY.uScaleIntervalLog).bO(e("uViewportStart"),this.PB.MixedScaleXY.uViewportStart).bO(e("uViewportSize"),this.PB.MixedScaleXY.uViewportSize),1===t)this.OD._O(e("uColor"),this.pE);else if(s instanceof De)this.OD._O(e("uColor"),s.getColor());else if(s instanceof Ke){if(!this.rR)return!1;this.OD.IL(n,this.rR,s)}else if(s instanceof Je){if(!this.nR)return!1;this.OD.FL(n,this.nR,s)}else s instanceof Le&&this.eR&&this.OD.xO(e("uLookupTexture"),this.eR.texture,0).MO(e("uLookupMin"),s.lut.min).MO(e("uLookupMax"),s.lut.max).MO(e("uLookupTextureHeightPx"),this.eR.textureHeight);return this.OD.rL(this.cR),!0}))}const h=1===t?this.EE:this.JE;if(h&&this.oR&&this.aR){const s=this.oR,e=this.aR;this.OD.wB(h).SO(h,((h,r,n,o)=>{if(this.OD.JO(r("aPos"),s).hL(e).MO(h("uIsHighlighted"),1===t||2===t?0:this.en)._O(h("uHighlightColorOffset"),this.an).MO(h("uRenderEffectMask"),2===t?1:0),this.Jt instanceof In||this.Jt instanceof Zf?this.OD.bO(h("uScale"),this.PB.wO()).bO(h("uDisp"),this.PB.AO()):this.Jt instanceof Fn&&this.OD.bO(o("uScaleStart"),this.PB.MixedScaleXY.uScaleStart).bO(o("uScaleStartLog"),this.PB.MixedScaleXY.uScaleStartLog).bO(o("uScaleInterval"),this.PB.MixedScaleXY.uScaleInterval).bO(o("uScaleIntervalLog"),this.PB.MixedScaleXY.uScaleIntervalLog).bO(h("uViewportStart"),this.PB.MixedScaleXY.uViewportStart).bO(h("uViewportSize"),this.PB.MixedScaleXY.uViewportSize),1===t)this.OD._O(h("uColor"),this.pE);else if(i instanceof De)this.OD._O(h("uColor"),i.getColor());else if(i instanceof Ke){if(!this.wE)return!1;this.OD.IL(n,this.wE,i)}else if(i instanceof Je){if(!this.AE)return!1;this.OD.FL(n,this.AE,i)}else i instanceof Le&&this.QE&&this.OD.xO(h("uLookupTexture"),this.QE.texture,0).MO(h("uLookupMin"),i.lut.min).MO(h("uLookupMax"),i.lut.max).MO(h("uLookupTextureHeightPx"),this.QE.textureHeight);return this.OD.rL(this.uR),!0}))}}return this}ii(){return this.vo.max.x}ti(){return this.vo.min.x}ei(){return this.vo.max.y}si(){return this.vo.min.y}Yo(){return 0}Xo(){return 0}$b(t){this.Eo()>0&&this._e();const[i,s]=this.To(),e=i.length>2&&i[1].x<i[0].x,h=Mo(i,t,bo.NearestX,this.sa,this.ea,this.Jt,this.vs.Jt,this.vo,"x",e);if(void 0===h)return;const r=[i[h],s[h]];return Number.isNaN(r[0].y)||Number.isNaN(r[1].y)?void 0:r}wA(t){this.Eo()>0&&this._e();const[i,s]=this.To(),e=i.length;if(0===e)return;const h=this.sa?1:0,r=e-(this.ea?2:1),n=i.length>2&&i[1].x<i[0].x,o=Co(i,oh(t,this.vs.Jt,this.Jt),"x",n,h,r);if(!o)return;const a=[zr(i[o.a],i[o.b],o.lerpAmount),zr(s[o.a],s[o.b],o.lerpAmount)];return Number.isNaN(a[0].y)||Number.isNaN(a[1].y)?void 0:a}gB(){return this.lR&&(this.OD.TO(this.lR),this.lR=void 0),this.aR&&(this.OD.TO(this.aR),this.aR=void 0),this.oR&&(this.OD.TO(this.oR),this.oR=void 0),this.eR=void 0,this.QE=void 0,this.hR&&(this.aE.vL.hn(this.hR),this.hR=void 0),this.iR&&(this.aE.vL.hn(this.iR),this.iR=void 0),this}}class Qp extends Py{constructor(t,i){super(t),this.fR=i;const{vertices:s,indices:e,indicesCount:h,drawMode:r}=this.dR();this.gR=t.mO(s),this.mR=t.KO(e),this.yR=h,this.pR=r}wB(t,i){return this.OD.vO(this.gR,0,{location:t.attribute("aSegmentPosition"),size:2},{location:t.attribute("aSegmentSide"),size:1},{location:i?t.attribute("aSegmentInside"):void 0,size:1}),this.OD.hL(this.mR),this}_y(t,i,s){return this.OD.aL(void 0!==i?i:this.pR,this.yR,s||0,t,this.OD.gl.UNSIGNED_BYTE),this}dR(){const t=[];[1,0].forEach((i=>{const s=1===i?.5*Math.PI:1.5*Math.PI;for(let e=0;e<=this.fR;e+=1){const h=s-e*Math.PI/this.fR;t.push(.5*Math.cos(h),.5*Math.sin(h),i,0)}})),t.push(0,0,1,1),t.push(0,0,0,1);const i=t.length/4,s=[];for(let t=0;t<this.fR;t+=1)s.push(t,t+1,i-2),s.push(t+i/2-1,t+i/2,i-1);return s.push(0,i-2,i-1),s.push(i-1,i-2,i/2-1),s.push(0,i-3,i-1),s.push(i/2-2,i-2,i/2-1),{vertices:new Float32Array(t),indices:new Uint8Array(s),indicesCount:s.length,verticesCount:i,drawMode:this.OD.gl.TRIANGLES}}HD(){this.OD.TO(this.gR),this.OD.TO(this.mR)}}const tS=(t,i)=>((t,i)=>{let s=t.LO.zD.get(i);return s||(s=new Qp(t,i),t.LO.zD.set(i,s),s)})(t,i>=50?8:i>=20?6:i>=7?4:i>=4?3:1===i?1:2),iS=(t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=n("aLocationA_highpart"),s=n("aLocationA_lowpart"),e=n("aLocationB_highpart"),a=n("aLocationB_lowpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.tL(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+2)*Float32Array.BYTES_PER_ELEMENT),i.tL(s,1),o.enableVertexAttribArray(s),o.vertexAttribPointer(e,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.tL(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(a,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+h+2)*Float32Array.BYTES_PER_ELEMENT),i.tL(a,1),o.enableVertexAttribArray(a)}else{const t=n("aLocationA"),s=n("aLocationB");o.vertexAttribPointer(t,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.tL(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.tL(s,1),o.enableVertexAttribArray(s)}},sS=(t,i,s,e,h,r,n)=>{const o=t.lE(),{uniform:a,uniformOptional:u}=s,l=1/t.hr.yr,c=(h?Math.max(r,l):Math.max(r,0))+1;o.MO(a("uThicknessPixels"),c).MO(u("uAALimit"),1-(c-1)/c).bO(a("uRatioPxClip"),[2/t.xi().x,2/t.xi().y]),i.wB(s,e)._y(n)};class eS extends ia{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.PB=new Lp,this.vo=kr,this.aE=t,this.uE=i,this.yE=r,this.pE=n,this.OD=t.lE(),this.SR=this.OD.mL}_e(){const t=this.Fn(),i=this.Ra,s=i instanceof sh&&i,h=s&&s.getFillStyle(),r=h instanceof De&&h,n=h instanceof Je&&h,o=h instanceof Ke&&h,u=h instanceof Le&&h,l=s,c=r||n||o||u&&["x","y"].includes(u.getLookUpProperty())&&u,f=this.Hi(),d=this.Gi(),g=this.Jr.M(),m=this.Jr.o,y=i.getThickness();if(this.PB.CO(this.Jt),this.Wa&&(this.vR&&this.OD.gl.deleteBuffer(this.vR),this.vR=this.OD.mO(Kh([f,d],this.Jt.Ri())),this.vo=a(e(f.x,f.y),e(d.x,d.y))),t||m){const t=this.Cn()&&l&&c&&l.getThickness()>0,i=n?["gradient",n]:o?["gradient",o]:u?["lookup",u.getLookUpProperty()]:"uniform";if(this.bR=t?{type:"triangulated",shader:this.OD.pO(Fp["2D"],Fp.Color({dataType:i}),Fp.LineInstanced2D({axisWorldTranslation:Np(this.Jt),normalSource:void 0}),this.SR?Fp.AliasedEdge():void 0),mousePickingShader:g?this.OD.pO(Fp["2D"],Fp.Color({dataType:"uniform"}),Fp.LineInstanced2D({axisWorldTranslation:Np(this.Jt),normalSource:void 0})):void 0,geometry:tS(this.OD,y),lineStyle:s,fillStyleSolid:r,fillStyleLinearGradient:n,fillStyleRadialGradient:o,fillStylePaletted:u}:void 0,u){if(u&&u.lut.isValid){const t=u.getPalette();this.xR=this.aE.tR(t,this.MR,this.xR),this.MR=t}}else this.aE.vL.hn(this.MR),this.MR=void 0;this.EE=g&&t?this.EE||this.OD.pO(Fp["2D"],Fp.Color({dataType:"uniform"}),Fp.LineInstanced2D({axisWorldTranslation:Np(this.Jt),normalSource:void 0})):void 0}return h instanceof Ke?this.BE=Gp(Bo(this.vo,{x:this.Yo(),y:this.Xo()},this.Jt),this.Jt,h.getPosition(),h.getExtent(),h.getShape(),this.OD.TB()):h instanceof Je?this.OE=Hp(Bo(this.vo,{x:this.Yo(),y:this.Xo()},this.Jt),this.Jt,h.getAngle(!0),this.OD.TB()):(this.BE=void 0,this.OE=void 0),this.Ha(i),this.Wa=!1,this.Jr.o=!1,this}BD(t){var i;const s=1===t?this.EE:null===(i=this.bR)||void 0===i?void 0:i.shader;if(!s)return this;const e=this.vR;if(!e)return this;const h=this.bR;if(!h)return this;const{fillStyleSolid:r,fillStyleLinearGradient:n,fillStyleRadialGradient:o,fillStylePaletted:a,lineStyle:u}=h;return this.OD.wB(s).SO(s,((i,s,l,c)=>{if(this.OD.MO(i("uIsHighlighted"),1===t||2===t?0:this.en)._O(i("uHighlightColorOffset"),this.an).MO(i("uRenderEffectMask"),2===t?1:0),this.Jt instanceof In||this.Jt instanceof Zf?this.OD.bO(i("uScale"),this.PB.wO()).bO(i("uDisp"),this.PB.AO()).bO(c("uScaleStart_highpart"),this.PB.qL()).bO(c("uScaleStart_lowpart"),this.PB.JL()):this.Jt instanceof Fn&&this.OD.bO(c("uScaleStart"),this.PB.MixedScaleXY.uScaleStart).bO(c("uScaleStartLog"),this.PB.MixedScaleXY.uScaleStartLog).bO(c("uScaleInterval"),this.PB.MixedScaleXY.uScaleInterval).bO(c("uScaleIntervalLog"),this.PB.MixedScaleXY.uScaleIntervalLog).bO(i("uViewportStart"),this.PB.MixedScaleXY.uViewportStart).bO(i("uViewportSize"),this.PB.MixedScaleXY.uViewportSize),1===t)this.OD._O(i("uColor"),this.pE);else if(r)this.OD._O(i("uColor"),r.getColor());else if(o){if(!this.BE)return!1;this.OD.IL(l,this.BE,o)}else if(n){if(!this.OE)return!1;this.OD.FL(l,this.OE,n)}else if(a){if(!this.xR)return!1;this.OD.xO(i("uLookupTexture"),this.xR.texture,0).MO(i("uLookupMin"),a.lut.min).MO(i("uLookupMax"),a.lut.max).MO(i("uLookupTextureHeightPx"),this.xR.textureHeight)}return iS(this.Jt.Ri(),this.OD,e,l,this.Jt.Ri()?4:2,0),sS(this.aE,h.geometry,l,this.SR&&1!==t,1===t,u.getThickness(),1),!0})),this}dispose(){return super.dispose(),this.MR&&(this.aE.vL.hn(this.MR),this.MR=void 0),this.xR=void 0,this.bR=void 0,this.vR&&(this.OD.TO(this.vR),this.vR=void 0),this}gB(){return this}ii(){return this.vo.max.x}ti(){return this.vo.min.x}ei(){return this.vo.max.y}si(){return this.vo.min.y}Yo(){return xr(this.Ra)}Xo(){return xr(this.Ra)}}class hS extends sa{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.PB=new Lp,this.vo=kr,this.aE=t,this.uE=i,this.yE=r,this.pE=n,this.OD=t.lE(),this.SR=this.OD.mL,this._R=t.hr.Sr}_e(){const t=this.Fn(),i=this.Ra,s=this.ja,e=i instanceof sh&&i,h=e&&e.getFillStyle(),r=h instanceof De&&h,n=e,o=r,a=i.getThickness()>=0?i.getThickness():1;if(this.PB.CO(this.Jt),this.Wa&&(this.vR&&(this.OD.TO(this.vR),this.vR=void 0),this.vR=this.OD.mO(Kh(s,this.Jt.Ri())),this.vo=Nr(s)),t){const t=n&&o&&0!==a,i="uniform";this.bR=t?{type:"triangulated",shader:this.OD.pO(Fp["2D"],Fp.Color({dataType:i}),Fp.LineInstanced2D({axisWorldTranslation:Np(this.Jt),normalSource:void 0,snapToNearestPixel:this._R}),this.SR?Fp.AliasedEdge():void 0),geometry:tS(this.OD,a),lineStyle:e,fillStyleSolid:r}:void 0}return this.Ha(i),this.Wa=!1,this}BD(t){if(1===t)return this;const i=this.vR;if(!i)return this;const s=this.bR;if(!s)return this;const{fillStyleSolid:e,lineStyle:h,shader:r,geometry:n}=s;return this.OD.wB(r).SO(r,((s,r,o,a)=>(this.Jt instanceof In||this.Jt instanceof Zf?this.OD.bO(s("uScale"),this.PB.wO()).bO(s("uDisp"),this.PB.AO()).bO(a("uScaleStart_highpart"),this.PB.qL()).bO(a("uScaleStart_lowpart"),this.PB.JL()):this.Jt instanceof Fn&&this.OD.bO(a("uScaleStart"),this.PB.MixedScaleXY.uScaleStart).bO(a("uScaleStartLog"),this.PB.MixedScaleXY.uScaleStartLog).bO(a("uScaleInterval"),this.PB.MixedScaleXY.uScaleInterval).bO(a("uScaleIntervalLog"),this.PB.MixedScaleXY.uScaleIntervalLog).bO(s("uViewportStart"),this.PB.MixedScaleXY.uViewportStart).bO(s("uViewportSize"),this.PB.MixedScaleXY.uViewportSize),this._R&&this.OD.bO(a("uViewportSizePx"),[this.vs.xi().x*this.OD.TB(),this.vs.xi().y*this.OD.TB()]),this.OD._O(s("uColor"),e.getColor()).MO(s("uIsHighlighted"),this.en)._O(s("uHighlightColorOffset"),this.an).MO(s("uRenderEffectMask"),2===t?1:0),((t,i,s,e,h,r)=>{const{attribute:n}=e,o=i.gl;if(o.bindBuffer(o.ARRAY_BUFFER,s),t){const t=n("aLocationA_highpart"),s=n("aLocationA_lowpart"),e=n("aLocationB_highpart"),a=n("aLocationB_lowpart");o.vertexAttribPointer(t,2,o.FLOAT,!1,4*h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.tL(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,4*h*Float32Array.BYTES_PER_ELEMENT,(r+2)*Float32Array.BYTES_PER_ELEMENT),i.tL(s,1),o.enableVertexAttribArray(s),o.vertexAttribPointer(e,2,o.FLOAT,!1,4*h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.tL(e,1),o.enableVertexAttribArray(e),o.vertexAttribPointer(a,2,o.FLOAT,!1,4*h*Float32Array.BYTES_PER_ELEMENT,(r+h+2)*Float32Array.BYTES_PER_ELEMENT),i.tL(a,1),o.enableVertexAttribArray(a)}else{const t=n("aLocationA"),s=n("aLocationB");o.vertexAttribPointer(t,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,r*Float32Array.BYTES_PER_ELEMENT),i.tL(t,1),o.enableVertexAttribArray(t),o.vertexAttribPointer(s,2,o.FLOAT,!1,2*h*Float32Array.BYTES_PER_ELEMENT,(r+h)*Float32Array.BYTES_PER_ELEMENT),i.tL(s,1),o.enableVertexAttribArray(s)}})(this.Jt.Ri(),this.OD,i,o,this.Jt.Ri()?4:2,0),sS(this.aE,n,o,this.SR,!1,h.getThickness(),this.ja.length/2),!0))),this}gB(){return this.vR&&(this.OD.TO(this.vR),this.vR=void 0),this.bR=void 0,this}ii(){return this.vo.max.x}ti(){return this.vo.min.x}ei(){return this.vo.max.y}si(){return this.vo.min.y}Yo(){return xr(this.Ra)}Xo(){return xr(this.Ra)}}class rS{constructor(t,i){this.wR=!1,this.AR=!1,this.kR=!1,this.Jt=t,this.CR=i,this.CR.ln("DataPattern",(t=>{"ProgressiveX"!==t.pattern&&"RegressiveX"!==t.pattern||(this.wR="x"),"ProgressiveY"!==t.pattern&&"RegressiveY"!==t.pattern||(this.wR="y"),"RegressiveX"!==t.pattern&&"RegressiveY"!==t.pattern||(this.AR=!0),!0===t.regularProgressiveStep&&(this.kR=!0)}))}calculateUserDataPointsProgressiveRange(t){if(0===t.length)throw new Error("calculateUserDataPointsProgressiveRange called with 0 data points");return{start:"x"===this.wR?t[0].x:t[0].y,end:"x"===this.wR?t[t.length-1].x:t[t.length-1].y}}calculateUserDataPointsBoundaries(t){return this.wR?"x"===this.wR?function(t){const i=t.length;if(i>0){const s=Math.max(t[i-1].x,t[0].x),h=Math.min(t[i-1].x,t[0].x);let r=t[0].y,n=t[0].y;for(let s=0;s<i;s+=1){const i=t[s];i.y>r&&(r=i.y),i.y<n&&(n=i.y)}return a(e(h,n),e(s,r))}return kr}(t):function(t){const i=t.length;if(i>0){const s=Math.max(t[i-1].y,t[0].y),h=Math.min(t[i-1].y,t[0].y);let r=t[0].x,n=t[0].x;for(let s=0;s<i;s+=1){const i=t[s];i.x>r&&(r=i.x),i.x<n&&(n=i.x)}return a(e(n,h),e(r,s))}return kr}(t):Nr(t)}calculateAvgStepBetweenDataPoints(t,i,s){return Math.abs(t-i)/(s-1)}}const nS=Math.min(1,1.5);class oS extends rS{constructor(t,i,s){super(t,i),this.TR=!1,this.IR={enabled:!1,totalDataPointsAtTime:0},this.FR=[],this.Ss=s,this.PR=t instanceof In?{type:"linear",scale:t}:t instanceof Fn?{type:"mixed",scale:t}:{type:"unknown"},this.CR.ln("DataPattern",(t=>{!1===t.allowDataGrouping&&(this.TR=!0)}))}DR(t,i=!1){if(this.TR||!this.wR||"linear"!==this.PR.type)return!1;!1===i&&this.BR&&(clearTimeout(this.BR),this.BR=void 0);const s="x"===this.wR?this.PR.scale.x.Ig:this.PR.scale.y.Ig;if(!s)throw new Error("CP helper has no information about Axis state.");const e=t.length;if(e<2)return!1;const h=t[0],r=t[e-1],n=this.calculateAvgStepBetweenDataPoints("x"===this.wR?h.x:h.y,"x"===this.wR?r.x:r.y,e),o=this.PR.scale,a=Math.abs("x"===this.wR?o.Qi().x:o.Qi().y),u=a/n,l=Math.floor(u*nS),c=l*n,f=yh.performance.now(),d=!(f-s.Ts<500)&&(s.Ms?f-s.Cs<1e3:f-s._s<2e3||s.As),g=e>2*this.IR.totalDataPointsAtTime;if(d&&!g)return this.BR=setTimeout((()=>this.OR(t)),1e3),!1;const m=l>=10,y=this.IR.enabled?this.IR.columnWidthAxis/a<1.5:void 0,p=this.IR.enabled&&l>this.IR.dataPointsPerColumn?l/this.IR.dataPointsPerColumn>=2:void 0;let S;!0===this.IR.enabled?y?p&&(S={enabled:!0,columnWidthAxis:c,dataPointsPerColumn:l,totalDataPointsAtTime:e}):S=m?{enabled:!0,columnWidthAxis:c,dataPointsPerColumn:l,totalDataPointsAtTime:e}:{enabled:!1,totalDataPointsAtTime:e}:m&&(S={enabled:!0,columnWidthAxis:c,dataPointsPerColumn:l,totalDataPointsAtTime:e});const v=!1===i;return S?(v&&(this.IR=S),!0):(v&&(this.IR={...this.IR,totalDataPointsAtTime:e}),!1)}rv(){this.LR=void 0,this.FR.length=0,this.BR&&(clearTimeout(this.BR),this.BR=void 0)}ER(t){if(0===t.length)return t;if(this.TR||!this.wR||"linear"!==this.PR.type||!this.IR.enabled)return t;let i;i=this.FR.length>0?hr(this.FR,t,{canReturnB:!0}):t;const s=i.length,e=[];let h,r,n=void 0===this.LR,o=-1,a=-1,u=0,l=0;if("x"!==this.wR||this.AR)if("x"===this.wR&&this.AR){const t=this.IR.columnWidthAxis;let c=this.LR?this.LR.x:i[0].x,f=c-t;for(let d=0;d<s;d+=1){const s=i[d];s.x>=f?((!h||s.y>h.y)&&(h=s,o=d),(!r||s.y<r.y)&&(r=s,a=d),l=d):(h&&r&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.x,f=c-t,h=s,o=d,r=s,a=d,u=d,l=d)}}else if("y"!==this.wR||this.AR){if("y"===this.wR&&this.AR){const t=this.IR.columnWidthAxis;let c=this.LR?this.LR.y:i[0].y,f=c-t;for(let d=0;d<s;d+=1){const s=i[d];s.y>=f?((!h||s.x>h.x)&&(h=s,o=d),(!r||s.x<r.x)&&(r=s,a=d),l=d):(r&&h&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.y,f=c-t,h=s,o=d,r=s,a=d,u=d,l=d)}}}else{const t=this.IR.columnWidthAxis;let c=this.LR?this.LR.y:i[0].y,f=c+t;for(let d=0;d<s;d+=1){const s=i[d];s.y<=f?((!h||s.x>h.x)&&(h=s,o=d),(!r||s.x<r.x)&&(r=s,a=d),l=d):(r&&h&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.y,f=c+t,h=s,o=d,r=s,a=d,u=d,l=d)}}else{const t=this.IR.columnWidthAxis;let c=this.LR?this.LR.x:i[0].x,f=c+t;for(let d=0;d<s;d+=1){const s=i[d];s.x<=f?((!h||s.y>h.y)&&(h=s,o=d),(!r||s.y<r.y)&&(r=s,a=d),l=d):(h&&r&&(n&&e.push(i[0]),o<a?e.push(h,r):e.push(r,h)),n=!1,c=s.x,f=c+t,h=s,o=d,r=s,a=d,u=d,l=d)}}if(h||r){const t=i.slice(u,l+1);this.FR=t}else this.FR.length=0;const c=e.length;return c>0&&(this.LR=e[c-1]),e}RR(t){if(this.wR&&"linear"===this.PR.type){const i="x"===this.wR?this.PR.scale.x.Ig:this.PR.scale.y.Ig;if(!i)throw new Error("CP helper has no information about Axis state.");if(i.gs===Pn.progressive||i.gs===Pn.regressive){const i=Math.abs("x"===this.wR?this.PR.scale.x.getInnerInterval():this.PR.scale.y.getInnerInterval());if(this.IR.enabled)return 2*i/this.IR.columnWidthAxis;const s=t.length,e=t[0],h=t[s-1];return i/this.calculateAvgStepBetweenDataPoints("x"===this.wR?e.x:e.y,"x"===this.wR?h.x:h.y,s)}}}zR(t,i,s){if(!this.wR)return i;const e=s.length;let h=ko(s,t.min,this.wR,this.AR,0,e-1);void 0===h&&(h=this.AR?e-1:0);let r=ko(s,t.max,this.wR,this.AR,0,e-1);return void 0===r&&(r=this.AR?0:e-1),1+Math.abs(r-h)}VR(){this.BR&&(clearTimeout(this.BR),this.BR=void 0)}OR(t){this.DR(t,!0)&&this.Ss()}}class aS extends rS{renderVisibleOnly(t,i){const s=this.Jt.x.getInnerStart(),e=this.Jt.x.getInnerEnd(),h=Math.min(s,e),r=Math.max(s,e),n=this.Jt.y.getInnerStart(),o=this.Jt.y.getInnerEnd(),a=Math.min(n,o),u=Math.max(n,o);t.forEach(((t,s)=>{t.existingCoordinatesCount<=1||t.boundaries.max.x<h||t.boundaries.min.x>r||t.boundaries.max.y<a||t.boundaries.min.y>u||i(t)}))}}class uS{constructor(t,i,s){this.NR=i,this.GR=s,this.HR=t,this.WR=[]}UR(t,i,s,e){const h=t.length;if(0===h)return;let r=t,n=h,o=this.HR[this.HR.length-1];do{const t=this.HR.length;let h;o||(o=this.jR(i,n)),o&&0==o.allocatedCoordinatesCount-o.existingCoordinatesCount&&(o=void 0);let a=0;if(this.GR&&t>0&&(void 0===o||0===o.existingCoordinatesCount)){const i=this.HR[t-1].lastDataPoint;i?(r.splice(0,0,i),a=1,n+=1):console.error("SegmentationHelper _connectSegments = true, but segment has no lastDataPoint information!")}if(o)h=Math.min(n,o.allocatedCoordinatesCount-o.existingCoordinatesCount),e(o,r.slice(0,h),h,a);else{const t=Math.ceil(i)+a;h=Math.min(t,n);const e={...s(t,r.slice(0,h),h,a),isDropped:!1};this.HR.push(e)}h>0&&(n>h?(r=r.slice(h),n=r.length):(r=[],n=0))}while(n>0);this.$R()}YR(t){const i=t,s=this.HR.indexOf(i);s>=0&&this.HR.splice(s,1),i.droppedTimestamp=yh.performance.now(),this.WR.push(i)}XR(){this.HR.slice().forEach((t=>this.YR(t)))}ZR(){this.HR.forEach((t=>this.NR(t))),this.WR.forEach((t=>this.NR(t))),this.HR.length=0,this.WR.length=0}jR(t,i){const s=2*t/3,e=4*t/3,h=this.WR.findIndex((t=>t.allocatedCoordinatesCount>=s&&t.allocatedCoordinatesCount<=e));if(h>=0){const t=this.WR[h];return this.WR.splice(h,1),this.HR.push(t),t}}$R(){if(this.WR.length>5){const t=yh.performance.now();for(let i=0;i<this.WR.length-5;i+=1){const s=this.WR[i];(void 0===s.droppedTimestamp||t-s.droppedTimestamp>=1e4)&&(this.NR(s),this.WR.splice(i,1),i-=1)}}}}class lS extends rS{KR(t,i){if(!i||"object"!=typeof i)return 0;const s=this.Jt.x.getInnerStart(),e=this.Jt.x.getInnerEnd(),h=Math.min(s,e),r=Math.max(s,e),n=this.Jt.y.getInnerStart(),o=this.Jt.y.getInnerEnd(),a=Math.min(n,o),u=Math.max(n,o);if("maxDataPointCount"in i)return this.qR(t,i.maxDataPointCount,h,r,a,u);if("minDataPointCount"in i)return this.JR(t,i.minDataPointCount,h,r,a,u);if("progressiveDataCleaningThreshold"in i)return this.QR(t,i.progressiveDataCleaningThreshold,h,r,a,u);throw new Error(`Unimplemented data cleaning configuration: ${JSON.stringify(i)}`)}qR(t,i,s,e,h,r){if(void 0===i||i<=0)return 0;const n=t.reduce(((t,i)=>t+i.existingDataPointsCount),0);if(n<=i)return 0;let o=0,a=n;for(let s=0;s<t.length;s+=1){const e=t[s];a>i&&(o+=1,a-=e.existingDataPointsCount)}return o}QR(t,i,s,e,h,r){if(void 0===i||!this.wR)return 0;let n=0;for(let o=0;o<t.length;o+=1){const a=t[o],u=this.AR?"x"===this.wR?a.boundaries.min.x>e:a.boundaries.min.y>r:"x"===this.wR?a.boundaries.max.x<s:a.boundaries.max.y<h;if(!((this.AR?"x"===this.wR?a.boundaries.min.x>i:a.boundaries.min.y>i:"x"===this.wR?a.boundaries.max.x<i:a.boundaries.max.y<i)&&u&&a.existingCoordinatesCount>2))break;n+=1}return n}JR(t,i,s,e,h,r){if(void 0===i||0===i)return 0;let n=0,o=0;for(let a=t.length-1;a>=0;a-=1){const u=t[a];if(o>i)if(this.wR){if(this.AR?"x"===this.wR?u.boundaries.min.x>e:u.boundaries.min.y>r:"x"===this.wR?u.boundaries.max.x<s:u.boundaries.max.y<h){n=1+a;break}}else u.boundaries.max.x<s||u.boundaries.min.x>e||u.boundaries.max.y<h||u.boundaries.min.y>r?n+=1:n=0;o+=u.existingDataPointsCount}return n}tz(t,i){const s=t.reduce(((t,i)=>Hr(t,i.boundaries)),kr);if(i&&"progressiveDataCleaningThreshold"in i&&i.progressiveDataCleaningThreshold){const t=i.progressiveDataCleaningThreshold;"x"!==this.wR||this.AR?"x"===this.wR&&this.AR?s.max.x=Math.min(s.max.x,t):"y"!==this.wR||this.AR?"y"===this.wR&&this.AR&&(s.max.y=Math.min(s.max.y,t)):s.min.y=Math.max(s.min.y,t):s.min.x=Math.max(s.min.x,t)}return s}}class cS extends ea{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h),this.PB=new Lp,this.Jx=[],this.iz=new aS(this.Jt,this),this.sz=new oS(this.Jt,this,(()=>this.vs.Ss())),this.ez=new uS(this.Jx,(t=>t.coordsBuffer&&this.OD.TO(t.coordsBuffer)),!0),this.hz=new lS(this.Jt,this),this.uE=i,this.yE=r,this.pE=n,this.hr=o,this.bR={type:"none"},this.OD=t.lE(),this.aE=t,this.SR=this.OD.mL;const a=this.Jt.Ri(),u=!0===(null==o?void 0:o.individualLookupValuesEnabled);let l,c,f,d=0;a||(l=d,d+=2),a&&(c=d,d+=4),u&&(f=d,d+=1);const g=((t,i)=>i?(i,s)=>((t,i)=>{if(!i){const i=t.length,s=new Float32Array(3*i);for(let e=0,h=0;e<i;e+=1){const i=t[e];s[h+0]=i.x,s[h+1]=i.y,s[h+2]=void 0!==i.value?i.value:0,h+=3}return s}const s=t.length,e=new Float32Array(5*s);let h=0;for(let i=0;i<s;i+=1){const s=t[i],r=Math.fround(s.x),n=Math.fround(s.y);e[h+0]=r,e[h+1]=n,e[h+2]=s.x-r,e[h+3]=s.y-n,e[h+4]=void 0!==s.value?s.value:0,h+=5}return e})(i,t):(i,s)=>Kh(i,t))(a,u);this.rz={individualLookupValuesEnabled:u,attributesPerVertex:d,attributeOffsetCoordinateLowPrecision:l,attributeOffsetCoordinateHighPrecision:c,attributeOffsetLookUpValue:f,prepareRenderData:(t,i)=>g(t,this.Ra.getFillStyle())}}_e(){const t=this.Ao,i=this.Ra,s=this.Fn(),e=this.xo,h=e.length,r=h>0,n=this.Jr.M(),o=this.Jr.o;r&&(this.$a=hr(this.$a,e,{canReturnB:!0}),this.bo+=h);let a=this.Ya.o;const u=this.hz.KR(this.Jx,this.Ya.M());if(u>0){let t=0;for(let i=0;i<u;i+=1){const i=this.Jx[0];t+=i.existingDataPointsCount,i.existingDataPointsCount=0,i.existingCoordinatesCount=0,i.jointPointsCount=0,i.boundaries=kr,i.lastDataPoint=void 0,this.ez.YR(i)}this.$a=this.$a.slice(t),this.bo=this.$a.length,a=!0}let l=e;(this.sz.DR(this.$a)||t)&&(this.sz.rv(),this.Jx.forEach((t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.jointPointsCount=0,t.boundaries=kr,t.lastDataPoint=void 0})),this.ez.XR(),l=this.$a);const c=this.sz.ER(l),f=c.length;if(f>0){let t=this.sz.RR(this.$a)||(this.ln("ApplicationType",(t=>"InternalUI"===t.type))?this.bo:1e5);f/t>10&&(t=f/10),this.ez.UR(c,t,((t,i,s,e)=>{const h=this.iz.calculateUserDataPointsBoundaries(i);return{allocatedCoordinatesCount:t,existingDataPointsCount:this.sz.zR(h,s,this.$a)-e,existingCoordinatesCount:s,jointPointsCount:e,boundaries:h,coordsBuffer:this.OD.YO(t*this.rz.attributesPerVertex,this.rz.prepareRenderData(i,s)),lastDataPoint:i[s-1]}}),((t,i,s,e)=>{const h=Hr(t.boundaries,this.iz.calculateUserDataPointsBoundaries(i)),r=this.sz.zR(h,t.existingCoordinatesCount+s,this.$a)-(t.jointPointsCount+e);this.OD.XO(t.coordsBuffer,t.existingCoordinatesCount*this.rz.attributesPerVertex,this.rz.prepareRenderData(i,s)),t.jointPointsCount+=e,t.lastDataPoint=i[s-1],t.existingDataPointsCount=r,t.existingCoordinatesCount+=s,t.boundaries=h}))}a&&(this.vo=this.hz.tz(this.Jx,this.Ya.M())),this.PB.CO(this.Jt);const d=i instanceof sh&&i,g=d&&d.getThickness(),m=d&&d.getFillStyle(),y=m instanceof De&&m,p=m instanceof Je&&m,S=m instanceof Ke&&m,v=m instanceof Le&&m,b=y||p||S||v,x=this.rz.individualLookupValuesEnabled;if(S?this.BE=Gp(this.fn(),this.Jt,S.getPosition(),S.getExtent(),S.getShape(),this.OD.TB()):p?this.OE=Hp(this.fn(),this.Jt,p.getAngle(!0),this.OD.TB()):(this.BE=void 0,this.OE=void 0),s||o){if(v&&"value"===v.getLookUpProperty()&&!x){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw yh.alert(t),new Error(t)}if(b&&d&&!1!==g){const t=-1===g?"primitive":"triangulated",i=p?["gradient",p]:S?["gradient",S]:v?["lookup",v.getLookUpProperty()]:"uniform";this.bR="primitive"===t?{type:t,shader:this.OD.pO(Fp["2D"],Fp.Color({dataType:i}),Fp.VertexLocation({axisWorldTranslation:Np(this.Jt),normalSource:void 0})),mousePickingShader:n?this.OD.pO(Fp["2D"],Fp.Color({dataType:"uniform"}),Fp.VertexLocation({axisWorldTranslation:Np(this.Jt),normalSource:void 0})):void 0,lineStyle:d,fillStyleSolid:y,fillStyleLinearGradient:p,fillStyleRadialGradient:S,fillStylePaletted:v}:"triangulated"===t?{type:t,shader:this.OD.pO(Fp["2D"],Fp.Color({dataType:i}),Fp.LineInstanced2D({axisWorldTranslation:Np(this.Jt),normalSource:void 0}),this.SR?Fp.AliasedEdge():void 0),mousePickingShader:n?this.OD.pO(Fp["2D"],Fp.Color({dataType:"uniform"}),Fp.LineInstanced2D({axisWorldTranslation:Np(this.Jt),normalSource:void 0})):void 0,geometry:tS(this.OD,g),lineStyle:d,fillStyleSolid:y,fillStyleLinearGradient:p,fillStyleRadialGradient:S,fillStylePaletted:v}:{type:"none"}}else this.bR={type:"none"};if(v){if(v&&v.lut.isValid){const t=v.getPalette();this.xR=this.aE.tR(t,this.MR,this.xR),this.MR=t}}else this.aE.vL.hn(this.MR),this.MR=void 0}return this.Ha(i),this.Ao=!1,this.xo=[],this.Jr.o=!1,this.Ya.o=!1,this}BD(t){const i=this.OD.gl,s=this.bR;if(!s||"none"===s.type)return this;const e=1===t?s.mousePickingShader:s.shader;if(!e)return this;const{lineStyle:h,fillStyleSolid:r,fillStyleLinearGradient:n,fillStyleRadialGradient:o,fillStylePaletted:a}=s;return this.OD.wB(e).SO(e,((e,u,l,c)=>{let f=!1;if(this.OD.MO(e("uIsHighlighted"),1===t||2===t?0:this.en)._O(e("uHighlightColorOffset"),this.an).MO(e("uRenderEffectMask"),2===t?1:0),this.Jt instanceof In||this.Jt instanceof Zf?this.OD.bO(e("uScale"),this.PB.wO()).bO(e("uDisp"),this.PB.AO()).bO(c("uScaleStart_highpart"),this.PB.qL()).bO(c("uScaleStart_lowpart"),this.PB.JL()):this.Jt instanceof Fn&&this.OD.bO(c("uScaleStart"),this.PB.MixedScaleXY.uScaleStart).bO(c("uScaleStartLog"),this.PB.MixedScaleXY.uScaleStartLog).bO(c("uScaleInterval"),this.PB.MixedScaleXY.uScaleInterval).bO(c("uScaleIntervalLog"),this.PB.MixedScaleXY.uScaleIntervalLog).bO(e("uViewportStart"),this.PB.MixedScaleXY.uViewportStart).bO(e("uViewportSize"),this.PB.MixedScaleXY.uViewportSize),1===t)this.OD._O(e("uColor"),this.pE);else if(r)this.OD._O(e("uColor"),r.getColor());else if(o){if(!this.BE)return!1;this.OD.IL(l,this.BE,o)}else if(n){if(!this.OE)return!1;this.OD.FL(l,this.OE,n)}else if(a){if(!this.xR)return!1;this.OD.xO(e("uLookupTexture"),this.xR.texture,0).MO(e("uLookupMin"),a.lut.min).MO(e("uLookupMax"),a.lut.max).MO(e("uLookupTextureHeightPx"),this.xR.textureHeight)}return this.iz.renderVisibleOnly(this.Jx,(e=>{const{coordsBuffer:r}=e;if(r){if(i.bindBuffer(i.ARRAY_BUFFER,r),"triangulated"===s.type)this.Jt.Ri()||void 0===this.rz.attributeOffsetCoordinateLowPrecision?this.Jt.Ri()&&void 0!==this.rz.attributeOffsetCoordinateHighPrecision&&iS(!0,this.OD,r,l,this.rz.attributesPerVertex,this.rz.attributeOffsetCoordinateHighPrecision):iS(!1,this.OD,r,l,this.rz.attributesPerVertex,this.rz.attributeOffsetCoordinateLowPrecision);else if(this.Jt.Ri()||void 0===this.rz.attributeOffsetCoordinateLowPrecision){if(this.Jt.Ri()&&void 0!==this.rz.attributeOffsetCoordinateHighPrecision){const t=u("aPos_highpart");i.vertexAttribPointer(t,2,i.FLOAT,!1,this.rz.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.rz.attributeOffsetCoordinateHighPrecision*Float32Array.BYTES_PER_ELEMENT),i.enableVertexAttribArray(t);const s=u("aPos_lowpart");i.vertexAttribPointer(s,2,i.FLOAT,!1,this.rz.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,(this.rz.attributeOffsetCoordinateHighPrecision+2)*Float32Array.BYTES_PER_ELEMENT),i.enableVertexAttribArray(s)}}else{const t=u("aPos");i.vertexAttribPointer(t,2,i.FLOAT,!1,this.rz.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.rz.attributeOffsetCoordinateLowPrecision*Float32Array.BYTES_PER_ELEMENT),i.enableVertexAttribArray(t)}if(a&&"value"===a.lookUpProperty&&void 0!==this.rz.attributeOffsetLookUpValue&&1!==t)if("triangulated"===s.type){const t=u("aLookupValueA");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.rz.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.rz.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),this.OD.tL(t,1),i.enableVertexAttribArray(t);const s=u("aLookupValueB");i.vertexAttribPointer(s,1,i.FLOAT,!1,this.rz.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,(this.rz.attributeOffsetLookUpValue+this.rz.attributesPerVertex)*Float32Array.BYTES_PER_ELEMENT),this.OD.tL(s,1),i.enableVertexAttribArray(s)}else{const t=u("aLookupValue");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.rz.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.rz.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),i.enableVertexAttribArray(t)}"triangulated"===s.type?sS(this.aE,s.geometry,l,this.SR&&1!==t,1===t,h.getThickness(),e.existingCoordinatesCount-1):this.OD._y(i.LINE_STRIP,e.existingCoordinatesCount,0),f=!0}})),i.bindBuffer(i.ARRAY_BUFFER,null),f})),this}Bo(t,i){return Array.isArray(t)||(t=[t]),this.xo=hr(this.xo,t,{canReturnB:!0}),this.vo=Hr(this.vo,i||this.iz.calculateUserDataPointsBoundaries(t)),this}Oo(){return super.Oo(),this}dispose(){return super.dispose(),this.sz.VR(),this.MR&&(this.aE.vL.hn(this.MR),this.MR=void 0),this.bR={type:"none"},this.xR=void 0,this}gB(){return this.ez.ZR(),this}$b(t){this.Eo()>0&&this._e();const i=this.To(),s=Mo(i,t,this.wo,this.sa,this.ea,this.Jt,this.engine.Jt,this.vo,this.iz.wR,this.iz.AR);return void 0!==s?i[s]:void 0}wA(t){this.Eo()>0&&this._e();const i=this.To(),s=i.length;if(0===s)return;const e=this.sa?1:0,h=s-(this.ea?2:1);if(this.wo===bo.Nearest){let e,h,r=wr;for(let n=0;n<s;n+=1){const s=oh(i[n],this.Jt,this.vs.Jt);if(void 0!==h){const i=Br(h,s,t),n=(i.x-t.x)**2+(i.y-t.y)**2;n<r&&(r=n,e=i)}h=s}return void 0!==e?oh(e,this.vs.Jt,this.Jt):void 0}if("x"===this.iz.wR&&this.wo===bo.NearestX||"y"===this.iz.wR&&this.wo===bo.NearestY){const s=Co(i,oh(t,this.vs.Jt,this.Jt),this.iz.wR,this.iz.AR,e,h);return s?zr(i[s.a],i[s.b],s.lerpAmount):void 0}return this.$b(t)}ii(){return this.vo.max.x}ti(){return this.vo.min.x}ei(){return this.vo.max.y}si(){return this.vo.min.y}getPointsBounds(){return this.vo}Yo(){return xr(this.Ra)}Xo(){return xr(this.Ra)}}class fS extends Py{constructor(t,i){super(t),this.nz=i,this.oz=Kh(i,!1),this.az=i.length,this.sB=t.mO(this.oz);const s=Nr(this.nz);this.Et=e(s.max.x-s.min.x,s.max.y-s.min.y)}HD(){this.OD.TO(this.sB)}}const dS=t=>{const i=function(){const t=[],i=2/1.73205080757;return t.push(e(-i/2,.3333333333333333)),t.push(e(0,-.6666666666666666)),t.push(e(i/2,.3333333333333333)),t}();return new fS(t,i)},gS=t=>{const i=[e(-.5,-.5),e(-.5,.5),e(.5,-.5),e(.5,-.5),e(-.5,.5),e(.5,.5)];return new fS(t,i)},mS=(t,i,s)=>{let e=i.LO.RD.get(t);return e||(e=s(i),i.LO.RD.set(t,e)),e},yS=1e3;class pS extends Ho{constructor(t,i,s,e,r,n,o){super(t,i,s,e,r),this.PB=new Lp,this.gE=a(h(Ar,Ar),h(wr,wr)),this.uz=[],this.aE=t,this.uE=i,this.yE=n,this.pE=o,this.OD=t.lE()}_e(){const i=this.Jr.M(),s=this.Jr.o,h=this.xo,r=h.length,n=r>0,o=this.mo.M(),a=this._n,u=this.size.M(),l=this.Jt.qi(),c=this.size.o||this.mo.o,f=this.Ao||h&&h.length>0,d=l||c;if(n){this.do=hr(this.do,h,{canReturnB:!0}),this.bo+=r;const t=this.uz[this.uz.length-1];let i=t?{nt:t.nt,ot:t.ot,Lw:{max:{x:t.Lw.max.x,y:t.Lw.max.y},min:{x:t.Lw.min.x,y:t.Lw.min.y}},lz:{max:{x:t.lz.max.x,y:t.lz.max.y},min:{x:t.lz.min.x,y:t.lz.min.y}}}:void 0,s=h.length;if(!i){const t={nt:0,ot:h.length>=yS?yS:h.length};t.Lw=Nr(h.slice(0,t.ot)),t.lz=Bo(t.Lw,{x:u,y:u},this.Jt),this.uz[0]=t,i=t,s=h.length-(t.ot||0)}if(i&&s)if(i.ot-i.nt+s<yS)i.ot+=i.ot-i.nt+s,i.Lw=Nr(h.slice(i.nt,i.ot)),i.lz=Bo(i.Lw,{x:u,y:u},this.Jt),this.uz[this.uz.length-1]=i;else{if(i.ot-i.nt<yS){const t={nt:i.nt,ot:i.nt+yS};t.Lw=Nr(h.slice(t.nt,t.ot)),t.lz=Bo(t.Lw,{x:u,y:u},this.Jt),this.uz[this.uz.length-1]=t}let t=i.ot;for(;t<this.do.length;){const i={nt:t,ot:t+yS>this.do.length?this.do.length:t+yS};i.Lw=Nr(h.slice(i.nt,i.ot)),i.lz=Bo(i.Lw,{x:u,y:u},this.Jt),t=i.ot,this.uz[this.uz.length]=i}}}if(n||this.Ao){this.vo=this._o?Hr(this.vo,this._o):Hr(this.vo,Nr(this.do));const t=Kh(this.do,this.Jt.Ri());this.cz=this.bo,this.fz=this.OD.mO(t)}if(this.PB.CO(this.Jt),c||this.wn()||s){const t=this.yo.M()?"attribute":"uniform",s=u<=1&&Fp.PointSize(t),e=Fp.VertexLocation({offset:u>1?{dataType:t,sizeUnit:"px",symmetric:!0,rotation:(this.po.M()||this.Vn.M()%360!=0)&&{dataType:this.po.M()?"attribute":"uniform"}}:void 0,axisWorldTranslation:Np(this.Jt),normalSource:void 0}),h=this._n instanceof De&&this._n,r=this._n instanceof Ke&&this._n,n=this._n instanceof Je&&this._n,o=this._n instanceof Le&&this._n,a=this._n instanceof Be&&this._n,l=h||r||n||o||a;this.BB=l?this.OD.pO(Fp["2D"],s,e,h?Fp.Color({dataType:"uniform"}):a?Fp.Color({dataType:"attribute"}):o?Fp.Color({dataType:["lookup",o.getLookUpProperty()]}):r?Fp.Color({dataType:["gradient",r]}):n?Fp.Color({dataType:["gradient",n]}):void 0):void 0,this.EE=i&&l?this.OD.pO(Fp["2D"],s,e,Fp.Color({dataType:"uniform"})):void 0}if(a!==Ie?d&&(this.dz&&(this.dz=void 0),u>1||a instanceof Be?u<=1?this.pR=this.OD.gl.POINTS:o===t.PointShape.Triangle?(this.dz=mS(t.PointShape.Triangle,this.OD,dS),this.pR=this.OD.gl.TRIANGLES):o===t.PointShape.Circle?(this.dz=mS(t.PointShape.Circle,this.OD,(t=>((t,i)=>{const s=function(t=25){return yd(e(0,0),0,360,.5,.5,t)[0]}(i);return new fS(t,s)})(t,24))),this.pR=this.OD.gl.TRIANGLE_FAN):o===t.PointShape.Square?(this.dz=mS(t.PointShape.Square,this.OD,gS),this.pR=this.OD.gl.TRIANGLES):this.pR=this.OD.gl.POINTS:this.pR=this.OD.gl.POINTS):this.dz&&(this.dz=void 0),f||this.wn()){const t=this.do.length;if(a instanceof Be&&this.cz&&this.cz>0){const i=a.getFallbackColor(),s=new Float32Array(4*t);for(let e=0;e<t;e+=1){const t=this.do[e];t.color?(s[4*e+0]=t.color.r,s[4*e+1]=t.color.g,s[4*e+2]=t.color.b,s[4*e+3]=t.color.a):(s[4*e+0]=i.r,s[4*e+1]=i.g,s[4*e+2]=i.b,s[4*e+3]=i.a)}this.gz||(this.gz=this.OD.mO(s,!0)),this.OD.ZO(this.gz,s,!0)}else this.gz&&this.OD.gl.deleteBuffer(this.gz),this.gz=void 0;if(a instanceof Le){if(a instanceof Le&&a.lut.isValid){const t=a.getPalette();this.xR=this.aE.tR(t,this.MR,this.xR),this.MR=t}}else this.aE.vL.hn(this.MR),this.MR=void 0;if(this.yo.M()&&this.cz&&this.cz>0&&u>1){const i=new Float32Array(t);for(let s=0;s<t;s+=1){const t=this.do[s];t.size?i[s]=t.size:i[s]=u}this.mz||(this.mz=this.OD.mO(i,!0)),this.OD.ZO(this.mz,i,!0)}else this.mz&&(this.OD.gl.deleteBuffer(this.mz),this.mz=void 0);if(this.po.M()&&this.cz&&this.cz>0&&u>1){const i=new Float32Array(2*t),s=an(this.Vn.M()),e=Math.sin(s),h=Math.cos(s);for(let s=0;s<t;s+=1){const t=this.do[s];if(t.rotation){const e=an(t.rotation);i[2*s+0]=Math.sin(e),i[2*s+1]=Math.cos(e)}else i[2*s+0]=e,i[2*s+1]=h}this.yz||(this.yz=this.OD.mO(i,!0)),this.OD.ZO(this.yz,i,!0)}else this.yz&&(this.OD.gl.deleteBuffer(this.yz),this.yz=void 0);if(this.So.M()&&this.cz&&this.cz>0){const i=new Float32Array(t);for(let s=0;s<t;s+=1){const t=this.do[s];"value"in t&&void 0!==t.value&&null!==t.value?i[s]=t.value:i[s]=0}this.St||(this.St=this.OD.mO(i,!0)),this.OD.ZO(this.St,i,!0)}else this.St&&(this.OD.gl.deleteBuffer(this.St),this.St=void 0);this.Tn(this._n)}return a instanceof Ke?this.wE=Gp(this.fn(),this.Jt,a.getPosition(),a.getExtent(),a.getShape(),this.OD.TB()):a instanceof Je?this.AE=Hp(this.fn(),this.Jt,a.getAngle(!0),this.OD.TB()):(this.wE=void 0,this.AE=void 0),f&&(this.vo&&f&&(this.gE=Bo(this.vo,{x:u,y:u},this.Jt)),this.xo=[],this.Mo=0,this._o=kr),this.An=a,this.mo.o=!1,this.size.o=!1,this.Jr.o=!1,this.Ao=!1,this}BD(t){if(this.Cn()){const i=1===t?this.EE:this.BB,s=this.fz,e=this.cz,h=this._n;i&&s&&e&&h!==Ie&&(this.OD.wB(i),this.OD.SO(i,((i,h,r,n)=>{if(this.Jt instanceof In||this.Jt instanceof Zf?this.OD.bO(i("uScale"),this.PB.wO()).bO(i("uDisp"),this.PB.AO()).bO(n("uScaleStart_highpart"),this.PB.qL()).bO(n("uScaleStart_lowpart"),this.PB.JL()):this.Jt instanceof Fn&&this.OD.bO(n("uScaleStart"),this.PB.MixedScaleXY.uScaleStart).bO(n("uScaleStartLog"),this.PB.MixedScaleXY.uScaleStartLog).bO(n("uScaleInterval"),this.PB.MixedScaleXY.uScaleInterval).bO(n("uScaleIntervalLog"),this.PB.MixedScaleXY.uScaleIntervalLog).bO(i("uViewportStart"),this.PB.MixedScaleXY.uViewportStart).bO(i("uViewportSize"),this.PB.MixedScaleXY.uViewportSize),this.OD.BL(r,s,this.Jt.Ri(),this.dz?1:void 0).MO(i("uIsHighlighted"),1===t||2===t?0:this.en)._O(i("uHighlightColorOffset"),this.an).MO(i("uRenderEffectMask"),2===t?1:0).MO(n("uDevicePixelRatio"),this.OD.TB()),this.dz){const t=h("aInstanceGeo");this.OD.JO(t,this.dz.sB).tL(t,0)}if(1===t)this.OD._O(i("uColor"),this.pE);else if(this._n instanceof De)this.OD._O(i("uColor"),this._n.getColor());else if(this._n instanceof Be&&this.gz){const t=h("aColor");this.OD.sL(t,this.gz),this.pR!==this.OD.gl.POINTS&&this.OD.tL(t,1)}else if(this._n instanceof Le&&this.xR){if("value"===this._n.getLookUpProperty()&&this.St){const t=h("aLookupValue");this.OD.eL(t,this.St),this.pR!==this.OD.gl.POINTS&&this.OD.tL(t,1)}this.OD.xO(i("uLookupTexture"),this.xR.texture,0).MO(i("uLookupMin"),this._n.lut.min).MO(i("uLookupMax"),this._n.lut.max).MO(i("uLookupTextureHeightPx"),this.xR.textureHeight)}else if(this._n instanceof Ke){if(!this.wE)return!1;this.OD.IL(r,this.wE,this._n)}else if(this._n instanceof Je){if(!this.AE)return!1;this.OD.FL(r,this.AE,this._n)}if(this.mz&&this.pR!==this.OD.gl.POINTS){const t=h("aOffsetPixels");this.OD.eL(t,this.mz),this.pR!==this.OD.gl.POINTS&&this.OD.tL(t,1)}else if(this.pR!==this.OD.gl.POINTS){const t=i("uOffsetPixels");this.OD.MO(t,this.size.M())}if(this.yz&&this.pR!==this.OD.gl.POINTS){const t=h("aRot");this.OD.JO(t,this.yz),this.pR!==this.OD.gl.POINTS&&this.OD.tL(t,1)}else if(this.pR!==this.OD.gl.POINTS&&this.Vn.M()%360!=0){const t=an(this.Vn.M()),s=Math.sin(t),e=Math.cos(t);this.OD.bO(i("uRot"),[s,e])}if(this.pR===this.OD.gl.POINTS)this.OD.MO(i("uPointSize"),this.size.M());else{const t={x:2/this.vs.xi().x,y:2/this.vs.xi().y};this.OD.bO(i("uRatioPxClip"),[t.x,t.y])}let o=!1;return this.pR===this.OD.gl.POINTS?(this.OD._y(this.pR,e),o=!0):this.dz&&(this.OD.nL(this.pR,0,this.dz.az,e),o=!0),o})))}return this}Iv(t){this.Eo()>0&&this._e();const i=this.To(),s=Mo(i,t,this.wo,!1,!1,this.Jt,this.vs.Jt,this.vo,void 0,void 0);return void 0!==s?i[s]:void 0}Js(t){return super.Js(t)}ii(){return this.vo.max.x}ti(){return this.vo.min.x}ei(){return this.vo.max.y}si(){return this.vo.min.y}Yo(){return.5*this.size.M()}Xo(){return.5*this.size.M()}Oo(){return super.Oo(),this.uz=[],this}gB(){return this.fz&&(this.OD.TO(this.fz),this.fz=void 0),this.dz&&(this.dz=void 0),this.gz&&(this.OD.gl.deleteBuffer(this.gz),this.gz=void 0),this.yz&&(this.OD.TO(this.yz),this.yz=void 0),this.St&&(this.OD.TO(this.St),this.St=void 0),this}}class SS extends Wo{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.PB=new Lp,this.pz=kr,this.aE=t,this.uE=i,this.yE=r,this.pE=n,this.OD=t.lE(),this.uE=i}_e(){super._e();const t=this.Jr.M(),i=this.wn(),s=this.Ln.o||this.Et.o||this.Vn.o||this.K.o,h=this.In,r=this.Fn(),n=h.getThickness(),o=this.Dn(n),a=this.Vn.M();this.PB.CO(this.Jt);const u=this.Jt.qi();if(s||u){const t=this.Et.M();this.do=function(t,i,s,h,r){const n=((t,i,s)=>[t,e(t.x+i,t.y),e(t.x+i,t.y+s),e(t.x,t.y+s)])(t,i,s);if(0!==h||h%360!=0){const t=h*Math.PI/180;n[0]=Yr(n[0],r,t),n[1]=Yr(n[1],r,t),n[2]=Yr(n[2],r,t),n[3]=Yr(n[3],r,t)}return n}(this.Ln.M(),t.x,t.y,a,this.K.M()),this.bE&&this.OD.gl.deleteBuffer(this.bE);const i=Kh(this.do,this.Jt.Ri());this.bE=this.OD.mO(i),this.ME=this.do.length}this.pz=Nr(this.do);const l=this._n instanceof De&&this._n,c=this._n instanceof Ke&&this._n,f=this._n instanceof Je&&this._n,d=this._n instanceof yy&&this._n,g=l||c||f||d;if(i&&(this.kE=g?this.OD.pO(Fp["2D"],l&&Fp.Color({dataType:"uniform"}),f&&Fp.Color({dataType:["gradient",f]}),c&&Fp.Color({dataType:["gradient",c]}),d&&Fp.Color({dataType:["image",d.getFitMode()]}),Fp.VertexLocation({axisWorldTranslation:Np(this.Jt),normalSource:void 0})):void 0),c?this.wE=Gp(this.sn||this.pz,this.Jt,c.getPosition(),c.getExtent(),c.getShape(),this.OD.TB()):f?this.AE=Hp(this.sn||this.pz,this.Jt,f.getAngle(!0),this.OD.TB()):(this.wE=void 0,this.AE=void 0),d){const t=d.getSource();if((!this.Sz||i)&&t){this.Sz&&(this.Sz.texture.AB(this),this.OD.TO(this.Sz.texCoordsBuffer));const i=this.OD.PL(t);i.wB(this),this.Sz={texture:i,texCoordsBuffer:this.OD.mO([]),sourceMissingTexture:this.OD.kL(new Uint8Array(Object.values(d.getSourceMissingColor().toJS()).map((t=>255*t))),this.OD.gl.RGBA,!1,!0,{x:1,y:1},!1),textureReadyCallback:()=>{this.Sz&&d&&(this.vz(),this.vs.Ss())}},i.JB(this.Sz.textureReadyCallback),this.vz()}this.Sz&&this.Sz.texture.jB&&this.Sz.texture.UB&&this.Sz.texture.GB&&(this.Sz.texture._e(),this.vs.Ss()),(u||s)&&this.Sz&&this.Sz.texture.jB&&this.vz()}else this.Sz&&(this.Sz.texture.AB(this),this.OD.TO(this.Sz.texCoordsBuffer),this.Sz=void 0);if(s||o||u&&1!==n){if(1===n||-1===n)[this.CE,this.bz]=[this.do,void 0];else{const t=this.Jt;[this.CE,this.bz]=t instanceof Fn?((t,i,s)=>{const e=t[0],h=t[1],r=t[2],n=t[3],o=i/2;return[[s.ts(e,h,o,-o),s.ts(h,e,-o,-o),s.ts(n,r,-o,-o),s.ts(r,n,o,-o),s.ts(e,h,-o,o),s.ts(h,e,o,o),s.ts(n,r,o,o),s.ts(r,n,-o,o)],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.do,n,t):((t,i,s)=>{const h=t[0],r=t[1],n=t[2],o=t[3],a=e(i.x*s*.5,i.y*s*.5),u=Zr(Xr(r,h)),l=Zr(Xr(o,h)),c=hn(u),f=hn(l);return[[Qr(h,Qr(Jr(c,a.x),Jr(f,a.y))),Qr(r,Qr(Jr(u,a.x),Jr(f,a.y))),Qr(o,Qr(Jr(c,a.x),Jr(l,a.y))),Qr(n,Qr(Jr(u,a.x),Jr(l,a.y))),Qr(h,Qr(Jr(u,a.x),Jr(l,a.y))),Qr(r,Qr(Jr(c,a.x),Jr(l,a.y))),Qr(o,Qr(Jr(u,a.x),Jr(f,a.y))),Qr(n,Qr(Jr(c,a.x),Jr(f,a.y)))],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.do,t.Qi(),n)}this.IE&&this.OD.gl.deleteBuffer(this.IE),this.mR&&this.OD.gl.deleteBuffer(this.mR),this.IE=this.OD.mO(Kh(this.CE,this.Jt.Ri())),this.bz?(this.mR=this.OD.KO(new Uint16Array(this.bz)),this.TE=this.bz.length):(this.mR=void 0,this.TE=this.CE.length)}const m=h instanceof sh&&h,y=m&&m.getFillStyle(),p=y&&y instanceof Je&&y,S=y&&y instanceof Ke&&y,v=m,b=y&&y instanceof De&&y||p||S;return r&&(this.LE=v&&b?this.OD.pO(Fp["2D"],Fp.Color({dataType:S?["gradient",S]:p?["gradient",p]:"uniform"}),Fp.VertexLocation({axisWorldTranslation:Np(this.Jt),normalSource:void 0})):void 0),S?this.BE=Gp(this.pz,this.Jt,S.getPosition(),S.getExtent(),S.getShape(),this.OD.TB()):p?this.OE=Hp(this.pz,this.Jt,p.getAngle(!0),this.OD.TB()):(this.BE=void 0,this.OE=void 0),this.EE=t&&g?this.EE||this.OD.pO(Fp["2D"],Fp.Color({dataType:"uniform"}),Fp.VertexLocation({axisWorldTranslation:Np(this.Jt),normalSource:void 0})):void 0,this.RE=t&&this.In!==th?this.RE||this.OD.pO(Fp["2D"],Fp.Color({dataType:"uniform"}),Fp.VertexLocation({axisWorldTranslation:Np(this.Jt),normalSource:void 0})):void 0,this.Tn(this._n),this.Bn(h),this.Ln.o=!1,this.Vn.o=!1,this.Et.o=!1,this.K.o=!1,this}vz(){if(this.Sz&&this._n instanceof yy){const i=oh(this.io(),this.Jt,this.vs.Jt),s=tn(oh(Qr(this.io(),this.xi()),this.Jt,this.vs.Jt),i);this.Sz.texCoordsBuffer&&this.OD.TO(this.Sz.texCoordsBuffer),this.Sz.texCoordsBuffer=this.OD.mO(((i,s,e,h,r)=>{const n=Math.min(e/i,h/s),o=i*n,a=s*n,u=e/o,l=h/a,c=o/e,f=a/h;let d=0,g=1,m=0,y=1;switch(r){case t.ImageFitMode.Fill:l<u?(d=0,g=1,m=.5+-c/2,y=.5+c/2):(m=0,y=1,d=.5+-f/2,g=.5+f/2);break;case t.ImageFitMode.Fit:l<u?(m=0,y=1,d=.5+-u/2,g=.5+u/2):(d=0,g=1,m=.5+-l/2,y=.5+l/2);break;case t.ImageFitMode.Center:{const t=e/i,r=h/s;d=.5+-t/2,g=.5+t/2,m=.5+-r/2,y=.5+r/2}break;case t.ImageFitMode.Tile:d=0,g=e/i,m=0,y=h/s;break;case t.ImageFitMode.Stretch:default:d=0,g=1,m=0,y=1}return new Float32Array([d,y,g,y,g,m,d,m])})(this.Sz.texture.HB,this.Sz.texture.WB,s.x,s.y,this._n.getFitMode()))}}BD(t){if(this.Cn()){const i=1===t?this.EE:this.kE,s=this.bE,e=this.ME,h=this._n;i&&s&&e&&h!==Ie&&(this.OD.wB(i),this.OD.SO(i,((i,r,n,o)=>{if(this.Jt instanceof In||this.Jt instanceof Zf?this.OD.bO(i("uScale"),this.PB.wO()).bO(i("uDisp"),this.PB.AO()).bO(o("uScaleStart_highpart"),this.PB.qL()).bO(o("uScaleStart_lowpart"),this.PB.JL()):this.Jt instanceof Fn&&this.OD.bO(o("uScaleStart"),this.PB.MixedScaleXY.uScaleStart).bO(o("uScaleStartLog"),this.PB.MixedScaleXY.uScaleStartLog).bO(o("uScaleInterval"),this.PB.MixedScaleXY.uScaleInterval).bO(o("uScaleIntervalLog"),this.PB.MixedScaleXY.uScaleIntervalLog).bO(i("uViewportStart"),this.PB.MixedScaleXY.uViewportStart).bO(i("uViewportSize"),this.PB.MixedScaleXY.uViewportSize),1===t)this.OD._O(i("uColor"),this.pE);else if(h instanceof De)this.OD._O(i("uColor"),h.getColor());else if(h instanceof Ke){if(!this.wE)return!1;this.OD.IL(n,this.wE,h)}else if(h instanceof Je){if(!this.AE)return!1;this.OD.FL(n,this.AE,h)}else if(h instanceof yy){if(!this.Sz)return!1;const t=this.Sz&&this.Sz.texture.tO();this.OD._O(o("uColor"),h.getSurroundingColor()).xO(i(sp),t||this.Sz.sourceMissingTexture,0).vO(this.Sz.texCoordsBuffer,void 0,{location:r("aTextureCoord"),size:2}).$O(h.fitMode)}return this.OD.MO(i("uIsHighlighted"),1===t||2===t?0:this.en)._O(i("uHighlightColorOffset"),this.an).MO(i("uRenderEffectMask"),2===t?1:0).BL(n,s,this.Jt.Ri(),void 0)._y(this.OD.gl.TRIANGLE_FAN,e),!0})));const r=1===t?this.RE:this.LE,n=this.In,o=this.IE;r&&o&&n instanceof sh&&(this.OD.wB(r),this.OD.SO(r,((i,s,e,h)=>{this.Jt instanceof In||this.Jt instanceof Zf?this.OD.bO(i("uScale"),this.PB.wO()).bO(i("uDisp"),this.PB.AO()).bO(h("uScaleStart_highpart"),this.PB.qL()).bO(h("uScaleStart_lowpart"),this.PB.JL()):this.Jt instanceof Fn&&this.OD.bO(h("uScaleStart"),this.PB.MixedScaleXY.uScaleStart).bO(h("uScaleStartLog"),this.PB.MixedScaleXY.uScaleStartLog).bO(h("uScaleInterval"),this.PB.MixedScaleXY.uScaleInterval).bO(h("uScaleIntervalLog"),this.PB.MixedScaleXY.uScaleIntervalLog).bO(i("uViewportStart"),this.PB.MixedScaleXY.uViewportStart).bO(i("uViewportSize"),this.PB.MixedScaleXY.uViewportSize);const r=n.getFillStyle();if(1===t)this.OD._O(i("uColor"),this.pE);else if(r instanceof De)this.OD._O(i("uColor"),r.getColor());else if(r instanceof Ke){if(!this.BE)return!1;this.OD.IL(e,this.BE,r)}else if(r instanceof Je){if(!this.OE)return!1;this.OD.FL(e,this.OE,r)}return this.OD.MO(i("uIsHighlighted"),1===t||2===t?0:this.en)._O(i("uHighlightColorOffset"),this.an).MO(i("uRenderEffectMask"),2===t?1:0).BL(e,o,this.Jt.Ri(),void 0),this.mR?this.OD.hL(this.mR).rL(this.TE):this.OD._y(this.OD.gl.LINE_LOOP,this.TE),!0})))}return this}gB(){return this.mR&&(this.OD.TO(this.mR),this.mR=void 0),this.bE&&(this.OD.TO(this.bE),this.bE=void 0),this.IE&&(this.OD.TO(this.IE),this.IE=void 0),this.Sz&&(this.Sz.texture.AB(this),this.Sz.texture.QB(this.Sz.textureReadyCallback),this.OD.mB(this.Sz.sourceMissingTexture),this.OD.TO(this.Sz.texCoordsBuffer),this.Sz=void 0),this.kE=void 0,this.LE=void 0,this.EE=void 0,this.RE=void 0,this}ii(){return Math.max(this.Ln.M().x,this.Ln.M().x+this.Et.M().x)}ti(){return Math.min(this.Ln.M().x,this.Ln.M().x+this.Et.M().x)}ei(){return Math.max(this.Ln.M().y,this.Ln.M().y+this.Et.M().y)}si(){return Math.min(this.Ln.M().y,this.Ln.M().y+this.Et.M().y)}Yo(){return xr(this.In)}Xo(){return xr(this.In)}}var vS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},bS={exports:{}};function xS(t,i,s){s=s||2;var e,h,r,n,o,a,u,l=i&&i.length,c=l?i[0]*s:t.length,f=MS(t,0,c,s,!0),d=[];if(!f||f.next===f.prev)return d;if(l&&(f=function(t,i,s,e){var h,r,n,o=[];for(h=0,r=i.length;h<r;h++)(n=MS(t,i[h]*e,h<r-1?i[h+1]*e:t.length,e,!1))===n.next&&(n.steiner=!0),o.push(BS(n));for(o.sort(IS),h=0;h<o.length;h++)FS(o[h],s),s=_S(s,s.next);return s}(t,i,f,s)),t.length>80*s){e=r=t[0],h=n=t[1];for(var g=s;g<c;g+=s)(o=t[g])<e&&(e=o),(a=t[g+1])<h&&(h=a),o>r&&(r=o),a>n&&(n=a);u=0!==(u=Math.max(r-e,n-h))?1/u:0}return wS(f,d,s,e,h,u),d}function MS(t,i,s,e,h){var r,n;if(h===$S(t,i,s,e)>0)for(r=i;r<s;r+=e)n=WS(r,t[r],t[r+1],n);else for(r=s-e;r>=i;r-=e)n=WS(r,t[r],t[r+1],n);return n&&RS(n,n.next)&&(US(n),n=n.next),n}function _S(t,i){if(!t)return t;i||(i=t);var s,e=t;do{if(s=!1,e.steiner||!RS(e,e.next)&&0!==ES(e.prev,e,e.next))e=e.next;else{if(US(e),(e=i=e.prev)===e.next)break;s=!0}}while(s||e!==i);return i}function wS(t,i,s,e,h,r,n){if(t){!n&&r&&function(t,i,s,e){var h=t;do{null===h.z&&(h.z=DS(h.x,h.y,i,s,e)),h.prevZ=h.prev,h.nextZ=h.next,h=h.next}while(h!==t);h.prevZ.nextZ=null,h.prevZ=null,function(t){var i,s,e,h,r,n,o,a,u=1;do{for(s=t,t=null,r=null,n=0;s;){for(n++,e=s,o=0,i=0;i<u&&(o++,e=e.nextZ);i++);for(a=u;o>0||a>0&&e;)0!==o&&(0===a||!e||s.z<=e.z)?(h=s,s=s.nextZ,o--):(h=e,e=e.nextZ,a--),r?r.nextZ=h:t=h,h.prevZ=r,r=h;s=e}r.nextZ=null,u*=2}while(n>1)}(h)}(t,e,h,r);for(var o,a,u=t;t.prev!==t.next;)if(o=t.prev,a=t.next,r?kS(t,e,h,r):AS(t))i.push(o.i/s),i.push(t.i/s),i.push(a.i/s),US(t),t=a.next,u=a.next;else if((t=a)===u){n?1===n?wS(t=CS(_S(t),i,s),i,s,e,h,r,2):2===n&&TS(t,i,s,e,h,r):wS(_S(t),i,s,e,h,r,1);break}}}function AS(t){var i=t.prev,s=t,e=t.next;if(ES(i,s,e)>=0)return!1;for(var h=t.next.next;h!==t.prev;){if(OS(i.x,i.y,s.x,s.y,e.x,e.y,h.x,h.y)&&ES(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function kS(t,i,s,e){var h=t.prev,r=t,n=t.next;if(ES(h,r,n)>=0)return!1;for(var o=h.x<r.x?h.x<n.x?h.x:n.x:r.x<n.x?r.x:n.x,a=h.y<r.y?h.y<n.y?h.y:n.y:r.y<n.y?r.y:n.y,u=h.x>r.x?h.x>n.x?h.x:n.x:r.x>n.x?r.x:n.x,l=h.y>r.y?h.y>n.y?h.y:n.y:r.y>n.y?r.y:n.y,c=DS(o,a,i,s,e),f=DS(u,l,i,s,e),d=t.prevZ,g=t.nextZ;d&&d.z>=c&&g&&g.z<=f;){if(d!==t.prev&&d!==t.next&&OS(h.x,h.y,r.x,r.y,n.x,n.y,d.x,d.y)&&ES(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,g!==t.prev&&g!==t.next&&OS(h.x,h.y,r.x,r.y,n.x,n.y,g.x,g.y)&&ES(g.prev,g,g.next)>=0)return!1;g=g.nextZ}for(;d&&d.z>=c;){if(d!==t.prev&&d!==t.next&&OS(h.x,h.y,r.x,r.y,n.x,n.y,d.x,d.y)&&ES(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;g&&g.z<=f;){if(g!==t.prev&&g!==t.next&&OS(h.x,h.y,r.x,r.y,n.x,n.y,g.x,g.y)&&ES(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function CS(t,i,s){var e=t;do{var h=e.prev,r=e.next.next;!RS(h,r)&&zS(h,e,e.next,r)&&GS(h,r)&&GS(r,h)&&(i.push(h.i/s),i.push(e.i/s),i.push(r.i/s),US(e),US(e.next),e=t=r),e=e.next}while(e!==t);return _S(e)}function TS(t,i,s,e,h,r){var n=t;do{for(var o=n.next.next;o!==n.prev;){if(n.i!==o.i&&LS(n,o)){var a=HS(n,o);return n=_S(n,n.next),a=_S(a,a.next),wS(n,i,s,e,h,r),void wS(a,i,s,e,h,r)}o=o.next}n=n.next}while(n!==t)}function IS(t,i){return t.x-i.x}function FS(t,i){if(i=function(t,i){var s,e=i,h=t.x,r=t.y,n=-1/0;do{if(r<=e.y&&r>=e.next.y&&e.next.y!==e.y){var o=e.x+(r-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(o<=h&&o>n){if(n=o,o===h){if(r===e.y)return e;if(r===e.next.y)return e.next}s=e.x<e.next.x?e:e.next}}e=e.next}while(e!==i);if(!s)return null;if(h===n)return s;var a,u=s,l=s.x,c=s.y,f=1/0;e=s;do{h>=e.x&&e.x>=l&&h!==e.x&&OS(r<c?h:n,r,l,c,r<c?n:h,r,e.x,e.y)&&(a=Math.abs(r-e.y)/(h-e.x),GS(e,t)&&(a<f||a===f&&(e.x>s.x||e.x===s.x&&PS(s,e)))&&(s=e,f=a)),e=e.next}while(e!==u);return s}(t,i),i){var s=HS(i,t);_S(i,i.next),_S(s,s.next)}}function PS(t,i){return ES(t.prev,t,i.prev)<0&&ES(i.next,t,t.next)<0}function DS(t,i,s,e,h){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-s)*h)|t<<8))|t<<4))|t<<2))|t<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-e)*h)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function BS(t){var i=t,s=t;do{(i.x<s.x||i.x===s.x&&i.y<s.y)&&(s=i),i=i.next}while(i!==t);return s}function OS(t,i,s,e,h,r,n,o){return(h-n)*(i-o)-(t-n)*(r-o)>=0&&(t-n)*(e-o)-(s-n)*(i-o)>=0&&(s-n)*(r-o)-(h-n)*(e-o)>=0}function LS(t,i){return t.next.i!==i.i&&t.prev.i!==i.i&&!function(t,i){var s=t;do{if(s.i!==t.i&&s.next.i!==t.i&&s.i!==i.i&&s.next.i!==i.i&&zS(s,s.next,t,i))return!0;s=s.next}while(s!==t);return!1}(t,i)&&(GS(t,i)&&GS(i,t)&&function(t,i){var s=t,e=!1,h=(t.x+i.x)/2,r=(t.y+i.y)/2;do{s.y>r!=s.next.y>r&&s.next.y!==s.y&&h<(s.next.x-s.x)*(r-s.y)/(s.next.y-s.y)+s.x&&(e=!e),s=s.next}while(s!==t);return e}(t,i)&&(ES(t.prev,t,i.prev)||ES(t,i.prev,i))||RS(t,i)&&ES(t.prev,t,t.next)>0&&ES(i.prev,i,i.next)>0)}function ES(t,i,s){return(i.y-t.y)*(s.x-i.x)-(i.x-t.x)*(s.y-i.y)}function RS(t,i){return t.x===i.x&&t.y===i.y}function zS(t,i,s,e){var h=NS(ES(t,i,s)),r=NS(ES(t,i,e)),n=NS(ES(s,e,t)),o=NS(ES(s,e,i));return h!==r&&n!==o||!(0!==h||!VS(t,s,i))||!(0!==r||!VS(t,e,i))||!(0!==n||!VS(s,t,e))||!(0!==o||!VS(s,i,e))}function VS(t,i,s){return i.x<=Math.max(t.x,s.x)&&i.x>=Math.min(t.x,s.x)&&i.y<=Math.max(t.y,s.y)&&i.y>=Math.min(t.y,s.y)}function NS(t){return t>0?1:t<0?-1:0}function GS(t,i){return ES(t.prev,t,t.next)<0?ES(t,i,t.next)>=0&&ES(t,t.prev,i)>=0:ES(t,i,t.prev)<0||ES(t,t.next,i)<0}function HS(t,i){var s=new jS(t.i,t.x,t.y),e=new jS(i.i,i.x,i.y),h=t.next,r=i.prev;return t.next=i,i.prev=t,s.next=h,h.prev=s,e.next=s,s.prev=e,r.next=e,e.prev=r,e}function WS(t,i,s,e){var h=new jS(t,i,s);return e?(h.next=e.next,h.prev=e,e.next.prev=h,e.next=h):(h.prev=h,h.next=h),h}function US(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function jS(t,i,s){this.i=t,this.x=i,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function $S(t,i,s,e){for(var h=0,r=i,n=s-e;r<s;r+=e)h+=(t[n]-t[r])*(t[r+1]+t[n+1]),n=r;return h}bS.exports=xS,bS.exports.default=xS,xS.deviation=function(t,i,s,e){var h=i&&i.length,r=h?i[0]*s:t.length,n=Math.abs($S(t,0,r,s));if(h)for(var o=0,a=i.length;o<a;o++){var u=i[o]*s,l=o<a-1?i[o+1]*s:t.length;n-=Math.abs($S(t,u,l,s))}var c=0;for(o=0;o<e.length;o+=3){var f=e[o]*s,d=e[o+1]*s,g=e[o+2]*s;c+=Math.abs((t[f]-t[g])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[g+1]-t[f+1]))}return 0===n&&0===c?0:Math.abs((c-n)/n)},xS.flatten=function(t){for(var i=t[0][0].length,s={vertices:[],holes:[],dimensions:i},e=0,h=0;h<t.length;h++){for(var r=0;r<t[h].length;r++)for(var n=0;n<i;n++)s.vertices.push(t[h][r][n]);h>0&&(e+=t[h-1].length,s.holes.push(e))}return s};class YS extends jo{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.PB=new Lp,this.aE=t,this.uE=i,this.yE=r,this.pE=n,this.OD=t.lE(),this.uE=i}Iv(t){let i,s=Number.MAX_VALUE;for(const e of this.do){const h=Lr(oh(e,this.Jt,this.vs.Jt),t);h<s&&(s=h,i=e)}return i}_e(){const t=this.Jr.M(),i=this.wn(),s=this.Uo,e=this.do.length>=3,h=this.In,r=this.Fn(),n=h.getThickness(),o=this.Dn(n);this.PB.CO(this.Jt),this.TM=this.Jt.Qi();const a=this.Jt.qi();if(s&&(this.vo=Nr(this.do)),s&&(this.bE&&(this.OD.gl.deleteBuffer(this.bE),this.bE=void 0),e)){const t=Kh(this.do,this.Jt.Ri());this.bE=this.OD.mO(t),this.xz=new Uint16Array(bS.exports(t)),this.Mz&&this.OD.gl.deleteBuffer(this.Mz),this.Mz=this.OD.KO(this.xz),this.ME=this.xz.length}const u=this._n instanceof De&&this._n,l=this._n instanceof Le&&this._n,c=this._n instanceof Ke&&this._n,f=this._n instanceof Je&&this._n,d=u||l&&"value"!==l.getLookUpProperty()&&l||f||c;if(i){if(l){const t=l.getPalette();this.xR=this.aE.tR(t,this.MR,this.xR),this.MR=t}else this.aE.vL.hn(this.MR),this.MR=void 0;this.kE=d?this.OD.pO(Fp["2D"],u&&Fp.Color({dataType:"uniform"}),f&&Fp.Color({dataType:["gradient",f]}),c&&Fp.Color({dataType:["gradient",c]}),l&&Fp.Color({dataType:["lookup",l.getLookUpProperty()]}),Fp.VertexLocation({axisWorldTranslation:Np(this.Jt),normalSource:void 0})):void 0}if(c?this.wE=Gp(this.sn||this.vo,this.Jt,c.getPosition(),c.getExtent(),c.getShape(),this.OD.TB()):f?this.AE=Hp(this.sn||this.vo,this.Jt,f.getAngle(!0),this.OD.TB()):(this.wE=void 0,this.AE=void 0),(s||o||a&&1!==n)&&(this.IE&&(this.OD.TO(this.IE),this.IE=void 0),e)){const t=1===n||-1===n?this.do:Wp(this.do,this.TM,n);this.CE=Kh(t,this.Jt.Ri()),this.IE=this.OD.mO(this.CE,!0),this.TE=t.length}const g=h instanceof sh&&h,m=g&&g.getFillStyle(),y=m&&m instanceof Je&&m,p=m&&m instanceof Ke&&m,S=g,v=m&&m instanceof De&&m||y||p;return r&&(this.LE=S&&v?this.OD.pO(Fp["2D"],Fp.Color({dataType:p?["gradient",p]:y?["gradient",y]:"uniform"}),Fp.VertexLocation({axisWorldTranslation:Np(this.Jt),normalSource:void 0})):void 0),p?this.BE=Gp(this.sn||this.vo,this.Jt,p.getPosition(),p.getExtent(),p.getShape(),this.OD.TB()):y?this.OE=Hp(this.sn||this.vo,this.Jt,y.getAngle(!0),this.OD.TB()):(this.BE=void 0,this.OE=void 0),this.EE=t&&d?this.EE||this.OD.pO(Fp["2D"],Fp.Color({dataType:"uniform"}),Fp.VertexLocation({axisWorldTranslation:Np(this.Jt),normalSource:void 0})):void 0,this.RE=t&&this.In!==th?this.EE||this.OD.pO(Fp["2D"],Fp.Color({dataType:"uniform"}),Fp.VertexLocation({axisWorldTranslation:Np(this.Jt),normalSource:void 0})):void 0,this.Uo=!1,this.Tn(this._n),this.Bn(h),this}BD(t){if(this.Cn()){const i=this._n,s=1===t?this.EE:this.kE,e=this.bE,h=this.ME;s&&e&&h&&this.OD.wB(s).SO(s,((s,h,r,n)=>{if(this.OD.bO(s("uScale"),this.PB.wO()).bO(s("uDisp"),this.PB.AO()).bO(n("uScaleStart_highpart"),this.PB.qL()).bO(n("uScaleStart_lowpart"),this.PB.JL()).BL(r,e,this.Jt.Ri(),void 0).hL(this.Mz).MO(s("uIsHighlighted"),1===t||2===t?0:this.en)._O(s("uHighlightColorOffset"),this.an).MO(s("uRenderEffectMask"),2===t?1:0),1===t)this.OD._O(s("uColor"),this.pE);else if(i instanceof De)this.OD._O(s("uColor"),i.getColor());else if(i instanceof Ke){if(!this.wE)return!1;this.OD.IL(r,this.wE,i)}else if(i instanceof Je){if(!this.AE)return!1;this.OD.FL(r,this.AE,i)}else i instanceof Le&&this.xR&&this.OD.MO(s("uLookupMin"),i.lut.min).MO(s("uLookupMax"),i.lut.max).MO(s("uLookupTextureHeightPx"),this.xR.textureHeight).xO(s("uLookupTexture"),this.xR.texture,0);return this.OD.rL(this.ME),!0}));const r=1===t?this.RE:this.LE,n=this.In,o=this.IE,a=this.TE;r&&o&&a&&this.OD.wB(r).SO(r,((i,s,e,h)=>{this.OD.MO(i("uIsHighlighted"),1===t||2===t?0:this.en)._O(i("uHighlightColorOffset"),this.an).MO(i("uRenderEffectMask"),2===t?1:0).bO(i("uScale"),this.PB.wO()).bO(i("uDisp"),this.PB.AO()).BL(e,o,this.Jt.Ri(),void 0);const r=n.getFillStyle();if(1===t)this.OD._O(i("uColor"),this.pE);else if(r instanceof De)this.OD._O(i("uColor"),r.getColor());else if(r instanceof Ke){if(!this.BE)return!1;this.OD.IL(e,this.BE,r)}else if(r instanceof Je){if(!this.OE)return!1;this.OD.FL(e,this.OE,r)}const a=n.getThickness(),u=-1===a||1===a;return this.OD._y(u?this.OD.gl.LINE_LOOP:this.OD.gl.TRIANGLE_STRIP,this.TE),!0}))}return this}gB(){return this.Mz&&(this.OD.TO(this.Mz),this.Mz=void 0),this.bE&&(this.OD.TO(this.bE),this.bE=void 0),this.IE&&(this.OD.TO(this.IE),this.IE=void 0),this.kE=void 0,this.LE=void 0,this.EE=void 0,this.RE=void 0,this.xR=void 0,this}}const XS=(t,i)=>{let s=0;const e=[];for(;s<t;){const h=s;let r=i;const n=s>0;r-=n?1:0,r-=s+r<t?1:0;const o=Math.min(r,t-h),a=s-(n?1:0),u={start:a,startUnique:h,sizeData:Math.min(i,t-a),sizeUniqueData:o};e.push(u),s+=o}return e},ZS=(t,i)=>{let s=0;const e=[];for(;s<t;){const h=s;let r=i;const n=s>0;r-=n?1:0,r-=0;const o=Math.min(r,t-h),a=s-(n?1:0),u={start:a,startUnique:h,sizeData:Math.min(i,t-a),sizeUniqueData:o};e.push(u),s+=o}return e},KS=(t,i,s,e)=>{if(s){const t=new Map;return i.gridTiles.forEach((i=>{t.set(i,{type:s,dataInvalidationRanges:[{tileInvalidationOffset:{primary:0,secondary:0},tileInvalidationLength:i.sizeHeatmapDataVectors}]})})),t}const h=new Map;for(let s=0;s<t.length;s+=1){const r=t[s],n={x:r.startPrimary,y:r.startSecondary},o={x:n.x+r.lengthPrimary-1,y:n.y+r.lengthSecondary-1},a=[n,{x:o.x,y:n.y},o,{x:n.x,y:o.y}];i.gridTiles.forEach((t=>{const i=t.iFirstVector,s=e(t),n={x:i.primary+s.primary-1,y:i.secondary+s.secondary-1},o=[{x:i.primary,y:i.secondary},{x:n.x,y:i.secondary},n,{x:i.primary,y:n.y}];if(!Fr(a,o))return;let u=h.get(t);u||(u={type:r.type,dataInvalidationRanges:[]},h.set(t,u));const l=Pr(a,o),c={primary:l.min.x-i.primary,secondary:l.min.y-i.secondary},f={primary:1+l.max.x-l.min.x,secondary:1+l.max.y-l.min.y};let d=!1;const g=[{x:c.primary,y:c.secondary},{x:c.primary+f.primary,y:c.secondary},{x:c.primary+f.primary,y:c.secondary+f.secondary},{x:c.primary,y:c.secondary+f.secondary}];for(let t=0;t<u.dataInvalidationRanges.length;t+=1)if(!d){const i=u.dataInvalidationRanges[t],s=[{x:i.tileInvalidationOffset.primary,y:i.tileInvalidationOffset.secondary},{x:i.tileInvalidationOffset.primary+i.tileInvalidationLength.primary,y:i.tileInvalidationOffset.secondary},{x:i.tileInvalidationOffset.primary+i.tileInvalidationLength.primary,y:i.tileInvalidationOffset.secondary+i.tileInvalidationLength.secondary},{x:i.tileInvalidationOffset.primary,y:i.tileInvalidationOffset.secondary+i.tileInvalidationLength.secondary}];if(Fr(g,s)){const t=(m=g,y=s,{min:{x:Math.min(m[0].x,y[0].x),y:Math.min(m[0].y,y[0].y)},max:{x:Math.max(m[2].x,y[2].x),y:Math.max(m[2].y,y[2].y)}});i.tileInvalidationOffset.primary=t.min.x,i.tileInvalidationOffset.secondary=t.min.y,i.tileInvalidationLength.primary=t.max.x-t.min.x,i.tileInvalidationLength.secondary=t.max.y-t.min.y,d=!0}}var m,y;d||u.dataInvalidationRanges.push({tileInvalidationLength:f,tileInvalidationOffset:c})}))}return h},qS=(t,i,s)=>{if(1!==t.length||0!==i.startPrimary||0!==i.startSecondary||i.lengthPrimary!==t[0].sizeHeatmapDataVectors.primary||i.lengthSecondary!==t[0].sizeHeatmapDataVectors.secondary)t.forEach((t=>{const e=s(t),h=Math.max(i.startPrimary,t.iFirstVector.primary),r=Math.min(i.startPrimary+i.lengthPrimary-1,t.iFirstVector.primary+t.sizeHeatmapDataVectors.primary-1),n=Math.max(i.startSecondary,t.iFirstVector.secondary),o=Math.min(i.startSecondary+i.lengthSecondary-1,t.iFirstVector.secondary+t.sizeHeatmapDataVectors.secondary-1);for(let s=h;s<=r;s+=1){const h=s-i.startPrimary,r=i.values[h],a=(s-t.iFirstVector.primary)*t.sizeHeatmapDataVectors.secondary;for(let s=n;s<=o;s+=1){const h=s-i.startSecondary,n=s-t.iFirstVector.secondary,o=r[h];e[a+n]=o}}}));else{const e=t[0],h=s(e);for(let t=0;t<i.lengthPrimary;t+=1){const s=t*e.sizeHeatmapDataVectors.secondary;h.set(i.values[t],s)}}},JS=(t,i,s)=>{var e,h;const r=null===(e=t.gl2)||void 0===e?void 0:e.ctx;if(r)return t.kL(null,r.RED,!1,!0,{x:i,y:s},!1,r.FLOAT,r.R32F);const n=t.gl;return(null===(h=t.gl1)||void 0===h?void 0:h.optional.OES_texture_float)?t.kL(null,n.LUMINANCE,!1,!0,{x:i,y:s},!1,n.FLOAT):t.kL(null,n.RGBA,!1,!0,{x:i,y:s},!1,n.UNSIGNED_BYTE)},QS=(t,i,s,e)=>{i.forEach(((i,h)=>{var r,n;const o=s(h),a=e(h),u=t.gl;u.bindTexture(u.TEXTURE_2D,a),u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const l=null===(r=t.gl2)||void 0===r?void 0:r.ctx,c=i.dataInvalidationRanges.length,f=i.dataInvalidationRanges.reduce(((t,i)=>t+i.tileInvalidationLength.primary),0)/h.sizeHeatmapDataVectors.primary;1===c&&f<1||f<.5&&c<10?i.dataInvalidationRanges.forEach((i=>{var s;const e=i.tileInvalidationOffset.primary*h.sizeHeatmapDataVectors.secondary,r=e+i.tileInvalidationLength.primary*h.sizeHeatmapDataVectors.secondary;if(l)l.texSubImage2D(u.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,h.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,l.RED,l.FLOAT,o.subarray(e,r));else if(null===(s=t.gl1)||void 0===s?void 0:s.optional.OES_texture_float)u.texSubImage2D(u.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,h.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,u.LUMINANCE,u.FLOAT,o.subarray(e,r));else{const t=new Uint8Array(o.buffer).subarray(4*e,4*r);u.texSubImage2D(u.TEXTURE_2D,0,0,i.tileInvalidationOffset.primary,h.sizeHeatmapDataVectors.secondary,i.tileInvalidationLength.primary,u.RGBA,u.UNSIGNED_BYTE,t)}})):l?l.texImage2D(u.TEXTURE_2D,0,l.R32F,h.sizeHeatmapDataVectors.secondary,h.sizeHeatmapDataVectors.primary,0,l.RED,l.FLOAT,o):(null===(n=t.gl1)||void 0===n?void 0:n.optional.OES_texture_float)?u.texImage2D(u.TEXTURE_2D,0,u.LUMINANCE,h.sizeHeatmapDataVectors.secondary,h.sizeHeatmapDataVectors.primary,0,u.LUMINANCE,u.FLOAT,o):u.texImage2D(u.TEXTURE_2D,0,u.RGBA,h.sizeHeatmapDataVectors.secondary,h.sizeHeatmapDataVectors.primary,0,u.RGBA,u.UNSIGNED_BYTE,new Uint8Array(o.buffer)),u.bindTexture(u.TEXTURE_2D,null)}))};class tv extends zo{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this._z=l("bilinear"),this.eu=fo.lineStyle,this.engine=t,this.vo=a({x:Math.min(r.start.x,r.start.x+r.columns*r.step.x),y:Math.min(r.start.y,r.start.y+r.rows*r.step.y)},{x:Math.max(r.start.x,r.start.x+r.columns*r.step.x),y:Math.max(r.start.y,r.start.y+r.rows*r.step.y)});const n="columns"===r.dataOrder?r.columns:r.rows,o="columns"===r.dataOrder?r.rows:r.columns;this.hr={...r,primaryDimensionVectorsCount:n,secondaryDimensionVectorsCount:o}}oS(t){return this._z.S(t),this}aS(){return this._z.M()}hu(t){return this.eu="function"==typeof t?t(this.eu):t,this}ru(){return this.eu}}class iv extends tv{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r),this.PB=new Lp,this.bR={},this.wz=[],this.Az=!1,this.Ao=!1,this.kz=XS,this.aE=t,this.uE=i,this.yE=n,this.pE=o,this.OD=t.lE(),this.uE=i;const a=Math.min(this.OD.dB,2048),u={x:Math.min(a,this.hr.primaryDimensionVectorsCount),y:Math.min(a,this.hr.secondaryDimensionVectorsCount)},l=((t,i,s,e)=>{const h=[],r=s(t.primaryDimensionVectorsCount,i.x),n=s(t.secondaryDimensionVectorsCount,i.y);let o;return r.forEach((t=>n.forEach((i=>{const s={iFirstVector:{primary:t.start,secondary:i.start},iFirstUniqueVector:{primary:t.startUnique,secondary:i.startUnique},sizeHeatmapDataVectors:{primary:t.sizeData,secondary:i.sizeData},sizeUniqueHeatmapDataVectors:{primary:t.sizeUniqueData,secondary:i.sizeUniqueData}};h.push(s)})))),o=[],h.forEach((t=>{let i=o.find((i=>i.sizeHeatmapData.primary===t.sizeHeatmapDataVectors.primary&&i.sizeHeatmapData.secondary===t.sizeHeatmapDataVectors.secondary));i||(i={sizeHeatmapData:t.sizeHeatmapDataVectors,tiles:[]},o.push(i)),i.tiles.push(t)})),{gridTiles:h,gridTileSizes:o}})(this.hr,u,this.kz),c=l.gridTiles.map((t=>{const i="columns"===this.hr.dataOrder?{x:this.hr.start.x+this.hr.step.x*t.iFirstVector.primary,y:this.hr.start.y+this.hr.step.y*t.iFirstVector.secondary}:{x:this.hr.start.x+this.hr.step.x*t.iFirstVector.secondary,y:this.hr.start.y+this.hr.step.y*t.iFirstVector.primary},s="columns"===this.hr.dataOrder?{x:this.hr.step.x*t.sizeHeatmapDataVectors.primary,y:this.hr.step.y*t.sizeHeatmapDataVectors.secondary}:{x:this.hr.step.x*t.sizeHeatmapDataVectors.secondary,y:this.hr.step.y*t.sizeHeatmapDataVectors.primary},e="columns"===this.hr.dataOrder?{x:this.hr.start.x+this.hr.step.x*t.iFirstUniqueVector.primary,y:this.hr.start.y+this.hr.step.y*t.iFirstUniqueVector.secondary}:{x:this.hr.start.x+this.hr.step.x*t.iFirstUniqueVector.secondary,y:this.hr.start.y+this.hr.step.y*t.iFirstUniqueVector.primary},h="columns"===this.hr.dataOrder?{x:this.hr.step.x*t.sizeUniqueHeatmapDataVectors.primary,y:this.hr.step.y*t.sizeUniqueHeatmapDataVectors.secondary}:{x:this.hr.step.x*t.sizeUniqueHeatmapDataVectors.secondary,y:this.hr.step.y*t.sizeUniqueHeatmapDataVectors.primary},r=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary);return{...t,startLocationAxis:i,startRenderLocationAxis:e,sizeAxis:s,renderSizeAxis:h,intensityData:r,hasIntensityData:!1}})),f=l.gridTileSizes.map((t=>({...t,tiles:c.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary))})));this.Cz={gridTiles:c,gridTileSizes:f}}_e(){const t=this.wz,i=this._n,s=this.wn(),e=this.eu,h=e!==this.wu,r=i instanceof Le&&i,n=i instanceof De&&i,o=r&&r.getPalette(),a=this._z.o,u=this._z.M(),l=this.Ao,c=this.Jr.M();this.Tz=this.Tz||this.Iz();const f=this.Tz,d=KS(t,f,l?"intensity":void 0,(t=>t.sizeHeatmapDataVectors));d.size>0&&(QS(this.OD,d,(t=>t.intensityData),(t=>t.intensityDataTexture)),this.Az=!0),this.PB.CO(this.Jt);const g=this.bR;if((s||a)&&(o?(this.Fz=this.aE.tR(o,this.Pz,this.Fz),this.Pz=o):(this.Fz=void 0,this.aE.vL.hn(this.Pz),this.Pz=void 0),g.tile=r&&this.Fz?{renderMode:"paletted",fillStylePaletted:r,colorLookupTexture:this.Fz,shader:this.OD.pO(Fp["2D"],Fp.ColorGrid2D({heatmapType:"intensity",interpolation:"bilinear"===u&&"bilinear",flipXY:"rows"===this.hr.dataOrder,intensityTextureType:this.OD.pL?"float":"ubyte",littleEndian:this.OD.IS_MACHINE_LITTLE_ENDIAN}),Fp.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:Np(this.Jt),flipXY:"rows"===this.hr.dataOrder,normalSource:void 0}))}:n?{renderMode:"solid",fillStyleSolid:n,shader:this.OD.pO(Fp["2D"],Fp.Color({dataType:"uniform"}),Fp.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:Np(this.Jt),flipXY:"rows"===this.hr.dataOrder,normalSource:void 0}))}:void 0),h){const t=e instanceof sh&&e,i=t&&t.getFillStyle(),s=i instanceof De&&i;g.wireframe=t&&s?-1===t.getThickness()?{renderMode:"primitive",shader:this.OD.pO(Fp["2D"],Fp.Color({dataType:"uniform"}),Fp.VertexLocation({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.hr.dataOrder,axisWorldTranslation:Np(this.Jt),normalSource:void 0})),fillStyleSolid:s}:{renderMode:"triangulated",shader:this.OD.pO(Fp["2D"],Fp.Color({dataType:"uniform"}),Fp.LineInstanced2D({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.hr.dataOrder,axisWorldTranslation:Np(this.Jt),normalSource:void 0})),geometry:tS(this.OD,1),solidLine:t,fillStyleSolid:s}:void 0,g.wireframe?this.Dz=this.Dz||this.Bz():this.Dz&&(this.OD.TO(this.Dz.wireframeCoordinatesBuffer),this.Dz=void 0)}return g.mousePicking=c?this.bR.mousePicking||{shader:this.OD.pO(Fp["2D"],Fp.Color({dataType:"uniform"}),Fp.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:Np(this.Jt),flipXY:"rows"===this.hr.dataOrder,normalSource:void 0}))}:void 0,this.bR=g,this.Ao=!1,this.wz.length=0,this.Tn(i),this.wu=e,this._z.o=!1,this}Iz(){const t=this.Cz.gridTiles.map((t=>{const i=JS(this.OD,t.sizeHeatmapDataVectors.secondary,t.sizeHeatmapDataVectors.primary);return{...t,intensityDataTexture:i}})),i=this.Cz.gridTileSizes.map((i=>({...i,tiles:t.filter((t=>t.sizeHeatmapDataVectors.primary===i.sizeHeatmapData.primary&&t.sizeHeatmapDataVectors.secondary===i.sizeHeatmapData.secondary))}))),s=this.OD.mO([0,0,1,0,0,1,1,1]),e=this.OD.gl.TRIANGLE_STRIP;return{gridTiles:t,gridTileSizes:i,rectangleLocationsBuffer:s,rectangleLocationsDrawMode:e,rectangleLocationsDrawLength:4}}Bz(){const t=this.hr.primaryDimensionVectorsCount+1+this.hr.secondaryDimensionVectorsCount+1,i=new Float32Array(4*t);let s=0;for(let t=0;t<this.hr.primaryDimensionVectorsCount+1;t+=1)i[s+0]=t,i[s+1]=0,i[s+2]=t,i[s+3]=this.hr.secondaryDimensionVectorsCount,s+=4;for(let t=0;t<this.hr.secondaryDimensionVectorsCount+1;t+=1)i[s+0]=0,i[s+1]=t,i[s+2]=this.hr.primaryDimensionVectorsCount,i[s+3]=t,s+=4;return{wireframeCoordinatesBuffer:this.OD.mO(i),wireframeSegmentsLength:t}}BD(t){var i,s;const e=this.Tz,h=1===t?null===(i=this.bR.mousePicking)||void 0===i?void 0:i.shader:null===(s=this.bR.tile)||void 0===s?void 0:s.shader;if(this.bR.tile&&h&&e){const i=h,s=this.bR.tile,r={x:(this.vo.max.x-this.vo.min.x)*Math.sign(this.hr.step.x),y:(this.vo.max.y-this.vo.min.y)*Math.sign(this.hr.step.y)},n={x:r.x/this.hr.columns,y:r.y/this.hr.rows},o=this.Jt.Qi(),a={x:n.x/o.x,y:n.y/o.y};if("solid"===s.renderMode||1===t)this.OD.wB(i).SO(i,((i,h,r)=>{if(1===t)this.OD._O(i("uColor"),this.pE);else if("solid"===s.renderMode){const{fillStyleSolid:t}=s;this.OD._O(i("uColor"),t.getColor())}return this.OD.MO(i("uIsHighlighted"),1===t||2===t?0:this.en)._O(i("uHighlightColorOffset"),this.an).MO(i("uRenderEffectMask"),2===t?1:0).bO(i("uScale"),this.PB.wO()).bO(i("uDisp"),this.PB.AO()).vO(e.rectangleLocationsBuffer,void 0,{location:h("aPos"),size:2}).bO(i("uScaling"),[this.hr.step.x*this.hr.columns,this.hr.step.y*this.hr.rows]).bO(i("uTranslationAxis"),[this.hr.start.x,this.hr.start.y])._y(e.rectangleLocationsDrawMode,e.rectangleLocationsDrawLength),!0}));else if("paletted"===s.renderMode){const{colorLookupTexture:h,fillStylePaletted:r}=s;this.OD.SO(i,((s,n,o)=>{let u=!1;var l,c;return this.OD.wB(i).bO(s("uScale"),this.PB.wO()).bO(s("uDisp"),this.PB.AO()).xO(s("uLookupTexture"),h.texture,0).MO(s("uLookupMin"),r.getPalette().min).MO(s("uLookupMax"),r.getPalette().max).MO(s("uLookupTextureHeightPx"),h.textureHeight).vO(e.rectangleLocationsBuffer,void 0,{location:n("aPos"),size:2}).MO(s("uIsHighlighted"),this.en)._O(s("uHighlightColorOffset"),this.an).MO(s("uRenderEffectMask"),2===t?1:0),l=t=>{this.OD.bO(s("uTileDimensions"),["columns"===this.hr.dataOrder?t.sizeHeatmapData.primary:t.sizeHeatmapData.secondary,"columns"===this.hr.dataOrder?t.sizeHeatmapData.secondary:t.sizeHeatmapData.primary])},c=(t,i)=>{let h;const r=this.OD.TB();if("bilinear"===this._z.M()){const i=(this.Jt.x.qt(t.startLocationAxis.x)+a.x/2)*r,s=(this.Jt.y.qt(t.startLocationAxis.y)+a.y/2)*r;h=[i,s,(this.Jt.x.qt(t.startLocationAxis.x+t.sizeAxis.x)-a.x/2)*r-i,(this.Jt.y.qt(t.startLocationAxis.y+t.sizeAxis.y)-a.y/2)*r-s]}else{const i=this.Jt.x.qt(t.startLocationAxis.x)*r,s=this.Jt.y.qt(t.startLocationAxis.y)*r;h=[i,s,this.Jt.x.qt(t.startLocationAxis.x+t.sizeAxis.x)*r-i,this.Jt.y.qt(t.startLocationAxis.y+t.sizeAxis.y)*r-s]}this.OD.GO(s("uTileBounds"),h).bO(s("uScaling"),[t.renderSizeAxis.x,t.renderSizeAxis.y]).bO(s("uTranslationAxis"),[t.startRenderLocationAxis.x,t.startRenderLocationAxis.y]).xO(s("uTileIntensityValues"),t.intensityDataTexture,1)._y(e.rectangleLocationsDrawMode,e.rectangleLocationsDrawLength),u=!0},e.gridTileSizes.forEach((t=>{l(t),t.tiles.forEach((t=>{c(t)}))})),u}))}}const r=this.Dz,n=this.bR.wireframe,o=1===t||null==n?void 0:n.shader;if(r&&n&&o&&"primitive"===n.renderMode){const i=o,{fillStyleSolid:s}=n;this.OD.wB(i).SO(i,((i,e,h)=>((this.Jt instanceof In||this.Jt instanceof Zf)&&this.OD.bO(i("uScale"),this.PB.wO()).bO(i("uDisp"),this.PB.AO()),this.OD.MO(i("uIsHighlighted"),1===t||2===t?0:this.en)._O(i("uHighlightColorOffset"),this.an).MO(i("uRenderEffectMask"),2===t?1:0)._O(i("uColor"),s.getColor()).vO(r.wireframeCoordinatesBuffer,void 0,{location:e("aPos"),size:2}).bO(i("uScaling"),[this.hr.step.x,this.hr.step.y]).bO(i("uTranslationAxis"),[this.hr.start.x,this.hr.start.y])._y(this.OD.gl.LINES,2*r.wireframeSegmentsLength),!0)))}else if(r&&n&&"triangulated"===n.renderMode){const{shader:i,geometry:s,solidLine:e,fillStyleSolid:h}=n;this.OD.wB(i).SO(i,((i,n,o)=>((this.Jt instanceof In||this.Jt instanceof Zf)&&this.OD.bO(i("uScale"),this.PB.wO()).bO(i("uDisp"),this.PB.AO()),this.OD.MO(i("uIsHighlighted"),1===t||2===t?0:this.en)._O(i("uHighlightColorOffset"),this.an).MO(i("uRenderEffectMask"),2===t?1:0)._O(i("uColor"),h.getColor()).MO(i("uThicknessPixels"),e.getThickness()).bO(i("uRatioPxClip"),[2/this.vs.xi().x,2/this.vs.xi().y]).vO(r.wireframeCoordinatesBuffer,1,{location:n("aLocationA"),size:2},{location:n("aLocationB"),size:2}).bO(i("uScaling"),[this.hr.step.x,this.hr.step.y]).bO(i("uTranslationAxis"),[this.hr.start.x,this.hr.start.y]),s.wB(o,!1)._y(r.wireframeSegmentsLength),!0)))}return this}uS(t){return this.wz.push(t),qS(this.Cz.gridTiles,t,(t=>(t.hasIntensityData=!0,t.intensityData))),this}Oo(){return this.Az&&(this.Cz.gridTiles.forEach((t=>{t.intensityData.fill(0),t.hasIntensityData=!1})),this.Ao=!0,this.Az=!1),this}dispose(){super.dispose(),this.aE.vL.hn(this.Pz),this.Pz=void 0,this.Fz=void 0;const t=this.Tz;t&&(t.gridTiles.forEach((t=>{this.OD.mB(t.intensityDataTexture)})),t.gridTiles.length=0,t.gridTileSizes.forEach((t=>{})),t.gridTileSizes.length=0,this.OD.TO(t.rectangleLocationsBuffer)),this.Tz=void 0;const i=this.Dz;return i&&this.OD.TO(i.wireframeCoordinatesBuffer),this.Dz=void 0,this.bR={},this}gB(){return this.dispose(),this}Iv(t){const i=t,s="columns"===this.hr.dataOrder?i.x:i.y,e="columns"===this.hr.dataOrder?i.y:i.x,h="columns"===this.hr.dataOrder?this.hr.start.x:this.hr.start.y,r="columns"===this.hr.dataOrder?this.hr.start.y:this.hr.start.x;let n=(s-h)/("columns"===this.hr.dataOrder?this.hr.step.x:this.hr.step.y),o=(e-r)/("columns"===this.hr.dataOrder?this.hr.step.y:this.hr.step.x);n=Math.floor(Ah(n,0,this.hr.primaryDimensionVectorsCount-1)),o=Math.floor(Ah(o,0,this.hr.secondaryDimensionVectorsCount-1));const a=this.Oz(n,o),u="columns"===this.hr.dataOrder?{x:this.hr.start.x+(n+.5)*this.hr.step.x,y:this.hr.start.y+(o+.5)*this.hr.step.y}:{x:this.hr.start.x+(o+.5)*this.hr.step.x,y:this.hr.start.y+(n+.5)*this.hr.step.y},l="columns"===this.hr.dataOrder?n:o,c="columns"===this.hr.dataOrder?o:n;return{x:u.x,y:u.y,column:l,row:c,cellValue:a}}GC(t){if(t.x<this.vo.min.x||t.x>this.vo.max.x||t.y<this.vo.min.y||t.y>this.vo.max.y)return;const i=t,s="columns"===this.hr.dataOrder?i.x:i.y,e="columns"===this.hr.dataOrder?i.y:i.x,h="columns"===this.hr.dataOrder?this.hr.start.x:this.hr.start.y,r="columns"===this.hr.dataOrder?this.hr.start.y:this.hr.start.x,n="columns"===this.hr.dataOrder?this.hr.step.x:this.hr.step.y,o="columns"===this.hr.dataOrder?this.hr.step.y:this.hr.step.x,a=Ah((s-h)/n-.5,0,this.hr.primaryDimensionVectorsCount-1),u=Ah((e-r)/o-.5,0,this.hr.secondaryDimensionVectorsCount-1),l=Ah(Math.ceil(a)-1,0,this.hr.primaryDimensionVectorsCount-1),c=Ah(Math.ceil(u)-1,0,this.hr.secondaryDimensionVectorsCount-1),f={point:{x:l,y:c},value:this.Oz(l,c)},d={point:{x:l,y:c+1},value:this.Oz(l,c+1)},g={point:{x:l+1,y:c},value:this.Oz(l+1,c)},m={point:{x:l+1,y:c+1},value:this.Oz(l+1,c+1)},y=yf({x:a,y:u},f,d,g,m);if(void 0===y)return;const p=Ah(Math.floor(a+.5),0,this.hr.primaryDimensionVectorsCount-1),S=Ah(Math.floor(u+.5),0,this.hr.secondaryDimensionVectorsCount-1),v="columns"===this.hr.dataOrder?p:S,b="columns"===this.hr.dataOrder?S:p,x=t;return{x:x.x,y:x.y,column:v,row:b,cellValue:y}}Oz(t,i){for(let s=0;s<this.Cz.gridTiles.length;s+=1){const e=this.Cz.gridTiles[s];if(t>=e.iFirstVector.primary&&t<=e.iFirstVector.primary+e.sizeHeatmapDataVectors.primary-1&&i>=e.iFirstVector.secondary&&i<=e.iFirstVector.secondary+e.sizeHeatmapDataVectors.secondary-1){const s=t-e.iFirstVector.primary,h=i-e.iFirstVector.secondary,r=s*e.sizeHeatmapDataVectors.secondary+h;return e.intensityData[r]}}return 0}ii(){return this.vo.max.x}ti(){return this.vo.min.x}ei(){return this.vo.max.y}si(){return this.vo.min.y}Yo(){return 0}Xo(){return 0}zC(){const t=[];return this.Cz.gridTiles.forEach((i=>{if(!i.hasIntensityData)return;const s=new Array(i.sizeUniqueHeatmapDataVectors.primary).fill(0).map((t=>new Array(i.sizeUniqueHeatmapDataVectors.secondary).fill(0)));for(let t=0;t<i.sizeUniqueHeatmapDataVectors.primary;t+=1){const e=t*i.sizeHeatmapDataVectors.secondary,h=s[t];for(let t=0;t<i.sizeUniqueHeatmapDataVectors.secondary;t+=1){const s=i.intensityData[e+t];h[t]=s}}t.push({type:"intensity",startPrimary:i.iFirstUniqueVector.primary,startSecondary:i.iFirstUniqueVector.secondary,lengthPrimary:i.sizeUniqueHeatmapDataVectors.primary,lengthSecondary:i.sizeUniqueHeatmapDataVectors.secondary,values:s})})),t}}class sv extends zo{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.eu=fo.lineStyle,this.Ya=l(void 0),this._z=l("bilinear"),this.engine=t;const n="columns"===r.scrollDimension?a({x:r.start.x,y:r.start.y},{x:r.start.x,y:r.start.y+r.resolution*r.step.y}):a({x:r.start.x,y:r.start.y},{x:r.start.x+r.resolution*r.step.x,y:r.start.y});this.hr={...r,initialBoundaries:n}}hu(t){return this.eu="function"==typeof t?t(this.eu):t,this}ru(){return this.eu}Xa(t){return this.Ya.S(t),this}Za(){return this.Ya.M()}oS(t){return this._z.S(t),this}aS(){return this._z.M()}}class ev extends sv{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,o),this.Lz=0,this.Jx=[],this.hz=new lS(this.Jt,this),this.aE=t,this.uE=i,this.yE=r,this.pE=n,this.OD=t.lE(),this.uE=i,this.vo=this.hr.initialBoundaries,this.Ez={dataPerSegment:2048}}_e(){const t=this.hz.KR(this.Jx,this.Ya.M());if(t>0){for(let i=0;i<t;i+=1)this.Jx[0].shape.dispose().gB(),this.Jx.shift();"columns"===this.hr.scrollDimension?this.vo.min.x=this.Jx.length>0?this.Jx[0].boundaries.min.x:wr:this.vo.min.y=this.Jx.length>0?this.Jx[0].boundaries.min.y:wr}return this.Jx.forEach((t=>t.shape._e())),this.Ya.o=!1,this}BD(t){return this.Jx.forEach((i=>i.shape.BD(t))),this}gS(t){if(0===t.length)return this;let i=0;const s=this.Ez.dataPerSegment,e=t.length;do{let h=this.Jx[this.Jx.length-1],r=h?s-(h.existingDataPointsCount+(h.hasJoint?1:0)):0,n=!1;if(!h||0===r){const t={columns:"columns"===this.hr.scrollDimension?s:this.hr.resolution,rows:"rows"===this.hr.scrollDimension?s:this.hr.resolution,heatmapDataType:this.hr.heatmapDataType,dataOrder:this.hr.scrollDimension,step:this.hr.step,start:"columns"===this.hr.scrollDimension?{x:this.hr.start.x+this.hr.step.x*this.Lz,y:this.hr.start.y}:{x:this.hr.start.x,y:this.hr.start.y+this.hr.step.y*this.Lz}};this.Jx.length>0&&(t.start="columns"===this.hr.scrollDimension?{x:t.start.x-1*this.hr.step.x,y:t.start.y}:{x:t.start.x,y:t.start.y-1*this.hr.step.y},n=!0);const i=new iv(this.aE,this.uE,this.Jt,_h,[],t,this.yE,this.pE).oS(this._z.M()).Js(this._n).hu(this.eu);h={shape:i,existingDataPointsCount:0,existingCoordinatesCount:0,allocatedCoordinatesCount:s,dataStartIndex:this.Lz,hasJoint:!1,boundaries:i.vo},this.Jx.push(h),r=s-(n?1:0)}const o=e-i,a=Math.min(r,o),u=t.slice(i,i+a),l={type:"intensity",values:u,startPrimary:h.existingDataPointsCount+(h.hasJoint?1:0),startSecondary:0,lengthPrimary:a,lengthSecondary:this.hr.resolution};n&&(l.values.unshift(this.Rz),l.lengthPrimary+=1,h.hasJoint=!0),h.shape.uS(l),h.existingDataPointsCount+=a,h.existingCoordinatesCount+=a+(n?1:0),h.boundaries=h.shape.vo,this.Rz=u[u.length-1],this.Lz+=a,i+=a}while(i<e);return this.vo.max="columns"===this.hr.scrollDimension?{...this.vo.max,x:this.hr.start.x+this.Lz*this.hr.step.x}:{...this.vo.max,y:this.hr.start.y+this.Lz*this.hr.step.y},this}Oo(){return this.Jx.forEach((t=>{t.shape.dispose().gB()})),this.Jx.length=0,this.vo=this.hr.initialBoundaries,this.Lz=0,this.Rz=void 0,this}Js(t){return super.Js(t),this.Jx.forEach((t=>t.shape.Js(this._n))),this}hu(t){return super.hu(t),this.Jx.forEach((t=>t.shape.hu(this.eu))),this}oS(t){return super.oS(t),this.Jx.forEach((i=>i.shape.oS(t))),this}dispose(){return super.dispose(),this.Jx.forEach((t=>t.shape.dispose())),this}setVisible(t){return super.setVisible(t),this.Jx.forEach((i=>i.shape.setVisible(t))),this}gB(){return this.Jx.forEach((t=>t.shape.gB())),this}Iv(t){const i=oh(t,this.Jt,this.engine.Jt),s=this.Jx.reduce(((s,e)=>{const h=e.shape.Iv(t);if(h){const t=Er(oh(h,this.Jt,this.engine.Jt),i);if(void 0===s||t<s.distance)return{result:h,distance:t,segment:e}}return s}),void 0);if(s&&s.result){const t="columns"===this.hr.scrollDimension?s.result.column+s.segment.dataStartIndex:s.result.column,i="rows"===this.hr.scrollDimension?s.result.row+s.segment.dataStartIndex:s.result.row;if("columns"===this.hr.scrollDimension&&t>=this.Lz||"rows"===this.hr.scrollDimension&&i>=this.Lz)return;return{x:s.result.x,y:s.result.y,column:t,row:i,cellValue:s.result.cellValue}}}GC(t){const i=oh(t,this.Jt,this.engine.Jt),s=this.Jx.reduce(((s,e)=>{const h=e.shape.GC(t);if(h){const t=Er(oh(h,this.Jt,this.engine.Jt),i);if(void 0===s||t<s.distance)return{result:h,distance:t,segment:e}}return s}),void 0);if(s&&s.result){const t="columns"===this.hr.scrollDimension?s.result.column+s.segment.dataStartIndex:s.result.column,i="rows"===this.hr.scrollDimension?s.result.row+s.segment.dataStartIndex:s.result.row;if("columns"===this.hr.scrollDimension&&t>=this.Lz||"rows"===this.hr.scrollDimension&&i>=this.Lz)return;return{x:s.result.x,y:s.result.y,column:t,row:i,cellValue:s.result.cellValue}}}ii(){return this.vo.max.x}ti(){return this.vo.min.x}ei(){return this.vo.max.y}si(){return this.vo.min.y}Yo(){return 0}Xo(){return 0}dn(t){return super.dn(t),this.Jx.forEach((i=>i.shape.dn(t))),this}}const hv={translation:(t,i)=>[1,0,0,0,1,0,t,i,1],rotation(t){const i=Math.cos(t),s=Math.sin(t);return[i,-s,0,s,i,0,0,0,1]},scaling:(t,i)=>[t,0,0,0,i,0,0,0,1],translate:(t,i,s)=>hv.multiply(t,hv.translation(i,s)),rotate:(t,i)=>hv.multiply(t,hv.rotation(i)),scale:(t,i,s)=>hv.multiply(t,hv.scaling(i,s)),multiply(t,i){const s=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],u=t[7],l=t[8],c=i[0],f=i[1],d=i[2],g=i[3],m=i[4],y=i[5],p=i[6],S=i[7],v=i[8];return[c*s+f*r+d*a,c*e+f*n+d*u,c*h+f*o+d*l,g*s+m*r+y*a,g*e+m*n+y*u,g*h+m*o+y*l,p*s+S*r+v*a,p*e+S*n+v*u,p*h+S*o+v*l]},projection:(t,i,s)=>[2/t,0,0,0,-2*s/i,0,-1,1*s,1]};class rv extends Go{constructor(t,i,s,h,r,n,o){super(t,i,s,h,r),this.zz=[],this.PB=new Lp,this.Vz=[e(0,0),e(0,0),e(0,0),e(0,0)],this.Nz=a(e(0,0),e(0,0)),this.Gz=a(e(0,0),e(0,0)),this.Wz=e(0,0),this.Uz=e(0,0),this.TM=e(0,0),this.jz=e(0,0),this.$z=0,this.aE=t,this.uE=i,this.yE=n,this.pE=o,this.OD=t.lE(),this.uE=i,this._R=t.hr.Sr}_e(){const t=this.Cn(),i=this.kn(),s=this.Jr.M();if(t){const t=this.OD,h=this.OD.TB();if(this.PB.CO(this.Jt),this.Nn.o){this.Yz&&this.Yz.AB(this),this.font.S(ho(this.Nn.M()));const t=this.font.M();this.Yz=this.OD.Qs(t.properties.family),this.Yz.wB(this)}const r=this.font.o,n=r||this.On.o;if(n&&this.Yz){const i=this.font.M();[this.Xz,this.Gz]=this.Yz.kB(this.On.M(),i.properties),this.zz.forEach((i=>{i.texCoordBuff&&t.TO(i.texCoordBuff),i.vertexBuff&&t.TO(i.vertexBuff)})),this.zz=this.Xz.map((i=>({texCoordBuff:t.mO(i.texCoords,!1),texture:i.texture,info:i}))),this.Nn.o=!1,this.font.o=!1,this.On.o=!1}const o=this.Jt.qi()||i,a=this.Ln.o||this.Rn.o||this.En.o||this.zn.o||this.Gn.o||this.oi.o||n||o,u=this.Gn.M(),l=Jr(e(this.Rn.M()+1,this.En.M()+1),.5);if(a&&this.Xz&&(this.Wz=e(-(u.left*h+this.Gz.max.x-this.Gz.min.x+u.right*h)*l.x-this.Gz.min.x+u.right*h,-(u.bottom*h+this.Gz.max.y-this.Gz.min.y+u.top*h)*l.y-this.Gz.min.y+u.top*h)),(a||o||this.Vn.o||this.wn())&&this._n!==Ie){if(this.Xz){const i=Qr(this.Ln.M(),this.zn.M()),s=oh(i,this.Jt,this.vs.Jt),r=Jr(s,h);this.jz=r;const o=an(this.Vn.M());this.$z=o,n&&this.zz.forEach((i=>{const s=i.info;s&&(i.vertexBuffLen=s.vertices.length/2,i.vertexBuff?t.ZO(i.vertexBuff,s.vertices,!0):i.vertexBuff=t.mO(s.vertices,!0))}));const a=this.oi.M(),c=[Qr(Yr(e((this.Gz.min.x+(-a.left-u.left)*h+this.Wz.x)/h,(this.Gz.max.y+(a.top+u.top)*h+this.Wz.y)/h),this.K,o),s),Qr(Yr(e((this.Gz.max.x+(a.right+u.right)*h+this.Wz.x)/h,(this.Gz.max.y+(a.top+u.top)*h+this.Wz.y)/h),this.K,o),s),Qr(Yr(e((this.Gz.max.x+(a.right+u.right)*h+this.Wz.x)/h,(this.Gz.min.y+(-a.bottom-u.bottom)*h+this.Wz.y)/h),this.K,o),s),Qr(Yr(e((this.Gz.min.x+(-a.left-u.left)*h+this.Wz.x)/h,(this.Gz.min.y+(-a.bottom-u.bottom)*h+this.Wz.y)/h),this.K,o),s)];this.Vz=[oh(c[0],this.vs.Jt,this.Jt),oh(c[1],this.vs.Jt,this.Jt),oh(c[2],this.vs.Jt,this.Jt),oh(c[3],this.vs.Jt,this.Jt)];const f=Nr(c);this.Uz=e(-(f.max.x-f.min.x)*h*l.x-f.min.x*h+this.jz.x,-(f.max.y-f.min.y)*h*l.y-f.min.y*h+this.jz.y),this.Zz=tn(f.max,f.min);const d=Nr(this.Vz),g=this.Jt.Fi(d.min,this.Uz),m=this.Jt.Fi(d.max,this.Uz);this.Nz=Nr([g,m])}this._n instanceof Ke?this.wE=Gp(this.Nz,this.Jt,this._n.getPosition(),this._n.getExtent(),this._n.getShape(),this.OD.TB()):this._n instanceof Je?this.AE=Hp(this.Nz,this.Jt,this._n.getAngle(!0),this.OD.TB()):(this.wE=void 0,this.AE=void 0)}const c=this._n instanceof De&&this._n,f=this._n instanceof Ke&&this._n,d=this._n instanceof Je&&this._n,g=c||f||d;(this.wn()||r)&&(this.BB=g?this.OD.pO(Fp["2D"],Fp.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this._R}),Fp.Color({dataType:f?["gradient",f]:d?["gradient",d]:"uniform",maskTexture:!0})):void 0),this.Kz=s&&g?this.Kz||this.OD.pO(Fp["2D"],Fp.Color({dataType:"uniform"}),Fp.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this._R})):void 0,this.Ln.o=!1,this.Rn.o=!1,this.En.o=!1,this.zn.o=!1,this.Vn.o=!1,this.Tn(this._n)}return this.Hn=t,this}BD(t){if(this.Cn()){const i=1===t?this.Kz:this.BB;if(!i||0===this.zz.length)return this;const s=this.OD.gl.drawingBufferWidth,e=this.OD.gl.drawingBufferHeight;let h=hv.projection(s,e,-1);const r=hv.translation(this.Wz.x,this.Wz.y),n=hv.translation(this.Uz.x,this.Uz.y);h=hv.translate(h,this.jz.x,this.jz.y),h=hv.multiply(h,n),h=hv.rotate(h,this.$z),h=hv.multiply(h,r),1===t&&(h=hv.scale(h,this.Gz.max.x,this.Gz.max.y)),this.OD.wB(i).SO(i,((i,s,e,r)=>{if(this.OD.WO(i("uMatrix"),h).MO(i("uIsHighlighted"),1===t||2===t?0:this.en)._O(i("uHighlightColorOffset"),this.an).MO(i("uRenderEffectMask"),2===t?1:0),this._R&&this.OD.bO(r("uViewportSizePx"),[this.vs.xi().x*this.OD.TB(),this.vs.xi().y*this.OD.TB()]),1===t)this.OD._O(i("uColor"),this.pE);else if(this._n instanceof De)this.OD._O(i("uColor"),this._n.getColor());else if(this._n instanceof Ke&&this.wE){this.OD.bO(i("uCenter"),this.wE.center).bO(i("uDistance"),this.wE.distance).GO(i("uBounds"),this.wE.bounds).MO(i("uAspect"),this.wE.aspectRatio);const t=this._n.getColorStops();for(let s=0;s<t.length;s+=1)this.OD._O(i(`color_${s}`),t[s].color).MO(i(`stop_${s}`),t[s].offset)}else if(this._n instanceof Je&&this.AE){this.OD.bO(i("uStartPoint"),this.AE.startPoint).bO(i("uEndPoint"),this.AE.endPoint).GO(i("uBounds"),this.AE.bounds);const t=this._n.getColorStops();for(let s=0;s<t.length;s+=1)this.OD._O(i(`color_${s}`),t[s].color).MO(i(`stop_${s}`),t[s].offset)}return 1===t&&this.OD.JO(s("aPos"),this.OD._L)._y(this.OD.gl.TRIANGLES,6),1!==t&&this.zz.forEach((t=>{this.OD.JO(s("aPos"),t.vertexBuff).JO(s("aMaskTextureCoord"),t.texCoordBuff).xO(i("uMaskTexture"),t.texture,0)._y(this.OD.gl.TRIANGLES,t.vertexBuffLen)})),!0}))}return this}rs(){return this.Cn()?this.Vz:[]}hf(){return this.Cn()&&this.Zz?this.Zz:e(0,0)}xi(){if(this.Cn()&&this.Nz){const t=this.Nz;return e(t.max.x-t.min.x,t.max.y-t.min.y)}return e(0,0)}gB(){return this.zz.forEach((t=>{t.texCoordBuff&&this.OD.TO(t.texCoordBuff),t.vertexBuff&&this.OD.TO(t.vertexBuff)})),this.zz=[],this.Yz&&this.Yz.AB(this),this}ii(){return this.Nz.max.x}ti(){return this.Nz.min.x}ei(){return this.Nz.max.y}si(){return this.Nz.min.y}Yo(){return 0}Xo(){return 0}}class nv{constructor(t,i,s){this.qz=new Set,this.Jz=t=>(this.qz.add(t),t),this.Qz=t=>(this.qz.delete(t),t.gB(),this),this.vs=t,this.pn=i,this.tV=s}DD(t){this.qz.delete(t)&&this.qz.add(t)}Pt(){for(const t of this.qz)t.gB().dispose();this.vs.zh(this.pn)}Ss(){return this.vs.Ss(),this}Rh(){return this.pn}}class ov extends nv{constructor(){super(...arguments),this.iV=l(void 0),this.vn=!1}_S(t){return this.iV.S(t),this}Em(){return this.iV.M()}}class av extends ov{constructor(t,i,s){super(t,i,s),this.aE=t,this.gl=t.lE(),this.sV=this.qz}gO(t){const i=t instanceof Do&&t;if(!i)return kr;const s=i.ti(),e=i.ii(),h=i.si(),r=i.ei();if(s===wr||e===Ar||h===wr||r===Ar)return kr;const n=i.Yo(),o=i.Xo(),a=Bo({min:{x:s,y:h},max:{x:e,y:r}},{x:n,y:o},i.Jt),u={min:oh(a.min,i.Jt,t.vs.Jt),max:oh(a.max,i.Jt,t.vs.Jt)},l=this.iV.M();let c;if(l){if(c={min:{x:Math.max(u.min.x,l.x),y:Math.max(u.min.y,l.y)},max:{x:Math.min(u.max.x,l.x+l.width),y:Math.min(u.max.y,l.y+l.height)}},c.max.x<c.min.x||c.max.y<c.min.y)return kr}else c=u;return c}eV(t){const i=Array.from(this.sV.values());for(let s=0;s<i.length;s+=1){const e=i[s];if(e.yE===t)return{entity:e,index:s}}}rc(t){const i=this.aE.hV();return this.Jz(new eS(this.aE,this,t,this.Qz,[],i,this.aE.rV(i)))}Jg(t){const i=this.aE.hV();return this.Jz(new hS(this.aE,this,t,this.Qz,[],i,this.aE.rV(i)))}Iy(t,i,s){const e=this.aE.hV();return this.Jz(new cS(this.aE,this,t,this.Qz,s,e,this.aE.rV(e),i))}$e(t){const i=this.aE.hV();return this.Jz(new rv(this.aE,this,t,this.Qz,[],i,this.aE.rV(i)))}pp(t){const i=this.aE.hV();return this.Jz(new pS(this.aE,this,t,this.Qz,[],i,this.aE.rV(i)))}if(t,i=Xo.Simple){const s=this.aE.hV();if(i===Xo.Simple)return this.Jz(new YS(this.aE,this,t,this.Qz,[],s,this.aE.rV(s)));throw new Error("GlEngine.addPolygon | No such polygon type!")}Zc(t){const i=this.aE.hV();return this.Jz(new SS(this.aE,this,t,this.Qz,[],i,this.aE.rV(i)))}Jk(t){const i=this.aE.hV();return this.Jz(new Jp(this.aE,this,t,this.Qz,[],i,this.aE.rV(i)))}nf(t){const i=this.aE.hV();return this.Jz(new Up(this.aE,this,t,this.Qz,[],i,this.aE.rV(i)))}jC(t,i,s){if("intensity"===s.heatmapDataType){const e=this.aE.hV();return this.Jz(new ev(this.aE,this,t,this.Qz,i,e,this.aE.rV(e),s))}throw new lh("Unimplemented Heatmap Grid Static type")}RC(t,i,s){const e=this.aE.hV();return this.Jz(new iv(this.aE,this,t,this.Qz,i,s,e,this.aE.rV(e)))}nV(t){return this.Jz(new Vp(this.aE,this,this.Qz,[],t))}_e(){if(this.vn){this.vn=!1;const t=Array.from(this.qz).sort(((t,i)=>t.xn()-i.xn()));this.qz.clear();for(const i of t)this.qz.add(i)}for(const t of this.qz)t._e();return this}BD(t,i){const s=this.iV.M();if(s&&this.gl.dO(s.x*this.gl.TB()*i,s.y*this.gl.TB()*i,s.width*this.gl.TB()*i,s.height*this.gl.TB()*i),1!==t)for(const i of this.qz)i.getVisible()&&i.BD(t);else for(const i of this.qz)i.getMouseInteractions()&&i.getVisible()&&i.BD(t);return this.gl.lO(!1),this}}class uv extends Py{constructor(t){super(t)}}class lv extends uv{constructor(t){super(t),this.oV="attribute";const{vertices:i,drawSize:s,drawMode:e}=cv(t.gl);this.sB=t.mO(i),this.yR=s,this.pR=e}_y(t,i,s,e){return this.OD.vO(this.sB,0,{location:t.attribute("aInstanceGeo"),size:3},{location:s?t.attribute("aNormal"):void 0,size:3},{location:e?t.attribute("aTriangleBary"):void 0,size:3}).nL(this.pR,0,this.yR,i),this}HD(){this.OD.TO(this.sB)}}const cv=t=>{const i=new Float32Array(324);let s=0;return i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=-1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=1,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=1,i[s+3]=0,i[s+4]=0,i[s+5]=1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=1,i[s+2]=-1,i[s+3]=0,i[s+4]=0,i[s+5]=-1,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=0,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=-1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=0,i[s+7]=1,i[s+8]=0,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=-1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=1,s+=9,i[s+0]=1,i[s+1]=-1,i[s+2]=1,i[s+3]=0,i[s+4]=-1,i[s+5]=0,i[s+6]=1,i[s+7]=0,i[s+8]=0,s+=9,{vertices:i,drawSize:s/9,drawMode:t.TRIANGLES}};class fv extends uv{constructor(t,i){super(t),this.oV="attribute",this.aV=i;const{vertices:s,indices:e}=dv();this.sB=t.mO(s),this.mR=t.KO(e),this.yR=e.length,this.pR=t.gl.TRIANGLES}_y(t,i,s,e){return this.OD.vO(this.sB,0,{location:t.attribute("aEdge"),size:3},{location:s?t.attribute("aNormal"):void 0,size:3},{location:t.attribute("aInstanceGeo"),size:3}).hL(this.mR).MO(t.uniform("uEdgeRoundness"),this.aV/2).aL(this.pR,this.yR,0,i),this}HD(){this.OD.TO(this.sB),this.OD.TO(this.mR)}uV(t){return this.aV=t,this}lV(){return this.aV}}const dv=()=>{const t=[{normal:{x:0,y:1,z:0},perpendA:{x:0,y:0,z:1},perpendB:{x:-1,y:0,z:0}},{normal:{x:0,y:0,z:-1},perpendA:{x:0,y:1,z:0},perpendB:{x:-1,y:0,z:0}},{normal:{x:-1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:1}},{normal:{x:1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:-1}},{normal:{x:0,y:0,z:1},perpendA:{x:0,y:1,z:0},perpendB:{x:1,y:0,z:0}},{normal:{x:0,y:-1,z:0},perpendA:{x:0,y:0,z:-1},perpendB:{x:-1,y:0,z:0}}],i=[];let s=0;const e=[];let h=0;for(const r of t){const{normal:t,perpendA:n,perpendB:o}=r,a=_r.multiply(n,-1),u=_r.multiply(o,-1),l=s;i[s]={thicknessDirection:_r.addVec(t,n,o),edge:_r.addVec(a,u),normal:t},s+=1;const c=s;i[s]={thicknessDirection:_r.addVec(t,a,o),edge:_r.addVec(n,u),normal:t},s+=1;const f=s;i[s]={thicknessDirection:_r.addVec(t,a,u),edge:_r.addVec(n,o),normal:t},s+=1;const d=s;i[s]={thicknessDirection:_r.addVec(t,n,u),edge:_r.addVec(a,o),normal:t},s+=1,e[h+0]=f,e[h+1]=l,e[h+2]=d,e[h+3]=f,e[h+4]=c,e[h+5]=l,h+=6;const g=[{A:n,B:o},{A:a,B:o},{A:a,B:u},{A:n,B:u}];for(const e of g){e.thicknessDirection=_r.addVec(t,e.A,e.B),e.stripVerticesA=[],e.stripVerticesB=[];const h=[{direction:e.A,other:e.B,vertices:e.stripVerticesA},{direction:e.B,other:e.A,vertices:e.stripVerticesB}];for(const r of h)for(let h=0;h<8;h+=1){const n=.5*h/7,o=_r.normalize(_r.lerp(t,r.direction,n)),a=Math.PI/2-_r.angle(o,t),u=_r.addVec(_r.multiply(_r.multiply(r.direction,-1),1-Math.cos(a)),_r.multiply(_r.multiply(t,-1),1-Math.sin(a)),_r.multiply(r.other,-1)),l=s;i[s]={thicknessDirection:e.thicknessDirection,normal:o,edge:u};const c=i[s];s+=1,r.vertices.push({index:l,vertex:c})}}for(let t=0;t<g.length;t+=1){const i=g[t],s=g[t<g.length-1?t+1:0],r=t%2==0?i.stripVerticesB:i.stripVerticesA,n=t%2==0?s.stripVerticesB:s.stripVerticesA;for(let t=1;t<r.length;t+=1){const i=r[t-1],s=n[t-1],o=r[t],a=n[t];e[h+0]=i.index,e[h+1]=s.index,e[h+2]=a.index,e[h+3]=o.index,e[h+4]=i.index,e[h+5]=a.index,h+=6}}}const r=[{x:-1,y:1,z:-1,flipVertexOrder:!1},{x:-1,y:1,z:1,flipVertexOrder:!0},{x:1,y:1,z:1,flipVertexOrder:!1},{x:1,y:1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:1,flipVertexOrder:!1},{x:1,y:-1,z:1,flipVertexOrder:!0},{x:1,y:-1,z:-1,flipVertexOrder:!1}],n=Math.PI/15,o=2*Math.PI/15;let a=s;for(const t of r){let h=0;i[s]={thicknessDirection:t,normal:{x:0,y:t.y,z:0},edge:{x:-t.x,y:0,z:-t.z}},s+=1,h+=1;for(let e=1;e<8.5;e+=1){const r=15===e?Math.PI:e*n,a=1*Math.cos(r)*t.y,u=Math.sin(r);for(let e=0;e<Math.ceil(3.75)+1;e+=1){const r=15===e?0:e*o,n=u*Math.cos(r)*1*t.x,l=u*Math.sin(r)*1*t.z,c={x:n,y:a,z:l},f=_r.normalize({x:n,y:a,z:l});i[s]={thicknessDirection:t,normal:f,edge:{x:c.x-t.x,y:c.y-t.y,z:c.z-t.z}},s+=1,h+=1}}const r=[];for(let t=1;t<=Math.ceil(3.75);t+=1)r.push(a),15===t?r.push(a+1):r.push(a+t+1),r.push(a+t);const u=a+1,l=Math.ceil(3.75)+1;for(let t=0;t<6.5;t+=1)for(let i=0;i<Math.ceil(3.75);i+=1){let s=0;const e=u+(t+1)*l+i;let h=0;14===i?(s=u+t*l,h=u+(t+1)*l):(s=u+t*l+i+1,h=u+(t+1)*l+i+1),r.push(u+t*l+i),r.push(s),r.push(e),r.push(e),r.push(s),r.push(h)}e.push.apply(e,t.flipVertexOrder?r.reverse():r),a+=h}const u=new Float32Array(9*i.length);let l=0;for(const t of i)u[l+0]=t.edge.x,u[l+1]=t.edge.y,u[l+2]=t.edge.z,u[l+3]=t.normal.x,u[l+4]=t.normal.y,u[l+5]=t.normal.z,u[l+6]=t.thicknessDirection.x,u[l+7]=t.thicknessDirection.y,u[l+8]=t.thicknessDirection.z,l+=9;return{vertices:u,indices:new Uint16Array(e)}},gv=(t,i)=>{let s=t.LO.GD.get(i);return s||(s=void 0!==i&&i>0?new fv(t,Ah(i,0,1)):new lv(t),t.LO.GD.set(i,s),s)};class mv extends xp{ip(t){return this.sO=this.Zy.M(),this.Zy.S(t),this}cS(t){return this.cV=t,this}fS(){return this.cV}}class yv extends mv{constructor(t,i,s,e,h){super(t,i,s),this.fV=t,this.yE=e,this.pE=h,this.aE=t.aE,this.OD=this.aE.lE()}}class pv extends yv{constructor(t,i,s,e,h){super(t,i,s,e,h),this.cV="cull-back",this.vo=Cr,this.dV={},this.gV=[],this._n=fo.fillStyle,this.Zy.S(hc)}_e(t){const i=this.gV,s=this._n,e=s!==Ie,h=this.mV,r=this.wn()||this.yV!==h,n=this.iO(),o=this.Jr.M(),u=this.Jr.o;if(e){for(const t of i)t.id=void 0!==t.id?String(t.id):void 0,t.xSize=void 0!==t.xSize&&t.xSize<0?-t.xSize:t.xSize,t.ySize=void 0!==t.ySize&&t.ySize<0?-t.ySize:t.ySize,t.zSize=void 0!==t.zSize&&t.zSize<0?-t.zSize:t.zSize;const t=11,e=this.pV||0;let h=e;for(const t of i){const i=t.id;void 0!==i&&void 0!==this.dV[i]||(h+=1)}let l,c=!1,f=!1;if(c=h!==e,f=c,l=!f&&(i.length<100?"chunks":"all"),c){const i=h*t,s=new Float32Array(i);this.oz&&s.set(this.oz),this.oz=s,this.SV=i,this.vV=e*t}const d=s instanceof Be?s.getFallbackColor():void 0;for(const s of i){const i=s.id,e=void 0!==i&&this.dV[i],h=[s.xCenter,s.yCenter,s.zCenter,s.xSize,s.ySize,s.zSize,s.color?s.color.r:d?d.r:void 0,s.color?s.color.g:d?d.g:void 0,s.color?s.color.b:d?d.b:void 0,s.color?s.color.a:d?d.a:void 0,s.value];if(e){for(let i=0;i<t;i+=1)h[i]=void 0!==h[i]?h[i]:e.buffer[i];e.buffer.set(h)}else{const s=this.vV,e=new Float32Array(this.oz.buffer,s*Float32Array.BYTES_PER_ELEMENT,t);e.set(h),void 0!==i&&(this.dV[i]={location:s,buffer:e}),this.vV+=t}}if(f&&(this.gR=this.OD.mO(this.oz,!0)),"all"===l)this.OD.XO(this.gR,0,this.oz);else if("chunks"===l)for(const t of i){const i=t.id;if(void 0!==i){const t=this.dV[i];this.OD.XO(this.gR,t.location,t.buffer)}}if(r||n||u){const t=s instanceof Be&&s,i=s instanceof Le&&s;if(s instanceof De&&s||t||i?(this.bV=gv(this.OD,this.xV()),this.BB=this.OD.pO(Fp["3D"],Fp.ColorShaded3D({dataType:t?"attribute":i?["lookup",i.getLookUpProperty()]:"uniform",shadingStyle:this.Zy.M().type}),Fp.VertexLocation({offset:{sizeUnit:"axis",dataType:"attribute",halved:!0},axisWorldTranslation:Np(this.Jt),normalSource:this.bV.oV}),void 0!==this.mV&&Fp.RoundedEdges3D),this.Kz=o?this.OD.pO(Fp["3D"],Fp.VertexLocation({offset:{sizeUnit:"axis",dataType:"attribute",halved:!0},axisWorldTranslation:Np(this.Jt),normalSource:void 0}),Fp.Color({dataType:"uniform"}),void 0!==this.mV&&Fp.RoundedEdges3D):void 0):(this.bV=void 0,this.BB=void 0,this.Kz=void 0),i&&i.lut.isValid){const t=i.getPalette();this.xR=this.aE.tR(t,this.MR,this.xR),this.MR=t}else this.xR=void 0,this.aE.vL.hn(this.MR),this.MR=void 0}if(i.length>0){const i=a({x:wr,y:wr,z:wr},{x:Ar,y:Ar,z:Ar});for(let s=0;s<this.vV;s+=t){const t=this.oz[s+0],e=this.oz[s+3]/2,h=t-e,r=t+e,n=this.oz[s+1],o=this.oz[s+4]/2,a=n-o,u=n+o,l=this.oz[s+2],c=this.oz[s+5]/2,f=l-c,d=l+c;i.min.x=i.min.x<h?i.min.x:h,i.min.y=i.min.y<a?i.min.y:a,i.min.z=i.min.z<f?i.min.z:f,i.max.x=i.max.x>r?i.max.x:r,i.max.y=i.max.y>u?i.max.y:u,i.max.z=i.max.z>d?i.max.z:d}this.vo=i}this.pV=h,this.gV.length=0}return this.Tn(s),this.yV=h,this.Zy.o=!1,this.Jr.o=!1,this}BD(t){const i=1===t?this.Kz:this.BB,s=this.bV,e=this.gR,h=this._n,r=this.pV,n=this.Zy.M();return i&&e&&void 0!==r&&this.OD.SO(i,((o,a,u)=>{let l=!1;const c=a("aPos"),f=a("aOffsetAxis");this.OD.wB(i).HO(o("uScale"),this.fV.PB.wO()).HO(o("uDisp"),this.fV.PB.AO()).UO(o("uViewProjectionMatrix"),this.MV).MO(o("uIsHighlighted"),1===t||2===t?0:this.en)._O(o("uHighlightColorOffset"),this.an).MO(o("uRenderEffectMask"),2===t?1:0);const d={location:c,size:3},g={location:f,size:3},m={location:void 0,size:4},y={location:void 0,size:1};if(1!==t&&"phong"===n.type&&this.OD.HO(o("uCameraLoc"),this._V).HO(o("uLightLoc"),this.wV).MO(o("uAmbientReflection"),n.ambientReflection).MO(o("uSpecularReflection"),n.specularReflection).MO(o("uDiffuseReflection"),n.diffuseReflection).MO(o("uShininess"),n.shininess)._O(o("uLightColor"),n.specularColor)._O(o("uAmbientColor"),n.ambientColor),1===t)this.OD._O(o("uColor"),this.pE);else if(h instanceof De)this.OD._O(o("uColorDiffuse"),h.getColor());else if(h instanceof Be){const t=a("aColor");m.location=t}else if(h instanceof Le){const t=h.getLookUpProperty(),i=h.getPalette();"value"===t&&(y.location=a("aLookupValue")),this.OD.xO(o("uLookupTexture"),this.xR.texture,0).MO(o("uLookupMin"),i.min).MO(o("uLookupMax"),i.max).MO(o("uLookupTextureHeightPx"),this.xR.textureHeight)}return e&&(this.OD.vO(e,1,d,g,m,y),s._y(u,r,"phong"===n.type&&1!==t,!1),l=!0),l})),this}gB(){return this.gR&&(this.OD.TO(this.gR),this.gR=void 0),this.aE.vL.hn(this.MR),this.xR=void 0,this.MR=void 0,this.BB=void 0,this}cp(t){this.gV=hr(this.gV,t,{canReturnB:!0})}Js(t){return this._n=Oo(this._n,t),this}qs(){return this._n}up(t){return this.mV=void 0!==t&&t>0?Ah(t,0,1):void 0,this}xV(){return this.mV}ii(){return this.vo.max.x}ti(){return this.vo.min.x}ei(){return this.vo.max.y}si(){return this.vo.min.y}rp(){return this.vo.max.z}np(){return this.vo.min.z}Yo(){return 0}Xo(){return 0}op(){return 0}wn(){return Lo(this.An,this._n)}Tn(t){this.An=t}}class Sv extends Py{constructor(t,i){super(t),this.oV="custom",this.fR=i;const{vertices:s,drawSize:e}=this.dR();this.gR=t.mO(s),this.yR=e}wB(t){return this.OD.vO(this.gR,0,{location:t.attribute("aSegmentPosition"),size:1},{location:t.attribute("aPerpendHorizontal"),size:1},{location:t.attribute("aPerpendVertical"),size:1}),this}_y(t){return this.OD.nL(this.OD.gl.TRIANGLE_STRIP,0,this.yR,t),this}dR(){const t=this.fR,i=new Float32Array(2*(t+1)*3);let s=0;for(let e=0;e<=t;e+=1){const h=2*Math.PI*e/t,r=Math.cos(h),n=Math.sin(h);for(const t of[0,1])i[s+0]=t,i[s+1]=r,i[s+2]=n,s+=3}return{vertices:i,drawSize:s/3}}HD(){this.OD.TO(this.gR)}}const vv=(t,i=16)=>{let s=t.LO.VD.get(i);return s||(s=new Sv(t,i),t.LO.VD.set(i,s),s)};class bv extends yv{constructor(t,i,s,e,h){super(t,i,s,e,h),this.cV="cull-back",this.AV=Cr,this.ja=[],this.kV=!1,this.Ra=fo.lineStyle,this.Zy.S(sc)}_e(t){const i=this.kV,s=this.Ra,e=this.Na!==s,h=this.iO(),r=i;if(i){this.CV&&(this.OD.TO(this.CV),this.CV=void 0);const t=qh(this.ja);this.CV=this.OD.mO(t)}if(r&&(this.AV=Gr(this.ja)),e||h){const t=8,i=s instanceof sh&&s.getFillStyle(),e=1===s.getThickness()?"primitive":"instanced";this.bR=void 0,i instanceof De&&("primitive"===e?this.bR={type:e,shader:this.OD.pO(Fp["3D"],Fp.VertexLocation({axisWorldTranslation:Np(this.Jt),normalSource:void 0}),Fp.Color({dataType:"uniform"})),fillStyle:i}:"instanced"===e&&(this.bR={type:e,shader:this.OD.pO(Fp["3D"],Fp.ColorShaded3D({dataType:"uniform",shadingStyle:this.Zy.M().type}),Fp.LineInstanced3D({axisWorldTranslation:Np(this.Jt)})),geometry:vv(this.OD,t),fillStyle:i}))}return this.kV=!1,this.Na=s,this.Zy.o=!1,this}BD(t){if(1===t)return this;const i=this.OD.gl,s=this.bR,e=this.CV,h=this.Ra,r=this.Zy.M();if(s&&e&&h instanceof sh)switch(s.type){case"instanced":{const n=.5*this.Sn.$y(h.thickness),o=s.fillStyle.getColor(),a=s.shader,u=s.geometry;this.OD.SO(a,((s,h,l)=>{this.OD.wB(a).HO(s("uScale"),this.fV.PB.wO()).HO(s("uDisp"),this.fV.PB.AO()).UO(s("uViewProjectionMatrix"),this.MV)._O(s("uColorDiffuse"),o).MO(s("uOffsetWU"),n).MO(s("uIsHighlighted"),this.en)._O(s("uHighlightColorOffset"),this.an).MO(s("uRenderEffectMask"),2===t?1:0),"phong"===r.type&&this.OD.HO(s("uCameraLoc"),this._V).HO(s("uLightLoc"),this.wV).MO(s("uAmbientReflection"),r.ambientReflection).MO(s("uSpecularReflection"),r.specularReflection).MO(s("uDiffuseReflection"),r.diffuseReflection).MO(s("uShininess"),r.shininess)._O(s("uLightColor"),r.specularColor)._O(s("uAmbientColor"),r.ambientColor),i.bindBuffer(i.ARRAY_BUFFER,e);const c=h("aLocationA"),f=h("aLocationB");return i.vertexAttribPointer(c,3,i.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.OD.tL(c,1),i.enableVertexAttribArray(c),i.vertexAttribPointer(f,3,i.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.OD.tL(f,1),i.enableVertexAttribArray(f),u.wB(l)._y(this.ja.length/2),!0}));break}case"primitive":{const r=h instanceof sh?h.getFillStyle():void 0,n=r&&r instanceof De?r.getColor():void 0;if(n){const h=s.shader;this.OD.SO(h,((s,r)=>(this.OD.wB(h).HO(s("uScale"),this.fV.PB.wO()).HO(s("uDisp"),this.fV.PB.AO()).UO(s("uViewProjectionMatrix"),this.MV)._O(s("uColor"),n).MO(s("uIsHighlighted"),this.en)._O(s("uHighlightColorOffset"),this.an).MO(s("uRenderEffectMask"),2===t?1:0).vO(e,void 0,{location:r("aPos"),size:3})._y(i.LINES,this.ja.length),!0)))}break}}return this}Bo(t){for(let i=0;i<t.length-1;i+=1){const s=t[i],e=t[i+1];this.ja.push(s),this.ja.push(e)}return this.kV=!0,this}Oo(){return this.ja.length=0,this.kV=!0,this}za(t){return this.Ra="function"==typeof t?t(this.Ra):t,this}Va(){return this.Ra}gB(){return this.CV&&(this.OD.TO(this.CV),this.CV=void 0),this}ii(){return this.AV.max.x}ti(){return this.AV.min.x}ei(){return this.AV.max.y}si(){return this.AV.min.y}rp(){return this.AV.max.z}np(){return this.AV.min.z}Yo(){const t=this.Ra;return t===th?0:t.getThickness()}Xo(){const t=this.Ra;return t===th?0:t.getThickness()}op(){const t=this.Ra;return t===th?0:t.getThickness()}}class xv extends Py{constructor(t,i,s){super(t),this.oV="gpu-calculate",this.TV=i,this.IV=s;const{vertices:e,drawSize:h}=this.dR();this.gR=t.mO(e),this.yR=h}_y(t,i,s,e){return this.OD.vO(this.gR,0,{location:t.attribute("aInstanceGeo"),size:3},{location:e?t.attribute("aTriangleBary"):void 0,size:3}).nL(this.OD.gl.TRIANGLES,0,this.yR,i),this}dR(){const t=this.IV,i=this.TV,s=new Float32Array(6*(6*i+6*(t-2)*i));let e=0;const h=2*Math.PI/i,r=Math.PI/t,n=(t,i,n,o,a)=>{const u=i*h,l=Math.PI/2-t*r,c=Math.cos(l),f=c*Math.cos(u),d=c*Math.sin(u),g=Math.sin(l);s[e]=f,s[e+1]=g,s[e+2]=d,s[e+3]=n,s[e+4]=o,s[e+5]=a,e+=6};for(let s=0;s<t;s+=1)for(let e=0;e<i;e+=1)s>0&&(n(s,e,1,0,0),n(s,e+1,1,1,0),n(s+1,e,0,0,1)),s<t-1&&(n(s,e+1,1,1,0),n(s+1,e+1,0,1,0),n(s+1,e,0,0,1));return e!==s.length&&gr(0,(()=>{this.OD.zd.mr&&e>s.length&&yh.console.warn("LightningChart JS unexpected error scenario, sphere geometry buffer size mismatch.\nA point series 3D component might have missing points.\n\nThis warning can be omitted with LightningChartOptions.warnings")})),{vertices:s,drawSize:e/6}}HD(){this.OD.TO(this.gR)}}const Mv=(t,i)=>{const s=Math.round(i);s<3&&gr(0,_h);const e=s;let h=t.LO.ND.get(Array.from(t.LO.ND.keys()).find((t=>t.sectors===s&&t.stacks===e)));return h||(h=new xv(t,s,e),t.LO.ND.set({sectors:s,stacks:e},h),h)};class _v extends yv{constructor(t,i,s,e,h){super(t,i,s,e,h),this.cV="cull-back",this.Jx=[],this.bR={},this.ez=new uS(this.Jx,(t=>t.vertexBuffer&&this.OD.TO(t.vertexBuffer)),!0),this.$a=[],this.bo=0,this.xo=[],this.Mo=0,this.vo=Cr,this._o=Cr,this.Ao=!1,this.Ra=fo.lineStyle,this.fp=fo.pointStyle3D,this.Zy.S(hc),this.rz={attributesPerVertex:3,prepareRenderData:(t,i)=>qh(t)}}_e(t){const i=this.Ao,s=this.xo,e=this.Mo,h=e>0,r=this.Ra,n=r!==this.Na,o=this.fp,a=o!==this.FV,u=this.iO(),l=this.Jr.o,c=this.Jr.M();this._o&&(this.vo=Wr(this.vo,this._o),this._o=void 0),h&&(this.$a=hr(this.$a,s,{canReturnB:!0}),this.bo+=e);let f=s,d=e;if(i&&(this.Jx.forEach((t=>{t.existingCoordinatesCount=0,t.existingDataPointsCount=0,t.boundaries=Cr})),this.ez.XR(),f=this.$a,d=this.bo),d>0){const t=1e5,i=Math.floor(this.aE.PV/(this.rz.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),s=this.ln("ApplicationType",(t=>"UserSeries"===t.type))?d:1e3,e=Ah(s,t,i);this.ez.UR(f,e,((t,i,s,e)=>({existingDataPointsCount:s-e,existingCoordinatesCount:s,allocatedCoordinatesCount:t,jointPointsCount:e,lastDataPoint:i[s-1],boundaries:Cr,vertexBuffer:this.OD.YO(t*this.rz.attributesPerVertex,this.rz.prepareRenderData(i,s))})),((t,i,s,e)=>{this.OD.XO(t.vertexBuffer,t.existingCoordinatesCount*this.rz.attributesPerVertex,this.rz.prepareRenderData(i,s)),t.existingDataPointsCount+=s-e,t.existingCoordinatesCount+=s,t.jointPointsCount+=e,t.lastDataPoint=i[s-1]}))}if(n||a||u||l){const t={},i=r instanceof sh&&r,s=i&&i.getFillStyle(),e=s instanceof De&&s,h=s instanceof Le&&s,n=e||h,a=o instanceof Jn&&o.getSize(),u=o instanceof Jn&&o.getFillStyle(),l=u instanceof De&&u,f=u instanceof Le&&u,d=l||f,g=o instanceof Jn&&o.getWireframeStyle(),m=g&&g instanceof sh&&g,y=m&&m.getFillStyle(),p=y&&y instanceof De&&y,S=r.getThickness()<0||1===r.getThickness()&&this.ln("ApplicationType",(t=>"InternalUI"===t.type))?"primitive":"instanced",v=h?["lookup",h.getLookUpProperty()]:"uniform";if("primitive"===S&&n?t.lines={type:"primitive",fillStyleSolid:e,fillStylePaletted:h,shader:this.OD.pO(Fp["3D"],Fp.Color({dataType:v}),Fp.VertexLocation({axisWorldTranslation:Np(this.Jt),normalSource:void 0})),mousePicking:c?{shader:this.OD.pO(Fp["3D"],Fp.Color({dataType:"uniform"}),Fp.VertexLocation({axisWorldTranslation:Np(this.Jt),normalSource:void 0}))}:void 0}:"instanced"===S&&i&&n&&(t.lines={type:"instanced",lineStyleSolid:i,fillStyleSolid:e,fillStylePaletted:h,shader:this.OD.pO(Fp["3D"],Fp.ColorShaded3D({dataType:v,shadingStyle:this.Zy.M().type}),Fp.LineInstanced3D({axisWorldTranslation:Np(this.Jt)})),geometry:wv(this.OD,i.getThickness()),mousePicking:c?{shader:this.OD.pO(Fp["3D"],Fp.Color({dataType:"uniform"}),Fp.LineInstanced3D({axisWorldTranslation:Np(this.Jt)}))}:void 0}),t.markers=void 0,d){const i=sr(o.getShape(),{cube:()=>gv(this.OD),sphere:()=>Av(this.OD,o)});t.markers={geometry:i,pointStyle:o,pointSizeNWU:"number"==typeof a&&a,pointSizeAxis:"object"==typeof a&&a,fillStyleSolid:l,fillStylePaletted:f,shader:this.OD.pO(Fp["3D"],Fp.ColorShaded3D({dataType:f?["lookup",f.getLookUpProperty()]:"uniform",shadingStyle:this.Zy.M().type,wireframe:!1!==p}),Fp.VertexLocation({offset:{dataType:"uniform",sizeUnit:"number"==typeof a?"nwu":"axis",symmetric:"number"==typeof a,halved:!0},axisWorldTranslation:Np(this.Jt),normalSource:i.oV})),mousePicking:c?{shader:this.OD.pO(Fp["3D"],Fp.Color({dataType:"uniform"}),Fp.VertexLocation({offset:{dataType:"uniform",sizeUnit:"number"==typeof a?"nwu":"axis",symmetric:"number"==typeof a,halved:!0},axisWorldTranslation:Np(this.Jt),normalSource:void 0}))}:void 0,wireframe:m&&p&&{thickness:m.getThickness(),fillStyleSolid:p}}}if(this.bR=t,h){if(h&&h.lut.isValid){const t=h.getPalette();this.DV=this.aE.tR(t,this.BV,this.DV),this.BV=t}}else this.aE.vL.hn(this.BV),this.BV=void 0;if(f){if(f&&f.lut.isValid){const t=f.getPalette();this.OV=this.aE.tR(t,this.LV,this.OV),this.LV=t}}else this.aE.vL.hn(this.LV),this.LV=void 0}return this.Ao=!1,this.xo=[],this.Mo=0,this.Na=r,this.FV=o,this.Zy.o=!1,this.Jr.o=!1,this}BD(t){var i,s;const e=this.OD.gl,{lines:h,markers:r}=this.bR,n=this.Zy.M(),o=1===t?null===(i=null==h?void 0:h.mousePicking)||void 0===i?void 0:i.shader:null==h?void 0:h.shader;if(h&&o&&"instanced"===h.type){const i=o,{geometry:s,lineStyleSolid:r,fillStyleSolid:a,fillStylePaletted:u}=h;this.OD.SO(i,((h,o,l)=>{let c=!1;return this.OD.wB(i).HO(h("uScale"),this.fV.PB.wO()).HO(h("uDisp"),this.fV.PB.AO()).UO(h("uViewProjectionMatrix"),this.MV).MO(h("uOffsetWU"),this.Sn.$y(r.getThickness())).MO(h("uIsHighlighted"),1===t||2===t?0:this.en)._O(h("uHighlightColorOffset"),this.an).MO(h("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===n.type&&this.OD.HO(h("uCameraLoc"),this._V).HO(h("uLightLoc"),this.wV).MO(h("uAmbientReflection"),n.ambientReflection).MO(h("uSpecularReflection"),n.specularReflection).MO(h("uDiffuseReflection"),n.diffuseReflection).MO(h("uShininess"),n.shininess)._O(h("uLightColor"),n.specularColor)._O(h("uAmbientColor"),n.ambientColor),1===t?this.OD._O(h("uColor"),this.pE):a?this.OD._O(h("uColorDiffuse"),a.getColor()):u&&this.DV&&this.OD.xO(h("uLookupTexture"),this.DV.texture,0).MO(h("uLookupMin"),u.lut.min).MO(h("uLookupMax"),u.lut.max).MO(h("uLookupTextureHeightPx"),this.DV.textureHeight),this.Jx.forEach((t=>{e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer);const i=o("aLocationA"),h=o("aLocationB");e.vertexAttribPointer(i,3,e.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.OD.tL(i,1),e.enableVertexAttribArray(i),e.vertexAttribPointer(h,3,e.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.OD.tL(h,1),e.enableVertexAttribArray(h),s.wB(l)._y(t.existingCoordinatesCount-1),c=!0})),c}))}if(h&&o&&"primitive"===h.type){const i=o,{fillStyleSolid:s,fillStylePaletted:r}=h;this.OD.SO(i,((h,n)=>{let o=!1;return this.OD.wB(i).HO(h("uScale"),this.fV.PB.wO()).HO(h("uDisp"),this.fV.PB.AO()).UO(h("uViewProjectionMatrix"),this.MV).MO(h("uIsHighlighted"),1===t||2===t?0:this.en)._O(h("uHighlightColorOffset"),this.an).MO(h("uRenderEffectMask"),2===t?1:0),1===t?this.OD._O(h("uColor"),this.pE):s?this.OD._O(h("uColor"),s.getColor()):r&&this.DV&&this.OD.xO(h("uLookupTexture"),this.DV.texture,0).MO(h("uLookupMin"),r.lut.min).MO(h("uLookupMax"),r.lut.max).MO(h("uLookupTextureHeightPx"),this.DV.textureHeight),this.Jx.forEach((t=>{this.OD.vO(t.vertexBuffer,void 0,{location:n("aPos"),size:3})._y(e.LINE_STRIP,t.existingCoordinatesCount),o=!0})),o}))}const a=1===t?null===(s=null==r?void 0:r.mousePicking)||void 0===s?void 0:s.shader:null==r?void 0:r.shader;if(r&&a){const i=a,{geometry:s,fillStyleSolid:e,fillStylePaletted:h,pointSizeAxis:o,pointSizeNWU:u,wireframe:l}=r;this.OD.SO(i,((r,a,c,f)=>{let d=!1;return this.OD.wB(i).HO(r("uScale"),this.fV.PB.wO()).HO(r("uDisp"),this.fV.PB.AO()).UO(r("uViewProjectionMatrix"),this.MV).MO(f("uRatioNwuWu"),this.fV.EV()).MO(r("uIsHighlighted"),1===t||2===t?0:this.en)._O(r("uHighlightColorOffset"),this.an).MO(r("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===n.type&&this.OD.HO(r("uCameraLoc"),this._V).HO(r("uLightLoc"),this.wV).MO(r("uAmbientReflection"),n.ambientReflection).MO(r("uSpecularReflection"),n.specularReflection).MO(r("uDiffuseReflection"),n.diffuseReflection).MO(r("uShininess"),n.shininess)._O(r("uLightColor"),n.specularColor)._O(r("uAmbientColor"),n.ambientColor),1===t?this.OD._O(r("uColor"),this.pE):e?this.OD._O(r("uColorDiffuse"),e.getColor()):h&&this.OV&&this.OD.xO(r("uLookupTexture"),this.OV.texture,0).MO(r("uLookupMin"),h.lut.min).MO(r("uLookupMax"),h.lut.max).MO(r("uLookupTextureHeightPx"),this.OV.textureHeight),l&&1!==t&&this.OD.MO(r("uWireframeThickness"),l.thickness)._O(r("uWireframeColor"),l.fillStyleSolid.getColor()),!1!==o&&this.OD.HO(r("uOffsetAxis"),[o.x,o.y,o.z]),!1!==u&&this.OD.MO(r("uOffsetNWU"),u),this.Jx.forEach((i=>{this.OD.vO(i.vertexBuffer,1,{location:a("aPos"),size:3}),s._y(c,i.existingCoordinatesCount,"phong"===n.type&&1!==t,Boolean(l)&&1!==t),d=!0})),d}))}return this}Bo(t,i){Array.isArray(t)||(t=[t]),this.xo=hr(this.xo,t,{canReturnB:!0}),this.Mo+=t.length;const s=i||Gr(t);return this._o=this._o?Wr(this._o,s):s,this}za(t){return this.Ra="function"==typeof t?t(this.Ra):t,this}Va(){return this.Ra}Uy(t){return this.fp="function"==typeof t?t(this.fp):t,this}RV(){return this.fp}ii(){return this._o?Math.max(this._o.max.x,this.vo.max.x):this.vo.max.x}ti(){return this._o?Math.min(this._o.min.x,this.vo.min.x):this.vo.min.x}ei(){return this._o?Math.max(this._o.max.y,this.vo.max.y):this.vo.max.y}si(){return this._o?Math.min(this._o.min.y,this.vo.min.y):this.vo.min.y}rp(){return this._o?Math.max(this._o.max.z,this.vo.max.z):this.vo.max.z}np(){return this._o?Math.min(this._o.min.z,this.vo.min.z):this.vo.min.z}Yo(){return xr(this.Ra)}Xo(){return xr(this.Ra)}op(){return xr(this.Ra)}To(){return this.$a}Co(){return this.xo}Lo(){return this.bo}Eo(){return this.Mo}Oo(){return this.Ao=!0,this.$a.length=0,this.bo=0,this.xo=[],this.Mo=0,this.vo=Cr,this._o=void 0,this}dispose(){return super.dispose(),this.ez.ZR(),this.bR={},this.BV&&(this.aE.vL.hn(this.BV),this.BV=void 0),this.DV=void 0,this.LV&&(this.aE.vL.hn(this.LV),this.LV=void 0),this.OV=void 0,this}gB(){return this.dispose(),this}}const wv=(t,i)=>vv(t,i>50?20:i>20?16:i>10?12:i>5?8:6),Av=(t,i)=>{const s=i.getSize();return Mv(t,"number"==typeof s?s>50?20:s>20?16:s>10?12:s>5?8:6:20)};class kv extends yv{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.cV="cull-back",this.Jx=[],this.ez=new uS(this.Jx,(t=>t.vertexBuffer&&this.OD.TO(t.vertexBuffer)),!1),this.$a=[],this.bo=0,this.xo=[],this.Mo=0,this.vo=Cr,this._o=Cr,this.Ao=!1,this.hr=r,this.mp=fo.pointStyle3D,this.Zy.S(hc);const n=!0===(null==r?void 0:r.individualPointColorEnabled),o=!0===(null==r?void 0:r.individualPointSizeEnabled),a=!0===(null==r?void 0:r.individualLookupValuesEnabled),u=!0===(null==r?void 0:r.individualPointSizeAxisEnabled);let l,c,f,d,g=0;g+=3,n&&(l=g,g+=4),o&&(c=g,g+=1),a&&(f=g,g+=1),u&&(d=g,g+=3);const m=((t,i,s,e)=>t||i||s||e?!t||i||s||e?t||!i||s||e?t||i||!s||e?t||i||s||!e?(h,r,n)=>{const o=3+(t?4:0)+(i?1:0)+(s?1:0)+(e?3:0),a=h.length,u=new Float32Array(a*o);let l=0,c=l;for(let t=0;t<a;t+=1){const i=h[t];u[c+0]=i.x,u[c+1]=i.y,u[c+2]=i.z,c+=o}if(l+=3,t){const t=n&&n instanceof Be&&n.getFallbackColor()||xe;c=l;for(let i=0;i<a;i+=1){const s=h[i].color||t;u[c+0]=s.r,u[c+1]=s.g,u[c+2]=s.b,u[c+3]=s.a,c+=o}l+=4}if(i){const t=r&&r.getSize();let i=1;"number"==typeof t&&(i=t),c=l;for(let t=0;t<a;t+=1){const s=h[t],e=void 0!==s.size?s.size:i;u[c+0]=e,c+=o}l+=1}if(s){c=l;for(let t=0;t<a;t+=1){const i=h[t];u[c+0]=void 0!==i.value?i.value:0,c+=o}l+=1}if(e){const t=r&&r.getSize();let i={x:1,y:1,z:1};"object"==typeof t&&(i=t),c=l;for(let t=0;t<a;t+=1){const s=h[t],e=void 0!==s.sizeAxisX?s.sizeAxisX:i.x,r=void 0!==s.sizeAxisY?s.sizeAxisY:i.y,n=void 0!==s.sizeAxisZ?s.sizeAxisZ:i.z;u[c+0]=e,u[c+1]=r,u[c+2]=n,c+=o}l+=3}return u}:(t,i,s)=>((t,i)=>{const s=i&&i.getSize();let e={x:1,y:1,z:1};"object"==typeof s&&(e=s);const h=t.length,r=new Float32Array(6*h);let n=0;for(let i=0;i<h;i+=1){const s=t[i];r[n+0]=s.x,r[n+1]=s.y,r[n+2]=s.z;const h=void 0!==s.sizeAxisX?s.sizeAxisX:e.x,o=void 0!==s.sizeAxisY?s.sizeAxisY:e.y,a=void 0!==s.sizeAxisZ?s.sizeAxisZ:e.z;r[n+3]=h,r[n+4]=o,r[n+5]=a,n+=6}return r})(t,i):(t,i,s)=>(t=>{const i=t.length,s=new Float32Array(4*i);for(let e=0,h=0;e<i;e+=1){const i=t[e];s[h+0]=i.x,s[h+1]=i.y,s[h+2]=i.z,s[h+3]=void 0!==i.value?i.value:0,h+=4}return s})(t):(t,i,s)=>((t,i)=>{const s=i&&i.getSize();let e=1;"number"==typeof s&&(e=s);const h=t.length,r=new Float32Array(4*h);for(let i=0,s=0;i<h;i+=1){const h=t[i];r[s+0]=h.x,r[s+1]=h.y,r[s+2]=h.z;const n=void 0!==h.size?h.size:e;r[s+3]=n,s+=4}return r})(t,i):(t,i,s)=>((t,i)=>{const s=i&&i instanceof Be&&i.getFallbackColor()||xe,e=t.length,h=new Float32Array(7*e);for(let i=0,r=0;i<e;i+=1){const e=t[i];h[r+0]=e.x,h[r+1]=e.y,h[r+2]=e.z;const n=e.color||s;h[r+3]=n.r,h[r+4]=n.g,h[r+5]=n.b,h[r+6]=n.a,r+=7}return h})(t,s):(t,i,s)=>qh(t))(n,o,a,u);this.rz={individualPointColorEnabled:n,individualPointSizeEnabled:o,individualLookupValuesEnabled:a,individualPointSizeAxisEnabled:u,attributesPerVertex:g,attributeOffsetCoordinate:0,attributeOffsetColor:l,attributeOffsetSize:c,attributeOffsetLookUpValue:f,attributeOffsetPointSize3D:d,prepareRenderData:(t,i)=>m(t,this.mp,this.mp.fillStyle)}}_e(t){const i=this.Ao,s=this.xo,e=this.Mo,h=e>0,r=this.mp,n=this.mp!==this.zV,o=this.Jr.M(),a=this.Jr.o,u=this.iO();this._o&&(this.vo=Wr(this.vo,this._o),this._o=void 0),h&&(this.$a=hr(this.$a,s,{canReturnB:!0}),this.bo+=e);let l=s,c=e;if(i&&(this.Jx.forEach((t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.boundaries=Cr})),this.ez.XR(),l=this.$a,c=this.bo),c>0){const t=Math.floor(this.aE.PV/(this.rz.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),i=Ah(c,1e5,t);this.ez.UR(l,i,((t,i,s)=>({existingDataPointsCount:s,existingCoordinatesCount:s,allocatedCoordinatesCount:t,boundaries:Cr,vertexBuffer:this.OD.YO(t*this.rz.attributesPerVertex,this.rz.prepareRenderData(i,s))})),((t,i,s)=>{this.OD.XO(t.vertexBuffer,t.existingCoordinatesCount*this.rz.attributesPerVertex,this.rz.prepareRenderData(i,s)),t.existingDataPointsCount+=s,t.existingCoordinatesCount=t.existingDataPointsCount}))}if(n||u||a){let t;const i=r.getSize(),s=r.getFillStyle(),e=this.rz.individualPointColorEnabled,h=this.rz.individualPointSizeEnabled,n=this.rz.individualPointSizeAxisEnabled,a=this.rz.individualLookupValuesEnabled,u=s instanceof De&&s,l=s instanceof Be&&s,c=s instanceof Le&&s,f=s===Ie&&Ie;if(l&&!e){const t="LCJS misusage error: Series individualPointColorEnabled flag must be set if using IndividualPointFill !";throw yh.alert(t),new Error(t)}if(c&&"value"===c.getLookUpProperty()&&!a){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw yh.alert(t),new Error(t)}const d=r instanceof Jn&&r,g=d&&d.getWireframeStyle(),m=g&&g instanceof sh&&g,y=m&&m.getFillStyle(),p=y&&y instanceof De&&y;if(u||l||c||p){const s=l?"attribute":c?["lookup",c.getLookUpProperty()]:"uniform",e=h&&"number"==typeof i,a=n&&"object"==typeof i,d=e||a?"attribute":"uniform";if(r instanceof Jn){const n=sr(r.getShape(),{cube:()=>gv(this.OD),sphere:()=>Cv(this.OD,r,h)});t={type:"instanced",shader:this.OD.pO(Fp["3D"],Fp.ColorShaded3D({dataType:s,shadingStyle:this.Zy.M().type,wireframe:!1!==p}),Fp.VertexLocation({offset:{dataType:d,sizeUnit:"number"==typeof i?"nwu":"axis",halved:!0,symmetric:"number"==typeof i},axisWorldTranslation:Np(this.Jt),normalSource:n.oV})),pointStyle:r,useIndividualPointSize:e,useIndividualPointSize3D:a,pointSizeNWU:"number"==typeof i&&i,pointSizeAxis:"object"==typeof i&&i,fillStyleSolid:u,fillStyleIndividual:l,fillStylePalette:c,fillStyleEmpty:f,mousePickingShader:o&&this.OD.pO(Fp["3D"],Fp.Color({dataType:"uniform"}),Fp.VertexLocation({offset:{dataType:d,sizeUnit:"number"==typeof i?"nwu":"axis",halved:!0,symmetric:"number"==typeof i},axisWorldTranslation:Np(this.Jt),normalSource:void 0})),geometry:n,wireframe:m&&p&&{thickness:m.getThickness()<0?1:m.getThickness(),fillStyleSolid:p}}}else r instanceof to&&"number"==typeof i&&(t={type:"primitive",shader:this.OD.pO(Fp["3D"],Fp.PointSize(d),Fp.Color({dataType:s}),Fp.VertexLocation({axisWorldTranslation:Np(this.Jt),normalSource:void 0})),pointStyle:r,pointSizePixels:i,useIndividualPointSize:e,fillStyleSolid:u,fillStyleIndividual:l,fillStylePalette:c,mousePickingShader:o&&this.OD.pO(Fp["3D"],Fp.PointSize(d),Fp.Color({dataType:"uniform"}),Fp.VertexLocation({axisWorldTranslation:Np(this.Jt),normalSource:void 0}))})}if(this.bR=t,s instanceof Le){const t=s.getPalette();this.Fz=this.aE.tR(t,this.MR,this.Fz),this.MR=t}else this.Fz=void 0,this.aE.vL.hn(this.MR),this.MR=void 0}return this.Ao=!1,this.xo=[],this.Mo=0,this.zV=r,this.Zy.o=!1,this}BD(t){const i=this.OD.gl,s=this.bR;if(!s)return this;const e=1===t?s.mousePickingShader:s.shader;if(!e)return this;const h=this.Zy.M(),{fillStyleSolid:r,fillStylePalette:n,useIndividualPointSize:o}=s,a="instanced"===s.type&&s.useIndividualPointSize3D,u="instanced"===s.type&&s.wireframe;return this.OD.SO(e,((l,c,f,d)=>{let g=!1;if(this.OD.wB(e).HO(l("uScale"),this.fV.PB.wO()).HO(l("uDisp"),this.fV.PB.AO()).UO(l("uViewProjectionMatrix"),this.MV).MO(l("uIsHighlighted"),1===t||2===t?0:this.en)._O(l("uHighlightColorOffset"),this.an).MO(l("uRenderEffectMask"),2===t?1:0),"instanced"===s.type){const{pointSizeAxis:t,pointSizeNWU:i}=s;!1!==t&&!1===a&&this.OD.HO(l("uOffsetAxis"),[t.x,t.y,t.z]),!1!==i&&!1===o&&this.OD.MO(l("uOffsetNWU"),i).MO(d("uRatioNwuWu"),this.fV.EV())}else if("primitive"===s.type){const{pointSizePixels:t}=s;o||this.OD.MO(l("uPointSize"),t).MO(l("uDevicePixelRatio"),this.OD.TB())}return 1===t?this.OD._O(l("uColor"),this.pE):("instanced"===s.type?("phong"===h.type&&this.OD.HO(l("uCameraLoc"),this._V).HO(l("uLightLoc"),this.wV).MO(l("uAmbientReflection"),h.ambientReflection).MO(l("uSpecularReflection"),h.specularReflection).MO(l("uDiffuseReflection"),h.diffuseReflection).MO(l("uShininess"),h.shininess)._O(l("uLightColor"),h.specularColor)._O(l("uAmbientColor"),h.ambientColor),u&&this.OD.MO(l("uWireframeThickness"),u.thickness)._O(l("uWireframeColor"),u.fillStyleSolid.getColor()),r&&this.OD._O(l("uColorDiffuse"),r.getColor()),s.fillStyleEmpty&&this.OD._O(l("uColorDiffuse"),Me)):"primitive"===s.type&&r&&this.OD._O(l("uColor"),r.getColor()),n&&this.Fz&&this.OD.xO(l("uLookupTexture"),this.Fz.texture,0).MO(l("uLookupMin"),n.lut.min).MO(l("uLookupMax"),n.lut.max).MO(l("uLookupTextureHeightPx"),this.Fz.textureHeight)),this.Jx.forEach(((e,r)=>{i.bindBuffer(i.ARRAY_BUFFER,e.vertexBuffer);const n=c("aPos");if(i.vertexAttribPointer(n,3,i.FLOAT,!1,this.rz.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.rz.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.OD.tL(n,1),i.enableVertexAttribArray(n),s.fillStyleIndividual&&void 0!==this.rz.attributeOffsetColor&&1!==t){const t=c("aColor");i.vertexAttribPointer(t,4,i.FLOAT,!1,this.rz.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.rz.attributeOffsetColor*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.OD.tL(t,1),i.enableVertexAttribArray(t)}if(o&&void 0!==this.rz.attributeOffsetSize){"instanced"===s.type?this.OD.MO(d("uRatioNwuWu"),this.fV.EV()):"primitive"===s.type&&this.OD.MO(l("uDevicePixelRatio"),this.OD.TB());const t=c("instanced"===s.type?"aOffsetNWU":"aPointSize");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.rz.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.rz.attributeOffsetSize*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.OD.tL(t,1),i.enableVertexAttribArray(t)}if(a&&void 0!==this.rz.attributeOffsetPointSize3D&&"instanced"===s.type){const t=c("aOffsetAxis");i.vertexAttribPointer(t,3,i.FLOAT,!1,this.rz.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.rz.attributeOffsetPointSize3D*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.OD.tL(t,1),i.enableVertexAttribArray(t)}if(s.fillStylePalette&&"value"===s.fillStylePalette.getLookUpProperty()&&void 0!==this.rz.attributeOffsetLookUpValue&&1!==t){const t=c("aLookupValue");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.rz.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.rz.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.OD.tL(t,1),i.enableVertexAttribArray(t)}"instanced"===s.type?(s.geometry._y(f,e.existingCoordinatesCount,"phong"===h.type&&1!==t,Boolean(u)&&1!==t),g=!0):"primitive"===s.type&&(this.OD._y(i.POINTS,e.existingCoordinatesCount),g=!0)})),g})),this}Bo(t,i){Array.isArray(t)||(t=[t]),this.xo=hr(this.xo,t,{canReturnB:!0}),this.Mo+=t.length;const s=i||Gr(t);return this._o=this._o?Wr(this._o,s):s,this}yp(t){return this.mp="function"==typeof t?t(this.mp):t,this}VV(){return this.mp}ii(){return this._o?Math.max(this._o.max.x,this.vo.max.x):this.vo.max.x}ti(){return this._o?Math.min(this._o.min.x,this.vo.min.x):this.vo.min.x}ei(){return this._o?Math.max(this._o.max.y,this.vo.max.y):this.vo.max.y}si(){return this._o?Math.min(this._o.min.y,this.vo.min.y):this.vo.min.y}rp(){return this._o?Math.max(this._o.max.z,this.vo.max.z):this.vo.max.z}np(){return this._o?Math.min(this._o.min.z,this.vo.min.z):this.vo.min.z}Yo(){const t=this.mp,i=t.getSize();return"number"==typeof i?t instanceof Jn?i/2:t instanceof to?5:0:0}Xo(){return this.Yo()}op(){return this.Yo()}To(){return this.$a}Co(){return this.xo}Lo(){return this.bo}Eo(){return this.Mo}Oo(){return this.Ao=!0,this.$a.length=0,this.bo=0,this.xo=[],this.Mo=0,this.vo=Cr,this._o=void 0,this}dispose(){return super.dispose(),this.ez.ZR(),this.aE.vL.hn(this.MR),this.MR=void 0,this.Fz=void 0,this.bR=void 0,this}gB(){return this.dispose(),this}}const Cv=(t,i,s)=>{const e=i.getSize();return Mv(t,"number"==typeof e?s||e>=50?20:e>=10?10:e>=3?5:3:32)};class Tv extends yv{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.cV="disabled",this._n=fo.fillStyle,this.eu=fo.lineStyle,this._z=l("bilinear"),this.NV=[],this.GV=Cr,this.HV=void 0,this.bR={},this.WV=!1,this.Zy.S(sc);const n="columns"===e.dataOrder?e.columns:e.rows,o="columns"===e.dataOrder?e.rows:e.columns;this.hr={...e,primaryDimensionVectorsCount:n,secondaryDimensionVectorsCount:o},this.GV={min:{x:Math.min(e.start.x,e.start.x+(e.columns-1)*e.step.x),z:Math.min(e.start.z,e.start.z+(e.rows-1)*e.step.z)},max:{x:Math.max(e.start.x,e.start.x+(e.columns-1)*e.step.x),z:Math.max(e.start.z,e.start.z+(e.rows-1)*e.step.z)}},this.UV=new Array(this.hr.primaryDimensionVectorsCount).fill(void 0),this.EC=new iv(this.aE,t.aE.jV,t.vs.Jt,_h,[],{...this.hr,start:{x:0,y:0},step:{x:1,y:1}},-1,xe).hu(th),this.EC.kz=ZS;const a=this.EC.Cz.gridTiles.map((t=>{const i=t.sizeHeatmapDataVectors,s=t.sizeUniqueHeatmapDataVectors,e=t.iFirstVector,h=t.iFirstUniqueVector,r="columns"===this.hr.dataOrder?{x:this.hr.step.x*(t.sizeHeatmapDataVectors.primary-1),z:this.hr.step.z*(t.sizeHeatmapDataVectors.secondary-1)}:{x:this.hr.step.x*(t.sizeHeatmapDataVectors.secondary-1),z:this.hr.step.z*(t.sizeHeatmapDataVectors.primary-1)},n="columns"===this.hr.dataOrder?{x:this.hr.start.x+this.hr.step.x*t.iFirstVector.primary,z:this.hr.start.z+this.hr.step.z*t.iFirstVector.secondary}:{x:this.hr.start.x+this.hr.step.x*t.iFirstVector.secondary,z:this.hr.start.z+this.hr.step.z*t.iFirstVector.primary},o=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary),a={primary:t.sizeHeatmapDataVectors.primary-1,secondary:t.sizeHeatmapDataVectors.secondary-1};return{iFirstVector:t.iFirstVector,iFirstUniqueVector:t.iFirstUniqueVector,sizeHeatmapDataVectors:t.sizeHeatmapDataVectors,sizeUniqueHeatmapDataVectors:t.sizeUniqueHeatmapDataVectors,iFirstGeometryVector:e,iFirstGeometryUniqueVector:h,sizeGeometryDataVectors:i,sizeUniqueGeometryDataVectors:s,startLocationAxis:n,sizeAxis:r,heightmapData:o,normalmapSize:a}})),u=this.EC.Cz.gridTileSizes.map((t=>{const i=a.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary)),s=i[0].sizeGeometryDataVectors;return{...t,tiles:i,sizeGeometryData:s}})),c=a.reduce(((t,i)=>{const s=i.sizeHeatmapDataVectors.primary,e=i.sizeHeatmapDataVectors.secondary,h=s*e;return h>t.cells?{primary:s,secondary:e,cells:h}:t}),{primary:0,secondary:0,cells:0});this.$V={gridTiles:a,gridTileSizes:u,largestGridTileSize:c}}YV(t){this.XV=t,this.HV=void 0}ZV(t){"columns"===this.hr.dataOrder?(this.GV.min.x=Math.min(this.hr.start.x,this.hr.start.x+(this.hr.columns-1)*this.hr.step.x)+t,this.GV.max.x=Math.max(this.hr.start.x,this.hr.start.x+(this.hr.columns-1)*this.hr.step.x)+t):(this.GV.min.z=Math.min(this.hr.start.z,this.hr.start.z+(this.hr.rows-1)*this.hr.step.z)+t,this.GV.max.z=Math.max(this.hr.start.z,this.hr.start.z+(this.hr.rows-1)*this.hr.step.z)+t),this.KV=t}_e(t){const i=this.NV,s=this._n,e=s instanceof De&&s,h=s instanceof Le&&s,r=Lo(this.An,s),n=h&&h.getPalette(),o=this.eu,a=o instanceof sh&&o,u=a&&a.getFillStyle(),l=u&&u instanceof De&&u,c=!1!==l,f=o!==this.wu,d=this._z.o,g=this._z.M(),m=this.Zy.M(),y=this.iO(),p=this.Jr.M();this.EC._e();const S=this.EC.Tz;if(!S)return this;this.qV=this.qV||this.JV(S);const v=this.qV;this.QV(v);const b=KS(i,v,void 0,(t=>t.sizeGeometryDataVectors));if(b.size>0&&(QS(this.OD,b,(t=>t.heightmapData),(t=>t.heightmapDataTexture)),this.WV=!0),"phong"===m.type&&(b.size>0||y)){const t=this.OD.gl,i=this.OD.pO(Fp["2D"],Fp.DrawToNormalTexture({flipXZ:"rows"===this.hr.dataOrder,vertexIdSource:this.OD.RL(),normalTextureType:this.OD.gl2?"uint":"ubyte",heightmapTextureType:this.OD.pL?"float":"ubyte",littleEndian:this.OD.IS_MACHINE_LITTLE_ENDIAN}));v.gridTileSizes.forEach((s=>{s.tiles.forEach((e=>{const h=e.normalmapTexture;if(!h)return;const r={x:e.normalmapSize.secondary,y:e.normalmapSize.primary},n=r.x*r.y;this.OD.bL.BD((()=>{this.OD.SO(i,((h,r,o,a)=>(this.OD.wB(i).zL(o,n).bO(h("uTileDimensionsXZ"),["columns"===this.hr.dataOrder?s.sizeHeatmapData.primary:s.sizeHeatmapData.secondary,"columns"===this.hr.dataOrder?s.sizeHeatmapData.secondary:s.sizeHeatmapData.primary]).NO(h("uTileDimensions"),[s.sizeHeatmapData.primary,s.sizeHeatmapData.secondary]).bO(h("uTileStartLocationAxisXZ"),[e.startLocationAxis.x+("columns"===this.hr.dataOrder&&this.KV||0),e.startLocationAxis.z+("rows"===this.hr.dataOrder&&this.KV||0)]).bO(h("uTileSizeAxisXZ"),[e.sizeAxis.x,e.sizeAxis.z]).xO(h("uHeightmapTexture"),e.heightmapDataTexture,1)._y(t.POINTS,n),!0)))}),h,r,void 0,this.vs.Dh(),0)}))}))}const x=this.bR;if(r||f||d){n?(this.Fz=this.aE.tR(n,this.Pz,this.Fz),this.Pz=n):(this.Fz=void 0,this.aE.vL.hn(this.Pz),this.Pz=void 0);const t=a&&l?{wireframeSolid:a,wireframeFillSolid:l}:void 0;e?x.surface={shader:this.OD.pO(Fp["3D"],Fp.SurfaceGrid({axisWorldTranslation:Np(this.Jt),fillColor:"uniform",interpolation:"bilinear"===g&&"bilinear",flipXZ:"rows"===this.hr.dataOrder,shadingStyle:m.type,wireframe:c,instanceIdSource:this.OD.VL(),normalTextureType:this.OD.gl2?"uint":"ubyte",intensityTextureType:this.OD.pL?"float":"ubyte",heightmapTextureType:this.OD.pL?"float":"ubyte",littleEndian:this.OD.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"solid",fillStyleSolid:e},wireframe:t}:this.Fz&&h&&"value"===h.getLookUpProperty()?x.surface={shader:this.OD.pO(Fp["3D"],Fp.SurfaceGrid({axisWorldTranslation:Np(this.Jt),fillColor:["lookup","value"],interpolation:"bilinear"===g&&"bilinear",flipXZ:"rows"===this.hr.dataOrder,shadingStyle:m.type,wireframe:c,instanceIdSource:this.OD.VL(),normalTextureType:this.OD.gl2?"uint":"ubyte",intensityTextureType:this.OD.pL?"float":"ubyte",heightmapTextureType:this.OD.pL?"float":"ubyte",littleEndian:this.OD.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"intensity",fillStylePaletted:h,colorLookupTexture:this.Fz},wireframe:t}:this.Fz&&h?x.surface={shader:this.OD.pO(Fp["3D"],Fp.SurfaceGrid({axisWorldTranslation:Np(this.Jt),fillColor:["lookup",h.getLookUpProperty()],interpolation:"bilinear"===g&&"bilinear",flipXZ:"rows"===this.hr.dataOrder,shadingStyle:m.type,wireframe:c,instanceIdSource:this.OD.VL(),normalTextureType:this.OD.gl2?"uint":"ubyte",intensityTextureType:this.OD.pL?"float":"ubyte",heightmapTextureType:this.OD.pL?"float":"ubyte",littleEndian:this.OD.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"xyz",fillStylePaletted:h,colorLookupTexture:this.Fz},wireframe:t}:c&&(x.surface={shader:this.OD.pO(Fp["3D"],Fp.SurfaceGrid({axisWorldTranslation:Np(this.Jt),fillColor:void 0,interpolation:"bilinear"===g&&"bilinear",flipXZ:"rows"===this.hr.dataOrder,shadingStyle:m.type,wireframe:c,instanceIdSource:this.OD.VL(),normalTextureType:this.OD.gl2?"uint":"ubyte",intensityTextureType:this.OD.pL?"float":"ubyte",heightmapTextureType:this.OD.pL?"float":"ubyte",littleEndian:this.OD.IS_MACHINE_LITTLE_ENDIAN})),fill:void 0,wireframe:t})}return x.mousePicking=p?this.bR.mousePicking||{shader:this.OD.pO(Fp["3D"],Fp.SurfaceGrid({axisWorldTranslation:Np(this.Jt),fillColor:"uniform",interpolation:"bilinear"===g&&"bilinear",flipXZ:"rows"===this.hr.dataOrder,shadingStyle:"simple",wireframe:!1,instanceIdSource:this.OD.VL(),normalTextureType:this.OD.gl2?"uint":"ubyte",intensityTextureType:this.OD.pL?"float":"ubyte",heightmapTextureType:this.OD.pL?"float":"ubyte",littleEndian:this.OD.IS_MACHINE_LITTLE_ENDIAN}))}:void 0,this.bR=x,this.NV.length=0,this.An=s,this.wu=o,this.Zy.o=!1,this}JV(t){const i=this.$V.gridTiles.map((i=>{const s=JS(this.OD,i.sizeHeatmapDataVectors.secondary,i.sizeHeatmapDataVectors.primary),e=t.gridTiles.find((t=>t.iFirstUniqueVector.primary===i.iFirstUniqueVector.primary&&t.iFirstUniqueVector.secondary===i.iFirstUniqueVector.secondary));if(!e)throw new Error("Internal LC JS error prepare surface data 2D render data not found");return{...i,intensityDataTexture:e.intensityDataTexture,heightmapDataTexture:s,normalmap:void 0}})),s=this.$V.gridTileSizes.map((t=>{const s=i.filter((i=>i.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&i.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary));return{...t,tiles:s}})),e=this.OD.mO([0,0,1,0,0,1,0,1,1,0,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,1,1,1,0,0]),h=this.OD.gl.TRIANGLES;return{gridTiles:i,gridTileSizes:s,rectangleLocationsBuffer:e,rectangleLocationsDrawLength:6,rectangleLocationsDrawMode:h}}QV(t){var i;if("phong"===this.Zy.M().type)for(let s=0;s<t.gridTiles.length;s+=1){const e=t.gridTiles[s];if(e.normalmapTexture)return;let h;const r=null===(i=this.OD.gl2)||void 0===i?void 0:i.ctx;if(r)h=this.OD.kL(null,r.RGBA_INTEGER,!1,!0,{x:e.normalmapSize.secondary,y:e.normalmapSize.primary},!1,r.UNSIGNED_INT,r.RGBA32UI);else{const t=this.OD.gl;h=this.OD.kL(null,t.RGBA,!1,!0,{x:e.normalmapSize.secondary,y:e.normalmapSize.primary},!1,t.UNSIGNED_BYTE)}e.normalmapTexture=h}else t.gridTiles.forEach((t=>{t.normalmapTexture&&(this.OD.mB(t.normalmapTexture),t.normalmapTexture=void 0)}))}BD(t){var i,s,e,h;const r=this.OD.gl,n=this.qV;if(!n)return this;const o=this.Zy.M(),u=this.bR,l=1===t?null===(i=u.mousePicking)||void 0===i?void 0:i.shader:null===(s=u.surface)||void 0===s?void 0:s.shader;if(!l)return this;const c=1!==t?null===(e=u.surface)||void 0===e?void 0:e.wireframe:void 0,f=1!==t?null===(h=u.surface)||void 0===h?void 0:h.fill:void 0;return this.OD.SO(l,((i,s,e,h)=>{let u=!1;if(this.OD.wB(l).NL(e,this.$V.largestGridTileSize.cells).HO(i("uScale"),this.fV.PB.wO()).HO(i("uDisp"),this.fV.PB.AO()).UO(i("uViewProjectionMatrix"),this.MV).MO(i("uIsHighlighted"),1===t||2===t?0:this.en)._O(i("uHighlightColorOffset"),this.an).MO(i("uRenderEffectMask"),2===t?1:0),1!==t&&("phong"===o.type&&this.OD.HO(i("uCameraLoc"),this._V).HO(i("uLightLoc"),this.wV).MO(i("uAmbientReflection"),o.ambientReflection).MO(i("uSpecularReflection"),o.specularReflection).MO(i("uDiffuseReflection"),o.diffuseReflection).MO(i("uShininess"),o.shininess)._O(i("uLightColor"),o.specularColor)._O(i("uAmbientColor"),o.ambientColor),c)){const{wireframeFillSolid:t,wireframeSolid:s}=c,e=s.getThickness()<0?1:s.getThickness();this.OD._O(i("uWireframeColor"),t.getColor()).MO(i("uWireframeThickness"),e)}return 1===t?this.OD._O(i("uColorDiffuse"),this.pE):"solid"===(null==f?void 0:f.fillMode)&&this.OD._O(i("uColorDiffuse"),f.fillStyleSolid.getColor()),n.gridTileSizes.forEach((e=>{this.OD.bO(i("uTileDimensionsXZ"),["columns"===this.hr.dataOrder?e.sizeHeatmapData.primary:e.sizeHeatmapData.secondary,"columns"===this.hr.dataOrder?e.sizeHeatmapData.secondary:e.sizeHeatmapData.primary]).NO(i("uTileDimensions"),[e.sizeHeatmapData.primary,e.sizeHeatmapData.secondary]),e.tiles.forEach((h=>{let o=0,l=(h.sizeHeatmapDataVectors.primary-1)*(h.sizeHeatmapDataVectors.secondary-1);if(this.XV){const t=this.XV.fill.iFirstPrimary,i=this.XV.fill.iFirstPrimary+this.XV.fill.amountPrimary-1,s=h.iFirstVector.primary,r=h.iFirstVector.primary+h.sizeHeatmapDataVectors.primary-1;if(s>i||r<t)return;const n=((t,i,s,e)=>a(Math.max(t,s),Math.min(i,e)))(t,i,s,r);o=(n.min-h.iFirstVector.primary)*(e.sizeGeometryData.secondary-1),l=(n.max-n.min)*(e.sizeGeometryData.secondary-1)}if(!(o<0||l<=0)){if("intensity"===(null==f?void 0:f.fillMode)){const{colorLookupTexture:t,fillStylePaletted:s}=f;this.OD.xO(i("uLookupTexture"),t.texture,1).MO(i("uLookupMin"),s.getPalette().min).MO(i("uLookupMax"),s.getPalette().max).MO(i("uLookupTextureHeightPx"),t.textureHeight).xO(i("uTileIntensityValues"),h.intensityDataTexture,2).GO(i("uTileBoundsAxisXZ"),[h.startLocationAxis.x+("columns"===this.hr.dataOrder&&this.KV||0),h.startLocationAxis.z+("rows"===this.hr.dataOrder&&this.KV||0),h.sizeAxis.x,h.sizeAxis.z])}if("xyz"===(null==f?void 0:f.fillMode)){const{colorLookupTexture:t,fillStylePaletted:s}=f;this.OD.xO(i("uLookupTexture"),t.texture,1).MO(i("uLookupMin"),s.getPalette().min).MO(i("uLookupMax"),s.getPalette().max).MO(i("uLookupTextureHeightPx"),t.textureHeight)}1!==t&&"phong"===this.Zy.M().type&&h.normalmapTexture&&this.OD.xO(i("uNormalmapTexture"),h.normalmapTexture,3),this.OD.vO(n.rectangleLocationsBuffer,0,{location:s("aGeoCellOffset"),size:2},{location:c?s("aTriangleBary"):void 0,size:3}).jO(i("uBaseInstance"),o).bO(i("uTileStartLocationAxisXZ"),[h.startLocationAxis.x+("columns"===this.hr.dataOrder&&this.KV||0),h.startLocationAxis.z+("rows"===this.hr.dataOrder&&this.KV||0)]).bO(i("uTileSizeAxisXZ"),[h.sizeAxis.x,h.sizeAxis.z]).xO(i("uHeightmapTexture"),h.heightmapDataTexture,0).nL(n.rectangleLocationsDrawMode,0,n.rectangleLocationsDrawLength,l),u=!0,r.bindBuffer(r.ARRAY_BUFFER,null)}}))})),u})),this}dispose(){return super.dispose(),this.EC.dispose(),this.aE.vL.hn(this.Pz),this.Pz=void 0,this.Fz=void 0,this.qV&&(this.qV.gridTileSizes.forEach((t=>{})),this.qV.gridTiles.forEach((t=>{this.OD.mB(t.heightmapDataTexture),t.normalmapTexture&&this.OD.mB(t.normalmapTexture)})),this.OD.TO(this.qV.rectangleLocationsBuffer),this.qV=void 0),this.bR={},this}gB(){return this.dispose(),this.EC.gB(),this}uS(t){return this.EC.uS(t),this}lS(t){this.NV.push(t),qS(this.$V.gridTiles,t,(t=>t.heightmapData));for(let i=t.startPrimary;i<t.startPrimary+t.lengthPrimary;i+=1)this.UV[i]=void 0;return this.HV=void 0,this}oS(t){return this._z.S(t),this}aS(){return this._z.M()}Js(t){return this._n=Oo(this._n,t),this.EC.Js(this._n),this}qs(){return this._n}hu(t){return this.eu="function"==typeof t?t(this.eu):t,this}ru(){return this.eu}ii(){return this.GV.max.x}ti(){return this.GV.min.x}ei(){const t=this.HV||this.tN();return this.HV=t,t.max}si(){const t=this.HV||this.tN();return this.HV=t,t.min}rp(){return this.GV.max.z}np(){return this.GV.min.z}Yo(){return 0}Xo(){return 0}op(){return 0}tN(){if(this.HV)return this.HV;const t=this.XV?this.XV.fill.iFirstPrimary:0,i=this.XV?t+this.XV.fill.amountPrimary-1:this.hr.primaryDimensionVectorsCount-1;let s=wr,e=Ar;return this.$V.gridTiles.forEach((h=>{for(let r=Math.max(t,h.iFirstUniqueVector.primary);r<=Math.min(i,h.iFirstUniqueVector.primary+h.sizeUniqueHeatmapDataVectors.primary-1);r+=1){const t=(r-h.iFirstUniqueVector.primary)*h.sizeHeatmapDataVectors.secondary;let i=this.UV[r];if(i)s=s<i.min?s:i.min,e=e>i.max?e:i.max;else{i={min:wr,max:Ar},this.UV[r]=i;for(let r=0;r<h.sizeHeatmapDataVectors.secondary;r+=1){const n=h.heightmapData[t+r];s=s<n?s:n,e=e>n?e:n,i.min=Math.min(i.min,n),i.max=Math.max(i.max,n)}}}})),this.HV={min:s,max:e},this.HV}}class Iv extends yv{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.cV="disabled",this.Lz=0,this.Rz={};const n={min:{x:e.start.x,z:e.start.z},max:{x:"rows"===e.scrollDimension?e.start.x+(e.columns-1)*e.step.x:e.start.x,z:"columns"===e.scrollDimension?e.start.z+(e.rows-1)*e.step.z:e.start.z}};this.hr={...e,initialBoundaries:n,scrollDimensionSize:"columns"===e.scrollDimension?e.columns:e.rows,staticDimensionSize:"columns"===e.scrollDimension?e.rows:e.columns},this.GV=n;const o=()=>({shape:new Tv(this.fV,_h,this.rn,{columns:e.columns+("columns"===e.scrollDimension?1:0),rows:e.rows+("rows"===e.scrollDimension?1:0),start:{x:0,z:0},step:e.step,dataOrder:e.scrollDimension,heatmapDataType:"intensity"},this.yE,this.pE).dispose(),hasData:!1});this.Jx=[o(),o()]}_e(t){return this.Jx.forEach((i=>{i.shape._e(t)})),this}BD(t){return this.Jx.forEach((i=>{i.hasData&&(i.shape.MV=this.MV,i.shape._V=this._V,i.shape.wV=this.wV,i.shape.BD(t))})),this}Oo(){return this.Lz=0,this.Rz={},this.GV=this.hr.initialBoundaries,this.Jx.forEach((t=>{t.shape.dispose(),t.shape.WV=!1,t.hasData=!1})),this}gS(t){var i;const s=this.Jx[0],e=this.Jx[1],h=t.heightMapValues?t.heightMapValues.length:null===(i=t.intensityValues)||void 0===i?void 0:i.length;let r=0;if(!h)return this;do{const i=Math.floor(this.Lz/this.hr.scrollDimensionSize)%this.Jx.length,n=this.Jx[i],o=this.Lz%this.hr.scrollDimensionSize,a=this.hr.scrollDimensionSize-o,u=0===o,l=Math.min(a,h),c=o+l,f=o,d=f+1,g=r,m=r+l,y=this.Lz>=this.hr.scrollDimensionSize&&c<=this.hr.scrollDimensionSize-1,p=u;if(u){const t="columns"===this.hr.scrollDimension?this.hr.start.x+(this.Lz-1)*this.hr.step.x:this.hr.start.z+(this.Lz-1)*this.hr.step.z;n.shape.ZV(t)}const S=y?0:1,v=c+(y?1:0);n.shape.YV({fill:{iFirstPrimary:S,amountPrimary:v},wireframe:{iFirstPrimary:S,amountPrimary:v,connectNext:!1}});const b=n===s?e:s,x=c+1,M=1+this.hr.scrollDimensionSize-x;b.shape.YV({fill:{iFirstPrimary:x,amountPrimary:M},wireframe:{iFirstPrimary:x,amountPrimary:M-1,connectNext:!0}});const _={};if(t.heightMapValues){const i=t.heightMapValues.slice(g,m);let s=!1;p&&this.Rz.yValues&&(s=!0,i.splice(0,0,this.Rz.yValues));const e={startPrimary:s?f:d,startSecondary:0,lengthPrimary:i.length,lengthSecondary:this.hr.staticDimensionSize,values:i,type:"y"};n.shape.lS(e),n.hasData=!0,_.yValues=i[l-1]}if(t.intensityValues){const i=t.intensityValues.slice(g,m);let s=!1;p&&this.Rz.intensityValues&&(s=!0,i.splice(0,0,this.Rz.intensityValues));const e={startPrimary:s?f:d,startSecondary:0,lengthPrimary:i.length,lengthSecondary:this.hr.staticDimensionSize,values:i,type:"intensity"};n.shape.uS(e),n.hasData=!0,_.intensityValues=i[l-1]}this.Lz+=l,r+=l,this.Rz=_}while(r<h);return"columns"===this.hr.scrollDimension?(this.GV.min.x=this.hr.start.x+Math.max(this.Lz-this.hr.scrollDimensionSize,0)*this.hr.step.x,this.GV.max.x=this.hr.start.x+(this.Lz-1)*this.hr.step.x):(this.GV.min.z=this.hr.start.z+Math.max(this.Lz-this.hr.scrollDimensionSize,0)*this.hr.step.z,this.GV.max.z=this.hr.start.z+(this.Lz-1)*this.hr.step.z),this}oS(t){return this.Jx.forEach((i=>i.shape.oS(t))),this}aS(){return this.Jx[0].shape.aS()}Js(t){return this.Jx.forEach((i=>i.shape.Js(t))),this}qs(){return this.Jx[0].shape.qs()}hu(t){return this.Jx.forEach((i=>i.shape.hu(t))),this}ru(){return this.Jx[0].shape.ru()}gB(){return this.dispose(),this.Jx.forEach((t=>t.shape.gB())),this}dispose(){return super.dispose(),this.Jx.forEach((t=>t.shape.dispose())),this}setVisible(t){return super.setVisible(t),this.Jx.forEach((i=>i.shape.setVisible(t&&i.hasData))),this}ip(t){return super.ip(t),this.Jx.forEach((i=>i.shape.ip(t))),this}ii(){return this.GV.max.x}ti(){return this.GV.min.x}ei(){return Math.max(this.Jx[0].shape.ei(),this.Jx[1].shape.ei())}si(){return Math.min(this.Jx[0].shape.si(),this.Jx[1].shape.si())}rp(){return this.GV.max.z}np(){return this.GV.min.z}Yo(){return 0}Xo(){return 0}op(){return 0}dn(t){return super.dn(t),this.Jx.forEach((i=>i.shape.dn(t))),this}}class Fv extends nv{constructor(t,i,s,e){super(t,i,s),this.iN=45,this.sN=.1,this.eN=100,this._V=n(0,0,1),this.hN=n(0,0,-1),this.rN=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],this.Zy=new ic,this.Jt=e}MS(){const{cellIndex:t,cellSpan:i,cellsAmount:s}=this.Jt,e=i.x/s.x,h=i.y/s.y,r=t.x/s.x,n=t.y/s.y,o=this.vs.xi();return{x:r*o.x,y:n*o.y,width:e*o.x,height:h*o.y}}setCameraLocation(t){return this._V=t,this}getCameraLocation(){return this._V}setCameraDirection(t){return this.hN=_r.normalize(t),this}getCameraDirection(){return this.hN}setLightLocation(t){return this.wV=t,this}getLightLocation(){return this.wV}nN(){return n(this.rN[0],this.rN[1],this.rN[2])}oN(){return n(this.rN[4],this.rN[5],this.rN[6])}}class Pv extends Fv{constructor(t,i,s,e){super(t,i,s,e),this.PB=new Ep,this.aN=!0,this.aE=t,this.gl=t.lE(),this.sV=this.qz,this.uN=this.vs.Zr((()=>{this.aN=!0})),this.lN=e.Dt((()=>{this.aN=!0}))}gO(t){const i=t.ti(),s=t.si(),e=t.np(),h=t.ii(),r=t.ei(),n=t.rp();if(i===wr||h===Ar||s===wr||r===Ar||e===wr||n===Ar)return kr;const o=t.Yo(),a=t.Xo(),u=t.op(),l=Math.abs(t.Sn.$y(o)*t.Jt.x.jt()),c=Math.abs(t.Sn.$y(a)*t.Jt.y.jt()),f=Math.abs(t.Sn.$y(u)*t.Jt.z.jt()),d=i-l,g=h+l,m=s-c,y=r+c,p=e-f,S=n+f;let v;return[{x:d,y:m,z:p},{x:g,y:m,z:p},{x:d,y:y,z:p},{x:g,y:y,z:p},{x:d,y:m,z:S},{x:g,y:m,z:S},{x:d,y:y,z:S},{x:g,y:y,z:S}].map((i=>t.Sn.Yy(i))).forEach((t=>{if(!t)return;const i={min:t,max:t};v=v?Hr(v,{min:t,max:t}):i})),v||kr}eV(t){const i=Array.from(this.sV.values());for(let s=0;s<i.length;s+=1){const e=i[s];if(e.yE===t)return{entity:e,index:s}}}Yy(t){if(this.cN(),this.fN(),!this.MV)return;const i=this.PB.AO(),s=n(i[0],i[1],i[2]),h=this.PB.wO(),r=n(h[0],h[1],h[2]),o=_r.divideVec(_r.subtractVec(t,s),r),a=this.MV,u=Fy.multiply(a,[o.x,o.y,o.z,1]),l=e(u[0]/u[3],u[1]/u[3]),c=this.vs.xi();return{x:.5*(1+l.x)*c.x,y:.5*(1+l.y)*c.y}}dN(t){const i=this.PB.AO(),s=this.PB.wO(),e=_r.divideVec(_r.subtractVec(t,{x:i[0],y:i[1],z:i[2]}),{x:s[0],y:s[1],z:s[2]});return{...t,x:e.x,y:e.y,z:e.z}}gN(t){const i=this.PB.AO(),s=this.PB.wO(),e=_r.addVec(_r.multiplyVec(t,{x:s[0],y:s[1],z:s[2]}),{x:i[0],y:i[1],z:i[2]});return{...t,x:e.x,y:e.y,z:e.z}}$y(t){return t/1e3}EV(){return.001}_e(){const t=this._V,i=this.wV,s=this.Jt.x.o||this.Jt.y.o||this.Jt.z.o;if(!i)throw gr(0,(()=>mr()));const{viewProjectionMatrix:e}=this.cN();this.fN();const h=[t.x,t.y,t.z],r=[i.x,i.y,i.z];return this.qz.forEach((t=>{t.MV=e,t._V=h,t.wV=r,t._e(s)})),this}cN(){if(!this.aN&&this.MV)return{viewProjectionMatrix:this.MV};const t=this.MS(),i=t.width/t.height;this.mN=Fy.projectionPerspective(this.iN,i,this.sN,this.eN);const s=this._V;this.rN[12]=s.x,this.rN[13]=s.y,this.rN[14]=s.z;const e=this.hN,h=n(0,1,0),r=_r.multiply(e,-1),o=_r.normalize(_r.cross(h,r)),a=_r.normalize(_r.cross(r,o));this.rN[0]=o.x,this.rN[1]=o.y,this.rN[2]=o.z,this.rN[4]=a.x,this.rN[5]=a.y,this.rN[6]=a.z,this.rN[8]=r.x,this.rN[9]=r.y,this.rN[10]=r.z,this.yN=Fy.inverse(this.rN);const{cellIndex:u,cellSpan:l,cellsAmount:c}=this.Jt,f=l.x/c.x,d=l.y/c.y,g=(u.x+l.x/2)/c.x,m=(u.y+l.y/2)/c.y,y=Fy.multiply(Fy.translation(mf(-1,1,g),mf(-1,1,m),0),Fy.scaling(f,d,1));return this.MV=Fy.multiply(y,Fy.multiply(this.mN,this.yN)),this.pN=Fy.inverse(this.MV),this.aN=!1,{viewProjectionMatrix:this.MV}}fN(){this.PB.iE(this.Jt.x),this.PB.sE(this.Jt.y),this.PB.eE(this.Jt.z)}BD(t,i){const s=this.gl.TB(),e=this.MS(),h={x:e.x*s*i,y:e.y*s*i,width:e.width*s*i,height:e.height*s*i};return this.gl.dO(h.x,h.y,h.width,h.height),this.qz.forEach((i=>{i.getVisible()&&(this.gl.uO(i.cV),1!==t&&this.gl.sp(i.qy),(1!==t||i.getMouseInteractions())&&i.BD(t))})),this.gl.uO("disabled"),this.gl.sp(!1),this.gl.lO(!1),this}setCameraLocation(t){return this._V.x===t.x&&this._V.y===t.y&&this._V.z===t.z||(this.aN=!0),super.setCameraLocation(t),this}setCameraDirection(t){return this.hN.x===t.x&&this.hN.y===t.y&&this.hN.z===t.z||(this.aN=!0),super.setCameraDirection(t),this}Pt(){super.Pt(),this.vs.Kr(this.uN),this.Jt.Bt(this.lN)}pp(t){const i=this.aE.hV();return this.Jz(new kv(this,this.Qz,[],i,this.aE.rV(i),t))}Iy(t){const i=this.aE.hV();return this.Jz(new _v(this,this.Qz,t,i,this.aE.rV(i)))}lp(){const t=this.aE.hV();return this.Jz(new pv(this,this.Qz,[],t,this.aE.rV(t)))}Jg(){const t=this.aE.hV();return this.Jz(new bv(this,this.Qz,[],t,this.aE.rV(t)))}nS(t){const i=this.aE.hV();return this.Jz(new Tv(this,this.Qz,[],t,i,this.aE.rV(i)))}dS(t){const i=this.aE.hV();return this.Jz(new Iv(this,this.Qz,[],t,i,this.aE.rV(i)))}}const Dv=(t,i,s,e,h)=>{const{range:r}=s,n={row:{...r.row},column:{...r.column}};if(n.row.end+=1,n.column.end+=1,i){n.row.end+=1,n.column.end+=1;const i=Ch(t,n),[r,o,a,u,l]=e.pixelated(i.sliced,i.rows*i.columns,h);s.vbo=r,s.ibo=o,s.length=a,s.lengthWireframe=u,s.boundary=l}else{const i=Ch(t,n),[r,o,a,u,l]=e.nonPixelated(i.sliced,i.rows*i.columns,h);s.vbo=r,s.ibo=o,s.length=a,s.lengthWireframe=u,s.boundary=l}},Bv={pixelated:(t,i)=>{const s=t.length,e=i/s,r=s-1,n=e-1,o=r*n*6,u=Array(r*n*4*2),l=Array(o),c=a(h(wr,wr),h(Ar,Ar));let f=0,d=1,g=2,m=3,y=0,p=0;for(let i=0;i<s;i+=1)for(let s=0;s<e;s+=1){const e=t[i][s];if(c.min.x=Math.min(c.min.x,e.x),c.min.y=Math.min(c.min.y,e.y),c.max.x=Math.max(c.max.x,e.x),c.max.y=Math.max(c.max.y,e.y),i<r&&s<n){const e=t[i][s],h=t[i+1][s],r=t[i][s+1],n=t[i+1][s+1];u[y+0]=e.x,u[y+1]=e.y,u[y+2]=h.x,u[y+3]=h.y,u[y+4]=r.x,u[y+5]=r.y,u[y+6]=n.x,u[y+7]=n.y,y+=8,l[p+0]=f,l[p+1]=d,l[p+2]=g,p+=3,l[p+0]=g,l[p+1]=m,l[p+2]=d,p+=3,f+=4,d+=4,g+=4,m+=4}}const S=l.length;for(let t=0;t<n;t+=1){const i=4*(0*n+t);l[p+0]=i+0,l[p+1]=i+2,p+=2}for(let t=0;t<r;t+=1){const i=4*(t*n+(n-1));l[p+0]=i+2,l[p+1]=i+3,p+=2}const v=l.length;return[u,new Uint16Array(l),S,v,c]},nonPixelated:(t,i)=>{const s=t.length,e=i/s,r=s-1,n=e-1,o=Array(2*i),u=Array(r*n*6),l=a(h(wr,wr),h(Ar,Ar));let c=0;for(let i=0;i<s;i+=1)for(let s=0;s<e;s+=1){const e=t[i][s];o[c+0]=e.x,o[c+1]=e.y,c+=2,l.min.x=Math.min(l.min.x,e.x),l.min.y=Math.min(l.min.y,e.y),l.max.x=Math.max(l.max.x,e.x),l.max.y=Math.max(l.max.y,e.y)}let f=0;for(let t=0;t<r;t+=1)for(let i=0;i<n;i+=1)u[f+0]=t*e+i,u[f+1]=t*e+i+1,u[f+2]=(t+1)*e+i,f+=3,u[f+0]=t*e+i+1,u[f+1]=(t+1)*e+i+1,u[f+2]=(t+1)*e+i,f+=3;const d=u.length;for(let t=0;t<r;t+=1){const i=0,s=n-1;u[f+0]=t*e+i,u[f+1]=(t+1)*e+i,u[f+2]=t*e+s+1,u[f+3]=(t+1)*e+s+1,f+=4}const g=u.length;return[o,new Uint16Array(u),d,g,l]},verticesPerPixelatedCell:4},Ov=(t,i,s,e)=>{const{range:h}=s,r={row:{...h.row},column:{...h.column}};r.row.end+=1,r.column.end+=1;const n=Ch(t,r);s.intensities=i?((t,i,s)=>{const e=t.length,h=i/e,r=new Float32Array(i*s);for(let i=0,n=0;i<e;i+=1)for(let e=0;e<h;e+=1){const{intensity:h}=t[i][e];for(let t=0;t<s;t+=1)r[n]=h,n+=1}return r})(n.sliced,n.rows*n.columns,e.verticesPerPixelatedCell):((t,i)=>{const s=new Float32Array(i),e=t.length,h=i/e;for(let i=0,r=0;i<e;i+=1)for(let e=0;e<h;e+=1)s[r]=t[i][e].intensity,r+=1;return s})(n.sliced,n.rows*n.columns)},Lv=(t,i,s,e,h)=>{const{range:r}=e,n={row:{...r.row},column:{...r.column}};n.row.end+=1,n.column.end+=1;const o=Ch(t,n);e.colors=s?((t,i,s,e)=>{const h=t.length,r=i/h,n=new Float32Array(4*i*e);for(let i=0,o=0;i<h;i+=1)for(let h=0;h<r;h+=1){const{color:r}=t[i][h];for(let t=0;t<e;t+=1)r?(n[o+0]=r.r,n[o+1]=r.g,n[o+2]=r.b,n[o+3]=r.a,o+=4):(n[o+0]=s.r,n[o+1]=s.g,n[o+2]=s.b,n[o+3]=s.a,o+=4)}return n})(o.sliced,o.rows*o.columns,i,h.verticesPerPixelatedCell):((t,i,s)=>{const e=new Float32Array(4*i),h=t.length,r=i/h;for(let i=0,n=0;i<h;i+=1)for(let h=0;h<r;h+=1){const{color:r}=t[i][h];r?(e[n+0]=r.r,e[n+1]=r.g,e[n+2]=r.b,e[n+3]=r.a,n+=4):(e[n+0]=s.r,e[n+1]=s.g,e[n+2]=s.b,e[n+3]=s.a,n+=4)}return e})(o.sliced,o.rows*o.columns,i)};class Ev extends ha{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h),this.SN="grid",this.PB=new Lp,this.vN=[],this.aE=t,this.uE=i,this.yE=r,this.pE=n,this.OD=t.lE()}_e(){const t=this.kn(),i=this.Jr.M();if(this.Cn()&&this.vu&&this.pu){const s=this.OD,e=this._n;this.PB.CO(this.Jt);const h=this.Jt.qi()||t;this.TM&&!h||(this.TM=this.Jt.Qi());const r=this.nu(),n=t||this.iu||r;if(t||n){if(r){const{y:t,x:i}=this.qa.M(),s=this.su?101:201;this.bN=((t,i,s=200)=>{const e=s-1;t<=1&&(t+=1),i<=1&&(i+=1);const h=Math.ceil((t-1)/e),r=Math.ceil((i-1)/e),n=Array.from(Array(h)).map((()=>Array(r)));for(let s=0,o=0,a=0,u=t-1;s<h;s+=1){const t=Math.min(e,u);u-=t,a+=t;for(let t=0,h=0,u=0,l=i-1;t<r;t+=1){const i=Math.min(e,l);l-=i,u+=i,n[s][t]={row:{start:o,end:a},column:{start:h,end:u}},h=u}o=a}return{tiles:n,tilesCount:{x:r,y:h}}})(t,i,s),this.xN=(({tiles:t,tilesCount:{x:i,y:s}})=>{const e=Array(s*i);for(let h=0,r=0;h<s;h+=1)for(let s=0;s<i;s+=1)e[r]={range:t[h][s]},r+=1;return e})(this.bN),this.MN(),this.vN=this.xN.map((()=>({vbo:void 0,ibo:void 0,colors:void 0,intensities:void 0,length:0}))),this.qa.o=!1,this.Ja.o=!1}const t=this.xN,i=this.vN,e=this.pu;if(n){this.vo=kr;for(const i of t)Dv(e,this.su,i,Bv,void 0);let h=0;for(const e of i){e.vbo&&s.gl.deleteBuffer(e.vbo),e.ibo&&s.gl.deleteBuffer(e.ibo);const i=t[h];h+=1,e.vbo=s.mO(i.vbo),e.ibo=s.KO(i.ibo),e.length=i.length,e.lengthWireframe=i.lengthWireframe,this.vo=Hr(this.vo,i.boundary)}this.iu=!1}}if(this.wn()){e instanceof Le||(this.aE.vL.hn(this.MR),this.MR=void 0),this.BB=e===Ie?void 0:s.pO(Fp["2D"],Fp.VertexLocation({translation:"grid"===this.SN?{dataType:"uniform",sizeUnit:"axis"}:void 0,axisWorldTranslation:Np(this.Jt),normalSource:void 0}),e instanceof De?Fp.Color({dataType:"uniform"}):e instanceof Be?Fp.Color({dataType:"attribute"}):e instanceof Le?Fp.Color({dataType:["lookup",e.getLookUpProperty()]}):e instanceof Ke||e instanceof Je?Fp.Color({dataType:["gradient",e]}):void 0);const t=this.eu;this._N=t instanceof De?s.pO(Fp["2D"],Fp.Color({dataType:"uniform"}),Fp.VertexLocation({translation:"grid"===this.SN?{dataType:"uniform",sizeUnit:"axis"}:void 0,axisWorldTranslation:Np(this.Jt),normalSource:void 0})):void 0,this.Tn(e),this.wu=this.eu}const o=this.xN,a=this.vN,u=this.vu;if(e instanceof Le&&e.lut.isValid){if(this.tu){for(const t of o)Ov(u,this.su,t,Bv);let t=0;for(const i of a){i&&i.intensities&&s.gl.deleteBuffer(i.intensities);const e=o[t];t+=1,i.intensities=s.qO(e.intensities)}this.tu=!1}const t=e.getPalette();this.xR=this.aE.tR(t,this.MR,this.xR),this.MR=t}else if(e instanceof Be&&(this.wN&&s.OO(this.wN),this.Qa)){for(const t of o)Lv(u,e.color,this.su,t,Bv);let t=0;for(const i of a){i.colors&&s.gl.deleteBuffer(i.colors);const e=o[t];t+=1,i.colors=s.qO(e.colors)}this.Qa=!1}e instanceof Ke?this.wE=Gp(this.fn(),this.Jt,e.getPosition(),e.getExtent(),e.getShape(),this.OD.TB()):e instanceof Je?this.AE=Hp(this.fn(),this.Jt,e.getAngle(!0),this.OD.TB()):(this.wE=void 0,this.AE=void 0),this.EE=i?this.EE||this.OD.pO(Fp["2D"],Fp.Color({dataType:"uniform"}),Fp.VertexLocation({translation:"grid"===this.SN?{dataType:"uniform",sizeUnit:"axis"}:void 0,axisWorldTranslation:Np(this.Jt),normalSource:void 0})):void 0}return this}BD(t){const i=this.vu&&this.pu;if(this.Cn()&&i){const i=1===t?this.EE:this.BB;if(i){const s=this._n,e=s instanceof De&&s,h=s instanceof Le&&s,r=s instanceof Be&&s,n=s instanceof Ke&&s,o=s instanceof Je&&s;this.OD.SO(i,((s,a,u)=>{let l=!1;this.OD.wB(i).bO(s("uScale"),this.PB.wO()).bO(s("uDisp"),this.PB.AO()).MO(s("uIsHighlighted"),1===t||2===t?0:this.en)._O(s("uHighlightColorOffset"),this.an).MO(s("uRenderEffectMask"),2===t?1:0),"grid"===this.SN&&this.OD.bO(s("uTranslationAxis"),[this.nt.x,this.nt.y]),1===t?this.OD._O(s("uColor"),this.pE):e?this.OD._O(s("uColor"),e.getColor()):h&&h.lut.isValid&&this.xR?this.OD.MO(s("uLookupMin"),h.lut.min).MO(s("uLookupMax"),h.lut.max).xO(s("uLookupTexture"),this.xR.texture,0).MO(s("uLookupTextureHeightPx"),this.xR.textureHeight):n?this.OD.IL(u,this.wE,n):o&&this.OD.FL(u,this.AE,o);for(const{vbo:i,ibo:s,colors:e,intensities:n,length:o}of this.vN)this.OD.JO(a("aPos"),i).hL(s),1!==t&&(h&&"value"===h.getLookUpProperty()&&this.OD.eL(a("aLookupValue"),n),r&&this.OD.sL(a("aColor"),e)),this.OD.rL(o),l=!0;return l}))}const s=1===t?void 0:this._N;if(s){const i=this.eu,e=i instanceof De&&i;this.OD.SO(s,((i,h,r)=>{let n=!1;this.OD.wB(s).bO(i("uScale"),this.PB.wO()).bO(i("uDisp"),this.PB.AO()).MO(i("uIsHighlighted"),1===t||2===t?0:this.en)._O(i("uHighlightColorOffset"),this.an).MO(i("uRenderEffectMask"),2===t?1:0),"grid"===this.SN&&this.OD.bO(i("uTranslationAxis"),[this.nt.x,this.nt.y]),e&&this.OD._O(i("uColor"),e.getColor());for(const{vbo:t,ibo:i,lengthWireframe:s}of this.vN)this.OD.JO(h("aPos"),t).hL(i).rL(s,this.OD.gl.LINES),n=!0;return n}))}}return this}AN(t,i){if(this.Jr.M()&&this.vo&&this.pu){const r="grid"===this.SN?this.nt:{x:0,y:0},n=tn(oh({x:t,y:i},this.vs.Jt,this.Jt),r);if(!(s=n,e=this.vo.min,h=this.vo.max,s.x>h.x||s.y>h.y||s.x<e.x||s.y<e.y||this._n===Ie))for(let t=0;t<this.pu.length-1;t+=1)for(let i=0;i<this.pu[t].length-1;i+=1){const s=this.pu[t][i],e=this.pu[t][i+1],h=this.pu[t+1][i],r=this.pu[t+1][i+1];if($r(n,s,e,h,r)&&(Ur(n,s,e,h)||Ur(n,e,h,r)))return!0}}var s,e,h;return!1}Iv(t){const i="grid"===this.SN?this.nt:{x:0,y:0},s=t;let h=[0,0],r=e(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);const n=this.pu,o=this.vu,a=this.su;let u=0;if(a&&(u=-1),n&&o){for(let t=0;t<n.length+u;t+=1)for(let e=0;e<n[t].length+u;e+=1)if(a){const o=n[t][e],a=n[t][e+1],u=n[t+1][e],l=n[t+1][e+1],c=Qr(jr(o,a,u,l),i);Math.hypot(c.x-s.x,c.y-s.y)<Math.hypot(r.x-s.x,r.y-s.y)&&(h=[t,e],r=c)}else Math.hypot(n[t][e].x+i.x-s.x,n[t][e].y+i.y-s.y)<Math.hypot(n[h[0]][h[1]].x+i.x-s.x,n[h[0]][h[1]].y+i.y-s.y)&&(h=[t,e]);if(h){o[h[0]]||(h[0]=o.length-1),o[h[0]][h[1]]||(h[1]=o[h[0]].length-1);let t={x:0,y:0};const s=o[h[0]][h[1]].intensity;return a?t={x:r.x,y:r.y}:(t.x=n[h[0]][h[1]].x+i.x,t.y=n[h[0]][h[1]].y+i.y),[t,s]}}}GC(t){const i=t,s=this.pu,h=this.vu,r=this.su;{const t=[],h=oh(i,this.Jt,this.vs.Jt);if(s&&!this.AN(h.x,h.y)){for(let i=0;i<s.length-1;i+=1)t.push([s[i][0],s[i+1][0]]),t.push([s[i][s[i].length-1],s[i+1][s[i].length-1]]);for(let i=0;i<s[0].length-1;i+=1)t.push([s[0][i],s[0][i+1]]),t.push([s[s[0].length-1][i],s[s[0].length-1][i+1]]);let h=Number.MAX_SAFE_INTEGER,r=e(0,0);for(let s=0;s<t.length;s+=1){const e=Rr(i,t[s][0],t[s][1]);e[0]<h&&(h=e[0],r=e[1])}i.x=r.x,i.y=r.y}}let n=[0,0];if(s&&h){for(let i=0;i<s.length+-1;i+=1)for(let e=0;e<s[i].length+-1;e+=1){const h=s[i][e],r=s[i][e+1],o=s[i+1][e],a=s[i+1][e+1];(Ur(t,h,r,o)||Ur(t,r,o,a))&&(n=[i,e])}if(n){let t;h[n[0]]||(n[0]=h.length-1),h[n[0]][n[1]]||(n[1]=h[n[0]].length-1);let e={x:0,y:0};if(e=i,r)t=h[n[0]][n[1]].intensity;else{const e={point:s[n[0]][n[1]],value:h[n[0]][n[1]].intensity},r={point:s[n[0]+1][n[1]],value:h[n[0]+1][n[1]].intensity},o={point:s[n[0]][n[1]+1],value:h[n[0]][n[1]+1].intensity},a={point:s[n[0]+1][n[1]+1],value:h[n[0]+1][n[1]+1].intensity};t=yf(i,e,r,o,a)}return[e,t]}}}MN(){const t=this.OD;if(this.vN.length>0){for(const i of this.vN){const{vbo:s,ibo:e,colors:h,intensities:r}=i||{};s&&(t.TO(s),i.vbo=void 0),e&&(t.TO(e),i.ibo=void 0),h&&(t.TO(h),i.colors=void 0),r&&(t.TO(r),i.intensities=void 0)}this.vN.length=0}}gB(){return this.MN(),this.wN&&(this.OD.OO(this.wN),this.wN=void 0),this.aE.vL.hn(this.MR),this.xR=void 0,this}fu(t,i){return this.SN="mesh",super.fu(t,i)}ii(){return"grid"===this.SN?this.vo.max.x+this.nt.x:this.vo.max.x}ti(){return"grid"===this.SN?this.vo.min.x+this.nt.x:this.vo.min.x}ei(){return"grid"===this.SN?this.vo.max.y+this.nt.y:this.vo.max.y}si(){return"grid"===this.SN?this.vo.min.y+this.nt.y:this.vo.min.y}Yo(){return 0}Xo(){return 0}}class Rv extends go{constructor(t,i,s=Bp){var e,r,n;super(t,i),this.Et=h(1,1),this.kN=!1,this.CN=0,this.TN=!0,this.IN=0,this.PV=8388608,this.Ss=(t=!1)=>(t&&(this.kN=!0),void 0===this.xh&&(this.xh=yh.requestAnimationFrame(this.FN)),this),this.FN=t=>{const i=t-this.CN;i>=this.br||-1===this.br?(this.CN=t,this.kN=!1,this.Mh&&this.Mh(),this.xh=void 0,-1!==this.br&&(this.xh=this.kN?yh.requestAnimationFrame(this.FN):void 0),this.wr._e(i),this.Oh(),this.Lh(),this._h&&this._h()):this.xh=yh.requestAnimationFrame(this.FN)},this.PN=new Map,this.lE=()=>this.OD,this.DN=()=>{var t,i,s;const e=this.sr(),h=this.TN,r=yh.performance.now(),n=null===(t=this.ON)||void 0===t?void 0:t.LN.reduce(((t,i)=>t?i.EN&&t.EN&&i.EN>t.EN?i:t:i),void 0),o=null==n?void 0:n.EN,a=null===(i=this.Zh)||void 0===i?void 0:i.timeStamp,u=null===(s=this.Ur)||void 0===s?void 0:s.timeStamp;return h?(this.Ss(!0),!1):void 0===n||(void 0===n||!n.RN)&&(void 0!==u&&void 0!==o&&u>o||(void 0!==o&&void 0===e?r-o>=1e3:!(void 0!==o&&void 0!==a&&r-a>=2e3)||r-o>=1e3))},this.zN=()=>{var t,i;this.VN=void 0;const s=null===(i=null===(t=this.ON)||void 0===t?void 0:t.NN)||void 0===i?void 0:i.GN;void 0===s||s>=this.IN||this.HN()},this.Lh=()=>{const t=this.OD.gl,i=yh.performance.now(),s=this.Et,e=s.x>0&&s.y>0;if(this.Ph.o&&this.OD.cL(this.Ph.M()),this.OD.Oo(),t.resize&&e&&t.resize(s.x*this.OD.TB(),s.y*this.OD.TB()),this.OD.fO(0,0,s.x*this.OD.TB(),s.y*this.OD.TB()),this.WN.width=s.x*this.OD.TB(),this.WN.height=s.y*this.OD.TB(),e)for(const t of this.ph.values())t.BD(0,1);return this.hr.pr&&e&&(this.VN&&(yh.clearTimeout(this.VN),this.VN=void 0),this.DN()?this.HN():this.VN=yh.setTimeout(this.zN,500)),this.Rt(),this.mh(),this.Nh&&this.Vh(this.Nh),this.TN=!1,this.IN=i,this},this.Oh=()=>{const t=this.Et;if(0===t.x||0===t.y)return this;this.Ir.Gt(t);for(const t of this.ph.values())t._e();return this.Rt(),this},this.UN=1,this.WN=yh.document.createElement("canvas");const o={preserveDrawingBuffer:!0,antialias:t?t.antialias:void 0,alpha:!0,lineAntialias:!t||(!0===t.lineAntiAlias||!1===t.lineAntiAlias?t.lineAntiAlias:!1!==t.antialias)};let a;if("webgl1"!==(null===(e=null==t?void 0:t.webgl)||void 0===e?void 0:e.version)){const t=this.WN.getContext("webgl2",o);t&&(a=new s(this,this.hr,{type:"webgl2",ctx:t,antialias:o.antialias,lineAntialias:o.lineAntialias},this.Hs.isDark))}if(!a&&"webgl2"!==(null===(r=null==t?void 0:t.webgl)||void 0===r?void 0:r.version)){const t=this.WN.getContext("webgl",o)||this.WN.getContext("experimental-webgl",o);a=new s(this,this.hr,{type:"webgl1",ctx:t,antialias:o.antialias,lineAntialias:o.lineAntialias},this.Hs.isDark)}if(!a)throw new lh("No WebGL context available."+((null===(n=null==t?void 0:t.webgl)||void 0===n?void 0:n.version)?`\nSelected explicit target: ${t.webgl.version}`:""));this.OD=a,this.vL=Oy(this.OD.gl);const u=this.OD.zO;if(u.length>0){const t=yh.document.createElement("div");t.innerText="LightningChart JS: Some features might not work properly, due to missing WebGL features.",t.style.cssText="position:absolute;top:0;background:red;width:100%;padding:10px;text-align:center;color:white;z-index:1;";const i=yh.document.createElement("button");i.innerText="X",i.addEventListener("click",(()=>{t.parentElement&&t.parentElement.removeChild(t)})),this.rh.appendChild(t),t.appendChild(i),!1!==this.hr.mr&&yh.console.warn("LightningChart JS - Following WebGL extensions could not be loaded:",u.join(", "))}let l=1;if(t&&t.devicePixelRatio)l=!0===t.devicePixelRatio?yh.devicePixelRatio||1:t.devicePixelRatio||1;else{const t=yh.document.head.querySelector('meta[name="viewport"]');t&&t.content.includes("width=device-width")&&(l=yh.devicePixelRatio||1)}this.OD.AL(l),this.WN.style.position="absolute",this.WN.style.top="0",this.WN.style.left="0",this.WN.style.right="0",this.WN.style.bottom="0",this.WN.style.width="100%",this.WN.style.height="100%",this.WN.style.boxSizing="content-box",this.rh.appendChild(this.WN);const c=t?t.width:void 0,f=t?t.height:void 0;this.kr=this.jN(c),this.Tr=this.jN(f),this.$N(this.kr,this.Tr),this.jV=this.tI("engine offscreen",1e6),this.YN=this.tI("engine bg",0);const d="function"==typeof this.Hs.lcjsBackgroundFillStyle?this.Hs.lcjsBackgroundFillStyle(this.hr.gr):this.Hs.lcjsBackgroundFillStyle;this.Ir=this.YN.Zc(this.Jt).Js(d).Fr(this.Hs.lcjsBackgroundStrokeStyle).setMouseInteractions(!1).Qn({x:0,y:0});const g=this.tI("engine effects",200001).nV(this.Hs.effect);this.El=g,this.Ih(),this.mh(),this.pm=oo(this),this.Sm={Hs:this.Hs,wr:this.wr,Ss:t=>this.Ss(t),sr:()=>this.sr(),NP:t=>this.NP(t),hr:this.hr,er:t=>this.er(t),El:this.El};const m=()=>{this.Pt()};yh.addEventListener("unload",m),this.wh.push((()=>{yh.removeEventListener("unload",m)}))}get XN(){return this.ph}yh(t,i){let s=this.PN.get(t);if(!s){const i=this.OD.PL(t),e=new Set,h=t=>{e.add(t)},r=s=>{e.delete(s)&&0===e.size&&(i.unbindResources(),this.PN.delete(t))},n=[];s={imageTexture:i,instances:e,handleNewInstance:h,handleInstanceDisposed:r,sharedEngineReference:{GP:()=>i.jB,HP:t=>{i.jB?t():n.push(t)}}},this.PN.set(t,s),i.wB(this),i.JB((()=>{n.forEach((t=>{t()})),n.length=0}))}const e=new dy(t,s.handleNewInstance,s.handleInstanceDisposed,i);return s.handleNewInstance(e),e}NP(t){const i=Array.from(this.PN.values()).find((i=>i.instances.has(t)));if(!i)throw gr(0,(()=>new Error("LightningChart JS error, attempted to use Icon that is disposed. Please check that you are not disposing an Icon that is still in use, or attempting to use a previously disposed Icon!")));return i.sharedEngineReference}Gh(t,i){var s,e;const h=null===(s=this.ON)||void 0===s?void 0:s.NN;if(!h)return;const r=this.uh(i.x,i.y),n=Math.round(r.x*this.OD.TB()),o=Math.round(r.y*this.OD.TB());return null===(e=[[-1,-1],[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[0,0]].map((t=>this.ZN(h,n+t[0]/h.KN,o+t[1]/h.KN))).reduce(((t,i)=>{if(void 0===i)return t||void 0;const s=1e6*i.layerIndex+i.entityIndex;return!t||s>t.zIndexForComparison?{zIndexForComparison:s,entity:i.entity}:t}),void 0))||void 0===e?void 0:e.entity}ZN(t,i,s){const e=Math.round(i*t.KN),h=Math.round(s*t.KN);if(e<0||e>=t.Et.x||h<0||h>=t.Et.y)return;const r=4*(e+h*t.Et.x),n=t.qN[r+0],o=t.qN[r+1],a=t.qN[r+2],u=t.qN[r+3];return void 0!==n&&void 0!==o&&void 0!==a&&void 0!==u?this.JN(n,o,a,u):void 0}fh(t,i){return(t=>{const i=t.split(",")[0].split(":")[1].split(";")[0],s=yh.atob(t.split(",")[1]),e=new Uint8Array(s.length);for(let t=0;t<s.length;t+=1)e[t]=s.charCodeAt(t);return new yh.Blob([e.buffer],{type:i})})(this.WN.toDataURL(t,i))}dh(t,i,s=!1){this.Ih(e(Math.round(t),Math.round(i))),this.Bh();const h=this.OD.gl.drawingBufferWidth,r=this.OD.gl.drawingBufferHeight,n=new Uint8Array(h*r*4);if(this.OD.gl.readPixels(0,0,h,r,this.OD.gl.RGBA,this.OD.gl.UNSIGNED_BYTE,n),!s){const t=r/2|0,i=4*h,s=new Uint8Array(4*h);for(let e=0;e<t;e+=1){const t=e*i,h=(r-e-1)*i;s.set(n.subarray(t,t+i)),n.copyWithin(t,h,h+i),n.set(s,h)}}return n}fD(t){return void 0!==this.kr?this.kr[0]=t:this.kr=[t,void 0],this.rh.style.minWidth=`${this.kr[0]}px`,this.Ih(),this}gD(t){return void 0!==this.kr?this.kr[1]=t:this.kr=[void 0,t],this.rh.style.maxWidth=`${this.kr[1]}px`,this.Ih(),this}yD(t){return void 0!==this.Tr?this.Tr[0]=t:this.Tr=[t,void 0],this.rh.style.minHeight=`${this.Tr[0]}px`,this.Ih(),this}SD(t){return void 0!==this.Tr?this.Tr[1]=t:this.Tr=[void 0,t],this.rh.style.maxHeight=`${this.Tr[1]}px`,this.Ih(),this}$N(t,i){return this.kr=t,this.Tr=i,this.rh.style.minWidth=`${this.kr[0]}px`,this.rh.style.maxWidth=`${this.kr[1]}px`,this.rh.style.minHeight=`${this.Tr[0]}px`,this.rh.style.maxHeight=`${this.Tr[1]}px`,this.Ih(),this}tI(t,i=this.Lr()){const s=this.Or(i);if(s){if(gr(0,(()=>{})),!(s instanceof av))throw new Error("Unexpected Engine Layer error");return s}return this.Eh(new av(this,i,t))}eI(t,i,s){const e=this.Or(i);if(e){if(gr(0,(()=>{})),!(e instanceof Pv))throw new Error("Unexpected Engine Layer error");return e}return this.Eh(new Pv(this,i,t,s))}xi(){return this.Et}jN(t){return t instanceof Array||(t=[t,t]),t}Th(){return this.WN}HN(){var t;const i=this.OD.gl,s=yh.performance.now(),e=this.sr(),h=this.hr.yr,r={x:Math.ceil(this.Et.x*this.OD.TB()*h),y:Math.ceil(this.Et.y*this.OD.TB()*h)};this.ON||(this.ON={KN:h,QN:r,LN:[],NN:void 0});let n=this.ON.LN.find((t=>!t.RN)),o=!1;n||(o=!0,n={RN:!1,Et:r,tG:i.createTexture(),iG:this.OD.PO(),sG:this.OD.DO(),eG:new Uint8Array,EN:void 0},this.ON.LN.push(n));const a=n;(o||a.Et.x!==r.x||a.Et.y!==r.y)&&(i.bindTexture(i.TEXTURE_2D,a.tG),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,r.x,r.y,0,i.RGBA,i.UNSIGNED_BYTE,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i.bindFramebuffer(i.FRAMEBUFFER,a.iG),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,a.tG,0),i.bindRenderbuffer(i.RENDERBUFFER,a.sG),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,r.x,r.y),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,a.sG),a.eG=new Uint8Array(r.x*r.y*4),a.Et=r),a.RN=!0,a.EN=s,i.bindFramebuffer(i.FRAMEBUFFER,a.iG),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.clear(i.DEPTH_BUFFER_BIT),i.disable(i.BLEND),i.resize&&i.resize(r.x,r.y),this.OD.fO(0,0,r.x,r.y);for(const t of this.ph.values())t.BD(1,h);i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindTexture(i.TEXTURE_2D,null),i.bindRenderbuffer(i.RENDERBUFFER,null),i.enable(i.BLEND);const u=null===(t=this.OD.gl2)||void 0===t?void 0:t.ctx,l=()=>{if(this.ON){const t=this.ON.NN;if(t&&t.GN>s)return;this.ON.NN={GN:s,KN:h,Et:r,qN:a.eG,hG:e}}};u?this.OD.GL(u,a.iG,0,0,r.x,r.y,i.RGBA,i.UNSIGNED_BYTE,a.eG).then((()=>{this.Ye||(a.RN=!1,l())})).catch((t=>{this.Ye||(a.RN=!1,yh.console.warn("LightningChart JS mouse picking failed unexpectedly. This could mean that user interactions on charts are compromised.\nPlease report this issue to support@lightningchart.com"))})):(this.OD.HL(a.iG,0,0,r.x,r.y,i.RGBA,i.UNSIGNED_BYTE,a.eG),a.RN=!1,l())}Ih(t){const i=this.Et.x,s=this.Et.y,e=t||{x:this.rh.offsetWidth,y:this.rh.offsetHeight};0!==e.x&&0!==e.y&&(e.x===i&&e.y===s||(this.Et=e,this.Jt.x.Vt(0,e.x).Gt(e.x),this.Jt.y.Vt(0,e.y).Gt(e.y),this.wt.emit("resize",[this.Et.x,this.Et.y])))}Pt(){super.Pt(),this.VN&&(yh.clearTimeout(this.VN),this.VN=void 0),this.WN.width=1,this.WN.height=1,this.WN&&(this.rh.removeChild(this.WN),this.WN=void 0,this.rh=void 0),this.vL.$D(),Array.from(this.OD.EO.values()).forEach((t=>{t.gB()})),Array.from(this.OD.RO.values()).forEach((t=>{t.unbindResources()})),this.OD.RO.clear(),this.OD.LO.HD(),this.OD.xL.Pt(),this.OD.TO(this.OD.ML),this.OD.TO(this.OD._L),this.OD.EL&&(this.OD.TO(this.OD.EL.buffer),this.OD.EL=void 0),this.ON&&(this.ON.LN.forEach((t=>{this.OD.BO(t.sG),this.OD.OO(t.iG),this.OD.mB(t.tG)})),this.ON=void 0),this.OD.dL.forEach((t=>this.OD.TO(t))),this.PN.clear(),this.OD.OL(),this.OD.gl=void 0}tR(t,i,s){const e=this.vL;let h=s;if(e.jD(t))t!==i&&(e.hn(i),h=e.M(t),e.Bo(t));else{h={};const i={x:1,y:this.OD.dB};h.textureHeight=i.y;const s=rh.d2({scaleXYConstructor:In}).Gt(i);s.x.Vt(0,1),s.y.Vt(t.min,t.max);const r=new Ev(this,this.jV,s,(()=>{}),[],-1,xe);r.Js(new Be({color:t.color})),t.interpolate?r.S({columns:2,rows:t.length,start:{x:0,y:t.min},end:{x:1,y:t.max},pixelate:!1}).fu(((i,s,e)=>({x:e.x,y:t.steps[i].value}))).lu((i=>t.steps[i].color)):r.S({columns:1,rows:t.length,start:{x:0,y:t.min},end:{x:1,y:t.max},pixelate:!0}).fu(((i,e,h)=>({x:h.x,y:i<t.steps.length-1?t.steps[i].value:i===t.steps.length-1?t.steps[i].value-s.y.getPixelSize():t.steps[t.steps.length-1].value}))).lu((i=>t.steps[i].color)),h.texture=this.OD.kL(null,this.OD.gl.RGBA,!1,!t.interpolate,i,!1),this.OD.bL.BD((()=>{r._e(),r.BD(0)}),h.texture,i,void 0,this.Ph.M()),e.Bo({lut:t,textureInfo:h})}return h}hV(){const t=this.UN;return t>4294967295&&(console.warn("LightningChart JS picking ID overflow.\nThis is an unexpected error that could compromise user interactions on the chart.\nPlease report the issue to support@lightningchart.com!"),this.UN=1),this.UN+=1,t}rV(t){let i=t;const s=Math.floor(i/16777216);i-=16777216*s;const e=Math.floor(i/65536);i-=65536*e;const h=Math.floor(i/256);return i-=256*h,pe(s,e,h,i)}JN(t,i,s,e){if(0===t&&0===i&&0===s&&0===e)return;const h=16777216*t+65536*i+256*s+e;for(const t of this.XN.values()){const i=t.eV(h);if(i)return{entity:i.entity,entityIndex:i.index,layerIndex:t.Rh()}}}}var zv={exports:{}};!function(t,i){function s(t,i){if(!t)throw new Error(i||"Assertion failed")}function e(t,i){t.super_=i;var s=function(){};s.prototype=i.prototype,t.prototype=new s,t.prototype.constructor=t}function h(t,i,s){if(h.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==i&&"be"!==i||(s=i,i=10),this.qB(t||0,i||10,s||"be"))}var r;"object"==typeof t?t.exports=h:i.BN=h,h.BN=h,h.wordSize=26;try{r=(void 0).Buffer}catch(t){}function n(t,i,e){for(var h=0,r=Math.min(t.length,e),n=0,o=i;o<r;o++){var a,u=t.charCodeAt(o)-48;h<<=4,h|=a=u>=49&&u<=54?u-49+10:u>=17&&u<=22?u-17+10:u,n|=a}return s(!(240&n),"Invalid character in "+t),h}function o(t,i,e,h){for(var r=0,n=0,o=Math.min(t.length,e),a=i;a<o;a++){var u=t.charCodeAt(a)-48;r*=h,n=u>=49?u-49+10:u>=17?u-17+10:u,s(u>=0&&n<h,"Invalid character"),r+=n}return r}function a(t,i){t.words=i.words,t.length=i.length,t.negative=i.negative,t.red=i.red}if(h.isBN=function(t){return t instanceof h||null!==t&&"object"==typeof t&&t.constructor.wordSize===h.wordSize&&Array.isArray(t.words)},h.max=function(t,i){return t.cmp(i)>0?t:i},h.min=function(t,i){return t.cmp(i)<0?t:i},h.prototype.qB=function(t,i,e){if("number"==typeof t)return this.rG(t,i,e);if("object"==typeof t)return this.nG(t,i,e);"hex"===i&&(i=16),s(i===(0|i)&&i>=2&&i<=36);var h=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&h++,16===i?this.oG(t,h):this.aG(t,i,h),"-"===t[0]&&(this.negative=1),this.uG(),"le"===e&&this.nG(this.toArray(),i,e)},h.prototype.rG=function(t,i,e){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(s(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===e&&this.nG(this.toArray(),i,e)},h.prototype.nG=function(t,i,e){if(s("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var r,n,o=0;if("be"===e)for(h=t.length-1,r=0;h>=0;h-=3)n=t[h]|t[h-1]<<8|t[h-2]<<16,this.words[r]|=n<<o&67108863,this.words[r+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,r++);else if("le"===e)for(h=0,r=0;h<t.length;h+=3)n=t[h]|t[h+1]<<8|t[h+2]<<16,this.words[r]|=n<<o&67108863,this.words[r+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,r++);return this.uG()},h.prototype.oG=function(t,i){this.length=Math.ceil((t.length-i)/6),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var e,h,r=0;for(s=t.length-6,e=0;s>=i;s-=6)h=n(t,s,s+6),this.words[e]|=h<<r&67108863,this.words[e+1]|=h>>>26-r&4194303,(r+=24)>=26&&(r-=26,e++);s+6!==i&&(h=n(t,i,s+6),this.words[e]|=h<<r&67108863,this.words[e+1]|=h>>>26-r&4194303),this.uG()},h.prototype.aG=function(t,i,s){this.words=[0],this.length=1;for(var e=0,h=1;h<=67108863;h*=i)e++;e--,h=h/i|0;for(var r=t.length-s,n=r%e,a=Math.min(r,r-n)+s,u=0,l=s;l<a;l+=e)u=o(t,l,l+e,i),this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this.lG(u);if(0!==n){var c=1;for(u=o(t,l,t.length,i),l=0;l<n;l++)c*=i;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this.lG(u)}},h.prototype.copy=function(t){t.words=new Array(this.length);for(var i=0;i<this.length;i++)t.words[i]=this.words[i];t.length=this.length,t.negative=this.negative,t.red=this.red},h.prototype.cG=function(t){a(t,this)},h.prototype.clone=function(){var t=new h(null);return this.copy(t),t},h.prototype.fG=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},h.prototype.uG=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this.dG()},h.prototype.dG=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{h.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch(t){h.prototype.inspect=u}else h.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,i,s){s.negative=i.negative^t.negative;var e=t.length+i.length|0;s.length=e,e=e-1|0;var h=0|t.words[0],r=0|i.words[0],n=h*r,o=67108863&n,a=n/67108864|0;s.words[0]=o;for(var u=1;u<e;u++){for(var l=a>>>26,c=67108863&a,f=Math.min(u,i.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var g=u-d|0;l+=(n=(h=0|t.words[g])*(r=0|i.words[d])+c)/67108864|0,c=67108863&n}s.words[u]=0|c,a=0|l}return 0!==a?s.words[u]=0|a:s.length--,s.uG()}h.prototype.toString=function(t,i){var e;if(i=0|i||1,16===(t=t||10)||"hex"===t){e="";for(var h=0,r=0,n=0;n<this.length;n++){var o=this.words[n],a=(16777215&(o<<h|r)).toString(16);e=0!=(r=o>>>24-h&16777215)||n!==this.length-1?l[6-a.length]+a+e:a+e,(h+=2)>=26&&(h-=26,n--)}for(0!==r&&(e=r.toString(16)+e);e.length%i!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}if(t===(0|t)&&t>=2&&t<=36){var u=c[t],d=f[t];e="";var g=this.clone();for(g.negative=0;!g.isZero();){var m=g.modrn(d).toString(t);e=(g=g.idivn(d)).isZero()?m+e:l[u-m.length]+m+e}for(this.isZero()&&(e="0"+e);e.length%i!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}s(!1,"Base should be between 2 and 36")},h.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},h.prototype.toJSON=function(){return this.toString(16,2)},r&&(h.prototype.toBuffer=function(t,i){return this.toArrayLike(r,t,i)}),h.prototype.toArray=function(t,i){return this.toArrayLike(Array,t,i)},h.prototype.toArrayLike=function(t,i,e){this.uG();var h=this.byteLength(),r=e||Math.max(1,h);s(h<=r,"byte array longer than desired length"),s(r>0,"Requested array length <= 0");var n=function(t,i){return t.allocUnsafe?t.allocUnsafe(i):new t(i)}(t,r);return this["_toArrayLike"+("le"===i?"LE":"BE")](n,h),n},h.prototype.gG=function(t,i){for(var s=0,e=0,h=0,r=0;h<this.length;h++){var n=this.words[h]<<r|e;t[s++]=255&n,s<t.length&&(t[s++]=n>>8&255),s<t.length&&(t[s++]=n>>16&255),6===r?(s<t.length&&(t[s++]=n>>24&255),e=0,r=0):(e=n>>>24,r+=2)}if(s<t.length)for(t[s++]=e;s<t.length;)t[s++]=0},h.prototype.mG=function(t,i){for(var s=t.length-1,e=0,h=0,r=0;h<this.length;h++){var n=this.words[h]<<r|e;t[s--]=255&n,s>=0&&(t[s--]=n>>8&255),s>=0&&(t[s--]=n>>16&255),6===r?(s>=0&&(t[s--]=n>>24&255),e=0,r=0):(e=n>>>24,r+=2)}if(s>=0)for(t[s--]=e;s>=0;)t[s--]=0},Math.clz32?h.prototype.yG=function(t){return 32-Math.clz32(t)}:h.prototype.yG=function(t){var i=t,s=0;return i>=4096&&(s+=13,i>>>=13),i>=64&&(s+=7,i>>>=7),i>=8&&(s+=4,i>>>=4),i>=2&&(s+=2,i>>>=2),s+i},h.prototype.pG=function(t){if(0===t)return 26;var i=t,s=0;return 0==(8191&i)&&(s+=13,i>>>=13),0==(127&i)&&(s+=7,i>>>=7),0==(15&i)&&(s+=4,i>>>=4),0==(3&i)&&(s+=2,i>>>=2),0==(1&i)&&s++,s},h.prototype.bitLength=function(){var t=this.words[this.length-1],i=this.yG(t);return 26*(this.length-1)+i},h.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,i=0;i<this.length;i++){var s=this.pG(this.words[i]);if(t+=s,26!==s)break}return t},h.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},h.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},h.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},h.prototype.isNeg=function(){return 0!==this.negative},h.prototype.neg=function(){return this.clone().ineg()},h.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},h.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]|t.words[i];return this.uG()},h.prototype.ior=function(t){return s(0==(this.negative|t.negative)),this.iuor(t)},h.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},h.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},h.prototype.iuand=function(t){var i;i=this.length>t.length?t:this;for(var s=0;s<i.length;s++)this.words[s]=this.words[s]&t.words[s];return this.length=i.length,this.uG()},h.prototype.iand=function(t){return s(0==(this.negative|t.negative)),this.iuand(t)},h.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},h.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},h.prototype.iuxor=function(t){var i,s;this.length>t.length?(i=this,s=t):(i=t,s=this);for(var e=0;e<s.length;e++)this.words[e]=i.words[e]^s.words[e];if(this!==i)for(;e<i.length;e++)this.words[e]=i.words[e];return this.length=i.length,this.uG()},h.prototype.ixor=function(t){return s(0==(this.negative|t.negative)),this.iuxor(t)},h.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},h.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},h.prototype.inotn=function(t){s("number"==typeof t&&t>=0);var i=0|Math.ceil(t/26),e=t%26;this.fG(i),e>0&&i--;for(var h=0;h<i;h++)this.words[h]=67108863&~this.words[h];return e>0&&(this.words[h]=~this.words[h]&67108863>>26-e),this.uG()},h.prototype.notn=function(t){return this.clone().inotn(t)},h.prototype.setn=function(t,i){s("number"==typeof t&&t>=0);var e=t/26|0,h=t%26;return this.fG(e+1),this.words[e]=i?this.words[e]|1<<h:this.words[e]&~(1<<h),this.uG()},h.prototype.iadd=function(t){var i,s,e;if(0!==this.negative&&0===t.negative)return this.negative=0,i=this.isub(t),this.negative^=1,this.dG();if(0===this.negative&&0!==t.negative)return t.negative=0,i=this.isub(t),t.negative=1,i.dG();this.length>t.length?(s=this,e=t):(s=t,e=this);for(var h=0,r=0;r<e.length;r++)i=(0|s.words[r])+(0|e.words[r])+h,this.words[r]=67108863&i,h=i>>>26;for(;0!==h&&r<s.length;r++)i=(0|s.words[r])+h,this.words[r]=67108863&i,h=i>>>26;if(this.length=s.length,0!==h)this.words[this.length]=h,this.length++;else if(s!==this)for(;r<s.length;r++)this.words[r]=s.words[r];return this},h.prototype.add=function(t){var i;return 0!==t.negative&&0===this.negative?(t.negative=0,i=this.sub(t),t.negative^=1,i):0===t.negative&&0!==this.negative?(this.negative=0,i=t.sub(this),this.negative=1,i):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},h.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var i=this.iadd(t);return t.negative=1,i.dG()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this.dG();var s,e,h=this.cmp(t);if(0===h)return this.negative=0,this.length=1,this.words[0]=0,this;h>0?(s=this,e=t):(s=t,e=this);for(var r=0,n=0;n<e.length;n++)r=(i=(0|s.words[n])-(0|e.words[n])+r)>>26,this.words[n]=67108863&i;for(;0!==r&&n<s.length;n++)r=(i=(0|s.words[n])+r)>>26,this.words[n]=67108863&i;if(0===r&&n<s.length&&s!==this)for(;n<s.length;n++)this.words[n]=s.words[n];return this.length=Math.max(this.length,n),s!==this&&(this.negative=1),this.uG()},h.prototype.sub=function(t){return this.clone().isub(t)};var g=function(t,i,s){var e,h,r,n=t.words,o=i.words,a=s.words,u=0,l=0|n[0],c=8191&l,f=l>>>13,d=0|n[1],g=8191&d,m=d>>>13,y=0|n[2],p=8191&y,S=y>>>13,v=0|n[3],b=8191&v,x=v>>>13,M=0|n[4],_=8191&M,w=M>>>13,A=0|n[5],k=8191&A,C=A>>>13,T=0|n[6],I=8191&T,F=T>>>13,P=0|n[7],D=8191&P,B=P>>>13,O=0|n[8],L=8191&O,E=O>>>13,R=0|n[9],z=8191&R,V=R>>>13,N=0|o[0],G=8191&N,H=N>>>13,W=0|o[1],U=8191&W,j=W>>>13,$=0|o[2],Y=8191&$,X=$>>>13,Z=0|o[3],K=8191&Z,q=Z>>>13,J=0|o[4],Q=8191&J,tt=J>>>13,it=0|o[5],st=8191&it,et=it>>>13,ht=0|o[6],rt=8191&ht,nt=ht>>>13,ot=0|o[7],at=8191&ot,ut=ot>>>13,lt=0|o[8],ct=8191&lt,ft=lt>>>13,dt=0|o[9],gt=8191&dt,mt=dt>>>13;s.negative=t.negative^i.negative,s.length=19;var yt=(u+(e=Math.imul(c,G))|0)+((8191&(h=(h=Math.imul(c,H))+Math.imul(f,G)|0))<<13)|0;u=((r=Math.imul(f,H))+(h>>>13)|0)+(yt>>>26)|0,yt&=67108863,e=Math.imul(g,G),h=(h=Math.imul(g,H))+Math.imul(m,G)|0,r=Math.imul(m,H);var pt=(u+(e=e+Math.imul(c,U)|0)|0)+((8191&(h=(h=h+Math.imul(c,j)|0)+Math.imul(f,U)|0))<<13)|0;u=((r=r+Math.imul(f,j)|0)+(h>>>13)|0)+(pt>>>26)|0,pt&=67108863,e=Math.imul(p,G),h=(h=Math.imul(p,H))+Math.imul(S,G)|0,r=Math.imul(S,H),e=e+Math.imul(g,U)|0,h=(h=h+Math.imul(g,j)|0)+Math.imul(m,U)|0,r=r+Math.imul(m,j)|0;var St=(u+(e=e+Math.imul(c,Y)|0)|0)+((8191&(h=(h=h+Math.imul(c,X)|0)+Math.imul(f,Y)|0))<<13)|0;u=((r=r+Math.imul(f,X)|0)+(h>>>13)|0)+(St>>>26)|0,St&=67108863,e=Math.imul(b,G),h=(h=Math.imul(b,H))+Math.imul(x,G)|0,r=Math.imul(x,H),e=e+Math.imul(p,U)|0,h=(h=h+Math.imul(p,j)|0)+Math.imul(S,U)|0,r=r+Math.imul(S,j)|0,e=e+Math.imul(g,Y)|0,h=(h=h+Math.imul(g,X)|0)+Math.imul(m,Y)|0,r=r+Math.imul(m,X)|0;var vt=(u+(e=e+Math.imul(c,K)|0)|0)+((8191&(h=(h=h+Math.imul(c,q)|0)+Math.imul(f,K)|0))<<13)|0;u=((r=r+Math.imul(f,q)|0)+(h>>>13)|0)+(vt>>>26)|0,vt&=67108863,e=Math.imul(_,G),h=(h=Math.imul(_,H))+Math.imul(w,G)|0,r=Math.imul(w,H),e=e+Math.imul(b,U)|0,h=(h=h+Math.imul(b,j)|0)+Math.imul(x,U)|0,r=r+Math.imul(x,j)|0,e=e+Math.imul(p,Y)|0,h=(h=h+Math.imul(p,X)|0)+Math.imul(S,Y)|0,r=r+Math.imul(S,X)|0,e=e+Math.imul(g,K)|0,h=(h=h+Math.imul(g,q)|0)+Math.imul(m,K)|0,r=r+Math.imul(m,q)|0;var bt=(u+(e=e+Math.imul(c,Q)|0)|0)+((8191&(h=(h=h+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;u=((r=r+Math.imul(f,tt)|0)+(h>>>13)|0)+(bt>>>26)|0,bt&=67108863,e=Math.imul(k,G),h=(h=Math.imul(k,H))+Math.imul(C,G)|0,r=Math.imul(C,H),e=e+Math.imul(_,U)|0,h=(h=h+Math.imul(_,j)|0)+Math.imul(w,U)|0,r=r+Math.imul(w,j)|0,e=e+Math.imul(b,Y)|0,h=(h=h+Math.imul(b,X)|0)+Math.imul(x,Y)|0,r=r+Math.imul(x,X)|0,e=e+Math.imul(p,K)|0,h=(h=h+Math.imul(p,q)|0)+Math.imul(S,K)|0,r=r+Math.imul(S,q)|0,e=e+Math.imul(g,Q)|0,h=(h=h+Math.imul(g,tt)|0)+Math.imul(m,Q)|0,r=r+Math.imul(m,tt)|0;var xt=(u+(e=e+Math.imul(c,st)|0)|0)+((8191&(h=(h=h+Math.imul(c,et)|0)+Math.imul(f,st)|0))<<13)|0;u=((r=r+Math.imul(f,et)|0)+(h>>>13)|0)+(xt>>>26)|0,xt&=67108863,e=Math.imul(I,G),h=(h=Math.imul(I,H))+Math.imul(F,G)|0,r=Math.imul(F,H),e=e+Math.imul(k,U)|0,h=(h=h+Math.imul(k,j)|0)+Math.imul(C,U)|0,r=r+Math.imul(C,j)|0,e=e+Math.imul(_,Y)|0,h=(h=h+Math.imul(_,X)|0)+Math.imul(w,Y)|0,r=r+Math.imul(w,X)|0,e=e+Math.imul(b,K)|0,h=(h=h+Math.imul(b,q)|0)+Math.imul(x,K)|0,r=r+Math.imul(x,q)|0,e=e+Math.imul(p,Q)|0,h=(h=h+Math.imul(p,tt)|0)+Math.imul(S,Q)|0,r=r+Math.imul(S,tt)|0,e=e+Math.imul(g,st)|0,h=(h=h+Math.imul(g,et)|0)+Math.imul(m,st)|0,r=r+Math.imul(m,et)|0;var Mt=(u+(e=e+Math.imul(c,rt)|0)|0)+((8191&(h=(h=h+Math.imul(c,nt)|0)+Math.imul(f,rt)|0))<<13)|0;u=((r=r+Math.imul(f,nt)|0)+(h>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,e=Math.imul(D,G),h=(h=Math.imul(D,H))+Math.imul(B,G)|0,r=Math.imul(B,H),e=e+Math.imul(I,U)|0,h=(h=h+Math.imul(I,j)|0)+Math.imul(F,U)|0,r=r+Math.imul(F,j)|0,e=e+Math.imul(k,Y)|0,h=(h=h+Math.imul(k,X)|0)+Math.imul(C,Y)|0,r=r+Math.imul(C,X)|0,e=e+Math.imul(_,K)|0,h=(h=h+Math.imul(_,q)|0)+Math.imul(w,K)|0,r=r+Math.imul(w,q)|0,e=e+Math.imul(b,Q)|0,h=(h=h+Math.imul(b,tt)|0)+Math.imul(x,Q)|0,r=r+Math.imul(x,tt)|0,e=e+Math.imul(p,st)|0,h=(h=h+Math.imul(p,et)|0)+Math.imul(S,st)|0,r=r+Math.imul(S,et)|0,e=e+Math.imul(g,rt)|0,h=(h=h+Math.imul(g,nt)|0)+Math.imul(m,rt)|0,r=r+Math.imul(m,nt)|0;var _t=(u+(e=e+Math.imul(c,at)|0)|0)+((8191&(h=(h=h+Math.imul(c,ut)|0)+Math.imul(f,at)|0))<<13)|0;u=((r=r+Math.imul(f,ut)|0)+(h>>>13)|0)+(_t>>>26)|0,_t&=67108863,e=Math.imul(L,G),h=(h=Math.imul(L,H))+Math.imul(E,G)|0,r=Math.imul(E,H),e=e+Math.imul(D,U)|0,h=(h=h+Math.imul(D,j)|0)+Math.imul(B,U)|0,r=r+Math.imul(B,j)|0,e=e+Math.imul(I,Y)|0,h=(h=h+Math.imul(I,X)|0)+Math.imul(F,Y)|0,r=r+Math.imul(F,X)|0,e=e+Math.imul(k,K)|0,h=(h=h+Math.imul(k,q)|0)+Math.imul(C,K)|0,r=r+Math.imul(C,q)|0,e=e+Math.imul(_,Q)|0,h=(h=h+Math.imul(_,tt)|0)+Math.imul(w,Q)|0,r=r+Math.imul(w,tt)|0,e=e+Math.imul(b,st)|0,h=(h=h+Math.imul(b,et)|0)+Math.imul(x,st)|0,r=r+Math.imul(x,et)|0,e=e+Math.imul(p,rt)|0,h=(h=h+Math.imul(p,nt)|0)+Math.imul(S,rt)|0,r=r+Math.imul(S,nt)|0,e=e+Math.imul(g,at)|0,h=(h=h+Math.imul(g,ut)|0)+Math.imul(m,at)|0,r=r+Math.imul(m,ut)|0;var wt=(u+(e=e+Math.imul(c,ct)|0)|0)+((8191&(h=(h=h+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;u=((r=r+Math.imul(f,ft)|0)+(h>>>13)|0)+(wt>>>26)|0,wt&=67108863,e=Math.imul(z,G),h=(h=Math.imul(z,H))+Math.imul(V,G)|0,r=Math.imul(V,H),e=e+Math.imul(L,U)|0,h=(h=h+Math.imul(L,j)|0)+Math.imul(E,U)|0,r=r+Math.imul(E,j)|0,e=e+Math.imul(D,Y)|0,h=(h=h+Math.imul(D,X)|0)+Math.imul(B,Y)|0,r=r+Math.imul(B,X)|0,e=e+Math.imul(I,K)|0,h=(h=h+Math.imul(I,q)|0)+Math.imul(F,K)|0,r=r+Math.imul(F,q)|0,e=e+Math.imul(k,Q)|0,h=(h=h+Math.imul(k,tt)|0)+Math.imul(C,Q)|0,r=r+Math.imul(C,tt)|0,e=e+Math.imul(_,st)|0,h=(h=h+Math.imul(_,et)|0)+Math.imul(w,st)|0,r=r+Math.imul(w,et)|0,e=e+Math.imul(b,rt)|0,h=(h=h+Math.imul(b,nt)|0)+Math.imul(x,rt)|0,r=r+Math.imul(x,nt)|0,e=e+Math.imul(p,at)|0,h=(h=h+Math.imul(p,ut)|0)+Math.imul(S,at)|0,r=r+Math.imul(S,ut)|0,e=e+Math.imul(g,ct)|0,h=(h=h+Math.imul(g,ft)|0)+Math.imul(m,ct)|0,r=r+Math.imul(m,ft)|0;var At=(u+(e=e+Math.imul(c,gt)|0)|0)+((8191&(h=(h=h+Math.imul(c,mt)|0)+Math.imul(f,gt)|0))<<13)|0;u=((r=r+Math.imul(f,mt)|0)+(h>>>13)|0)+(At>>>26)|0,At&=67108863,e=Math.imul(z,U),h=(h=Math.imul(z,j))+Math.imul(V,U)|0,r=Math.imul(V,j),e=e+Math.imul(L,Y)|0,h=(h=h+Math.imul(L,X)|0)+Math.imul(E,Y)|0,r=r+Math.imul(E,X)|0,e=e+Math.imul(D,K)|0,h=(h=h+Math.imul(D,q)|0)+Math.imul(B,K)|0,r=r+Math.imul(B,q)|0,e=e+Math.imul(I,Q)|0,h=(h=h+Math.imul(I,tt)|0)+Math.imul(F,Q)|0,r=r+Math.imul(F,tt)|0,e=e+Math.imul(k,st)|0,h=(h=h+Math.imul(k,et)|0)+Math.imul(C,st)|0,r=r+Math.imul(C,et)|0,e=e+Math.imul(_,rt)|0,h=(h=h+Math.imul(_,nt)|0)+Math.imul(w,rt)|0,r=r+Math.imul(w,nt)|0,e=e+Math.imul(b,at)|0,h=(h=h+Math.imul(b,ut)|0)+Math.imul(x,at)|0,r=r+Math.imul(x,ut)|0,e=e+Math.imul(p,ct)|0,h=(h=h+Math.imul(p,ft)|0)+Math.imul(S,ct)|0,r=r+Math.imul(S,ft)|0;var kt=(u+(e=e+Math.imul(g,gt)|0)|0)+((8191&(h=(h=h+Math.imul(g,mt)|0)+Math.imul(m,gt)|0))<<13)|0;u=((r=r+Math.imul(m,mt)|0)+(h>>>13)|0)+(kt>>>26)|0,kt&=67108863,e=Math.imul(z,Y),h=(h=Math.imul(z,X))+Math.imul(V,Y)|0,r=Math.imul(V,X),e=e+Math.imul(L,K)|0,h=(h=h+Math.imul(L,q)|0)+Math.imul(E,K)|0,r=r+Math.imul(E,q)|0,e=e+Math.imul(D,Q)|0,h=(h=h+Math.imul(D,tt)|0)+Math.imul(B,Q)|0,r=r+Math.imul(B,tt)|0,e=e+Math.imul(I,st)|0,h=(h=h+Math.imul(I,et)|0)+Math.imul(F,st)|0,r=r+Math.imul(F,et)|0,e=e+Math.imul(k,rt)|0,h=(h=h+Math.imul(k,nt)|0)+Math.imul(C,rt)|0,r=r+Math.imul(C,nt)|0,e=e+Math.imul(_,at)|0,h=(h=h+Math.imul(_,ut)|0)+Math.imul(w,at)|0,r=r+Math.imul(w,ut)|0,e=e+Math.imul(b,ct)|0,h=(h=h+Math.imul(b,ft)|0)+Math.imul(x,ct)|0,r=r+Math.imul(x,ft)|0;var Ct=(u+(e=e+Math.imul(p,gt)|0)|0)+((8191&(h=(h=h+Math.imul(p,mt)|0)+Math.imul(S,gt)|0))<<13)|0;u=((r=r+Math.imul(S,mt)|0)+(h>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,e=Math.imul(z,K),h=(h=Math.imul(z,q))+Math.imul(V,K)|0,r=Math.imul(V,q),e=e+Math.imul(L,Q)|0,h=(h=h+Math.imul(L,tt)|0)+Math.imul(E,Q)|0,r=r+Math.imul(E,tt)|0,e=e+Math.imul(D,st)|0,h=(h=h+Math.imul(D,et)|0)+Math.imul(B,st)|0,r=r+Math.imul(B,et)|0,e=e+Math.imul(I,rt)|0,h=(h=h+Math.imul(I,nt)|0)+Math.imul(F,rt)|0,r=r+Math.imul(F,nt)|0,e=e+Math.imul(k,at)|0,h=(h=h+Math.imul(k,ut)|0)+Math.imul(C,at)|0,r=r+Math.imul(C,ut)|0,e=e+Math.imul(_,ct)|0,h=(h=h+Math.imul(_,ft)|0)+Math.imul(w,ct)|0,r=r+Math.imul(w,ft)|0;var Tt=(u+(e=e+Math.imul(b,gt)|0)|0)+((8191&(h=(h=h+Math.imul(b,mt)|0)+Math.imul(x,gt)|0))<<13)|0;u=((r=r+Math.imul(x,mt)|0)+(h>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,e=Math.imul(z,Q),h=(h=Math.imul(z,tt))+Math.imul(V,Q)|0,r=Math.imul(V,tt),e=e+Math.imul(L,st)|0,h=(h=h+Math.imul(L,et)|0)+Math.imul(E,st)|0,r=r+Math.imul(E,et)|0,e=e+Math.imul(D,rt)|0,h=(h=h+Math.imul(D,nt)|0)+Math.imul(B,rt)|0,r=r+Math.imul(B,nt)|0,e=e+Math.imul(I,at)|0,h=(h=h+Math.imul(I,ut)|0)+Math.imul(F,at)|0,r=r+Math.imul(F,ut)|0,e=e+Math.imul(k,ct)|0,h=(h=h+Math.imul(k,ft)|0)+Math.imul(C,ct)|0,r=r+Math.imul(C,ft)|0;var It=(u+(e=e+Math.imul(_,gt)|0)|0)+((8191&(h=(h=h+Math.imul(_,mt)|0)+Math.imul(w,gt)|0))<<13)|0;u=((r=r+Math.imul(w,mt)|0)+(h>>>13)|0)+(It>>>26)|0,It&=67108863,e=Math.imul(z,st),h=(h=Math.imul(z,et))+Math.imul(V,st)|0,r=Math.imul(V,et),e=e+Math.imul(L,rt)|0,h=(h=h+Math.imul(L,nt)|0)+Math.imul(E,rt)|0,r=r+Math.imul(E,nt)|0,e=e+Math.imul(D,at)|0,h=(h=h+Math.imul(D,ut)|0)+Math.imul(B,at)|0,r=r+Math.imul(B,ut)|0,e=e+Math.imul(I,ct)|0,h=(h=h+Math.imul(I,ft)|0)+Math.imul(F,ct)|0,r=r+Math.imul(F,ft)|0;var Ft=(u+(e=e+Math.imul(k,gt)|0)|0)+((8191&(h=(h=h+Math.imul(k,mt)|0)+Math.imul(C,gt)|0))<<13)|0;u=((r=r+Math.imul(C,mt)|0)+(h>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,e=Math.imul(z,rt),h=(h=Math.imul(z,nt))+Math.imul(V,rt)|0,r=Math.imul(V,nt),e=e+Math.imul(L,at)|0,h=(h=h+Math.imul(L,ut)|0)+Math.imul(E,at)|0,r=r+Math.imul(E,ut)|0,e=e+Math.imul(D,ct)|0,h=(h=h+Math.imul(D,ft)|0)+Math.imul(B,ct)|0,r=r+Math.imul(B,ft)|0;var Pt=(u+(e=e+Math.imul(I,gt)|0)|0)+((8191&(h=(h=h+Math.imul(I,mt)|0)+Math.imul(F,gt)|0))<<13)|0;u=((r=r+Math.imul(F,mt)|0)+(h>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,e=Math.imul(z,at),h=(h=Math.imul(z,ut))+Math.imul(V,at)|0,r=Math.imul(V,ut),e=e+Math.imul(L,ct)|0,h=(h=h+Math.imul(L,ft)|0)+Math.imul(E,ct)|0,r=r+Math.imul(E,ft)|0;var Dt=(u+(e=e+Math.imul(D,gt)|0)|0)+((8191&(h=(h=h+Math.imul(D,mt)|0)+Math.imul(B,gt)|0))<<13)|0;u=((r=r+Math.imul(B,mt)|0)+(h>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,e=Math.imul(z,ct),h=(h=Math.imul(z,ft))+Math.imul(V,ct)|0,r=Math.imul(V,ft);var Bt=(u+(e=e+Math.imul(L,gt)|0)|0)+((8191&(h=(h=h+Math.imul(L,mt)|0)+Math.imul(E,gt)|0))<<13)|0;u=((r=r+Math.imul(E,mt)|0)+(h>>>13)|0)+(Bt>>>26)|0,Bt&=67108863;var Ot=(u+(e=Math.imul(z,gt))|0)+((8191&(h=(h=Math.imul(z,mt))+Math.imul(V,gt)|0))<<13)|0;return u=((r=Math.imul(V,mt))+(h>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,a[0]=yt,a[1]=pt,a[2]=St,a[3]=vt,a[4]=bt,a[5]=xt,a[6]=Mt,a[7]=_t,a[8]=wt,a[9]=At,a[10]=kt,a[11]=Ct,a[12]=Tt,a[13]=It,a[14]=Ft,a[15]=Pt,a[16]=Dt,a[17]=Bt,a[18]=Ot,0!==u&&(a[19]=u,s.length++),s};function m(t,i,s){s.negative=i.negative^t.negative,s.length=t.length+i.length;for(var e=0,h=0,r=0;r<s.length-1;r++){var n=h;h=0;for(var o=67108863&e,a=Math.min(r,i.length-1),u=Math.max(0,r-t.length+1);u<=a;u++){var l=r-u,c=(0|t.words[l])*(0|i.words[u]),f=67108863&c;o=67108863&(f=f+o|0),h+=(n=(n=n+(c/67108864|0)|0)+(f>>>26)|0)>>>26,n&=67108863}s.words[r]=o,e=n,n=h}return 0!==e?s.words[r]=e:s.length--,s.uG()}function y(t,i,s){return m(t,i,s)}Math.imul||(g=d),h.prototype.mulTo=function(t,i){var s=this.length+t.length;return 10===this.length&&10===t.length?g(this,t,i):s<63?d(this,t,i):s<1024?m(this,t,i):y(this,t,i)},h.prototype.mul=function(t){var i=new h(null);return i.words=new Array(this.length+t.length),this.mulTo(t,i)},h.prototype.mulf=function(t){var i=new h(null);return i.words=new Array(this.length+t.length),y(this,t,i)},h.prototype.imul=function(t){return this.clone().mulTo(t,this)},h.prototype.imuln=function(t){var i=t<0;i&&(t=-t),s("number"==typeof t),s(t<67108864);for(var e=0,h=0;h<this.length;h++){var r=(0|this.words[h])*t,n=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=n>>>26,this.words[h]=67108863&n}return 0!==e&&(this.words[h]=e,this.length++),i?this.ineg():this},h.prototype.muln=function(t){return this.clone().imuln(t)},h.prototype.sqr=function(){return this.mul(this)},h.prototype.isqr=function(){return this.imul(this.clone())},h.prototype.pow=function(t){var i=function(t){for(var i=new Array(t.bitLength()),s=0;s<i.length;s++){var e=s/26|0,h=s%26;i[s]=t.words[e]>>>h&1}return i}(t);if(0===i.length)return new h(1);for(var s=this,e=0;e<i.length&&0===i[e];e++,s=s.sqr());if(++e<i.length)for(var r=s.sqr();e<i.length;e++,r=r.sqr())0!==i[e]&&(s=s.mul(r));return s},h.prototype.iushln=function(t){s("number"==typeof t&&t>=0);var i,e=t%26,h=(t-e)/26,r=67108863>>>26-e<<26-e;if(0!==e){var n=0;for(i=0;i<this.length;i++){var o=this.words[i]&r,a=(0|this.words[i])-o<<e;this.words[i]=a|n,n=o>>>26-e}n&&(this.words[i]=n,this.length++)}if(0!==h){for(i=this.length-1;i>=0;i--)this.words[i+h]=this.words[i];for(i=0;i<h;i++)this.words[i]=0;this.length+=h}return this.uG()},h.prototype.ishln=function(t){return s(0===this.negative),this.iushln(t)},h.prototype.iushrn=function(t,i,e){var h;s("number"==typeof t&&t>=0),h=i?(i-i%26)/26:0;var r=t%26,n=Math.min((t-r)/26,this.length),o=67108863^67108863>>>r<<r,a=e;if(h-=n,h=Math.max(0,h),a){for(var u=0;u<n;u++)a.words[u]=this.words[u];a.length=n}if(0===n);else if(this.length>n)for(this.length-=n,u=0;u<this.length;u++)this.words[u]=this.words[u+n];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(0!==l||u>=h);u--){var c=0|this.words[u];this.words[u]=l<<26-r|c>>>r,l=c&o}return a&&0!==l&&(a.words[a.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.uG()},h.prototype.ishrn=function(t,i,e){return s(0===this.negative),this.iushrn(t,i,e)},h.prototype.shln=function(t){return this.clone().ishln(t)},h.prototype.ushln=function(t){return this.clone().iushln(t)},h.prototype.shrn=function(t){return this.clone().ishrn(t)},h.prototype.ushrn=function(t){return this.clone().iushrn(t)},h.prototype.testn=function(t){s("number"==typeof t&&t>=0);var i=t%26,e=(t-i)/26,h=1<<i;return!(this.length<=e||!(this.words[e]&h))},h.prototype.imaskn=function(t){s("number"==typeof t&&t>=0);var i=t%26,e=(t-i)/26;if(s(0===this.negative,"imaskn works only with positive numbers"),this.length<=e)return this;if(0!==i&&e++,this.length=Math.min(e,this.length),0!==i){var h=67108863^67108863>>>i<<i;this.words[this.length-1]&=h}return this.uG()},h.prototype.maskn=function(t){return this.clone().imaskn(t)},h.prototype.iaddn=function(t){return s("number"==typeof t),s(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this.lG(t)},h.prototype.lG=function(t){this.words[0]+=t;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},h.prototype.isubn=function(t){if(s("number"==typeof t),s(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.uG()},h.prototype.addn=function(t){return this.clone().iaddn(t)},h.prototype.subn=function(t){return this.clone().isubn(t)},h.prototype.iabs=function(){return this.negative=0,this},h.prototype.abs=function(){return this.clone().iabs()},h.prototype.SG=function(t,i,e){var h,r,n=t.length+e;this.fG(n);var o=0;for(h=0;h<t.length;h++){r=(0|this.words[h+e])+o;var a=(0|t.words[h])*i;o=((r-=67108863&a)>>26)-(a/67108864|0),this.words[h+e]=67108863&r}for(;h<this.length-e;h++)o=(r=(0|this.words[h+e])+o)>>26,this.words[h+e]=67108863&r;if(0===o)return this.uG();for(s(-1===o),o=0,h=0;h<this.length;h++)o=(r=-(0|this.words[h])+o)>>26,this.words[h]=67108863&r;return this.negative=1,this.uG()},h.prototype.vG=function(t,i){var s=(this.length,t.length),e=this.clone(),r=t,n=0|r.words[r.length-1];0!=(s=26-this.yG(n))&&(r=r.ushln(s),e.iushln(s),n=0|r.words[r.length-1]);var o,a=e.length-r.length;if("mod"!==i){(o=new h(null)).length=a+1,o.words=new Array(o.length);for(var u=0;u<o.length;u++)o.words[u]=0}var l=e.clone().SG(r,1,a);0===l.negative&&(e=l,o&&(o.words[a]=1));for(var c=a-1;c>=0;c--){var f=67108864*(0|e.words[r.length+c])+(0|e.words[r.length+c-1]);for(f=Math.min(f/n|0,67108863),e.SG(r,f,c);0!==e.negative;)f--,e.negative=0,e.SG(r,1,c),e.isZero()||(e.negative^=1);o&&(o.words[c]=f)}return o&&o.uG(),e.uG(),"div"!==i&&0!==s&&e.iushrn(s),{div:o||null,mod:e}},h.prototype.divmod=function(t,i,e){return s(!t.isZero()),this.isZero()?{div:new h(0),mod:new h(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,i),"mod"!==i&&(r=o.div.neg()),"div"!==i&&(n=o.mod.neg(),e&&0!==n.negative&&n.iadd(t)),{div:r,mod:n}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),i),"mod"!==i&&(r=o.div.neg()),{div:r,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),i),"div"!==i&&(n=o.mod.neg(),e&&0!==n.negative&&n.isub(t)),{div:o.div,mod:n}):t.length>this.length||this.cmp(t)<0?{div:new h(0),mod:this}:1===t.length?"div"===i?{div:this.divn(t.words[0]),mod:null}:"mod"===i?{div:null,mod:new h(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new h(this.modrn(t.words[0]))}:this.vG(t,i);var r,n,o},h.prototype.div=function(t){return this.divmod(t,"div",!1).div},h.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},h.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},h.prototype.divRound=function(t){var i=this.divmod(t);if(i.mod.isZero())return i.div;var s=0!==i.div.negative?i.mod.isub(t):i.mod,e=t.ushrn(1),h=t.andln(1),r=s.cmp(e);return r<0||1===h&&0===r?i.div:0!==i.div.negative?i.div.isubn(1):i.div.iaddn(1)},h.prototype.modrn=function(t){var i=t<0;i&&(t=-t),s(t<=67108863);for(var e=(1<<26)%t,h=0,r=this.length-1;r>=0;r--)h=(e*h+(0|this.words[r]))%t;return i?-h:h},h.prototype.modn=function(t){return this.modrn(t)},h.prototype.idivn=function(t){var i=t<0;i&&(t=-t),s(t<=67108863);for(var e=0,h=this.length-1;h>=0;h--){var r=(0|this.words[h])+67108864*e;this.words[h]=r/t|0,e=r%t}return this.uG(),i?this.ineg():this},h.prototype.divn=function(t){return this.clone().idivn(t)},h.prototype.egcd=function(t){s(0===t.negative),s(!t.isZero());var i=this,e=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var r=new h(1),n=new h(0),o=new h(0),a=new h(1),u=0;i.isEven()&&e.isEven();)i.iushrn(1),e.iushrn(1),++u;for(var l=e.clone(),c=i.clone();!i.isZero();){for(var f=0,d=1;0==(i.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(i.iushrn(f);f-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(l),n.isub(c)),r.iushrn(1),n.iushrn(1);for(var g=0,m=1;0==(e.words[0]&m)&&g<26;++g,m<<=1);if(g>0)for(e.iushrn(g);g-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(l),a.isub(c)),o.iushrn(1),a.iushrn(1);i.cmp(e)>=0?(i.isub(e),r.isub(o),n.isub(a)):(e.isub(i),o.isub(r),a.isub(n))}return{a:o,b:a,gcd:e.iushln(u)}},h.prototype.bG=function(t){s(0===t.negative),s(!t.isZero());var i=this,e=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var r,n=new h(1),o=new h(0),a=e.clone();i.cmpn(1)>0&&e.cmpn(1)>0;){for(var u=0,l=1;0==(i.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(i.iushrn(u);u-- >0;)n.isOdd()&&n.iadd(a),n.iushrn(1);for(var c=0,f=1;0==(e.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(e.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);i.cmp(e)>=0?(i.isub(e),n.isub(o)):(e.isub(i),o.isub(n))}return(r=0===i.cmpn(1)?n:o).cmpn(0)<0&&r.iadd(t),r},h.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var i=this.clone(),s=t.clone();i.negative=0,s.negative=0;for(var e=0;i.isEven()&&s.isEven();e++)i.iushrn(1),s.iushrn(1);for(;;){for(;i.isEven();)i.iushrn(1);for(;s.isEven();)s.iushrn(1);var h=i.cmp(s);if(h<0){var r=i;i=s,s=r}else if(0===h||0===s.cmpn(1))break;i.isub(s)}return s.iushln(e)},h.prototype.invm=function(t){return this.egcd(t).a.umod(t)},h.prototype.isEven=function(){return 0==(1&this.words[0])},h.prototype.isOdd=function(){return 1==(1&this.words[0])},h.prototype.andln=function(t){return this.words[0]&t},h.prototype.bincn=function(t){s("number"==typeof t);var i=t%26,e=(t-i)/26,h=1<<i;if(this.length<=e)return this.fG(e+1),this.words[e]|=h,this;for(var r=h,n=e;0!==r&&n<this.length;n++){var o=0|this.words[n];r=(o+=r)>>>26,o&=67108863,this.words[n]=o}return 0!==r&&(this.words[n]=r,this.length++),this},h.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},h.prototype.cmpn=function(t){var i,e=t<0;if(0!==this.negative&&!e)return-1;if(0===this.negative&&e)return 1;if(this.uG(),this.length>1)i=1;else{e&&(t=-t),s(t<=67108863,"Number is too big");var h=0|this.words[0];i=h===t?0:h<t?-1:1}return 0!==this.negative?0|-i:i},h.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var i=this.ucmp(t);return 0!==this.negative?0|-i:i},h.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var i=0,s=this.length-1;s>=0;s--){var e=0|this.words[s],h=0|t.words[s];if(e!==h){e<h?i=-1:e>h&&(i=1);break}}return i},h.prototype.gtn=function(t){return 1===this.cmpn(t)},h.prototype.gt=function(t){return 1===this.cmp(t)},h.prototype.gten=function(t){return this.cmpn(t)>=0},h.prototype.gte=function(t){return this.cmp(t)>=0},h.prototype.ltn=function(t){return-1===this.cmpn(t)},h.prototype.lt=function(t){return-1===this.cmp(t)},h.prototype.lten=function(t){return this.cmpn(t)<=0},h.prototype.lte=function(t){return this.cmp(t)<=0},h.prototype.eqn=function(t){return 0===this.cmpn(t)},h.prototype.eq=function(t){return 0===this.cmp(t)},h.red=function(t){return new _(t)},h.prototype.toRed=function(t){return s(!this.red,"Already a number in reduction context"),s(0===this.negative,"red works only with positives"),t.convertTo(this).xG(t)},h.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},h.prototype.xG=function(t){return this.red=t,this},h.prototype.forceRed=function(t){return s(!this.red,"Already a number in reduction context"),this.xG(t)},h.prototype.redAdd=function(t){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},h.prototype.redIAdd=function(t){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},h.prototype.redSub=function(t){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},h.prototype.redISub=function(t){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},h.prototype.redShl=function(t){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},h.prototype.redMul=function(t){return s(this.red,"redMul works only with red numbers"),this.red.MG(this,t),this.red.mul(this,t)},h.prototype.redIMul=function(t){return s(this.red,"redMul works only with red numbers"),this.red.MG(this,t),this.red.imul(this,t)},h.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._G(this),this.red.sqr(this)},h.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._G(this),this.red.isqr(this)},h.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._G(this),this.red.sqrt(this)},h.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._G(this),this.red.invm(this)},h.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._G(this),this.red.neg(this)},h.prototype.redPow=function(t){return s(this.red&&!t.red,"redPow(normalNum)"),this.red._G(this),this.red.pow(this,t)};var p={k256:null,p224:null,p192:null,p25519:null};function S(t,i){this.name=t,this.p=new h(i,16),this.n=this.p.bitLength(),this.k=new h(1).iushln(this.n).isub(this.p),this.tmp=this.wG()}function v(){S.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){S.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){S.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){S.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function _(t){if("string"==typeof t){var i=h.AG(t);this.m=i.p,this.prime=i}else s(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function w(t){_.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new h(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.bG(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}S.prototype.wG=function(){var t=new h(null);return t.words=new Array(Math.ceil(this.n/13)),t},S.prototype.ireduce=function(t){var i,s=t;do{this.split(s,this.tmp),i=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(i>this.n);var e=i<this.n?-1:s.ucmp(this.p);return 0===e?(s.words[0]=0,s.length=1):e>0?s.isub(this.p):void 0!==s.strip?s.strip():s.uG(),s},S.prototype.split=function(t,i){t.iushrn(this.n,0,i)},S.prototype.imulK=function(t){return t.imul(this.k)},e(v,S),v.prototype.split=function(t,i){for(var s=4194303,e=Math.min(t.length,9),h=0;h<e;h++)i.words[h]=t.words[h];if(i.length=e,t.length<=9)return t.words[0]=0,void(t.length=1);var r=t.words[9];for(i.words[i.length++]=r&s,h=10;h<t.length;h++){var n=0|t.words[h];t.words[h-10]=(n&s)<<4|r>>>22,r=n}r>>>=22,t.words[h-10]=r,0===r&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var i=0,s=0;s<t.length;s++){var e=0|t.words[s];i+=977*e,t.words[s]=67108863&i,i=64*e+(i/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},e(b,S),e(x,S),e(M,S),M.prototype.imulK=function(t){for(var i=0,s=0;s<t.length;s++){var e=19*(0|t.words[s])+i,h=67108863&e;e>>>=26,t.words[s]=h,i=e}return 0!==i&&(t.words[t.length++]=i),t},h.AG=function(t){if(p[t])return p[t];var i;if("k256"===t)i=new v;else if("p224"===t)i=new b;else if("p192"===t)i=new x;else{if("p25519"!==t)throw new Error("Unknown prime "+t);i=new M}return p[t]=i,i},_.prototype._G=function(t){s(0===t.negative,"red works only with positives"),s(t.red,"red works only with red numbers")},_.prototype.MG=function(t,i){s(0==(t.negative|i.negative),"red works only with positives"),s(t.red&&t.red===i.red,"red works only with red numbers")},_.prototype.imod=function(t){return this.prime?this.prime.ireduce(t).xG(this):(a(t,t.umod(this.m).xG(this)),t)},_.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t).xG(this)},_.prototype.add=function(t,i){this.MG(t,i);var s=t.add(i);return s.cmp(this.m)>=0&&s.isub(this.m),s.xG(this)},_.prototype.iadd=function(t,i){this.MG(t,i);var s=t.iadd(i);return s.cmp(this.m)>=0&&s.isub(this.m),s},_.prototype.sub=function(t,i){this.MG(t,i);var s=t.sub(i);return s.cmpn(0)<0&&s.iadd(this.m),s.xG(this)},_.prototype.isub=function(t,i){this.MG(t,i);var s=t.isub(i);return s.cmpn(0)<0&&s.iadd(this.m),s},_.prototype.shl=function(t,i){return this._G(t),this.imod(t.ushln(i))},_.prototype.imul=function(t,i){return this.MG(t,i),this.imod(t.imul(i))},_.prototype.mul=function(t,i){return this.MG(t,i),this.imod(t.mul(i))},_.prototype.isqr=function(t){return this.imul(t,t.clone())},_.prototype.sqr=function(t){return this.mul(t,t)},_.prototype.sqrt=function(t){if(t.isZero())return t.clone();var i=this.m.andln(3);if(s(i%2==1),3===i){var e=this.m.add(new h(1)).iushrn(2);return this.pow(t,e)}for(var r=this.m.subn(1),n=0;!r.isZero()&&0===r.andln(1);)n++,r.iushrn(1);s(!r.isZero());var o=new h(1).toRed(this),a=o.redNeg(),u=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new h(2*l*l).toRed(this);0!==this.pow(l,u).cmp(a);)l.redIAdd(a);for(var c=this.pow(l,r),f=this.pow(t,r.addn(1).iushrn(1)),d=this.pow(t,r),g=n;0!==d.cmp(o);){for(var m=d,y=0;0!==m.cmp(o);y++)m=m.redSqr();s(y<g);var p=this.pow(c,new h(1).iushln(g-y-1));f=f.redMul(p),c=p.redSqr(),d=d.redMul(c),g=y}return f},_.prototype.invm=function(t){var i=t.bG(this.m);return 0!==i.negative?(i.negative=0,this.imod(i).redNeg()):this.imod(i)},_.prototype.pow=function(t,i){if(i.isZero())return new h(1).toRed(this);if(0===i.cmpn(1))return t.clone();var s=new Array(16);s[0]=new h(1).toRed(this),s[1]=t;for(var e=2;e<s.length;e++)s[e]=this.mul(s[e-1],t);var r=s[0],n=0,o=0,a=i.bitLength()%26;for(0===a&&(a=26),e=i.length-1;e>=0;e--){for(var u=i.words[e],l=a-1;l>=0;l--){var c=u>>l&1;r!==s[0]&&(r=this.sqr(r)),0!==c||0!==n?(n<<=1,n|=c,(4==++o||0===e&&0===l)&&(r=this.mul(r,s[n]),o=0,n=0)):o=0}a=26}return r},_.prototype.convertTo=function(t){var i=t.umod(this.m);return i===t?i.clone():i},_.prototype.convertFrom=function(t){var i=t.clone();return i.red=null,i},h.mont=function(t){return new w(t)},e(w,_),w.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},w.prototype.convertFrom=function(t){var i=this.imod(t.mul(this.rinv));return i.red=null,i},w.prototype.imul=function(t,i){if(t.isZero()||i.isZero())return t.words[0]=0,t.length=1,t;var s=t.imul(i),e=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=s.isub(e).iushrn(this.shift),r=h;return h.cmp(this.m)>=0?r=h.isub(this.m):h.cmpn(0)<0&&(r=h.iadd(this.m)),r.xG(this)},w.prototype.mul=function(t,i){if(t.isZero()||i.isZero())return new h(0).xG(this);var s=t.mul(i),e=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=s.isub(e).iushrn(this.shift),n=r;return r.cmp(this.m)>=0?n=r.isub(this.m):r.cmpn(0)<0&&(n=r.iadd(this.m)),n.xG(this)},w.prototype.invm=function(t){return this.imod(t.bG(this.m).mul(this.r2)).xG(this)}}(zv,vS);var Vv=zv.exports;function Nv(t,i){if(Array.isArray(t))return t.slice();if(!t)return[];const s=[];if("string"!=typeof t){for(let i=0;i<t.length;i++)s[i]=0|t[i];return s}if("hex"===i){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t=`0${t}`);for(let i=0;i<t.length;i+=2)s.push(parseInt(t[i]+t[i+1],16))}else for(let i=0;i<t.length;i++){const e=t.charCodeAt(i),h=e>>8,r=255&e;h?s.push(h,r):s.push(r)}return s}const Gv=function(t,i,s){const e=new Array(Math.max(t.bitLength(),s)+1);e.fill(0);const h=1<<i+1,r=t.clone();for(let t=0;t<e.length;t++){let i;const s=r.andln(h-1);r.isOdd()?(i=s>(h>>1)-1?(h>>1)-s:s,r.isubn(i)):i=0,e[t]=i,r.iushrn(1)}return e},Hv=function(t,i){const s=[[],[]];t=t.clone(),i=i.clone();let e=0,h=0;for(;t.cmpn(-e)>0||i.cmpn(-h)>0;){let r,n,o=t.andln(3)+e&3,a=i.andln(3)+h&3;if(3===o&&(o=-1),3===a&&(a=-1),0==(1&o))r=0;else{const i=t.andln(7)+e&7;r=3!==i&&5!==i||2!==a?o:-o}if(s[0].push(r),0==(1&a))n=0;else{const t=i.andln(7)+h&7;n=3!==t&&5!==t||2!==o?a:-a}s[1].push(n),2*e===r+1&&(e=1-e),2*h===n+1&&(h=1-h),t.iushrn(1),i.iushrn(1)}return s};class Wv{constructor(t,i){this.type=t,this.p=new Vv(i.p,16),this.red=i.prime?Vv.red(i.prime):Vv.mont(this.p),this.zero=new Vv(0).toRed(this.red),this.one=new Vv(1).toRed(this.red),this.two=new Vv(2).toRed(this.red),this.n=i.n&&new Vv(i.n,16),this.g=i.g&&this.pointFromJSON(i.g,i.gRed),this.kG=new Array(4),this.CG=new Array(4),this.TG=new Array(4),this.IG=new Array(4),this.FG=this.n?this.n.bitLength():0;const s=this.n&&this.p.div(this.n);!s||s.cmpn(100)>0?this.redN=null:(this.PG=!0,this.redN=this.n.toRed(this.red))}DG(t,i){const s=t.BG(),e=Gv(i,1,this.FG);let h=(1<<s.step+1)-(s.step%2==0?2:1);h/=3;const r=[];for(let t=0;t<e.length;t+=s.step){let i=0;for(let h=t+s.step-1;h>=t;h--)i=(i<<1)+e[h];r.push(i)}let n=this.jpoint(null,null,null),o=this.jpoint(null,null,null);for(let t=h;t>0;t--){for(let i=0;i<r.length;i++){const e=r[i];e===t?o=o.mixedAdd(s.points[i]):e===-t&&(o=o.mixedAdd(s.points[i].neg()))}n=n.add(o)}return n.toP()}OG(t,i){let s=4;const e=t.LG(s);s=e.wnd;const h=e.points,r=Gv(i,s,this.FG);let n=this.jpoint(null,null,null);for(let s=r.length-1;s>=0;s--){for(let t=0;s>=0&&0===r[s];s--)t++;if(s>=0&&i++,n=n.dblp(i),s<0)break;const e=r[s];n="affine"===t.type?e>0?n.mixedAdd(h[e-1>>1]):n.mixedAdd(h[-e-1>>1].neg()):e>0?n.add(h[e-1>>1]):n.add(h[-e-1>>1].neg())}return"affine"===t.type?n.toP():n}EG(t,i,s,e,h){const r=this.kG,n=this.CG,o=this.TG;let a=0;for(let s=0;s<e;s++){const e=i[s].LG(t);r[s]=e.wnd,n[s]=e.points}for(let t=e-1;t>=1;t-=2){const e=t-1,h=t;if(1!==r[e]||1!==r[h]){o[e]=Gv(s[e],r[e],this.FG),o[h]=Gv(s[h],r[h],this.FG),a=Math.max(o[e].length,a),a=Math.max(o[h].length,a);continue}const u=[i[e],null,null,i[h]];0===i[e].y.cmp(i[h].y)?(u[1]=i[e].add(i[h]),u[2]=i[e].toJ().mixedAdd(i[h].neg())):0===i[e].y.cmp(i[h].y.redNeg())?(u[1]=i[e].toJ().mixedAdd(i[h]),u[2]=i[e].add(i[h].neg())):(u[1]=i[e].toJ().mixedAdd(i[h]),u[2]=i[e].toJ().mixedAdd(i[h].neg()));const l=[-3,-1,-5,-7,0,7,5,1,3],c=Hv(s[e],s[h]);a=Math.max(c[0].length,a),o[e]=new Array(a),o[h]=new Array(a);for(let t=0;t<a;t++){const i=0|c[0][t],s=0|c[1][t];o[e][t]=l[3*(i+1)+(s+1)],o[h][t]=0,n[e]=u}}let u=this.jpoint(null,null,null);const l=this.IG;for(let t=a;t>=0;t--){let i=0;for(;t>=0;){let s=!0;for(let i=0;i<e;i++)l[i]=0|o[i][t],0!==l[i]&&(s=!1);if(!s)break;i++,t--}if(t>=0&&i++,u=u.dblp(i),t<0)break;for(let t=0;t<e;t++){const i=l[t];let s;0!==i&&(i>0?s=n[t][i-1>>1]:i<0&&(s=n[t][-i-1>>1].neg()),u="affine"===s.type?u.mixedAdd(s):u.add(s))}}for(let t=0;t<e;t++)n[t]=null;return h?u:u.toP()}decodePoint(t,i){t=Nv(t,i);const s=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*s)return this.point(t.slice(1,1+s),t.slice(1+s,1+2*s));if((2===t[0]||3===t[0])&&t.length-1===s)return this.pointFromX(t.slice(1,1+s),3===t[0]);throw new Error("Unknown point format")}}class Uv{constructor(t,i){this.curve=t,this.type=i,this.precomputed=null}eq(t){throw new Error("Not implemented")}validate(){return this.curve.validate(this)}encodeCompressed(t){return this.encode(t,!0)}zG(t){const i=this.curve.p.byteLength(),s=this.getX().toArray("be",i);return t?[this.getY().isEven()?2:3].concat(s):[4].concat(s,this.getY().toArray("be",i))}encode(t,i){return function(t,i){return"hex"===i?function(t){let i="";for(let e=0;e<t.length;e++)i+=1===(s=t[e].toString(16)).length?`0${s}`:s;var s;return i}(t):t}(this.zG(i),t)}precompute(t){if(this.precomputed)return this;const i={doubles:null,naf:null,beta:null};return i.naf=this.LG(8),i.doubles=this.BG(4,t),i.beta=this.VG(),this.precomputed=i,this}NG(t){if(!this.precomputed)return!1;const i=this.precomputed.doubles;return!!i&&i.points.length>=Math.ceil((t.bitLength()+1)/i.step)}BG(t,i){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;const s=[this];let e=this;for(let h=0;h<i;h+=t){for(let i=0;i<t;i++)e=e.dbl();s.push(e)}return{step:t,points:s}}LG(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;const i=[this],s=(1<<t)-1,e=1===s?null:this.dbl();for(let t=1;t<s;t++)i[t]=i[t-1].add(e);return{wnd:t,points:i}}VG(){return null}dblp(t){let i=this;for(let s=0;s<t;s++)i=i.dbl();return i}}class jv extends Wv{constructor(t){super("short",t),this.a=new Vv(t.a,16).toRed(this.red),this.b=new Vv(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this.GG(t),this.HG=new Array(4),this.WG=new Array(4)}pointFromJSON(t,i){return $v.fromJSON(this,t,i)}GG(t){if(!this.zeroA||!this.g||!this.n||1!==this.p.modn(3))return;let i,s,e;if(t.beta)i=new Vv(t.beta,16).toRed(this.red);else{const t=this.UG(this.p);i=t[0].cmp(t[1])<0?t[0]:t[1],i=i.toRed(this.red)}if(t.lambda)s=new Vv(t.lambda,16);else{const t=this.UG(this.n);s=0===this.g.mul(t[0]).x.cmp(this.g.x.redMul(i))?t[0]:t[1]}return e=t.basis?t.basis.map((t=>({a:new Vv(t.a,16),b:new Vv(t.b,16)}))):this.jG(s),{beta:i,lambda:s,basis:e}}UG(t){const i=t===this.p?this.red:Vv.mont(t),s=new Vv(2).toRed(i).redInvm(),e=s.redNeg(),h=new Vv(3).toRed(i).redNeg().redSqrt().redMul(s);return[e.redAdd(h).fromRed(),e.redSub(h).fromRed()]}jG(t){const i=this.n.ushrn(Math.floor(this.n.bitLength()/2));let s,e,h,r,n,o,a,u,l,c=t,f=this.n.clone(),d=new Vv(1),g=new Vv(0),m=new Vv(0),y=new Vv(1),p=0;for(;0!==c.cmpn(0);){const t=f.div(c);u=f.sub(t.mul(c)),l=m.sub(t.mul(d));const n=y.sub(t.mul(g));if(!h&&u.cmp(i)<0)s=a.neg(),e=d,h=u.neg(),r=l;else if(h&&2==++p)break;a=u,f=c,c=u,m=d,d=l,y=g,g=n}n=u.neg(),o=l;const S=h.sqr().add(r.sqr());return n.sqr().add(o.sqr()).cmp(S)>=0&&(n=s,o=e),h.negative&&(h=h.neg(),r=r.neg()),n.negative&&(n=n.neg(),o=o.neg()),[{a:h,b:r},{a:n,b:o}]}$G(t){const i=this.endo.basis,s=i[0],e=i[1],h=e.b.mul(t).divRound(this.n),r=s.b.neg().mul(t).divRound(this.n),n=h.mul(s.a),o=r.mul(e.a),a=h.mul(s.b),u=r.mul(e.b);return{k1:t.sub(n).sub(o),k2:a.add(u).neg()}}point(t,i,s){return new $v(this,t,i,s)}pointFromX(t,i){(t=new Vv(t,16)).red||(t=t.toRed(this.red));const s=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b);let e=s.redSqrt();if(0!==e.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");const h=e.fromRed().isOdd();return(i&&!h||!i&&h)&&(e=e.redNeg()),this.point(t,e)}validate(t){if(t.inf)return!0;const i=t.x,s=t.y,e=this.a.redMul(i),h=i.redSqr().redMul(i).redIAdd(e).redIAdd(this.b);return 0===s.redSqr().redISub(h).cmpn(0)}YG(t,i,s){const e=this.HG,h=this.WG;let r=0;for(r=0;r<t.length;r++){const s=this.$G(i[r]);let n=t[r],o=n.VG();s.k1.negative&&(s.k1.ineg(),n=n.neg(!0)),s.k2.negative&&(s.k2.ineg(),o=o.neg(!0)),e[2*r]=n,e[2*r+1]=o,h[2*r]=s.k1,h[2*r+1]=s.k2}const n=this.EG(1,e,h,2*r,s);for(let t=0;t<2*r;t++)e[t]=null,h[t]=null;return n}jpoint(t,i,s){return new Yv(this,t,i,s)}}class $v extends Uv{constructor(t,i,s,e){super(t,"affine"),null===i&&null===s?(this.x=null,this.y=null,this.inf=!0):(this.x=new Vv(i,16),this.y=new Vv(s,16),e&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}pointFromX(t,i){throw new Error("Method not implemented.")}point(t,i,s){return new $v(this,t,i,s)}VG(){if(!this.curve.endo)return;const t=this.precomputed;if(t&&t.beta)return t.beta;const i=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){const s=this.curve,e=function(t){return s.point(t.x.redMul(s.endo.beta),t.y)};t.beta=i,i.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(e)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(e)}}}return i}toJSON(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]}static fromJSON(t,i,s){"string"==typeof i&&(i=JSON.parse(i));const e=t.point(i[0],i[1],s);if(!i[2])return e;function h(i){return t.point(i[0],i[1],s)}const r=i[2];return e.precomputed={beta:null,doubles:r.doubles&&{step:r.doubles.step,points:[e].concat(r.doubles.points.map(h))},naf:r.naf&&{wnd:r.naf.wnd,points:[e].concat(r.naf.points.map(h))}},e}inspect(){return this.isInfinity()?"<EC Point Infinity>":`<EC Point x: ${this.x.fromRed().toString(16,2)} y: ${this.y.fromRed().toString(16,2)}>`}isInfinity(){return this.inf}add(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);let i=this.y.redSub(t.y);0!==i.cmpn(0)&&(i=i.redMul(this.x.redSub(t.x).redInvm()));const s=i.redSqr().redISub(this.x).redISub(t.x),e=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,e)}dbl(){if(this.inf)return this;const t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);const i=this.curve.a,s=this.x.redSqr(),e=t.redInvm(),h=s.redAdd(s).redIAdd(s).redIAdd(i).redMul(e),r=h.redSqr().redISub(this.x.redAdd(this.x)),n=h.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)}getX(){return this.x.fromRed()}getY(){return this.y.fromRed()}mul(t){return t=new Vv(t,16),this.isInfinity()?this:this.NG(t)?this.curve.DG(this,t):this.curve.endo?this.curve.YG([this],[t]):this.curve.OG(this,t)}mulAdd(t,i,s){const e=[this,i],h=[t,s];return this.curve.endo?this.curve.YG(e,h):this.curve.EG(1,e,h,2)}jmulAdd(t,i,s){const e=[this,i],h=[t,s];return this.curve.endo?this.curve.YG(e,h,!0):this.curve.EG(1,e,h,2,!0)}eq(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))}neg(t){if(this.inf)return this;const i=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){const t=this.precomputed,s=function(t){return t.neg()};i.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(s)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(s)}}}return i}toJ(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)}}class Yv extends Uv{constructor(t,i,s,e){super(t,"jacobian"),null===i&&null===s&&null===e?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Vv(0)):(this.x=new Vv(i,16),this.y=new Vv(s,16),this.z=new Vv(e,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}getY(){throw new Error("Method not implemented.")}getX(){throw new Error("Method not implemented.")}pointFromX(t,i){throw new Error("Method not implemented.")}point(t,i,s){throw new Error("Method not implemented.")}jpoint(t,i,s){return new Yv(this,t,i,s)}toP(){if(this.isInfinity())return this.curve.point(null,null);const t=this.z.redInvm(),i=t.redSqr(),s=this.x.redMul(i),e=this.y.redMul(i).redMul(t);return this.curve.point(s,e)}neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)}add(t){if(this.isInfinity())return t;if(t.isInfinity())return this;const i=t.z.redSqr(),s=this.z.redSqr(),e=this.x.redMul(i),h=t.x.redMul(s),r=this.y.redMul(i.redMul(t.z)),n=t.y.redMul(s.redMul(this.z)),o=e.redSub(h),a=r.redSub(n);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const u=o.redSqr(),l=u.redMul(o),c=e.redMul(u),f=a.redSqr().redIAdd(l).redISub(c).redISub(c),d=a.redMul(c.redISub(f)).redISub(r.redMul(l)),g=this.z.redMul(t.z).redMul(o);return this.curve.jpoint(f,d,g)}mixedAdd(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;const i=this.z.redSqr(),s=this.x,e=t.x.redMul(i),h=this.y,r=t.y.redMul(i).redMul(this.z),n=s.redSub(e),o=h.redSub(r);if(0===n.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const a=n.redSqr(),u=a.redMul(n),l=s.redMul(a),c=o.redSqr().redIAdd(u).redISub(l).redISub(l),f=o.redMul(l.redISub(c)).redISub(h.redMul(u)),d=this.z.redMul(n);return this.curve.jpoint(c,f,d)}dblp(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){let i=this;for(let s=0;s<t;s++)i=i.dbl();return i}const i=this.curve.a,s=this.curve.tinv;let e=this.x;const h=this.y;let r=this.z,n=r.redSqr().redSqr(),o=h.redAdd(h);for(let s=0;s<t;s++){const h=e.redSqr(),a=o.redSqr(),u=a.redSqr(),l=h.redAdd(h).redIAdd(h).redIAdd(i.redMul(n)),c=e.redMul(a),f=l.redSqr().redISub(c.redAdd(c)),d=c.redISub(f);let g=l.redMul(d);g=g.redIAdd(g).redISub(u);const m=o.redMul(r);s+1<t&&(n=n.redMul(u)),e=f,r=m,o=g}return this.curve.jpoint(e,o.redMul(s),r)}dbl(){return this.isInfinity()?this:this.curve.zeroA?this.XG():this.curve.threeA?this.ZG():this.KG()}XG(){let t,i,s;if(this.zOne){const e=this.x.redSqr(),h=this.y.redSqr(),r=h.redSqr();let n=this.x.redAdd(h).redSqr().redISub(e).redISub(r);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e),a=o.redSqr().redISub(n).redISub(n);let u=r.redIAdd(r);u=u.redIAdd(u),u=u.redIAdd(u),t=a,i=o.redMul(n.redISub(a)).redISub(u),s=this.y.redAdd(this.y)}else{const e=this.x.redSqr(),h=this.y.redSqr(),r=h.redSqr();let n=this.x.redAdd(h).redSqr().redISub(e).redISub(r);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e),a=o.redSqr();let u=r.redIAdd(r);u=u.redIAdd(u),u=u.redIAdd(u),t=a.redISub(n).redISub(n),i=o.redMul(n.redISub(t)).redISub(u),s=this.y.redMul(this.z),s=s.redIAdd(s)}return this.curve.jpoint(t,i,s)}ZG(){let t,i,s;if(this.zOne){const e=this.x.redSqr(),h=this.y.redSqr(),r=h.redSqr();let n=this.x.redAdd(h).redSqr().redISub(e).redISub(r);n=n.redIAdd(n);const o=e.redAdd(e).redIAdd(e).redIAdd(this.curve.a),a=o.redSqr().redISub(n).redISub(n);t=a;let u=r.redIAdd(r);u=u.redIAdd(u),u=u.redIAdd(u),i=o.redMul(n.redISub(a)).redISub(u),s=this.y.redAdd(this.y)}else{const e=this.z.redSqr(),h=this.y.redSqr(),r=this.x.redMul(h);let n=this.x.redSub(e).redMul(this.x.redAdd(e));n=n.redAdd(n).redIAdd(n);let o=r.redIAdd(r);o=o.redIAdd(o);const a=o.redAdd(o);t=n.redSqr().redISub(a),s=this.y.redAdd(this.z).redSqr().redISub(h).redISub(e);let u=h.redSqr();u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u),i=n.redMul(o.redISub(t)).redISub(u)}return this.curve.jpoint(t,i,s)}KG(){const t=this.curve.a,i=this.x,s=this.y,e=this.z,h=e.redSqr().redSqr(),r=i.redSqr(),n=s.redSqr(),o=r.redAdd(r).redIAdd(r).redIAdd(t.redMul(h));let a=i.redAdd(i);a=a.redIAdd(a);const u=a.redMul(n),l=o.redSqr().redISub(u.redAdd(u)),c=u.redISub(l);let f=n.redSqr();f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);const d=o.redMul(c).redISub(f),g=s.redAdd(s).redMul(e);return this.curve.jpoint(l,d,g)}trpl(){if(!this.curve.zeroA)return this.dbl().add(this);const t=this.x.redSqr(),i=this.y.redSqr(),s=this.z.redSqr(),e=i.redSqr(),h=t.redAdd(t).redIAdd(t),r=h.redSqr();let n=this.x.redAdd(i).redSqr().redISub(t).redISub(e);n=n.redIAdd(n),n=n.redAdd(n).redIAdd(n),n=n.redISub(r);const o=n.redSqr();let a=e.redIAdd(e);a=a.redIAdd(a),a=a.redIAdd(a),a=a.redIAdd(a);const u=h.redIAdd(n).redSqr().redISub(r).redISub(o).redISub(a);let l=i.redMul(u);l=l.redIAdd(l),l=l.redIAdd(l);let c=this.x.redMul(o).redISub(l);c=c.redIAdd(c),c=c.redIAdd(c);let f=this.y.redMul(u.redMul(a.redISub(u)).redISub(n.redMul(o)));f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);const d=this.z.redAdd(n).redSqr().redISub(s).redISub(o);return this.curve.jpoint(c,f,d)}mul(t,i){return t=new Vv(t,i),this.curve.OG(this,t)}eq(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;const i=this.z.redSqr(),s=t.z.redSqr();if(0!==this.x.redMul(s).redISub(t.x.redMul(i)).cmpn(0))return!1;const e=i.redMul(this.z),h=s.redMul(t.z);return 0===this.y.redMul(h).redISub(t.y.redMul(e)).cmpn(0)}eqXToP(t){const i=this.z.redSqr(),s=t.toRed(this.curve.red).redMul(i);if(0===this.x.cmp(s))return!0;const e=t.clone(),h=this.curve.redN.redMul(i);for(;;){if(e.iadd(this.curve.n),e.cmp(this.curve.p)>=0)return!1;if(s.redIAdd(h),0===this.x.cmp(s))return!0}}inspect(){return this.isInfinity()?"<EC JPoint Infinity>":`<EC JPoint x: ${this.x.toString(16,2)} y: ${this.y.toString(16,2)} z: ${this.z.toString(16,2)}>`}isInfinity(){return 0===this.z.cmpn(0)}}class Xv{constructor(t){this.curve=new jv(t),this.g=this.curve.g,this.n=this.curve.n}}const Zv={};var Kv,qv;Zv.PresetCurve=Xv,Kv="secp256k1",qv={type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]},Object.defineProperty(Zv,Kv,{configurable:!0,enumerable:!0,get(){const t=new Xv(qv);return Object.defineProperty(Zv,Kv,{configurable:!0,enumerable:!0,value:t}),t}});class Jv{constructor(t,i){this.ec=t,this.priv=null,this.pub=null,i.pub&&this.qG(i.pub,i.pubEnc)}static fromPublic(t,i,s){return i instanceof Jv?i:new Jv(t,{pub:i,pubEnc:s})}validate(){const t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}}getPublic(t,i){return"string"==typeof t&&(i=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),i?this.pub.encode(i,t):this.pub}qG(t,i){if(t.x||t.y)return"mont"===this.ec.curve.type||"short"===this.ec.curve.type||this.ec.curve.type,void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,i)}verify(t,i){return this.ec.verify(t,i,this)}}function Qv(t,i){const s=t[i.place++];if(!(128&s))return s;const e=15&s;if(0===e||e>4)return!1;let h=0,r=i.place;for(let i=0;i<e;i++,r++)h<<=8,h|=t[r],h>>>=0;return!(h<=127)&&(i.place=r,h)}class tb{constructor(){this.place=0}}class ib{constructor(t,i){if(t instanceof ib)return t;this.JG(t,i)||(this.r=new Vv(t.r,16),this.s=new Vv(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}JG(t,i){t=Nv(t,i);const s=new tb;if(48!==t[s.place++])return!1;const e=Qv(t,s);if(!1===e)return!1;if(e+s.place!==t.length)return!1;if(2!==t[s.place++])return!1;const h=Qv(t,s);if(!1===h)return!1;let r=t.slice(s.place,h+s.place);if(s.place+=h,2!==t[s.place++])return!1;const n=Qv(t,s);if(!1===n)return!1;if(t.length!==n+s.place)return!1;let o=t.slice(s.place,n+s.place);if(0===r[0]){if(!(128&r[1]))return!1;r=r.slice(1)}if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}return this.r=new Vv(r),this.s=new Vv(o),this.recoveryParam=null,!0}}class sb{constructor(t){if(!(this instanceof sb))return new sb(t);"string"==typeof t&&(t=Zv[t]),t instanceof Zv.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1)}keyFromPublic(t,i){return Jv.fromPublic(this,t,i)}QG(t,i){const s=8*t.byteLength()-this.n.bitLength();return s>0&&(t=t.ushrn(s)),!i&&t.cmp(this.n)>=0?t.sub(this.n):t}verify(t,i,s,e){t=this.QG(new Vv(t,16)),s=this.keyFromPublic(s,e);const h=(i=new ib(i,"hex")).r,r=i.s;if(h.cmpn(1)<0||h.cmp(this.n)>=0)return!1;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;const n=r.invm(this.n),o=n.mul(t).umod(this.n),a=n.mul(h).umod(this.n);if(!this.curve.PG){const t=this.g.mulAdd(o,s.getPublic(),a);return!t.isInfinity()&&0===t.getX().umod(this.n).cmp(h)}const u=this.g.jmulAdd(o,s.getPublic(),a);return!u.isInfinity()&&u.eqXToP(h)}}var eb,hb={exports:{}},rb={exports:{}};rb.exports=(eb=eb||function(t,i){var s;if("undefined"!=typeof window&&window.crypto&&(s=window.crypto),"undefined"!=typeof self&&self.crypto&&(s=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(s=globalThis.crypto),!s&&"undefined"!=typeof window&&window.msCrypto&&(s=window.msCrypto),!s&&void 0!==vS&&vS.crypto&&(s=vS.crypto),!s)try{s=i}catch(t){}var e=function(){if(s){if("function"==typeof s.getRandomValues)try{return s.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof s.randomBytes)try{return s.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},h=Object.create||function(){function t(){}return function(i){var s;return t.prototype=i,s=new t,t.prototype=null,s}}(),r={},n=r.lib={},o=n.Base={extend:function(t){var i=h(this);return t&&i.mixIn(t),i.hasOwnProperty("init")&&this.init!==i.init||(i.init=function(){i.$super.init.apply(this,arguments)}),i.init.prototype=i,i.$super=this,i},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=n.WordArray=o.extend({init:function(t,s){t=this.words=t||[],this.sigBytes=s!=i?s:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var i=this.words,s=t.words,e=this.sigBytes,h=t.sigBytes;if(this.clamp(),e%4)for(var r=0;r<h;r++){var n=s[r>>>2]>>>24-r%4*8&255;i[e+r>>>2]|=n<<24-(e+r)%4*8}else for(var o=0;o<h;o+=4)i[e+o>>>2]=s[o>>>2];return this.sigBytes+=h,this},clamp:function(){var i=this.words,s=this.sigBytes;i[s>>>2]&=4294967295<<32-s%4*8,i.length=t.ceil(s/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var i=[],s=0;s<t;s+=4)i.push(e());return new a.init(i,t)}}),u=r.enc={},l=u.Hex={stringify:function(t){for(var i=t.words,s=t.sigBytes,e=[],h=0;h<s;h++){var r=i[h>>>2]>>>24-h%4*8&255;e.push((r>>>4).toString(16)),e.push((15&r).toString(16))}return e.join("")},parse:function(t){for(var i=t.length,s=[],e=0;e<i;e+=2)s[e>>>3]|=parseInt(t.substr(e,2),16)<<24-e%8*4;return new a.init(s,i/2)}},c=u.Latin1={stringify:function(t){for(var i=t.words,s=t.sigBytes,e=[],h=0;h<s;h++){var r=i[h>>>2]>>>24-h%4*8&255;e.push(String.fromCharCode(r))}return e.join("")},parse:function(t){for(var i=t.length,s=[],e=0;e<i;e++)s[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new a.init(s,i)}},f=u.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},d=n.BufferedBlockAlgorithm=o.extend({reset:function(){this.hk=new a.init,this.tH=0},iH:function(t){"string"==typeof t&&(t=f.parse(t)),this.hk.concat(t),this.tH+=t.sigBytes},sH:function(i){var s,e=this.hk,h=e.words,r=e.sigBytes,n=this.blockSize,o=r/(4*n),u=(o=i?t.ceil(o):t.max((0|o)-this.eH,0))*n,l=t.min(4*u,r);if(u){for(var c=0;c<u;c+=n)this.hH(h,c);s=h.splice(0,u),e.sigBytes-=l}return new a.init(s,l)},clone:function(){var t=o.clone.call(this);return t.hk=this.hk.clone(),t},eH:0});n.Hasher=d.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){d.reset.call(this),this.rH()},update:function(t){return this.iH(t),this.sH(),this},finalize:function(t){return t&&this.iH(t),this.nH()},blockSize:16,oH:function(t){return function(i,s){return new t.init(s).finalize(i)}},aH:function(t){return function(i,s){return new g.HMAC.init(t,s).finalize(i)}}});var g=r.algo={};return r}(Math),eb);var nb={exports:{}};!function(t,i){var s;t.exports=(s=rb.exports,function(t){var i=s,e=i.lib,h=e.WordArray,r=e.Hasher,n=i.algo,o=[],a=[];!function(){function i(i){for(var s=t.sqrt(i),e=2;e<=s;e++)if(!(i%e))return!1;return!0}function s(t){return 4294967296*(t-(0|t))|0}for(var e=2,h=0;h<64;)i(e)&&(h<8&&(o[h]=s(t.pow(e,.5))),a[h]=s(t.pow(e,1/3)),h++),e++}();var u=[],l=n.SHA256=r.extend({rH:function(){this.uH=new h.init(o.slice(0))},hH:function(t,i){for(var s=this.uH.words,e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],l=s[5],c=s[6],f=s[7],d=0;d<64;d++){if(d<16)u[d]=0|t[i+d];else{var g=u[d-15],m=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,y=u[d-2],p=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;u[d]=m+u[d-7]+p+u[d-16]}var S=e&h^e&r^h&r,v=(e<<30|e>>>2)^(e<<19|e>>>13)^(e<<10|e>>>22),b=f+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&l^~o&c)+a[d]+u[d];f=c,c=l,l=o,o=n+b|0,n=r,r=h,h=e,e=b+(v+S)|0}s[0]=s[0]+e|0,s[1]=s[1]+h|0,s[2]=s[2]+r|0,s[3]=s[3]+n|0,s[4]=s[4]+o|0,s[5]=s[5]+l|0,s[6]=s[6]+c|0,s[7]=s[7]+f|0},nH:function(){var i=this.hk,s=i.words,e=8*this.tH,h=8*i.sigBytes;return s[h>>>5]|=128<<24-h%32,s[14+(h+64>>>9<<4)]=t.floor(e/4294967296),s[15+(h+64>>>9<<4)]=e,i.sigBytes=4*s.length,this.sH(),this.uH},clone:function(){var t=r.clone.call(this);return t.uH=this.uH.clone(),t}});i.SHA256=r.oH(l),i.HmacSHA256=r.aH(l)}(Math),s.SHA256)}(nb);var ob=nb.exports;!function(t,i){var s,e,h,r,n,o;t.exports=(e=(s=o=rb.exports).lib.WordArray,h=s.algo,r=h.SHA256,n=h.SHA224=r.extend({rH:function(){this.uH=new e.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},nH:function(){var t=r.nH.call(this);return t.sigBytes-=4,t}}),s.SHA224=r.oH(n),s.HmacSHA224=r.aH(n),o.SHA224)}(hb);var ab=hb.exports,ub={exports:{}};!function(t,i){t.exports=rb.exports.enc.Hex}(ub);var lb=ub.exports,cb={exports:{}};!function(t,i){t.exports=rb.exports.enc.Utf8}(cb);var fb=cb.exports,db={exports:{}};!function(t,i){var s,e,h;t.exports=(h=(e=s=rb.exports).lib.WordArray,e.enc.Base64={stringify:function(t){var i=t.words,s=t.sigBytes,e=this.it;t.clamp();for(var h=[],r=0;r<s;r+=3)for(var n=(i[r>>>2]>>>24-r%4*8&255)<<16|(i[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|i[r+2>>>2]>>>24-(r+2)%4*8&255,o=0;o<4&&r+.75*o<s;o++)h.push(e.charAt(n>>>6*(3-o)&63));var a=e.charAt(64);if(a)for(;h.length%4;)h.push(a);return h.join("")},parse:function(t){var i=t.length,s=this.it,e=this.lH;if(!e){e=this.lH=[];for(var r=0;r<s.length;r++)e[s.charCodeAt(r)]=r}var n=s.charAt(64);if(n){var o=t.indexOf(n);-1!==o&&(i=o)}return function(t,i,s){for(var e=[],r=0,n=0;n<i;n++)if(n%4){var o=s[t.charCodeAt(n-1)]<<n%4*2|s[t.charCodeAt(n)]>>>6-n%4*2;e[r>>>2]|=o<<24-r%4*8,r++}return h.create(e,r)}(t,i,e)},it:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},s.enc.Base64)}({exports:{}});!function(t,i){var s;t.exports=(s=rb.exports,function(t){var i=s,e=i.lib,h=e.WordArray,r=e.Hasher,n=i.algo,o=[];!function(){for(var i=0;i<64;i++)o[i]=4294967296*t.abs(t.sin(i+1))|0}();var a=n.MD5=r.extend({rH:function(){this.uH=new h.init([1732584193,4023233417,2562383102,271733878])},hH:function(t,i){for(var s=0;s<16;s++){var e=i+s,h=t[e];t[e]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}var r=this.uH.words,n=t[i+0],a=t[i+1],d=t[i+2],g=t[i+3],m=t[i+4],y=t[i+5],p=t[i+6],S=t[i+7],v=t[i+8],b=t[i+9],x=t[i+10],M=t[i+11],_=t[i+12],w=t[i+13],A=t[i+14],k=t[i+15],C=r[0],T=r[1],I=r[2],F=r[3];C=u(C,T,I,F,n,7,o[0]),F=u(F,C,T,I,a,12,o[1]),I=u(I,F,C,T,d,17,o[2]),T=u(T,I,F,C,g,22,o[3]),C=u(C,T,I,F,m,7,o[4]),F=u(F,C,T,I,y,12,o[5]),I=u(I,F,C,T,p,17,o[6]),T=u(T,I,F,C,S,22,o[7]),C=u(C,T,I,F,v,7,o[8]),F=u(F,C,T,I,b,12,o[9]),I=u(I,F,C,T,x,17,o[10]),T=u(T,I,F,C,M,22,o[11]),C=u(C,T,I,F,_,7,o[12]),F=u(F,C,T,I,w,12,o[13]),I=u(I,F,C,T,A,17,o[14]),C=l(C,T=u(T,I,F,C,k,22,o[15]),I,F,a,5,o[16]),F=l(F,C,T,I,p,9,o[17]),I=l(I,F,C,T,M,14,o[18]),T=l(T,I,F,C,n,20,o[19]),C=l(C,T,I,F,y,5,o[20]),F=l(F,C,T,I,x,9,o[21]),I=l(I,F,C,T,k,14,o[22]),T=l(T,I,F,C,m,20,o[23]),C=l(C,T,I,F,b,5,o[24]),F=l(F,C,T,I,A,9,o[25]),I=l(I,F,C,T,g,14,o[26]),T=l(T,I,F,C,v,20,o[27]),C=l(C,T,I,F,w,5,o[28]),F=l(F,C,T,I,d,9,o[29]),I=l(I,F,C,T,S,14,o[30]),C=c(C,T=l(T,I,F,C,_,20,o[31]),I,F,y,4,o[32]),F=c(F,C,T,I,v,11,o[33]),I=c(I,F,C,T,M,16,o[34]),T=c(T,I,F,C,A,23,o[35]),C=c(C,T,I,F,a,4,o[36]),F=c(F,C,T,I,m,11,o[37]),I=c(I,F,C,T,S,16,o[38]),T=c(T,I,F,C,x,23,o[39]),C=c(C,T,I,F,w,4,o[40]),F=c(F,C,T,I,n,11,o[41]),I=c(I,F,C,T,g,16,o[42]),T=c(T,I,F,C,p,23,o[43]),C=c(C,T,I,F,b,4,o[44]),F=c(F,C,T,I,_,11,o[45]),I=c(I,F,C,T,k,16,o[46]),C=f(C,T=c(T,I,F,C,d,23,o[47]),I,F,n,6,o[48]),F=f(F,C,T,I,S,10,o[49]),I=f(I,F,C,T,A,15,o[50]),T=f(T,I,F,C,y,21,o[51]),C=f(C,T,I,F,_,6,o[52]),F=f(F,C,T,I,g,10,o[53]),I=f(I,F,C,T,x,15,o[54]),T=f(T,I,F,C,a,21,o[55]),C=f(C,T,I,F,v,6,o[56]),F=f(F,C,T,I,k,10,o[57]),I=f(I,F,C,T,p,15,o[58]),T=f(T,I,F,C,w,21,o[59]),C=f(C,T,I,F,m,6,o[60]),F=f(F,C,T,I,M,10,o[61]),I=f(I,F,C,T,d,15,o[62]),T=f(T,I,F,C,b,21,o[63]),r[0]=r[0]+C|0,r[1]=r[1]+T|0,r[2]=r[2]+I|0,r[3]=r[3]+F|0},nH:function(){var i=this.hk,s=i.words,e=8*this.tH,h=8*i.sigBytes;s[h>>>5]|=128<<24-h%32;var r=t.floor(e/4294967296),n=e;s[15+(h+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),s[14+(h+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),i.sigBytes=4*(s.length+1),this.sH();for(var o=this.uH,a=o.words,u=0;u<4;u++){var l=a[u];a[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return o},clone:function(){var t=r.clone.call(this);return t.uH=this.uH.clone(),t}});function u(t,i,s,e,h,r,n){var o=t+(i&s|~i&e)+h+n;return(o<<r|o>>>32-r)+i}function l(t,i,s,e,h,r,n){var o=t+(i&e|s&~e)+h+n;return(o<<r|o>>>32-r)+i}function c(t,i,s,e,h,r,n){var o=t+(i^s^e)+h+n;return(o<<r|o>>>32-r)+i}function f(t,i,s,e,h,r,n){var o=t+(s^(i|~e))+h+n;return(o<<r|o>>>32-r)+i}i.MD5=r.oH(a),i.HmacMD5=r.aH(a)}(Math),s.MD5)}({exports:{}});!function(t,i){var s,e,h,r,n,o,a,u;t.exports=(e=(s=u=rb.exports).lib,h=e.WordArray,r=e.Hasher,n=s.algo,o=[],a=n.SHA1=r.extend({rH:function(){this.uH=new h.init([1732584193,4023233417,2562383102,271733878,3285377520])},hH:function(t,i){for(var s=this.uH.words,e=s[0],h=s[1],r=s[2],n=s[3],a=s[4],u=0;u<80;u++){if(u<16)o[u]=0|t[i+u];else{var l=o[u-3]^o[u-8]^o[u-14]^o[u-16];o[u]=l<<1|l>>>31}var c=(e<<5|e>>>27)+a+o[u];c+=u<20?1518500249+(h&r|~h&n):u<40?1859775393+(h^r^n):u<60?(h&r|h&n|r&n)-1894007588:(h^r^n)-899497514,a=n,n=r,r=h<<30|h>>>2,h=e,e=c}s[0]=s[0]+e|0,s[1]=s[1]+h|0,s[2]=s[2]+r|0,s[3]=s[3]+n|0,s[4]=s[4]+a|0},nH:function(){var t=this.hk,i=t.words,s=8*this.tH,e=8*t.sigBytes;return i[e>>>5]|=128<<24-e%32,i[14+(e+64>>>9<<4)]=Math.floor(s/4294967296),i[15+(e+64>>>9<<4)]=s,t.sigBytes=4*i.length,this.sH(),this.uH},clone:function(){var t=r.clone.call(this);return t.uH=this.uH.clone(),t}}),s.SHA1=r.oH(a),s.HmacSHA1=r.aH(a),u.SHA1)}({exports:{}});!function(t,i){var s,e,h;t.exports=(e=(s=rb.exports).lib.Base,h=s.enc.Utf8,void(s.algo.HMAC=e.extend({init:function(t,i){t=this.cH=new t.init,"string"==typeof i&&(i=h.parse(i));var s=t.blockSize,e=4*s;i.sigBytes>e&&(i=t.finalize(i)),i.clamp();for(var r=this.fH=i.clone(),n=this.dH=i.clone(),o=r.words,a=n.words,u=0;u<s;u++)o[u]^=1549556828,a[u]^=909522486;r.sigBytes=n.sigBytes=e,this.reset()},reset:function(){var t=this.cH;t.reset(),t.update(this.dH)},update:function(t){return this.cH.update(t),this},finalize:function(t){var i=this.cH,s=i.finalize(t);return i.reset(),i.finalize(this.fH.clone().concat(s))}})))}({exports:{}}),function(t,i){var s,e,h,r,n,o,a,u;t.exports=(h=(e=(s=u=rb.exports).lib).Base,r=e.WordArray,o=(n=s.algo).MD5,a=n.EvpKDF=h.extend({cfg:h.extend({keySize:4,hasher:o,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,i){for(var s,e=this.cfg,h=e.hasher.create(),n=r.create(),o=n.words,a=e.keySize,u=e.iterations;o.length<a;){s&&h.update(s),s=h.update(t).finalize(i),h.reset();for(var l=1;l<u;l++)s=h.finalize(s),h.reset();n.concat(s)}return n.sigBytes=4*a,n}}),s.EvpKDF=function(t,i,s){return a.create(s).compute(t,i)},u.EvpKDF)}({exports:{}});!function(t,i){var s;t.exports=void((s=rb.exports).lib.Cipher||function(t){var i=s,e=i.lib,h=e.Base,r=e.WordArray,n=e.BufferedBlockAlgorithm,o=i.enc;o.Utf8;var a=o.Base64,u=i.algo.EvpKDF,l=e.Cipher=n.extend({cfg:h.extend(),createEncryptor:function(t,i){return this.create(this.gH,t,i)},createDecryptor:function(t,i){return this.create(this.mH,t,i)},init:function(t,i,s){this.cfg=this.cfg.extend(s),this.yH=t,this.pH=i,this.reset()},reset:function(){n.reset.call(this),this.rH()},process:function(t){return this.iH(t),this.sH()},finalize:function(t){return t&&this.iH(t),this.nH()},keySize:4,ivSize:4,gH:1,mH:2,oH:function(){function t(t){return"string"==typeof t?v:p}return function(i){return{encrypt:function(s,e,h){return t(e).encrypt(i,s,e,h)},decrypt:function(s,e,h){return t(e).decrypt(i,s,e,h)}}}}()});e.StreamCipher=l.extend({nH:function(){return this.sH(!0)},blockSize:1});var c=i.mode={},f=e.BlockCipherMode=h.extend({createEncryptor:function(t,i){return this.Encryptor.create(t,i)},createDecryptor:function(t,i){return this.Decryptor.create(t,i)},init:function(t,i){this.SH=t,this.vH=i}}),d=c.CBC=function(){var t=f.extend();function i(t,i,s){var e,h=this.vH;h?(e=h,this.vH=undefined):e=this.bH;for(var r=0;r<s;r++)t[i+r]^=e[r]}return t.Encryptor=t.extend({processBlock:function(t,s){var e=this.SH,h=e.blockSize;i.call(this,t,s,h),e.encryptBlock(t,s),this.bH=t.slice(s,s+h)}}),t.Decryptor=t.extend({processBlock:function(t,s){var e=this.SH,h=e.blockSize,r=t.slice(s,s+h);e.decryptBlock(t,s),i.call(this,t,s,h),this.bH=r}}),t}(),g=(i.pad={}).Pkcs7={pad:function(t,i){for(var s=4*i,e=s-t.sigBytes%s,h=e<<24|e<<16|e<<8|e,n=[],o=0;o<e;o+=4)n.push(h);var a=r.create(n,e);t.concat(a)},unpad:function(t){var i=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=i}};e.BlockCipher=l.extend({cfg:l.cfg.extend({mode:d,padding:g}),reset:function(){var t;l.reset.call(this);var i=this.cfg,s=i.iv,e=i.mode;this.yH==this.gH?t=e.createEncryptor:(t=e.createDecryptor,this.eH=1),this.xH&&this.xH.MH==t?this.xH.init(this,s&&s.words):(this.xH=t.call(e,this,s&&s.words),this.xH.MH=t)},hH:function(t,i){this.xH.processBlock(t,i)},nH:function(){var t,i=this.cfg.padding;return this.yH==this.gH?(i.pad(this.hk,this.blockSize),t=this.sH(!0)):(t=this.sH(!0),i.unpad(t)),t},blockSize:4});var m=e.CipherParams=h.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),y=(i.format={}).OpenSSL={stringify:function(t){var i=t.ciphertext,s=t.salt;return(s?r.create([1398893684,1701076831]).concat(s).concat(i):i).toString(a)},parse:function(t){var i,s=a.parse(t),e=s.words;return 1398893684==e[0]&&1701076831==e[1]&&(i=r.create(e.slice(2,4)),e.splice(0,4),s.sigBytes-=16),m.create({ciphertext:s,salt:i})}},p=e.SerializableCipher=h.extend({cfg:h.extend({format:y}),encrypt:function(t,i,s,e){e=this.cfg.extend(e);var h=t.createEncryptor(s,e),r=h.finalize(i),n=h.cfg;return m.create({ciphertext:r,key:s,iv:n.iv,algorithm:t,mode:n.mode,padding:n.padding,blockSize:t.blockSize,formatter:e.format})},decrypt:function(t,i,s,e){return e=this.cfg.extend(e),i=this._H(i,e.format),t.createDecryptor(s,e).finalize(i.ciphertext)},_H:function(t,i){return"string"==typeof t?i.parse(t,this):t}}),S=(i.kdf={}).OpenSSL={execute:function(t,i,s,e){e||(e=r.random(8));var h=u.create({keySize:i+s}).compute(t,e),n=r.create(h.words.slice(i),4*s);return h.sigBytes=4*i,m.create({key:h,iv:n,salt:e})}},v=e.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:S}),encrypt:function(t,i,s,e){var h=(e=this.cfg.extend(e)).kdf.execute(s,t.keySize,t.ivSize);e.iv=h.iv;var r=p.encrypt.call(this,t,i,h.key,e);return r.mixIn(h),r},decrypt:function(t,i,s,e){e=this.cfg.extend(e),i=this._H(i,e.format);var h=e.kdf.execute(s,t.keySize,t.ivSize,i.salt);return e.iv=h.iv,p.decrypt.call(this,t,i,h.key,e)}})}())}({exports:{}}),function(t,i){var s;t.exports=(s=rb.exports,function(){var t=s,i=t.lib.BlockCipher,e=t.algo,h=[],r=[],n=[],o=[],a=[],u=[],l=[],c=[],f=[],d=[];!function(){for(var t=[],i=0;i<256;i++)t[i]=i<128?i<<1:i<<1^283;var s=0,e=0;for(i=0;i<256;i++){var g=e^e<<1^e<<2^e<<3^e<<4;g=g>>>8^255&g^99,h[s]=g,r[g]=s;var m=t[s],y=t[m],p=t[y],S=257*t[g]^16843008*g;n[s]=S<<24|S>>>8,o[s]=S<<16|S>>>16,a[s]=S<<8|S>>>24,u[s]=S,S=16843009*p^65537*y^257*m^16843008*s,l[g]=S<<24|S>>>8,c[g]=S<<16|S>>>16,f[g]=S<<8|S>>>24,d[g]=S,s?(s=m^t[t[t[p^m]]],e^=t[t[e]]):s=e=1}}();var g=[0,1,2,4,8,16,32,64,128,27,54],m=e.AES=i.extend({rH:function(){if(!this.wH||this.AH!==this.pH){for(var t=this.AH=this.pH,i=t.words,s=t.sigBytes/4,e=4*((this.wH=s+6)+1),r=this.kH=[],n=0;n<e;n++)n<s?r[n]=i[n]:(u=r[n-1],n%s?s>6&&n%s==4&&(u=h[u>>>24]<<24|h[u>>>16&255]<<16|h[u>>>8&255]<<8|h[255&u]):(u=h[(u=u<<8|u>>>24)>>>24]<<24|h[u>>>16&255]<<16|h[u>>>8&255]<<8|h[255&u],u^=g[n/s|0]<<24),r[n]=r[n-s]^u);for(var o=this.CH=[],a=0;a<e;a++){if(n=e-a,a%4)var u=r[n];else u=r[n-4];o[a]=a<4||n<=4?u:l[h[u>>>24]]^c[h[u>>>16&255]]^f[h[u>>>8&255]]^d[h[255&u]]}}},encryptBlock:function(t,i){this.TH(t,i,this.kH,n,o,a,u,h)},decryptBlock:function(t,i){var s=t[i+1];t[i+1]=t[i+3],t[i+3]=s,this.TH(t,i,this.CH,l,c,f,d,r),s=t[i+1],t[i+1]=t[i+3],t[i+3]=s},TH:function(t,i,s,e,h,r,n,o){for(var a=this.wH,u=t[i]^s[0],l=t[i+1]^s[1],c=t[i+2]^s[2],f=t[i+3]^s[3],d=4,g=1;g<a;g++){var m=e[u>>>24]^h[l>>>16&255]^r[c>>>8&255]^n[255&f]^s[d++],y=e[l>>>24]^h[c>>>16&255]^r[f>>>8&255]^n[255&u]^s[d++],p=e[c>>>24]^h[f>>>16&255]^r[u>>>8&255]^n[255&l]^s[d++],S=e[f>>>24]^h[u>>>16&255]^r[l>>>8&255]^n[255&c]^s[d++];u=m,l=y,c=p,f=S}m=(o[u>>>24]<<24|o[l>>>16&255]<<16|o[c>>>8&255]<<8|o[255&f])^s[d++],y=(o[l>>>24]<<24|o[c>>>16&255]<<16|o[f>>>8&255]<<8|o[255&u])^s[d++],p=(o[c>>>24]<<24|o[f>>>16&255]<<16|o[u>>>8&255]<<8|o[255&l])^s[d++],S=(o[f>>>24]<<24|o[u>>>16&255]<<16|o[l>>>8&255]<<8|o[255&c])^s[d++],t[i]=m,t[i+1]=y,t[i+2]=p,t[i+3]=S},keySize:8});t.AES=i.oH(m)}(),s.AES)}(db);var gb=db.exports,mb={exports:{}};!function(t,i){var s,e,h;t.exports=((h=rb.exports).mode.CTR=(e=(s=h.lib.BlockCipherMode.extend()).Encryptor=s.extend({processBlock:function(t,i){var s=this.SH,e=s.blockSize,h=this.vH,r=this.IH;h&&(r=this.IH=h.slice(0),this.vH=void 0);var n=r.slice(0);s.encryptBlock(n,0),r[e-1]=r[e-1]+1|0;for(var o=0;o<e;o++)t[i+o]^=n[o]}}),s.Decryptor=e,s),h.mode.CTR)}(mb);var yb=mb.exports,pb={exports:{}};!function(t,i){var s;t.exports=(s=rb.exports,function(){if("function"==typeof ArrayBuffer){var t=s.lib.WordArray,i=t.init,e=t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var s=t.byteLength,e=[],h=0;h<s;h++)e[h>>>2]|=t[h]<<24-h%4*8;i.call(this,e,s)}else i.apply(this,arguments)};e.prototype=t}}(),s.lib.WordArray)}(pb);var Sb=pb.exports,vb={exports:{}};!function(t,i){var s;t.exports=((s=rb.exports).pad.NoPadding={pad:function(){},unpad:function(){}},s.pad.NoPadding)}(vb);var bb=vb.exports;const xb=9e5,Mb={"-4":["MDQxMmQ1MWU5MjFhYTMzODUwMWE4ZGYzN2ViZTE4NTU3ZDViYmRlZDg1Yzk0OGI3YTJkMDBmZTNhZGVlMjdjY2VmNzBiMWVlOWI3MDZjMTIwYTAzZDZlZTNkNmYyOTc5Y2E2NGEzN2Y3YjY4N2E1ZjljZWY2ODYxN2I1NWU5ZmJjMA=="],"-3":["MjAxODAxMjA="],"-2":["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2Vzc2lvbg=="],"-1":["WE1MSHR0cFJlcXVlc3Q=","ZG9jdW1lbnQ=","ZGVmYXVsdFZpZXc=","YQ==","Yg==","bGljZW5zZV9leHBpcmF0aW9uX2RhdGU=","bG9jYXRpb24=","aG9zdG5hbWU=","dGVzdF9kb21haW4=","ZG9tYWlucw==","Y3J5cHRv","U2lnbmF0dXJl","RUNEU0E=","U0hBMjI0d2l0aEVDRFNB","YWxn","Y3VydmU=","c2VjcDI1Nmsx","YWRkRXZlbnRMaXN0ZW5lcg==","cmVtb3ZlRXZlbnRMaXN0ZW5lcg==","bG9hZGVuZA==","ZXJyb3I=","YWJvcnQ=","dGltZW91dA==","cmVzcG9uc2VUZXh0","Q29udGVudC1UeXBl","YXBwbGljYXRpb24vanNvbg==","TWVzc2FnZURpZ2VzdA==","c2hhMjU2","Y3J5cHRvanM=","dXBkYXRlU3RyaW5n","ZGlnZXN0","Y29tcGFueQ==","YXBwVGl0bGU=","bGNqcy1zZXNzaW9u","bG9jYWxTdG9yYWdl","Z2V0SXRlbQ==","c2V0SXRlbQ==","ZA==","dA==","bGNqcy1zZXNzaW9uLTI="],0:["TGljZW5zZQ==","IA==","a2V5","aGFz","ZXhwaXJlZA==","Lg==","dmVyc2lvbg==","aXM=","dG9v","bmV3","b2xk","b3I=","aW52YWxpZA==","MDAwMQ==","SW52YWxpZA==","bnVtYmVy","b2Y=","ZG9tYWlucw==","ZGVwbG95bWVudA==","aW4=","ZG9tYWlu","RGVwbG95bWVudA==","ZG9tYWlu","dmFsaWRhdGlvbg==","ZmFpbGVk","Og==","UE9TVA==","c2VydmVy","cmVzcG9uZGVk","d2l0aA==","dW5leHBlY3RlZA==","dmFsdWU=","cmVxdWVzdA==","VEVTVA==","REVQTE9ZTUVOVA==","S2V5","VGFtcGVyaW5n","YmVlbg==","ZGV0ZWN0ZWQ=","TWlzc2luZw==","TGljZW5zZQ==","aW5mb3JtYXRpb24=","ZG9lcw==","bm90","aW5jbHVkZQ==","cGVybWlzc2lvbg==","dG8=","dXNl","Q2hhcnQ=","M0Q=","WFk=","RGF0YUdyaWQ=","TWFw","UG9sYXI=","RnVubmVs","R2F1Z2U=","UGll","UHlyYW1pZA==","U3BpZGVy","Zm9y","dGhpcw=="]},_b=yh,wb=(...t)=>t.slice(1).reduce(((i,s)=>i+_b.atob(Mb[t[0]][s].toString())),"");let Ab,kb,Cb=!1,Tb=new Uint8Array([34]);class Ib{set e(t){Ab=t}get e(){kb={rr:!1,nr:!1,ar:!1,ur:!1,lr:!1,cr:!1};const t=Tb.length>=1?Tb[0]:void 0;return void 0!==t&&(kb.rr=!!(1&t),kb.nr=!!(2&t),kb.ar=!!(4&t),kb.ur=!!(8&t),kb.lr=!!(16&t),kb.cr=!!(32&t)),kb.cr}}let Fb=!1;const Pb=(t,i)=>{const s=new RegExp(`.{${i}}`,"g");return(t.match(s)||[]).map((t=>parseInt(t,16)))},Db=t=>{if(4===t.byteLength)return`${t[0].toString().padStart(2,"0")}${t[1].toString().padStart(2,"0")}${t[2].toString().padStart(2,"0")}${t[3].toString().padStart(2,"0")}`},Bb=t=>t.getFullYear().toString()+(t.getMonth()+1).toString().padStart(2,"0")+t.getDate().toString().padStart(2,"0"),Ob=t=>{const i={},s=t.split("-");if(3!==s.length)throw new Error(wb(0,0,1,7,1,12,5));let e=0;const h=Uint8Array.from(atob(s[1]),(t=>t.charCodeAt(0)));e+=1;const r=h.subarray(e,e+=20),n=new DataView(h.buffer).getUint16(e,!0);e+=2;const o=Uint8Array.from(Array(n));for(let t=0;t<n;t+=1)o[t]=h[t+e]^r[t%r.byteLength];const a=new DataView(o.buffer);i.FH=o,e=0;const u=Uint8Array.from(Array(a.getUint16(e,!0)));e+=2,u.set(o.subarray(e,e+=u.byteLength)),Tb=new Uint8Array(u);const l=Db(o.subarray(e,e+=4)),c=wb(-3,0);if(!l)throw new Error(wb(0,0,1,7,1,12,5));if(l<c)throw new Error(wb(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5));if(8&u[0]){const t=Db(o.subarray(e,e+=4)),i=Bb(new Date);if(!t)throw new Error(wb(0,0,1,7,1,12,5));if(t<i)throw new Error(wb(0,0,1,2,1,3,1,4,5))}i.PH=e;const f=`${s[0]}-${s[1]}`,d=Array.prototype.reduce.call(atob(s[2]),((t,i)=>t+`0${i.charCodeAt(0).toString(16)}`.slice(-2)),"");return Rb(f,d)?i:null},Lb=t=>{const i=t.slice(0,4);let s=t.slice(5);switch(i){case"0001":{s=s.replace(/-/g,"");const t=Uint8Array.from(Pb(s,2)),i=t.slice(36,40),e=new Uint8Array(4),h=(t=>{let i;const s=[];for(let t=0;t<256;t+=1){i=t;for(let t=0;t<8;t+=1)i=1&i?3988292384^i>>>1:i>>>1;s[t]=i}let e=-1;for(let i=0;i<t.length;i+=1)e=e>>>8^s[255&(e^t[i])];return(-1^e)>>>0})(t.slice(0,36));new DataView(e.buffer).setUint32(0,h,!0);const r=t.slice(28,34);let n=0;for(let t=r.length-1;t>0;t-=1)n+=r[t]*2**(8*t);const o=new Date(n);if(Bb(o)<wb(-3,0))throw new Error(wb(0,0,1,2,1,3,1,4,5));if(i.every(((t,i)=>e[i]===t)))return;break}case"0002":if(!Ob(t))throw new Error(wb(0,0,1,7,1,12,5));return;default:throw new Error(wb(0,0,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5))}throw new Error(wb(0,0,1,2,1,7,1,12,5))},Eb=t=>{if(!t)throw new Error(wb(0,14,1,15,1,16,1,17,1,19,1,18,1,2,5));const i=(t[wb(-1,9)]||t[wb(-1,37)]).map((t=>(t||"").trim()));if(i.indexOf(_b[wb(-1,6)][wb(-1,7)])>-1)return!0;const s=i.filter((t=>t.indexOf("*")>-1));if(Hb(_b[wb(-1,6)][wb(-1,7)],s))return!0;const e=t[wb(-1,8)]||t[wb(-1,38)];if(""!==e&&null!=e){if(Hb(_b[wb(-1,6)][wb(-1,7)],[e]))return!1;if(e===_b[wb(-1,6)][wb(-1,7)])return!1}throw new Error(wb(0,14,1,20,5))},Rb=(t,i)=>{const s=new sb("secp256k1").keyFromPublic(wb(-4,0),"hex"),e=ab(t).toString();return s.verify(e,i)},zb=t=>{switch(t.slice(0,4)){case"0001":return(t=>{let i,s="";try{const i=t.split("-"),e=i[1],h=i[2],r=i[3];if(!Rb(h,r))throw new Error(wb(0,21,1,2,1,7,1,12,5));const n=lb.parse(h);s=gb.decrypt({ciphertext:lb.parse(e)},n,{mode:yb,padding:bb,iv:lb.parse("00000000000000000000000000000001")}).toString(fb)}catch(t){throw new Error(wb(0,21,1,2,1,7,1,12,5))}try{i=JSON.parse(s)}catch(t){throw new Error(wb(0,21,1,2,1,7,1,12,5))}if(void 0===i[wb(-1,5)]||null===i[wb(-1,4)]||!i[wb(-1,9)])throw new Error(wb(0,21,1,2,1,7,1,12,5));const e=parseInt(wb(-3,0),10)||Number(parseInt(wb(-3,0),10));if(i[wb(-1,5)]<e)throw new Error(wb(0,21,1,2,1,3,1,4,5));let h=!1;try{h=Eb(i)}catch(t){throw new Error(wb(0,14,1,22,5))}return h})(t);case"0002":return(t=>{const i=Ob(t);if(!i)throw new Error(wb(0,0,1,7,1,12,5));let s,e="";try{const t=i.FH.slice(i.PH,i.PH+16),s=new DataView(t.buffer),h=new Int32Array(4);for(let t=0;t<h.length;t+=1)h[t]=s.getInt32(4*t,!1);const r=Sb.create(Array.from(h)),n=i.PH+16,o=i.FH.slice(n,i.FH.length),a=new DataView(o.buffer),u=new Int32Array(Math.floor(o.byteLength/4));for(let t=0;t<u.length;t+=1)u[t]=a.getInt32(4*t,!1);const l=Sb.create(Array.from(u)),c=gb.decrypt({ciphertext:l},r,{mode:yb,padding:bb,iv:lb.parse("00000000000000000000000000000001")});e=_b.atob(c.toString(fb))}catch(t){throw new Error(wb(0,21,1,2,1,7,1,12,5))}try{s=JSON.parse(e)}catch(t){throw new Error(wb(0,21,1,2,1,7,1,12,5))}if(!s[wb(-1,37)])throw new Error(wb(0,21,1,2,1,7,1,12,5));let h=!1;try{h=Eb(s)}catch(t){throw new Error(wb(0,14,1,22,5))}return h})(t);default:throw new Error(wb(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5))}},Vb=(t,i)=>{switch(t.slice(0,4)){case"0001":((t,i)=>{if(!i)throw new Error(wb(0,39,1,40,1,41,5));const s=t.split("-"),e=s[1].slice(1),h=s[2],r=s[3];if(!Rb(`${e}-${h}`,r))throw new Error(wb(0,21,1,2,1,7,1,12,5));const n=Uint8Array.from(Pb(h,2));let o=0;for(let t=n.length-1;t>0;t-=1)o+=n[t]*2**(8*t);if(o<(parseInt(wb(-3,0),10)||Number(parseInt(wb(-3,0),10))))throw new Error(wb(0,21,1,2,1,3,1,4,5));const a=Int32Array.from(Pb(e,8)),u=ob(i[wb(-1,31)]).toString(lb),l=Int32Array.from(Pb(u,8)),c=ob(i[wb(-1,32)]).toString(lb),f=Int32Array.from(Pb(c,8)),d=new Int32Array(l.length);for(let t=0;t<d.length;t+=1)d[t]=l[t]^f[t];if(!a.every(((t,i)=>d[i]===t)))throw new Error(wb(0,21,1,2,1,7,1,12,5))})(t,i);break;case"0002":((t,i)=>{if(!i)throw new Error(wb(0,39,1,40,1,41,5));const s=Ob(t);if(!s)throw new Error(wb(0,0,1,7,1,12,5));const e=s.FH.slice(s.PH,s.FH.length),h=new DataView(e.buffer),r=new Int32Array(8);for(let t=0;t<r.length;t+=1)r[t]=h.getInt32(4*t,!1);const n=ob(i[wb(-1,31)]).toString(lb),o=Int32Array.from(Pb(n,8)),a=ob(i[wb(-1,32)]).toString(lb),u=Int32Array.from(Pb(a,8)),l=new Int32Array(o.length);for(let t=0;t<l.length;t+=1)l[t]=o[t]^u[t];if(!r.every(((t,i)=>l[i]===t)))throw new Error(wb(0,21,1,2,1,7,1,12,5))})(t,i);break;default:throw new Error(wb(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5))}},Nb=(t,i,s=!0)=>{let e;Fb=!1,i instanceof go?(e=i.rh,i.Pt()):"container"in i&&(e="string"==typeof i.container?yh.document.getElementById(i.container):i.container);const h=!!e&&(e===yh.document.body||yh.document.body.contains(e)),r=e&&h?e:document.body,n=yh.document.createElement("div");n.id="lcjs-error",r.append(n),n.style.width="100%",n.style.height="100%",n.style.backgroundColor="black",n.style.boxSizing="border-box",n.style.padding="20px",n.style.font="Arial",n.style.fontSize="20px";let o=(t||"LICENSE_ERROR").toLowerCase().split("_").join(" ");o=(s?wb(0,0,1,2,1,23,1,24,25,1):"")+o.charAt(0).toUpperCase()+o.substr(1);const a=yh.document.createElement("p1");n.append(a),a.innerHTML=o,a.style.color="red"},Gb=(t,i,s)=>{i?(t[wb(-1,17)](wb(-1,19),s),t[wb(-1,17)](wb(-1,20),s),t[wb(-1,17)](wb(-1,21),s),t[wb(-1,17)](wb(-1,22),s)):(t[wb(-1,18)](wb(-1,19),s),t[wb(-1,18)](wb(-1,20),s),t[wb(-1,18)](wb(-1,21),s),t[wb(-1,18)](wb(-1,22),s))},Hb=(t,i)=>{const s=t.split(".").reverse();return i.some((t=>{const i=t.split(".").reverse();let e=!1;const h=i.findIndex((t=>"*"===t)),r=s.every(((t,s)=>{if(!e){if(!(s<i.length))return!1;if(e="*"===i[s]&&s+1>2,!e&&t!==i[s])return!1}return!0}));return!(h>s.length-1||!r)}))},Wb=i=>{const s=()=>{};let e,h,r;if(new yh.Image instanceof yh.HTMLImageElement){const i=new yh.Image;i.src=Iy,h=new yy({source:i,fitMode:t.ImageFitMode.Stretch});const s=new yh.Image;s.src=Ty,r=new yy({source:s,fitMode:t.ImageFitMode.Stretch})}else if(yh.lcjs_setup){const i=new yh.Image;i.src=Iy;const s=yh.lcjs_setup(i.naturalWidth,i.naturalHeight);s.getContext("2d").drawImage(i,0,0),h=new yy({source:s,fitMode:t.ImageFitMode.Stretch}),r=h}else h=new De({color:Se("#f00")}),r=h;const n=t=>{const s=t.Jt.Qi();if(t.Pf&&(t.DH&&(r?t.Pf.Js(r):yh.requestAnimationFrame((()=>n(t)))),t.DH||(h?t.Pf.Js(h):yh.requestAnimationFrame((()=>n(t))))),t.Pf){const i=(t.DH,150),e=(t.DH,32),h=t.Jt.x.getInnerEnd()-(3+i)*s.x,r=t.Jt.y.getInnerStart()+3*s.y;t.Pf.Qn({x:h,y:r}).Gt({x:i*s.x,y:e*s.y})}!1===t.DH&&(6530!==Iy.length&&Nb(wb(0,36,1,38,5),i,!1),"W"!==Iy[3361]&&Nb(wb(0,36,1,38,5),i,!1)),!0===t.DH&&(8542!==Ty.length&&Nb(wb(0,36,1,38,5),i,!1),"2"!==Ty[571]&&Nb(wb(0,36,1,38,5),i,!1)),e&&e.Ss()};return e=i.tI("logo",Number.MAX_SAFE_INTEGER),r=>{const o={Jt:r,DH:!1};let a,u;return o.BH=()=>{a=yh.setTimeout((()=>{u=i.oh(t.MouseStyles.Point),void 0!==o.Pf&&(o.Pf.setMouseClickEventHandler(Ub),o.Pf.setTouchEndEventHandler(Ub)),o.DH=!0,n(o)}),3e3)},o.OH=()=>{yh.clearTimeout(a),i.ah(u),void 0!==o.Pf&&(o.Pf.setMouseClickEventHandler(s),o.Pf.setTouchEndEventHandler(s)),o.DH=!1,n(o)},(t=>{t.Pf&&t.Pf.dispose(),e&&(t.Pf=e.Zc(t.Jt).Js(h).setMouseInteractions(!0).setMouseClickEventHandler(s).setTouchEndEventHandler(s).Fr(th),t.BH&&t.Pf.setMouseEnterEventHandler(t.BH),t.OH&&t.Pf.setMouseLeaveEventHandler(t.OH),n(t))})(o),{_e:()=>n(o),Pt:()=>(t=>{t.Pf&&(t.Pf.dispose(),t.Pf=void 0,t.BH=()=>{},t.OH=()=>{})})(o)}}},Ub=()=>yh.open("https://lightningchart.com/lightningchart-js/"),jb=ue({color:pe(255,255,255,50),spread:1,blur:4,offset:{x:0,y:0}});class $b extends jb{constructor(t){super(t),this.type="glow"}setSpread(t){return this.set("spread","function"==typeof t?t(this.get("spread")):t)}getSpread(){return this.get("spread")}setBlur(t){return this.set("blur","function"==typeof t?t(this.get("blur")):t)}getBlur(){return this.get("blur")}setColor(t){return this.set("color","function"==typeof t?t(this.get("color")):t)}getColor(){return this.get("color")}setOffset(t){return this.set("offset","function"==typeof t?t(this.get("offset")):t)}getOffset(){return this.get("offset")}}const Yb=ue({gridStrokeLength:1,gridStrokeStyle:new sh,tickLength:7,tickStyle:new sh,tickPadding:0,labelFont:new Xn,labelFillStyle:new De,labelPadding:0,labelAlignment:0,labelRotation:0});class Xb extends Yb{}class Zb extends Xb{constructor(t){super(t)}setGridStrokeLength(t){return this.set("gridStrokeLength",t)}getGridStrokeLength(){return this.get("gridStrokeLength")}setGridStrokeStyle(t){return this.set("gridStrokeStyle","function"==typeof t?t(this.get("gridStrokeStyle")):t)}getGridStrokeStyle(){return this.get("gridStrokeStyle")}setTickLength(t){return this.set("tickLength",t)}getTickLength(){return this.get("tickLength")}setTickStyle(t){return this.set("tickStyle","function"==typeof t?t(this.get("tickStyle")):t)}getTickStyle(){return this.get("tickStyle")}setTickPadding(t){return this.set("tickPadding",t)}getTickPadding(){return this.get("tickPadding")}setLabelFillStyle(t){return this.set("labelFillStyle","function"==typeof t?t(this.get("labelFillStyle")):t)}getLabelFillStyle(){return this.get("labelFillStyle")}setLabelFont(t){return this.set("labelFont","function"==typeof t?t(this.get("labelFont")):t)}getLabelFont(){return this.get("labelFont")}setLabelPadding(t){return this.set("labelPadding",t)}getLabelPadding(){return this.get("labelPadding")}setLabelAlignment(t){return this.set("labelAlignment",t)}getLabelAlignment(){return this.get("labelAlignment")}setLabelRotation(t){return this.set("labelRotation",t)}getLabelRotation(){return this.get("labelRotation")}}const Kb=Object.assign(Object.create(new class extends Xb{}),{}),qb=(t,i,s,e,h)=>r=>n=>{const o=new Date(n+r),a={year:o.getFullYear(),monthIndex:o.getMonth(),day:o.getDate(),hours:o.getHours(),minutes:o.getMinutes(),seconds:o.getSeconds(),millis:o.getMilliseconds()},u=e?e(a):void 0;if(0===t&&!0===u)return n;const l=a[i];h.includes("year")&&(a.year=Math.floor(a.year/s)*s),h.includes("monthIndex")&&(a.monthIndex=0),h.includes("day")&&(a.day=1),h.includes("hours")&&(a.hours=0),h.includes("minutes")&&(a.minutes=0),h.includes("seconds")&&(a.seconds=0),h.includes("millis")&&(a.millis=0);let c=(0===t?1:t)*s;return-1===t&&!1===u&&(c=0),0!==c&&(a[i]=s*(c>0?Math.floor((l+c)/s):Math.ceil((l+c)/s))),new Date(a.year,a.monthIndex,a.day,a.hours,a.minutes,a.seconds,a.millis).getTime()-r},Jb=(t,i,s,...e)=>qb(-1,t,i,s,e),Qb=(t,i,s,...e)=>qb(-1,t,i,s,e),tx=(t,i,s,...e)=>qb(0,t,i,s,e),ix=(t,i,...s)=>qb(1,t,i,void 0,s),sx=t=>i=>s=>{const e=new Date(s+i),h=e.getDay(),r=1===h&&0===e.getHours()&&0===e.getMinutes()&&0===e.getSeconds()&&0===e.getMilliseconds();if(0===t&&!0===r)return s;let n=e.getDate();return-1===t&&1===h&&!1===r||(-1===t?n-=h>=2?h-1:h+6:n+=h>0?8-h:1),new Date(e.getFullYear(),e.getMonth(),n,0,0,0,0).getTime()-i},ex=[{label:"MilliSecond100",unit:100,irregular:!1,greatTicks:void 0,majorTicks:{fitFunction:Nn({ignore:"first"},2,5)},minorTicks:{amount:4,fitFunction:Nn(void 0,2)}},{label:"Second",unit:1e3,irregular:!1,greatTicks:{getReferenceKeyValue:Jb("seconds",1,(t=>0===t.millis),"millis")},majorTicks:{fitFunction:Nn({ignore:"first"},5,10,15,30)},minorTicks:{amount:4,fitFunction:Nn(void 0,2)}},{label:"Minute",unit:6e4,irregular:!1,greatTicks:{getReferenceKeyValue:Jb("minutes",1,(t=>0===t.seconds&&0===t.millis),"seconds","millis")},majorTicks:{fitFunction:Nn({ignore:"first"},5,10,15,30)},minorTicks:{amount:12,fitFunction:Nn(void 0,3,6)}},{label:"Hour",unit:36e5,irregular:!1,greatTicks:{getReferenceKeyValue:Jb("hours",1,(t=>0===t.minutes&&0===t.seconds&&0===t.millis),"minutes","seconds","millis")},majorTicks:{fitFunction:Nn({ignore:"first"},3,6,12)},minorTicks:{amount:8,fitFunction:Nn(void 0,2,4)}},{label:"Day",unit:864e5,irregular:!1,greatTicks:{getReferenceKeyValue:Jb("day",1,(t=>0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"hours","minutes","seconds","millis")},majorTicks:{fitFunction:Nn({ignore:"last"},2,4)},minorTicks:{amount:7,fitFunction:Nn({ignore:"last"},2,3)}},{label:"Week",unit:6048e5,irregular:!0,getPrevKeyValue:sx(-1),getNextKeyValueIncludingRef:sx(0),getNextKeyValue:sx(1),greatTicks:!0,majorTicks:{fitFunction:Nn(void 0,2)},minorTicks:{fitFunction:void 0}},{label:"Month",unit:2592e6,irregular:!0,getPrevKeyValue:Qb("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:tx("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValue:ix("monthIndex",1,"day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Nn(void 0,2,3)},minorTicks:{fitFunction:Nn(void 0,2,4,6)}},{label:"Year",unit:31536e6,irregular:!0,getPrevKeyValue:Qb("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:tx("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:ix("year",1,"monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Nn({ignore:"first"},2,5)},minorTicks:{fitFunction:Nn(void 0,2,5)}},{label:"Decade",unit:31536e7,irregular:!0,getPrevKeyValue:Qb("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:tx("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:ix("year",10,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Nn(void 0,2,4)},minorTicks:{fitFunction:Nn(void 0,2,5)}},{label:"Century",unit:316224e7,irregular:!0,getPrevKeyValue:Qb("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:tx("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:ix("year",100,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0},{label:"Millennium",unit:316224e8,irregular:!0,getPrevKeyValue:Qb("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:tx("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:ix("year",1e3,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0}],hx=(t,i,s)=>{let e=((t,i,s,e,h)=>{const r=i-t;let n;for(let t=0;t<ex.length;t+=1){const i=r/ex[t].unit;if(i<=1){n=ex[t];break}}return n})(i,s);if(void 0!==e&&0===ex.indexOf(e)&&(e=ex[1]),void 0===e)return;if("great"===t)return e;const h="major"===t?1:2,r=ex[ex.indexOf(e)-h];return void 0===r?ex[0]:r},rx=(t,i)=>(s,e,h,r)=>{const n=hx("great",s,e);if(void 0===n)return[];if("Decade"===n.label||"Century"===n.label||"Millennium"===n.label)return[];const o=r>h?s:e,a=(s+e)/2,u=r>h?e:s;if(ex.indexOf(n)<=ex.findIndex((t=>"Hour"===t.label)))return"left"===i?[o]:[];let l;if(!0===n.irregular)l=Vn(s,e,n.getPrevKeyValue(t),n.getNextKeyValue(t));else{const i=n.greatTicks.getReferenceKeyValue(t)(s);l=zn(s,e,n.unit,i,1)}const c=((t,i,s)=>{for(const e of s)if(e>=t&&e<=i)return e})(s,e,l);return"left"===i?void 0===c||Or(c,a,u)?[o]:[c]:void 0!==c&&Or(c,a,u)?[c]:[u]},nx=(t,i)=>(s,e,h,r)=>{const n=hx(t,h,r);let o;if(void 0===n)return[];if("great"===t&&void 0!==n.greatTicks)if(!0===n.irregular)o=Vn(s,e,n.getPrevKeyValue(i),n.getNextKeyValue(i));else{const t=n.greatTicks.getReferenceKeyValue(i)(s);o=zn(s,e,n.unit,t,1)}else if("major"===t&&void 0!==n.majorTicks)o=!0===n.irregular?((t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h})(s,e,n.getPrevKeyValue(i),n.getNextKeyValue(i)):((t,i,s)=>{const e=[];let h=t,r=0;for(;h<i;)if(e.push(h),h+=s,r+=1,r>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return e.push(h),e})(s,e,n.unit);else{if("minor"!==t||void 0===n.minorTicks)return[];if(!0===n.irregular)o=((t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h})(s,e,n.getNextKeyValueIncludingRef(i),n.getNextKeyValue(i));else{const t=(t=>{if(void 0!==t)return ex[ex.indexOf(t)+1]})(n);if(void 0===t)return[];o=Rn(s,e,t.unit/n.minorTicks.amount,1)}}return o},ox=t=>(i,s,e,h,r,n)=>{const o=hx(t,r,n);if(void 0===o)return;let a;return"major"===t?a=o.majorTicks.fitFunction:o.minorTicks&&(a=o.minorTicks.fitFunction),a?a(i,s,e,h,r,n):void 0},ax=ue({locale:void 0,dateOrigin:void 0,cursorFormatter:void 0,greatTickStyle:new Zb,majorTickStyle:new Zb,minorTickStyle:new Zb,formatOptionsMajorCentury:{year:"numeric"},formatOptionsMinorDecade:{year:"numeric"},formatOptionsMajorDecade:{year:"numeric"},formatOptionsMinorYear:{year:"numeric"},formatOptionsMajorYear:{year:"numeric"},formatOptionsMinorMonth:{month:"short"},formatOptionsGreatYear:{year:"numeric"},formatOptionsMajorMonth:{month:"long"},formatOptionsMinorWeek:{day:"numeric"},formatOptionsGreatMonth:{year:"numeric",month:"long"},formatOptionsMajorWeek:{day:"numeric",weekday:"short"},formatOptionsMinorDay:{day:"numeric",weekday:"short"},formatOptionsGreatWeek:(t,i,s)=>{const e=new Date(t),h=(t=>{const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));i.setUTCDate(i.getUTCDate()+4-(i.getUTCDay()||7));const s=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i.getTime()-s.getTime())/864e5+1)/7)})(e);return`${new Intl.DateTimeFormat(s,{year:"numeric",month:"long"}).format(e)} Week ${h}`},formatOptionsMajorDay:{weekday:"long",day:"numeric"},formatOptionsMinorHour:{hour:"2-digit",minute:"2-digit"},formatOptionsGreatDay:{year:"numeric",month:"long",day:"numeric"},formatOptionsMajorHour:{hour:"2-digit",minute:"2-digit"},formatOptionsMinorMinute:{hour:"2-digit",minute:"2-digit"},formatOptionsGreatHour:{year:"numeric",month:"long",day:"numeric"},formatOptionsMajorMinute:{hour:"2-digit",minute:"2-digit"},formatOptionsMinorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit"},formatOptionsGreatMinute:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"},formatOptionsMajorSecond:{second:"2-digit"},formatOptionsMinorMillisecond:t=>{const i=new Date(t);return`${(i.getSeconds()+i.getUTCMilliseconds()/1e3).toFixed(2)}`},formatOptionsGreatSecond:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"},formatOptionsMajorMilliSecond:t=>{const i=new Date(t);return`${(i.getSeconds()+i.getUTCMilliseconds()/1e3).toFixed(1)}`}});class ux extends ax{oe(t){const i=void 0!==this.dateOrigin?this.dateOrigin.getTime():0,s=t=>ex.map((i=>{const s=((t,i,s)=>{switch(s.label){case"MilliSecond100":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorMilliSecond:t.formatOptionsMinorMillisecond;case"Second":return"Great"===i?t.formatOptionsGreatSecond:"Major"===i?t.formatOptionsMajorSecond:t.formatOptionsMinorSecond;case"Minute":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorMinute:t.formatOptionsMinorMinute;default:case"Hour":return"Great"===i?t.formatOptionsGreatHour:"Major"===i?t.formatOptionsMajorHour:t.formatOptionsMinorHour;case"Day":return"Great"===i?t.formatOptionsGreatDay:"Major"===i?t.formatOptionsMajorDay:t.formatOptionsMinorDay;case"Week":return"Great"===i?t.formatOptionsGreatWeek:"Major"===i?t.formatOptionsMajorWeek:t.formatOptionsMinorWeek;case"Month":return"Great"===i?t.formatOptionsGreatMonth:"Major"===i?t.formatOptionsMajorMonth:t.formatOptionsMinorMonth;case"Year":return"Great"===i?t.formatOptionsGreatYear:"Major"===i?t.formatOptionsMajorYear:t.formatOptionsMinorYear;case"Decade":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorDecade:t.formatOptionsMinorDecade;case"Century":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorCentury:void 0;case"Millennium":return}})(this,t,i);if("object"!=typeof s)return s;try{return new Intl.DateTimeFormat(this.locale,s)}catch(t){let i="";for(const t in s)i+=` ${t}: ${s[t]},`;yh.console.error(`Invalid Intl.DateTimeFormat ( locale: ${this.locale}, formatOptions {${i}} )`)}})),e=new Map;e.set("great",s("Great")),e.set("major",s("Major")),e.set("minor",s("Minor"));const h=t=>String(t),r=(t,s)=>(r,n)=>{let o=r+i;const a=n.getInnerStart(),u=n.getInnerEnd(),l=a>u,c=hx(t,l?u:a,l?a:u);if(void 0===c)return h(o);if("great"===t){let t;t=!1===wh(r,"left"===s?a:u)?r:!1===c.irregular?"left"===s&&!1===l||"right"===s&&!0===l?c.greatTicks.getReferenceKeyValue(i)(r):c.greatTicks.getReferenceKeyValue(i)(r+1*c.unit):"left"===s&&!1===l||"right"===s&&!0===l?c.getPrevKeyValue(i)(r):c.getNextKeyValue(i)(r),o=t+i}const f=e.get(t);if(void 0===f)return h(o);const d=f[ex.indexOf(c)];return void 0===d?"":"function"==typeof d?d(o,n,this.locale):d.format(o)},n=[],o=[{ns:"Great ticks (directive)",Qg:0,es:!0,qe:nx("great",i),Je:void 0},{ns:"Major ticks",Qg:1,Ae:this.majorTickStyle,Me:r("major"),qe:nx("major",i),Rs:{Ie:ox("major")},Je:void 0}];this.greatTickStyle!==Kb&&(n.push({ns:"Great ticks (left)",Ae:this.greatTickStyle.setLabelAlignment(-1),Me:r("great","left"),qe:rx(i,"left"),ss:!0,De:!1}),n.push({ns:"Great ticks (right)",Ae:this.greatTickStyle.setLabelAlignment(1),Me:r("great","right"),qe:rx(i,"right"),ss:!0,De:!1})),this.minorTickStyle!==Kb&&o.push({ns:"Minor ticks",Qg:2,Ae:this.minorTickStyle,Me:r("minor"),qe:nx("minor",i),Rs:{Ie:ox("minor"),zs:(t,i,s,e,h,r)=>{const n=hx("minor",h,r);return!n||"Week"!==n.label}},Je:void 0});const a=this.cursorFormatter;return{os:n,us:o,hs:a?(t,s,e)=>a(i+t,s,e):(t,s,e)=>{const h=new Date(i+t);return`${new Intl.DateTimeFormat(e,{year:"numeric",month:"numeric",day:"numeric",minute:"2-digit",hour:"2-digit"}).format(h)} `},le:1e3,ce:31536e9}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setGreatTickStyle(t){if("function"==typeof t){const i=this.get("greatTickStyle");return i!==Kb?this.set("greatTickStyle",t(i)):this}return this.set("greatTickStyle",t)}getGreatTickStyle(){return this.get("greatTickStyle")}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return i!==Kb?this.set("minorTickStyle",t(i)):this}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setLocale(t){return this.set("locale",t)}getLocale(){return this.get("locale")}setDateOrigin(t){return this.set("dateOrigin",t)}getDateOrigin(){return this.get("dateOrigin")}setFormattingDecade(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorDecade",t)),i&&(s=s.set("formatOptionsMinorYear",i)),s)))}setFormattingYear(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorYear",t)),i&&(s=s.set("formatOptionsMinorMonth",i)),s)))}setFormattingMonth(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatYear",t)),i&&(e=e.set("formatOptionsMajorMonth",i)),s&&(e=e.set("formatOptionsMinorWeek",s)),e)))}setFormattingWeek(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMonth",t)),i&&(e=e.set("formatOptionsMajorWeek",i)),s&&(e=e.set("formatOptionsMinorDay",s)),e)))}setFormattingDay(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatWeek",t)),i&&(e=e.set("formatOptionsMajorDay",i)),s&&(e=e.set("formatOptionsMinorHour",s)),e)))}setFormattingHour(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatDay",t)),i&&(e=e.set("formatOptionsMajorHour",i)),s&&(e=e.set("formatOptionsMinorMinute",s)),e)))}setFormattingMinute(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatHour",t)),i&&(e=e.set("formatOptionsMajorMinute",i)),s&&(e=e.set("formatOptionsMinorSecond",s)),e)))}setFormattingSecond(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMinute",t)),i&&(e=e.set("formatOptionsMajorSecond",i)),s&&(e=e.set("formatOptionsMinorMillisecond",s)),e)))}setFormattingMilliSecond(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatSecond",t)),i&&(s=s.set("formatOptionsMajorMilliSecond",i)),s)))}}const lx=(t,i)=>(s,e)=>{const h=e-s;if(i){const i=Math.log10(h/2);let r=10**Math.floor(i-t);const n=1/r;r=Math.round(r*n)/n;const o=Math.round(Math.floor(s/(10*r))*r*10*n)/n;return zn(o,e,r,void 0,n)}const r=Math.log10(h);let n=10**Math.round(r-t);const o=1/n;return n=Math.round(n*o)/o,Rn(s,e,n,o)},cx=(t,i,s,e,h,r)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%5==0)):void 0,fx=Nn(void 0,2,5),dx=(t,i,s,e,h,r)=>0===i?[t[1],t[3],t[5]]:1===i?[t[0],t[3]]:2===i?[t[1]]:void 0,gx=(t,i)=>{const s=Sn(t),e=vn(t);if(i)return(t,i)=>{const h=[],r=Math.floor(s(t)),n=Math.ceil(s(i));for(let t=r-1;t<=n+1;t+=1){const i=e**t;h.push(i)}return h};const h=10===t?9:4;return(t,i)=>{const r=Math.round(s(t)),n=Math.round(s(i)),o=[],a=e**r,u=(e**n-a)/h;for(let s=1;s<=h;s+=1){const e=a+u*s;e>t&&e<i&&o.push(e)}return o}},mx=ue({cursorFormatter:void 0,extremeTickStyle:new Zb,majorTickStyle:new Zb,minorTickStyle:new Zb,formattingOffset:void 0,extremeFormattingFunction:void 0,majorFormattingFunction:void 0,minorFormattingFunction:void 0});class yx extends mx{oe(t){const i=this.formattingOffset,s=this.get("extremeFormattingFunction")||("logarithmic"===t.type?An(!0,t.base):wn.Numeric),e=this.get("majorFormattingFunction")||("logarithmic"===t.type?An(!0,t.base):wn.Numeric),h=this.get("minorFormattingFunction")||("logarithmic"===t.type?An(!0,t.base):wn.Numeric),r=[],n=[];this.extremeTickStyle!==Kb&&r.push({ns:"Extreme ticks",Ae:this.extremeTickStyle,Me:void 0===i?s:(t,e,h)=>s(i+t,e,h),qe:En,ss:!0,De:!0}),n.push({ns:"Major ticks",Qg:0,Ae:this.majorTickStyle,Me:void 0===i?e:(t,s,h)=>e(i+t,s,h),qe:"logarithmic"===t.type?gx(t.base,!0):lx(0,!0),Rs:"logarithmic"===t.type?void 0:{Ie:cx},Je:void 0}),this.minorTickStyle!==Kb&&n.push({ns:"Minor ticks",Qg:1,Ae:this.minorTickStyle,Me:void 0===i?h:(t,s,e)=>h(i+t,s,e),qe:"logarithmic"===t.type?gx(t.base,!1):lx(1,!1),Rs:"logarithmic"===t.type?{Ie:dx}:{Ie:fx},Je:50});const o=this.cursorFormatter?this.cursorFormatter:wn.Numeric;return{os:r,us:n,hs:void 0===i?o:(t,s,e)=>o(i+t,s,e),le:1e-9,ce:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setExtremeTickStyle(t){if("function"==typeof t){const i=this.get("extremeTickStyle");return i!==Kb?this.set("extremeTickStyle",t(i)):this}return this.set("extremeTickStyle",t)}getExtremeTickStyle(){return this.get("extremeTickStyle")}setFormattingOffset(t){return this.set("formattingOffset",t)}getFormattingOffset(){return this.get("formattingOffset")}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return i!==Kb?this.set("minorTickStyle",t(i)):this}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setFormattingFunction(t){return this.withMutations((i=>i.set("extremeFormattingFunction",t).set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getExtremeFormattingFunction(){return this.get("extremeFormattingFunction")}setExtremeFormattingFunction(t){return this.set("extremeFormattingFunction",t)}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const px=1e6,Sx=ue({cursorFormatter:void 0,timeOrigin:void 0,majorTickStyle:new Zb,minorTickStyle:new Zb}),vx=36e5,bx=6e4,xx=1e3,Mx=1e-6,_x=(t,i)=>{const s=i-t;return s>=864e5?"MajorHours12":s>=vx?"MajorHours":s>=6e5?"MajorMinutes15":s>=6e4?"MajorMinutes":s>=1e4?"MajorSeconds15":s>=xx?"MajorSeconds":s>=100?"MajorMilliseconds100":s>=10?"MajorMilliseconds10":s>=1?"MajorMilliseconds":s>=.1?"MajorMicroseconds100":s>=.01?"MajorMicroseconds10":s>=.001?"MajorMicroseconds":s<=.001?"MajorNanoseconds100":"Unknown"},wx={hhmmss:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/vx);i%=vx;const h=Math.floor(i/bx);i%=bx;const r=Math.floor(i/xx);return`${s}${cr(e,2)}:${cr(h,2)}:${cr(r,2)}`},hhmmssmmm:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/vx);i%=vx;const h=Math.floor(i/bx);i%=bx;const r=Math.floor(i/xx);i%=xx;const n=Math.floor(i/1);return`${s}${cr(e,2)}:${cr(h,2)}:${cr(r,2)}.${cr(n,3)}`},hhmmssmmmuuu:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/vx),h=Math.floor(i/bx)%60,r=Math.floor(i/xx)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}).split(".")[1];return`${s}${cr(e,2)}:${cr(h,2)}:${cr(r,2)}.${cr(n,3)}${o}`},hhmmssmmmuuunnn:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/vx),h=Math.floor(i/bx)%60,r=Math.floor(i/xx)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:6,maximumFractionDigits:6}).split(".")[1];return`${s}${cr(e,2)}:${cr(h,2)}:${cr(r,2)}.${cr(n,3)}${o}`}},Ax={MajorHours12:{major:{format:wx.hhmmss,getKeyValues:(t,i,s,e)=>{const h=432e5;return t=Math.floor(t/(4*h))*h*4,zn(t,i,h,void 0,px)},fitKeyValues:Nn({ignore:"first"},2,4)},minor:{format:wx.hhmmss,getKeyValues:(t,i,s,e)=>Rn(t,i,36e5,px),fitKeyValues:Nn({},2,3,4,6)},defaultValueFormatter:wx.hhmmss},MajorHours:{major:{format:wx.hhmmss,getKeyValues:(t,i,s,e)=>{const h=vx;return t=Math.floor(t/(12*h))*h*12,zn(t,i,h,void 0,px)},fitKeyValues:Nn({ignore:"first"},2,6,12)},minor:{format:wx.hhmmss,getKeyValues:(t,i,s,e)=>Rn(t,i,3e5,px),fitKeyValues:Nn({},2,4,6)},defaultValueFormatter:wx.hhmmss},MajorMinutes15:{major:{format:wx.hhmmss,getKeyValues:(t,i,s,e)=>(t=Math.floor(t/vx)*vx,zn(t,i,9e5,void 0,px)),fitKeyValues:Nn({ignore:"first"},2)},minor:{format:wx.hhmmss,getKeyValues:(t,i,s,e)=>Rn(t,i,6e4,px),fitKeyValues:Nn({},3,5)},defaultValueFormatter:wx.hhmmss},MajorMinutes:{major:{format:wx.hhmmss,getKeyValues:(t,i,s,e)=>{const h=bx;return t=Math.floor(t/6e5)*h*10,zn(t,i,h,void 0,px)},fitKeyValues:Nn({ignore:"first"},2,5)},minor:{format:wx.hhmmss,getKeyValues:(t,i,s,e)=>Rn(t,i,5e3,px),fitKeyValues:Nn({},2,3,4,6)},defaultValueFormatter:wx.hhmmss},MajorSeconds15:{major:{format:wx.hhmmss,getKeyValues:(t,i,s,e)=>{const h=15e3;return t=Math.floor(t/6e4)*h*4,zn(t,i,h,void 0,px)},fitKeyValues:Nn({ignore:"first"},2,4)},minor:{format:wx.hhmmss,getKeyValues:(t,i,s,e)=>Rn(t,i,1e3,px),fitKeyValues:Nn({},3,5)},defaultValueFormatter:wx.hhmmss},MajorSeconds:{major:{format:wx.hhmmssmmm,getKeyValues:(t,i,s,e)=>{const h=xx;return t=Math.floor(t/1e4)*h*10,zn(t,i,h,void 0,px)},fitKeyValues:Nn({ignore:"first"},2,5)},minor:{format:wx.hhmmssmmm,getKeyValues:(t,i,s,e)=>Rn(t,i,100,px),fitKeyValues:Nn({},2,3,5)},defaultValueFormatter:wx.hhmmssmmm},MajorMilliseconds100:{major:{format:wx.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=100*Math.floor(t/1e3)*10,zn(t,i,100,void 0,px)),fitKeyValues:Nn({ignore:"first"},2,5)},minor:{format:wx.hhmmssmmm,getKeyValues:(t,i,s,e)=>Rn(t,i,10,px),fitKeyValues:Nn({},2,3,5)},defaultValueFormatter:wx.hhmmssmmm},MajorMilliseconds10:{major:{format:wx.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=10*Math.floor(t/100)*10,zn(t,i,10,void 0,px)),fitKeyValues:Nn({ignore:"first"},2,5)},minor:{format:wx.hhmmssmmm,getKeyValues:(t,i,s,e)=>Rn(t,i,1,px),fitKeyValues:Nn({},2,3,5)},defaultValueFormatter:wx.hhmmssmmm},MajorMilliseconds:{major:{format:wx.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=1*Math.floor(t/10)*10,zn(t,i,1,void 0,px)),fitKeyValues:Nn({ignore:"first"},2,5)},minor:{format:wx.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Rn(t,i,.1,px),fitKeyValues:Nn({},2)},defaultValueFormatter:wx.hhmmssmmmuuu},MajorMicroseconds100:{major:{format:wx.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=.1*Math.floor(t/1)*10,zn(t,i,.1,void 0,px)),fitKeyValues:Nn({ignore:"first"},2,5)},minor:{format:wx.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Rn(t,i,.01,px),fitKeyValues:Nn({},2,3,5)},defaultValueFormatter:wx.hhmmssmmmuuu},MajorMicroseconds10:{major:{format:wx.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>{const h=.01;return t=Math.floor(t/.1)*h*10,zn(t,i,h,void 0,px)},fitKeyValues:Nn({ignore:"first"},2,5)},minor:{format:wx.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>Rn(t,i,.001,px),fitKeyValues:Nn({},2,3,5)},defaultValueFormatter:wx.hhmmssmmmuuu},MajorMicroseconds:{major:{format:wx.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=.001;return t=Math.floor(t/.01)*h*10,zn(t,i,h,void 0,px)},fitKeyValues:Nn({ignore:"first"},2,5)},minor:{format:wx.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>Rn(t,i,100*Mx,px),fitKeyValues:Nn({},2,3,5)},defaultValueFormatter:wx.hhmmssmmmuuunnn},MajorNanoseconds100:{major:{format:wx.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=100*Mx;return t=Math.floor(t/.001)*h*10,zn(t,i,h,void 0,px)},fitKeyValues:Nn({ignore:"first"},2,5)},minor:{format:wx.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>Rn(t,i,10*Mx,px),fitKeyValues:Nn({},2,3,5)},defaultValueFormatter:wx.hhmmssmmmuuunnn},Unknown:{major:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},minor:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},defaultValueFormatter:(t,i,s)=>""}};class kx extends Sx{oe(t){const i=this.timeOrigin||0,s=[{ns:"Major ticks",Qg:0,Ae:this.majorTickStyle,Me:(t,s,e)=>{const h=_x(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return(0,Ax[h].major.format)(t+i,s,e)},qe:(t,i,s,e)=>{const h=_x(s,e);return(0,Ax[h].major.getKeyValues)(t,i,s,e)},Rs:{Ie:(t,i,s,e,h,r)=>{const n=_x(h,r),o=Ax[n].major.fitKeyValues;if(o)return o(t,i,s,e,h,r)}},Je:void 0}];return this.minorTickStyle instanceof Zb&&s.push({ns:"Minor ticks",Qg:1,Ae:this.minorTickStyle,Me:(t,s,e)=>{const h=_x(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return(0,Ax[h].minor.format)(t+i,s,e)},qe:(t,i,s,e)=>{const h=_x(s,e);return(0,Ax[h].minor.getKeyValues)(t,i,s,e)},Rs:{Ie:(t,i,s,e,h,r)=>{const n=_x(h,r),o=Ax[n].minor.fitKeyValues;if(o)return o(t,i,s,e,h,r)}},Je:void 0}),{os:[],us:s,hs:this.cursorFormatter||((t,s,e)=>{const h=_x(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return Ax[h].defaultValueFormatter(t+i,s,e)}),le:1e-4,ce:864e6}}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return i!==Kb?this.set("minorTickStyle",t(i)):this}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTimeOrigin(t){return this.set("timeOrigin",t)}getTimeOrigin(){return this.get("timeOrigin")}}const Cx={Angola:{name:"Angola",ISO_A3:"AGO"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Gabon:{name:"Gabon",ISO_A3:"GAB"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Namibia:{name:"Namibia",ISO_A3:"NAM"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Oman:{name:"Oman",ISO_A3:"OMN"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},Somalia:{name:"Somalia",ISO_A3:"SOM"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"}},Tx={Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Armenia:{name:"Armenia",ISO_A3:"ARM"},Australia:{name:"Australia",ISO_A3:"AUS"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},China:{name:"China",ISO_A3:"CHN"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},India:{name:"India",ISO_A3:"IND"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Nepal:{name:"Nepal",ISO_A3:"NPL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Philippines:{name:"Philippines",ISO_A3:"PHL"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Palestine:{name:"Palestine",ISO_A3:"PSE"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Russia:{name:"Russia",ISO_A3:"RUS"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Singapore:{name:"Singapore",ISO_A3:"SGP"},Syria:{name:"Syria",ISO_A3:"SYR"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Yemen:{name:"Yemen",ISO_A3:"YEM"}},Ix={"New South Wales":{name:"New South Wales"},Victoria:{name:"Victoria"},Queensland:{name:"Queensland"},"South Australia":{name:"South Australia"},"Western Australia":{name:"Western Australia"},Tasmania:{name:"Tasmania"},"Northern Territory":{name:"Northern Territory"},"Australian Capital Territory":{name:"Australian Capital Territory"},"Other Territories":{name:"Other Territories"}},Fx={"British Columbia":{name:"British Columbia"},Quebec:{name:"Quebec"},Nunavut:{name:"Nunavut"},"Prince Edward Island":{name:"Prince Edward Island"},Saskatchewan:{name:"Saskatchewan"},Yukon:{name:"Yukon"},Manitoba:{name:"Manitoba"},Ontario:{name:"Ontario"},"New Brunswick":{name:"New Brunswick"},"Northwest Territories":{name:"Northwest Territories"},Alberta:{name:"Alberta"},"Newfoundland and Labrador":{name:"Newfoundland and Labrador"},"Nova Scotia":{name:"Nova Scotia"}},Px={Albania:{name:"Albania",ISO_A3:"ALB"},Austria:{name:"Austria",ISO_A3:"AUT"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Denmark:{name:"Denmark",ISO_A3:"DNK"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Finland:{name:"Finland",ISO_A3:"FIN"},France:{name:"France",ISO_A3:"FRA"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Greece:{name:"Greece",ISO_A3:"GRC"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Italy:{name:"Italy",ISO_A3:"ITA"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Malta:{name:"Malta",ISO_A3:"MLT"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Poland:{name:"Poland",ISO_A3:"POL"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Romania:{name:"Romania",ISO_A3:"ROU"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Russia:{name:"Russia",ISO_A3:"RUS"},Turkey:{name:"Turkey",ISO_A3:"TUR"}},Dx={Aruba:{name:"Aruba",ISO_A3:"ABW"},Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},Angola:{name:"Angola",ISO_A3:"AGO"},Anguilla:{name:"Anguilla",ISO_A3:"AIA"},Albania:{name:"Albania",ISO_A3:"ALB"},Aland:{name:"Aland",ISO_A3:"ALA"},Andorra:{name:"Andorra",ISO_A3:"AND"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Argentina:{name:"Argentina",ISO_A3:"ARG"},Armenia:{name:"Armenia",ISO_A3:"ARM"},"American Samoa":{name:"American Samoa",ISO_A3:"ASM"},Antarctica:{name:"Antarctica",ISO_A3:"ATA"},"French Southern and Antarctic Lands":{name:"French Southern and Antarctic Lands",ISO_A3:"ATF"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},Australia:{name:"Australia",ISO_A3:"AUS"},Austria:{name:"Austria",ISO_A3:"AUT"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belize:{name:"Belize",ISO_A3:"BLZ"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},Canada:{name:"Canada",ISO_A3:"CAN"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Chile:{name:"Chile",ISO_A3:"CHL"},China:{name:"China",ISO_A3:"CHN"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Cyprus No Mans Area":{name:"Cyprus No Mans Area",ISO_A3:"-99"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},"Cook Islands":{name:"Cook Islands",ISO_A3:"COK"},Colombia:{name:"Colombia",ISO_A3:"COL"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Curaçao":{name:"Curaçao",ISO_A3:"CUW"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},"Northern Cyprus":{name:"Northern Cyprus",ISO_A3:"-99"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Dominica:{name:"Dominica",ISO_A3:"DMA"},Denmark:{name:"Denmark",ISO_A3:"DNK"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},"Dhekelia Sovereign Base Area":{name:"Dhekelia Sovereign Base Area",ISO_A3:"-99"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Finland:{name:"Finland",ISO_A3:"FIN"},Fiji:{name:"Fiji",ISO_A3:"FJI"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},France:{name:"France",ISO_A3:"FRA"},"Faroe Islands":{name:"Faroe Islands",ISO_A3:"FRO"},"Federated States of Micronesia":{name:"Federated States of Micronesia",ISO_A3:"FSM"},Gabon:{name:"Gabon",ISO_A3:"GAB"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Guernsey:{name:"Guernsey",ISO_A3:"GGY"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Greece:{name:"Greece",ISO_A3:"GRC"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},Guam:{name:"Guam",ISO_A3:"GUM"},Guyana:{name:"Guyana",ISO_A3:"GUY"},"Hong Kong S.A.R.":{name:"Hong Kong S.A.R.",ISO_A3:"HKG"},"Heard Island and McDonald Islands":{name:"Heard Island and McDonald Islands",ISO_A3:"HMD"},Honduras:{name:"Honduras",ISO_A3:"HND"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},"Isle of Man":{name:"Isle of Man",ISO_A3:"IMN"},India:{name:"India",ISO_A3:"IND"},"Indian Ocean Territories":{name:"Indian Ocean Territories",ISO_A3:"-99"},"British Indian Ocean Territory":{name:"British Indian Ocean Territory",ISO_A3:"IOT"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Israel:{name:"Israel",ISO_A3:"ISR"},Italy:{name:"Italy",ISO_A3:"ITA"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},Jersey:{name:"Jersey",ISO_A3:"JEY"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},"Baykonur Cosmodrome":{name:"Baykonur Cosmodrome",ISO_A3:"-99"},"Siachen Glacier":{name:"Siachen Glacier",ISO_A3:"-99"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},Kiribati:{name:"Kiribati",ISO_A3:"KIR"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},Liechtenstein:{name:"Liechtenstein",ISO_A3:"LIE"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},"Macao S.A.R":{name:"Macao S.A.R",ISO_A3:"MAC"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Mexico:{name:"Mexico",ISO_A3:"MEX"},"Marshall Islands":{name:"Marshall Islands",ISO_A3:"MHL"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},"Northern Mariana Islands":{name:"Northern Mariana Islands",ISO_A3:"MNP"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Namibia:{name:"Namibia",ISO_A3:"NAM"},"New Caledonia":{name:"New Caledonia",ISO_A3:"NCL"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Niue:{name:"Niue",ISO_A3:"NIU"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Nepal:{name:"Nepal",ISO_A3:"NPL"},"New Zealand":{name:"New Zealand",ISO_A3:"NZL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Panama:{name:"Panama",ISO_A3:"PAN"},"Pitcairn Islands":{name:"Pitcairn Islands",ISO_A3:"PCN"},Peru:{name:"Peru",ISO_A3:"PER"},"Spratly Islands":{name:"Spratly Islands",ISO_A3:"-99"},Philippines:{name:"Philippines",ISO_A3:"PHL"},Palau:{name:"Palau",ISO_A3:"PLW"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},Poland:{name:"Poland",ISO_A3:"POL"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Palestine:{name:"Palestine",ISO_A3:"PSE"},"French Polynesia":{name:"French Polynesia",ISO_A3:"PYF"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Romania:{name:"Romania",ISO_A3:"ROU"},Russia:{name:"Russia",ISO_A3:"RUS"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},Singapore:{name:"Singapore",ISO_A3:"SGP"},"South Georgia and South Sandwich Islands":{name:"South Georgia and South Sandwich Islands",ISO_A3:"SGS"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Solomon Islands":{name:"Solomon Islands",ISO_A3:"SLB"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Somalia:{name:"Somalia",ISO_A3:"SOM"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},"Sao Tome and Principe":{name:"Sao Tome and Principe",ISO_A3:"STP"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},"East Timor":{name:"East Timor",ISO_A3:"TLS"},Tonga:{name:"Tonga",ISO_A3:"TON"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Tuvalu:{name:"Tuvalu",ISO_A3:"TUV"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},"United States Minor Outlying Islands":{name:"United States Minor Outlying Islands",ISO_A3:"UMI"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"US Naval Base Guantanamo Bay":{name:"US Naval Base Guantanamo Bay",ISO_A3:"-99"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Vanuatu:{name:"Vanuatu",ISO_A3:"VUT"},"Wallis and Futuna":{name:"Wallis and Futuna",ISO_A3:"WLF"},"Akrotiri Sovereign Base Area":{name:"Akrotiri Sovereign Base Area",ISO_A3:"-99"},Samoa:{name:"Samoa",ISO_A3:"WSM"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"}},Bx={Alabama:{name:"Alabama"},Alaska:{name:"Alaska"},Arizona:{name:"Arizona"},Arkansas:{name:"Arkansas"},California:{name:"California"},Colorado:{name:"Colorado"},Connecticut:{name:"Connecticut"},Delaware:{name:"Delaware"},"District of Columbia":{name:"District of Columbia"},Florida:{name:"Florida"},Georgia:{name:"Georgia"},Hawaii:{name:"Hawaii"},Idaho:{name:"Idaho"},Illinois:{name:"Illinois"},Indiana:{name:"Indiana"},Iowa:{name:"Iowa"},Kansas:{name:"Kansas"},Kentucky:{name:"Kentucky"},Louisiana:{name:"Louisiana"},Maine:{name:"Maine"},Maryland:{name:"Maryland"},Massachusetts:{name:"Massachusetts"},Michigan:{name:"Michigan"},Minnesota:{name:"Minnesota"},Mississippi:{name:"Mississippi"},Missouri:{name:"Missouri"},Montana:{name:"Montana"},Nebraska:{name:"Nebraska"},Nevada:{name:"Nevada"},"New Hampshire":{name:"New Hampshire"},"New Jersey":{name:"New Jersey"},"New Mexico":{name:"New Mexico"},"New York":{name:"New York"},"North Carolina":{name:"North Carolina"},"North Dakota":{name:"North Dakota"},Ohio:{name:"Ohio"},Oklahoma:{name:"Oklahoma"},Oregon:{name:"Oregon"},Pennsylvania:{name:"Pennsylvania"},"Rhode Island":{name:"Rhode Island"},"South Carolina":{name:"South Carolina"},"South Dakota":{name:"South Dakota"},Tennessee:{name:"Tennessee"},Texas:{name:"Texas"},Utah:{name:"Utah"},Vermont:{name:"Vermont"},Virginia:{name:"Virginia"},Washington:{name:"Washington"},"West Virginia":{name:"West Virginia"},Wisconsin:{name:"Wisconsin"},Wyoming:{name:"Wyoming"}},Ox={Anguilla:{name:"Anguilla",ISO_A3:"AIA"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Canada:{name:"Canada",ISO_A3:"CAN"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},Dominica:{name:"Dominica",ISO_A3:"DMA"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Mexico:{name:"Mexico",ISO_A3:"MEX"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"}},Lx={Argentina:{name:"Argentina",ISO_A3:"ARG"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Chile:{name:"Chile",ISO_A3:"CHL"},Colombia:{name:"Colombia",ISO_A3:"COL"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},Guyana:{name:"Guyana",ISO_A3:"GUY"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Panama:{name:"Panama",ISO_A3:"PAN"},Peru:{name:"Peru",ISO_A3:"PER"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Honduras:{name:"Honduras",ISO_A3:"HND"}},Ex={World:Dx,USA:Bx,NorthAmerica:Ox,SouthAmerica:Lx,Canada:Fx,Europe:Px,Asia:Tx,Africa:Cx,Australia:Ix},Rx={Solid:pd},zx={warm:t=>i=>ve(60/(t-1)*i,.8,.8),cold:t=>i=>ve(60/(t-1)*i+180,.8,.8),fullSpectrum:t=>i=>ve(360/t*i,.8,.8),reverseSpectrum:t=>i=>ve(360/t*(t-i),.8,.8),flatUI:t=>i=>ve(360/t*i+8,.8,.8-.15/t*i),arction:t=>i=>{const s=1-.2/t*i;return ve(360/t*i+51,s,s)},arctionWarm:t=>i=>{const s=t-1,e=1-.2/s*i;return ve(46-46/s*i+4,e,e)},sunset:t=>i=>{const s=[170,320];return ve(i%2?s[0]:s[1],.8,.5+.5/(t-1)*i)},dynamic:t=>i=>{const s=i%2,e=[234,346];return ve(s?e[0]:e[1],s?.3:.9,.5+.5/(t-1)*i)},magenta:t=>i=>{const s=[.9,.6];return ve(354,i%2?s[0]:s[1],.5+.5/(t-1)*i)},greyscale:t=>i=>ve(0,0,.25+.5/(t-1)*i),frozen:t=>i=>{const s=[.8,.6];return ve(160+80/(t-1)*i,.6,i%2?s[0]:s[1])},retro:t=>i=>{const s=[6,183];return ve(i%2?s[0]:s[1],.7,.5+.5/(t-1)*i)},crayons:t=>i=>{let s=180+230/(t-1)*i;return s>360&&(s-=360),ve(s,.9,.8)},custom:(t,i)=>s=>{const e=.25+.5/(t-1)*s;if(!i)return ve(0,0,e);const h=i.getR()/255,r=i.getG()/255,n=i.getB()/255,o=Math.max(h,r,n),a=Math.min(h,r,n);let u=0;if(o!==a){const t=o-a;switch(o){case h:u=(r-n)/t+(r<n?6:0);break;case r:u=(n-h)/t+2;break;case n:u=(h-r)/t+4;break;default:u=0}return u=u/6*360,ve(u,.8,e)}return ve(0,0,e)},sector:(t,i,s=.8,e=.8)=>h=>r=>ve(t+(i-t)/h*r,s,e),auroraBorealis:t=>i=>Vx([{value:0,hex:"#23FF7A"},{value:1/9,hex:"#03E65D"},{value:2/9,hex:"#04D155"},{value:3/9,hex:"#00B849"},{value:4/9,hex:"#00A869"},{value:5/9,hex:"#008F68"},{value:6/9,hex:"#00815E"},{value:7/9,hex:"#017153"},{value:8/9,hex:"#704A85"},{value:1,hex:"#743A70"}],t,i),blueSciFi:t=>i=>Vx([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#E2E7FF"},{value:2/9,hex:"#ACB9F8"},{value:3/9,hex:"#889DFF"},{value:4/9,hex:"#547EEF"},{value:5/9,hex:"#4068D8"},{value:6/9,hex:"#2B50B7"},{value:7/9,hex:"#1B3E9F"},{value:8/9,hex:"#8D1395"},{value:1,hex:"#780A74"}],t,i),light:t=>i=>Vx([{value:0,hex:"#FECC00"},{value:1/9,hex:"#F7B300"},{value:2/9,hex:"#EF9900"},{value:3/9,hex:"#E88000"},{value:4/9,hex:"#E06600"},{value:5/9,hex:"#DD5A00"},{value:6/9,hex:"#D94D00"},{value:7/9,hex:"#D13300"},{value:8/9,hex:"#C91A00"},{value:1,hex:"#C10000"}],t,i),monochrome:t=>i=>Vx([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#EEEEEE"},{value:2/9,hex:"#DCDCDC"},{value:3/9,hex:"#C1C1C1"},{value:4/9,hex:"#A4A2A2"},{value:5/9,hex:"#8B8B8B"},{value:6/9,hex:"#787878"},{value:7/9,hex:"#656565"},{value:8/9,hex:"#565555"},{value:1,hex:"#434343"}],t,i),night:t=>i=>Vx([{value:0,hex:"#F0F9E0"},{value:1/9,hex:"#C9DFA4"},{value:2/9,hex:"#B5C796"},{value:3/9,hex:"#8998B7"},{value:4/9,hex:"#6E7E9E"},{value:5/9,hex:"#5C6D8F"},{value:6/9,hex:"#47587A"},{value:7/9,hex:"#374B72"},{value:8/9,hex:"#273C65"},{value:1,hex:"#192847"}],t,i),sunset2:t=>i=>Vx([{value:0,hex:"#22334D"},{value:1/9,hex:"#82062C"},{value:2/9,hex:"#AB001D"},{value:3/9,hex:"#D80428"},{value:4/9,hex:"#CF5D1B"},{value:5/9,hex:"#CF8229"},{value:6/9,hex:"#CF9D29"},{value:7/9,hex:"#C4BE25"},{value:8/9,hex:"#E1DC49"},{value:1,hex:"#FFFA67"}],t,i)},Vx=(t,i,s)=>{const e=Gx(i,s),[h,r]=Hx(e,t),n=Nx(t[h]),o=Nx(t[r]),a=0!==n.value?(o.value-e)/n.value:0,u={value:a,h:mf(n.h,o.h,a),s:mf(n.s,o.s,a),v:mf(n.v,o.v,a)};return ve(u.h,u.s,u.v)},Nx=t=>{const i=(t=>{const i=t.r,s=t.g,e=t.b,h=Math.max(i,s,e),r=Math.min(i,s,e);let n=0;const o=h,a=h-r,u=0===h?0:a/h;if(h===r)n=0;else{switch(h){case i:n=(s-e)/a+(s<e?6:0);break;case s:n=(e-i)/a+2;break;case e:n=(i-s)/a+4}n/=6}return[360*n,u,o]})(Se(t.hex));return{value:t.value,h:i[0],s:i[1],v:i[2]}},Gx=(t,i)=>{const s=i/t;return s<0?0:s>1?1:s},Hx=(t,i)=>{if(i.length<2)throw new Error("Invalid palette size");for(let s=0;s<i.length;s+=1)if(t<i[s].value)return[s-1,s];return[i.length-2,i.length-1]},Wx=(t,i)=>{const s=(t=>{const i=new De({color:t.uiStrokeColorContrastHigh}),s=new De({color:t.uiStrokeColorContrastMedium}),e=new De({color:t.uiStrokeColorContrastLow}),h=new Xn({family:t.fontFamily,weight:"normal",style:"normal"}),r=h.setSize(18*t.fontScaler),n=h.setSize(16*t.fontScaler),o=h.setSize(14*t.fontScaler),a=h.setSize(10*t.fontScaler),u=h.withMutations((i=>i.set("size",14*t.fontScaler).set("weight","bold"))),l=h.setSize(13*t.fontScaler),c=new sh({thickness:2,fillStyle:e}),f=new De({color:t.dataHighlightOverlayColor}),d=new sh({thickness:2,fillStyle:t.legendBackgroundBorderFillStyle}),g=t.dataColorPalette.map((t=>new De({color:t.stroke}))),m=t=>g[t%g.length],y=g.map((t=>new sh({thickness:2,fillStyle:t}))),p=t=>y[t%y.length],S=t.dataColorPalette.map((t=>new De({color:t.border}))).map((t=>new sh({thickness:2,fillStyle:t}))),v=t=>S[t%S.length],b=t.dataColorPalette.map((t=>{const i=t.area;return new Je({angle:180,stops:[{color:rr(i,pe(255,255,255,i.getA()),.3),offset:0},{color:i,offset:.5},{color:rr(i,pe(0,0,0,i.getA()),.3),offset:1}]})})),x=t=>b[t%b.length],M=t.dataColorPaletteInverted.map((t=>{const i=t.area;return new Je({angle:180,stops:[{color:rr(i,pe(255,255,255,i.getA()),.3),offset:0},{color:i,offset:.5},{color:rr(i,pe(0,0,0,i.getA()),.3),offset:1}]})})),_=t=>M[t%M.length],w=t.dataColorPaletteInverted.map((t=>new De({color:t.border}))).map((t=>new sh({thickness:2,fillStyle:t}))),A=t=>w[t%w.length],k=new De({color:t.dataColorPositive}),C=new De({color:t.dataColorNegative}),T=new sh({thickness:1,fillStyle:new De({color:t.dataStrokeColorContrastHigh.setA(50)})}),I=new sh({thickness:2,fillStyle:t.axisLineFillStyle}),F=th,P=new De({color:pe(0,0,0,1)}),D=new sh({thickness:1,fillStyle:t.axisGridMajorFillStyle}),B=new sh({thickness:1,fillStyle:t.axisTickMajorFillStyle}),O=o,L=t.axisLabelMajorFillStyle,E=new sh({thickness:1,fillStyle:t.axisGridMajorFillStyle}),R=new sh({thickness:1,fillStyle:t.axisTickMajorFillStyle}),z=o,V=t.axisLabelMajorFillStyle,N=new sh({thickness:1,fillStyle:t.axisGridMinorFillStyle}),G=new sh({thickness:1,fillStyle:t.axisTickMinorFillStyle}),H=a,W=t.axisLabelMinorFillStyle,U=Kb,j=new Zb({gridStrokeStyle:D,tickStyle:B,tickLength:50,tickPadding:-14,labelFont:O,labelPadding:0,labelFillStyle:L}),$=new Zb({gridStrokeStyle:E,tickStyle:R,tickLength:7,tickPadding:0,labelFont:z,labelPadding:0,labelFillStyle:V}),Y=new Zb({gridStrokeStyle:N,tickStyle:G,tickLength:4,tickPadding:5,labelFont:H,labelPadding:0,labelFillStyle:W}),X=new yx({extremeTickStyle:U,majorTickStyle:$,minorTickStyle:Y}),Z=new ux({greatTickStyle:j,majorTickStyle:$,minorTickStyle:Y}),K=new kx({majorTickStyle:$,minorTickStyle:Y}),q=new De({color:t.dataHighlightOverlayColor}),J=new sh({thickness:1,fillStyle:s}),Q=new sh({thickness:2,fillStyle:s}),tt=t=>new io.Triangulated({shape:"sphere",size:10,fillStyle:g[t%g.length]}),it=g[0],st=t.uiTextFillStyle,et=t.legendBackgroundFillStyle,ht=new sh({thickness:1,fillStyle:t.legendBackgroundBorderFillStyle}),rt=or(t.legendButtonDefaultColor),nt=new sh({thickness:1,fillStyle:i}),ot=new sh({thickness:1,fillStyle:t.cursorGridFillStyle});let at={isDark:t.isDark,effect:t.effect,effectsText:t.effectsText,effectsDashboardSplitters:t.effectsDashboardSplitters,lcjsBackgroundFillStyle:t.lcjsBackgroundFillStyle,lcjsBackgroundStrokeStyle:th,highlightColorOffset:t.highlightColorOffset,highlightColorOffsetAxisOverlay:t.highlightColorOffsetAxisOverlay,dashboardSplitterStyle:new sh({thickness:4,fillStyle:t.dashboardSplitterFillStyle}),chartXYBackgroundFillStyle:t.panelBackgroundFillStyle,chartXYBackgroundStrokeStyle:th,chartXYTitleFont:r,chartXYTitleFillStyle:t.titleFillStyle,chartXYSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chartXYSeriesBackgroundStrokeStyle:c,chartXYZoomingRectangleFillStyle:f,chartXYZoomingRectangleStrokeStyle:d,chartXYFittingRectangleFillStyle:f,chartXYFittingRectangleStrokeStyle:d,lineSeriesStrokeStyle:p,pointLineSeriesStrokeStyle:p,pointLineSeriesFillStyle:m,pointSeriesFillStyle:m,ellipseSeriesFillStyle:m,ellipseSeriesStrokeStyle:p,polygonSeriesFillStyle:m,polygonSeriesStrokeStyle:p,rectangleSeriesFillStyle:m,rectangleSeriesStrokeStyle:th,segmentSeriesStrokeStyle:p,boxSeriesBodyFillStyle:m(0),boxSeriesBodyStrokeStyle:th,boxSeriesStrokeStyle:new sh({thickness:1,fillStyle:g[0]}),boxSeriesMedianStrokeStyle:new sh({thickness:1,fillStyle:new De({color:pe(0,0,0)})}),ohlcCandleBodyFillStylePositive:k,ohlcCandleBodyFillStyleNegative:C,ohlcCandleBodyStrokeStylePositive:th,ohlcCandleBodyStrokeStyleNegative:th,ohlcCandleStrokeStyle:new sh({thickness:1,fillStyle:new De({color:t.uiStrokeColorContrastHigh})}),ohlcBarStrokeStylePositive:new sh({thickness:2,fillStyle:k}),ohlcBarStrokeStyleNegative:new sh({thickness:2,fillStyle:C}),heatmapGridSeriesFillStyle:m,heatmapGridSeriesWireframeStyle:T,heatmapScrollingGridSeriesFillStyle:m,heatmapScrollingGridSeriesWireframeStyle:T,areaRangeSeriesFillStyle:x,areaRangeSeriesStrokeStyle:v,areaRangeSeriesFillStyleInverted:_,areaRangeSeriesStrokeStyleInverted:A,areaSeriesBipolarHighFillStyle:x,areaSeriesBipolarHighStrokeStyle:v,areaSeriesBipolarLowFillStyle:_,areaSeriesBipolarLowStrokeStyle:A,areaSeriesPositiveFillStyle:x,areaSeriesPositiveStrokeStyle:v,areaSeriesNegativeFillStyle:_,areaSeriesNegativeStrokeStyle:A,xAxisTitleFont:n,xAxisTitleFillStyle:t.axisTitleFillStyle,xAxisStrokeStyle:I,xAxisNibStyle:F,xAxisOverlayStyle:P,xAxisZoomingBandFillStyle:f,xAxisZoomingBandStrokeStyle:th,xAxisNumericTicks:X,xAxisDateTimeTicks:Z,xAxisTimeTicks:K,yAxisTitleFont:n,yAxisTitleFillStyle:t.axisTitleFillStyle,yAxisStrokeStyle:I,yAxisNibStyle:F,yAxisOverlayStyle:P,yAxisZoomingBandFillStyle:f,yAxisZoomingBandStrokeStyle:th,yAxisNumericTicks:X,yAxisDateTimeTicks:Z,yAxisTimeTicks:K,bandFillStyle:q,bandStrokeStyle:J,constantLineStrokeStyle:Q,chart3DBackgroundFillStyle:t.panelBackgroundFillStyle,chart3DBackgroundStrokeStyle:th,chart3DTitleFont:r,chart3DTitleFillStyle:t.titleFillStyle,chart3DSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chart3DSeriesBackgroundStrokeStyle:c,chart3DBoundingBoxStrokeStyle:th,xAxis3DTitleFont:n,xAxis3DTitleFillStyle:t.axisTitleFillStyle,xAxis3DStrokeStyle:I,xAxis3DNumericTicks:X,xAxis3DDateTimeTicks:Z,xAxis3DTimeTicks:K,yAxis3DTitleFont:n,yAxis3DTitleFillStyle:t.axisTitleFillStyle,yAxis3DStrokeStyle:I,yAxis3DNumericTicks:X,yAxis3DDateTimeTicks:Z,yAxis3DTimeTicks:K,zAxis3DTitleFont:n,zAxis3DTitleFillStyle:t.axisTitleFillStyle,zAxis3DStrokeStyle:I,zAxis3DNumericTicks:X,zAxis3DDateTimeTicks:Z,zAxis3DTimeTicks:K,lineSeries3DStrokeStyle:p,pointLineSeries3DStrokeStyle:p,pointLineSeries3DPointStyle:tt,pointSeries3DPointStyle:tt,pointCloudSeries3DPointStyle:t=>new io.Pixelated({size:5,fillStyle:g[t%g.length]}),surfaceGridSeries3DFillStyle:m,surfaceGridSeries3DWireframeStyle:T,surfaceScrollingGridSeries3DFillStyle:m,surfaceScrollingGridSeries3DWireframeStyle:T,boxSeries3DFillStyle:m,polarChartBackgroundFillStyle:t.panelBackgroundFillStyle,polarChartBackgroundStrokeStyle:th,polarChartTitleFont:r,polarChartTitleFillStyle:t.titleFillStyle,polarChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,polarChartSeriesBackgroundStrokeStyle:c,polarSectorFillStyle:q,polarSectorStrokeStyle:J,polarAmplitudeAxisTitleFont:n,polarAmplitudeAxisTitleFillStyle:t.axisTitleFillStyle,polarAmplitudeAxisStrokeStyle:I,polarAmplitudeAxisNumericTicks:X,polarAmplitudeAxisDateTimeTicks:Z,polarAmplitudeAxisTimeTicks:K,polarRadialAxisTitleFont:n,polarRadialAxisTitleFillStyle:t.axisTitleFillStyle,polarRadialAxisStrokeStyle:I,polarRadialAxisTickStyle:$,polarLineSeriesStrokeStyle:p,polarPointLineSeriesFillStyle:m,polarPointLineSeriesStrokeStyle:p,polarPointSeriesFillStyle:m,polarPolygonSeriesFillStyle:x,polarPolygonSeriesStrokeStyle:v,polarAreaSeriesFillStyle:x,polarAreaSeriesStrokeStyle:v,mapChartBackgroundFillStyle:t.panelBackgroundFillStyle,mapChartBackgroundStrokeStyle:th,mapChartTitleFont:r,mapChartTitleFillStyle:t.titleFillStyle,mapChartFillStyle:it,mapChartStrokeStyle:new sh({thickness:1,fillStyle:new De({color:t.dataStrokeColorContrastMedium})}),mapChartOutlierRegionFillStyle:Ie,mapChartOutlierRegionStrokeStyle:new sh({thickness:1,fillStyle:e}),mapChartSeparateRegionFillStyle:et,mapChartSeparateRegionStrokeStyle:ht,dataGridBackgroundFillStyle:t.panelBackgroundFillStyle,dataGridBackgroundStrokeStyle:th,dataGridTitleFont:r,dataGridTitleFillStyle:t.titleFillStyle,dataGridTextFont:o,dataGridTextFillStyle:it,dataGridCellBackgroundFillStyle:new De({color:t.uiBackgroundColor}),dataGridBorderStrokeStyle:new sh({thickness:.4,fillStyle:new De({color:t.uiBackgroundBorderColor})}),dataGridScrollBarBackgroundFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarBackgroundStrokeStyle:th,dataGridScrollBarFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarStrokeStyle:ht,dataGridScrollBarButtonFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarButtonStrokeStyle:ht,dataGridScrollBarButtonArrowFillStyle:rt,dataGridScrollBarButtonArrowStrokeStyle:ht,sparkLineChartStrokeStyle:p(0),sparkPointChartFillStyle:m(0),sparkBarChartFillStyle:m(0),sparkBarChartStrokeStyle:v(0),sparkAreaChartFillStyle:x(0),sparkAreaChartStrokeStyle:v(0),sparkPieChartFillStyle:m,sparkPieChartStrokeStyle:ht,sparkChartBandFillStyle:q,sparkChartBandStrokeStyle:J,sparkChartConstantLineStrokeStyle:Q,spiderChartBackgroundFillStyle:t.panelBackgroundFillStyle,spiderChartBackgroundStrokeStyle:th,spiderChartTitleFont:r,spiderChartTitleFillStyle:t.titleFillStyle,spiderChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,spiderChartSeriesBackgroundStrokeStyle:c,spiderChartWebStyle:new sh({thickness:2,fillStyle:e}),spiderChartScaleLabelFillStyle:t.axisLabelMajorFillStyle,spiderChartScaleLabelFont:o,spiderChartAxisLabelFillStyle:t.axisTitleFillStyle,spiderChartAxisLabelFont:n,spiderChartAxisStrokeStyle:new sh({thickness:2,fillStyle:s}),spiderChartAxisNibStrokeStyle:new sh({thickness:2,fillStyle:i}),spiderSeriesFillStyle:x,spiderSeriesStrokeStyle:v,spiderSeriesPointFillStyle:m,pieChartBackgroundFillStyle:t.panelBackgroundFillStyle,pieChartBackgroundStrokeStyle:th,pieChartTitleFont:r,pieChartTitleFillStyle:t.titleFillStyle,pieChartSliceFillStylePalette:m,pieChartSliceStrokeStyle:ht,pieChartSliceLabelFont:l,pieChartSliceLabelFillStyle:t.uiTextFillStyle,pieChartConnectorStrokeStyle:nt,funnelChartBackgroundFillStyle:t.panelBackgroundFillStyle,funnelChartBackgroundStrokeStyle:th,funnelChartTitleFont:r,funnelChartTitleFillStyle:t.titleFillStyle,funnelChartSliceFillStylePalette:m,funnelChartSliceStrokeStyle:ht,funnelChartSliceLabelFont:l,funnelChartSliceLabelFillStyle:t.uiTextFillStyle,funnelChartConnectorStrokeStyle:nt,pyramidChartBackgroundFillStyle:t.panelBackgroundFillStyle,pyramidChartBackgroundStrokeStyle:th,pyramidChartTitleFont:r,pyramidChartTitleFillStyle:t.titleFillStyle,pyramidChartSliceFillStylePalette:m,pyramidChartSliceStrokeStyle:ht,pyramidChartSliceLabelFont:l,pyramidChartSliceLabelFillStyle:t.uiTextFillStyle,pyramidChartConnectorStrokeStyle:nt,gaugeChartBackgroundFillStyle:t.panelBackgroundFillStyle,gaugeChartBackgroundStrokeStyle:th,gaugeChartTitleFont:r,gaugeChartTitleFillStyle:t.titleFillStyle,gaugeChartEmptyGaugeFillStyle:new De({color:t.uiBackgroundColor}),gaugeChartEmptyGaugeStrokeStyle:ht,gaugeChartGaugeFillStyle:it,gaugeChartIntervalLabelsFillStyle:st,gaugeChartIntervalLabelsFont:l,gaugeChartValueLabelFillStyle:st,gaugeChartValueLabelFont:l,uiPanelBackgroundFillStyle:t.panelBackgroundFillStyle,uiPanelBackgroundStrokeStyle:th,onScreenMenuBackgroundColor:pe(254,204,0,.7),uiButtonFillStyle:rt,uiButtonStrokeStyle:ht,uiButtonSize:10,uiBackgroundFillStyle:et,uiBackgroundStrokeStyle:ht,uiTextFillStyle:st,uiTextFont:l,legendTitleFillStyle:st,legendTitleFont:u,cursorTickMarkerXBackgroundFillStyle:et,cursorTickMarkerXBackgroundStrokeStyle:ht,cursorTickMarkerXTextFillStyle:st,cursorTickMarkerXTextFont:l,cursorTickMarkerYBackgroundFillStyle:et,cursorTickMarkerYBackgroundStrokeStyle:ht,cursorTickMarkerYTextFillStyle:st,cursorTickMarkerYTextFont:l,cursorPointMarkerFillStyle:Ie,cursorPointMarkerStrokeStyle:th,cursorResultTableFillStyle:et,cursorResultTableStrokeStyle:ht,cursorResultTableTextFillStyle:st,cursorResultTableTextFont:l,cursorGridStrokeStyleX:ot,cursorGridStrokeStyleY:ot,chartMarkerPointMarkerFillStyle:t.legendBackgroundBorderFillStyle,chartMarkerPointMarkerStrokeStyle:th};return t.overrideThemeProperties&&(at={...at,...t.overrideThemeProperties}),at})(t),e={...i,header1Font:s.xAxisTitleFont,header2Font:s.xAxisNumericTicks.getMajorTickStyle().labelFont,header3Font:s.uiTextFont,mainDataColor:t.dataColorPalette[0].stroke};return{...s,examples:e}},Ux=(t,i)=>{const s=new Image;s.crossOrigin="*";const e=`${t}/themes/${i}`;return s.addEventListener("error",(i=>{Mr(t,e,"Theme with asset",{shouldCrash:!1})})),s.src=e,s},jx=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:rr(i[e%i.length].stroke,pe(255,255,255),.5);return new Ke({stops:[{color:rr(h,pe(255,255,255),.5*s).setA(100),offset:0},{color:h.setA(100),offset:.5},{color:rr(h,pe(30,30,30),.5*s).setA(100),offset:1}]})},$x=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:rr(i[e%i.length].stroke,pe(255,255,255),.2);return new Ke({stops:[{color:rr(h,pe(255,255,255),.2*s),offset:0},{color:h,offset:.5},{color:rr(h,pe(0,0,0),.2*s),offset:1}]})},Yx=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:rr(i[e%i.length].stroke,pe(255,255,255),.2);return new Je({angle:90,stops:[{color:rr(h,pe(255,255,255),.5*s),offset:0},{color:h,offset:.35},{color:rr(h,pe(30,30,30),.5*s),offset:1}]})},Xx=(t,i,s)=>s=>{const e=!0===t?i[s%i.length].stroke:rr(i[s%i.length].stroke,pe(255,255,255),.3);return new Je({angle:90,stops:[{color:rr(e,pe(255,255,255),.5),offset:0},{color:e,offset:.35},{color:rr(e,pe(30,30,30),.5),offset:1}]})},Zx=(i,s,e)=>{const h=s[0].stroke;return new Ke({shape:t.GradientShape.ellipse,extent:t.GradientExtent.farthestCorner,position:{x:.5,y:.5},stops:[{color:!0===i?h:rr(h,pe(255,255,255),.5*e),offset:0},{color:h,offset:.5},{color:!0===i?h:rr(h,pe(0,0,0),.5*e),offset:1}]})},Kx=br((()=>{const i=pe(255,255,255),s=new De({color:i}),e=!0,h=new $b({spread:1,blur:9,offset:{x:0,y:0},color:pe(0,0,0,150)}),r=new Ke({position:{x:.8,y:.8},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.ellipse,stops:[{offset:0,color:pe(50,51,52)},{offset:.5,color:pe(14,15,16)},{offset:1,color:pe(0,0,0)}]}),n=new De({color:pe(45,45,45)}),o=new Ke({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:pe(120,120,120,100)},{offset:1,color:pe(0,0,0,50)}]}),a=new Ke({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:pe(30,30,30,200)},{offset:1,color:pe(0,0,0,255)}]}),u=new De({color:pe(255,255,220)}),l=new De({color:pe(255,255,166)}),c=new De({color:pe(255,255,220)}),f=new De({color:pe(255,255,220,130)}),d=new De({color:pe(255,255,200)}),g=d,m=g,y=new Je({angle:45,stops:[{offset:0,color:pe(230,230,230)},{offset:1,color:pe(150,150,150)}]}),p=new De({color:pe(220,220,220)}),S=new De({color:pe(200,200,200,50)}),v=new De({color:pe(200,200,200,150)}),b=new De({color:pe(200,200,200,20)}),x=new De({color:pe(150,150,150)}),M=new Je({angle:0,stops:[{offset:0,color:pe(10,10,10,220)},{offset:1,color:pe(30,30,30,220)}]}),_=s,w=pe(255,255,200),A=M,k=_,C=pe(20,20,20),T=pe(0,0,0),I=i,F=pe(150,150,150),P=pe(50,50,50),D=pe(50,50,50),B=pe(100,100,100),O=pe(200,200,200),L=[pe(255,255,91,255),pe(255,205,91,255),pe(255,155,91,255),pe(255,196,188,255),pe(255,148,184,255),pe(219,148,198,255),pe(235,196,224,255),pe(169,148,198,255),pe(148,226,198,255),pe(148,255,176,255),pe(180,255,165,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),E=i.setA(20),R=pe(176,255,157,255),z=pe(255,112,76,255),V={mapChartFillStyle:new Je({angle:135,stops:[{color:pe(255,255,91,255),offset:0},{color:pe(255,155,91,255),offset:1}]}),spiderSeriesFillStyle:jx(e,L,.5),pieChartSliceFillStylePalette:$x(e,L,1),funnelChartSliceFillStylePalette:Yx(e,L,1),pyramidChartSliceFillStylePalette:Yx(e,L,1),rectangleSeriesFillStyle:Xx(e,L),gaugeChartGaugeFillStyle:Zx(e,L,1)},N=new De({color:pe(176,255,157,255)}),G=new De({color:pe(255,146,146,255)}),H=new De({color:pe(176,255,157,255)}),W=new De({color:pe(230,63,63,255)}),U=new De({color:pe(176,255,157,120)}),j=new De({color:pe(229,63,63,180)}),$=new De({color:pe(27,37,36,255)}),Y=new De({color:pe(62,27,27,255)}),X=[pe(255,0,0),pe(255,255,0),pe(0,255,0)],Z=[pe(10,10,255),pe(10,190,255),pe(251,255,0),pe(255,38,0)],K=[pe(255,255,0),pe(255,204,0),pe(255,128,0),pe(255,0,0)],q=[pe(0,0,0),pe(167,4,69,255),pe(255,0,0),pe(252,252,168,255)],J=new Ke({stops:[{color:pe(61,61,80,100),offset:0},{color:pe(44,44,55,30),offset:1}]}),Q=new De({color:pe(148,148,198,255)}),tt=U.getColor().setA(255),it=pe(100,100,100);return Wx({isDark:e,highlightColorOffset:pe(60,60,60,60),highlightColorOffsetAxisOverlay:pe(255,255,255,40),effect:h,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:r,dashboardSplitterFillStyle:n,panelBackgroundFillStyle:o,seriesBackgroundFillStyle:a,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:u,axisTitleFillStyle:l,axisLabelMajorFillStyle:c,axisLabelMinorFillStyle:f,uiTitleFillStyle:d,uiTextFillStyle:g,cursorTextFillStyle:m,axisLineFillStyle:y,axisTickMajorFillStyle:p,axisGridMajorFillStyle:S,axisTickMinorFillStyle:v,axisGridMinorFillStyle:b,cursorGridFillStyle:x,legendBackgroundFillStyle:M,legendBackgroundBorderFillStyle:_,legendButtonDefaultColor:w,resultTableBackgroundFillStyle:A,resultTableBackgroundBorderFillStyle:k,uiBackgroundColor:C,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:I,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:D,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:O,dataColorPalette:L,dataColorPaletteInverted:[{area:pe(190,50,50,100),border:pe(210,80,80)}],dataHighlightOverlayColor:E,dataColorPositive:R,dataColorNegative:z,overrideThemeProperties:V},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:H,negativeFillStyle:W,positiveAreaFillStyle:U,negativeAreaFillStyle:j,positiveBackgroundFillStyle:$,negativeBackgroundFillStyle:Y,badGoodColorPalette:X,coldHotColorPalette:Z,intensityColorPalette:K,spectrogramColorPalette:q,bollingerFillStyle:J,bollingerBorderFillStyle:Q,highlightPointColor:i,highlightDataGridColor:tt,unfocusedDataColor:it})})),qx=br((()=>{const i=pe(255,255,255),s=new De({color:i}),e=!0,h=new $b({spread:0,blur:9,offset:{x:0,y:0},color:pe(105,255,236,40)}),r=new De({color:pe(2,21,30)}),n=new Ke({stops:[{color:pe(19,40,66,150),offset:0},{color:pe(0,0,0,150),offset:1}]}),o=new De({color:pe(0,5,8,150)}),a=s,u=s,l=s,c=new De({color:pe(255,255,220,130)}),f=s,d=s,g=d,m=new De({color:pe(20,224,250,255)}),y=s,p=new De({color:pe(61,94,110,100)}),S=new De({color:pe(61,94,110,255)}),v=new De({color:pe(61,94,110,40)}),b=s,x=new De({color:pe(0,18,23,255)}),M=s,_=i,w=new De({color:pe(0,17,22,240)}),A=s,k=pe(0,38,48,220),C=pe(0,0,0),T=i,I=pe(150,150,150),F=pe(19,78,93),P=pe(50,50,50),D=pe(0,36,48),B=pe(200,200,200),O=[pe(45,253,253,255),pe(44,172,247,255),pe(46,100,248,255),pe(96,84,199,255),pe(184,104,245,255),pe(98,160,218,255),pe(43,238,245,255),pe(38,140,206,255),pe(112,96,224,255),pe(206,157,255,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),L=i.setA(50),E=pe(3,217,194,255),R=pe(230,63,63,255),z={mapChartFillStyle:new Je({angle:135,stops:[{color:pe(118,248,231,255),offset:0},{color:pe(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:jx(e,O,1),pieChartSliceFillStylePalette:$x(e,O,1),funnelChartSliceFillStylePalette:Yx(e,O,1),pyramidChartSliceFillStylePalette:Yx(e,O,1),rectangleSeriesFillStyle:Xx(e,O),gaugeChartGaugeFillStyle:Zx(e,O,1)},V=new De({color:pe(45,253,253,255)}),N=new De({color:pe(255,146,146,255)}),G=new De({color:pe(45,253,253,255)}),H=new De({color:pe(230,63,63,255)}),W=new De({color:pe(1,190,164,120)}),U=new De({color:pe(229,63,63,180)}),j=new De({color:pe(1,53,57,255)}),$=new De({color:pe(62,27,27,255)}),Y=[pe(1,104,119,255),pe(0,165,144,255),pe(0,246,214,255)],X=[pe(0,87,95,255),pe(0,125,124,255),pe(1,209,182,255),pe(0,255,221,255),pe(218,112,112,255),pe(172,47,47,255)],Z=[pe(126,255,253,255),pe(50,233,230,255),pe(0,196,193,255),pe(62,138,178,255),pe(139,88,191,255),pe(162,55,143,255)],K=[pe(13,31,52,255),pe(101,50,118,255),pe(1,142,172,255),pe(2,196,170,255),pe(0,255,221,255)],q=new Ke({stops:[{color:pe(122,103,254,70),offset:0},{color:pe(178,168,255,10),offset:1}]}),J=new De({color:pe(122,103,254,255)}),Q=W.getColor().setA(255),tt=pe(15,83,83);return Wx({isDark:e,highlightColorOffset:pe(60,60,60,60),highlightColorOffsetAxisOverlay:pe(255,255,255,40),effect:h,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:i=>new yy({source:Ux(i,"turquoiseHexagon.jpg"),fitMode:t.ImageFitMode.Fill}),dashboardSplitterFillStyle:r,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:o,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:a,axisTitleFillStyle:u,axisLabelMajorFillStyle:l,axisLabelMinorFillStyle:c,uiTitleFillStyle:f,uiTextFillStyle:d,cursorTextFillStyle:g,axisLineFillStyle:m,axisTickMajorFillStyle:y,axisGridMajorFillStyle:p,axisTickMinorFillStyle:S,axisGridMinorFillStyle:v,cursorGridFillStyle:b,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:_,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:A,uiBackgroundColor:k,uiBackgroundBorderColor:C,uiStrokeColorContrastHigh:T,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:F,dataStrokeColorContrastHigh:P,dataStrokeColorContrastMedium:D,dataStrokeColorContrastLow:B,dataColorPalette:O,dataColorPaletteInverted:[{area:pe(170,60,210,100),border:pe(210,100,250)}],dataHighlightOverlayColor:L,dataColorPositive:E,dataColorNegative:R,overrideThemeProperties:z},{positiveTextFillStyle:V,negativeTextFillStyle:N,positiveFillStyle:G,negativeFillStyle:H,positiveAreaFillStyle:W,negativeAreaFillStyle:U,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:$,badGoodColorPalette:Y,coldHotColorPalette:X,intensityColorPalette:Z,spectrogramColorPalette:K,bollingerFillStyle:q,bollingerBorderFillStyle:J,highlightPointColor:i,highlightDataGridColor:Q,unfocusedDataColor:tt})})),Jx=br((()=>{const i=!1,s=new $b({spread:0,blur:6,offset:{x:2,y:-2},color:pe(0,0,0,30)}),e=new Ke({position:{x:.8,y:.8},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.ellipse,stops:[{offset:0,color:pe(255,255,255)},{offset:1,color:pe(255,255,255)}]}),h=new De({color:pe(219,227,233,255)}),r=new Ke({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:pe(255,255,255,200)},{offset:1,color:pe(240,244,246,200)}]}),n=new Ke({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:pe(255,255,255,255)},{offset:1,color:pe(255,255,255,255)}]}),o=new De({color:pe(33,43,49)}),a=new De({color:pe(33,43,49)}),u=new De({color:pe(33,43,49)}),l=new De({color:pe(33,43,49,150)}),c=new De({color:pe(33,43,49)}),f=c,d=f,g=new Je({angle:45,stops:[{offset:0,color:pe(225,225,225)},{offset:1,color:pe(225,225,225)}]}),m=new De({color:pe(168,186,199,255)}),y=new De({color:pe(168,186,199,120)}),p=new De({color:pe(168,186,199,40)}),S=new De({color:pe(168,186,199,40)}),v=new De({color:pe(128,146,159,255)}),b=new Je({angle:0,stops:[{offset:0,color:pe(255,255,255,240)},{offset:1,color:pe(255,255,255,240)}]}),x=new De({color:pe(168,186,199)}),M=pe(255,255,200),_=new De({color:pe(255,255,255,240)}),w=new De({color:pe(128,146,159,255)}),A=pe(255,255,255,255),k=pe(168,168,199,255),C=pe(168,186,199,255),T=pe(168,186,199,255),I=pe(168,186,199,255),F=pe(168,186,199,255),P=pe(100,100,100),D=pe(200,200,200),B=[pe(28,181,140,255),pe(255,132,0,255),pe(240,39,39,255),pe(86,121,251,255),pe(2,181,213,255),pe(13,212,158,255),pe(22,167,3,255),pe(234,103,232,255),pe(62,183,179,255),pe(140,93,3,255),pe(155,158,186,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),O=pe(150,150,150,80),L=pe(46,182,120,255),E=pe(255,66,66,255),R=new sh({thickness:2,fillStyle:new De({color:pe(168,186,199,255)})}),z={mapChartFillStyle:new Je({angle:-45,stops:[{color:pe(2,181,213,255),offset:0},{color:pe(175,243,255,255),offset:1}]}),spiderSeriesFillStyle:jx(i,B,.8),pieChartSliceFillStylePalette:$x(i,B,.8),funnelChartSliceFillStylePalette:Yx(i,B,.5),pyramidChartSliceFillStylePalette:Yx(i,B,.5),rectangleSeriesFillStyle:Xx(i,B),gaugeChartGaugeFillStyle:Zx(i,B,.8),chartXYSeriesBackgroundStrokeStyle:R,chart3DSeriesBackgroundStrokeStyle:R,polarChartSeriesBackgroundStrokeStyle:R,spiderChartSeriesBackgroundStrokeStyle:R,dataGridTextFillStyle:new De({color:pe(0,88,64,255)})},V=new De({color:pe(4,146,108,255)}),N=new De({color:pe(240,39,39,255)}),G=new De({color:pe(28,181,140,255)}),H=new De({color:pe(230,88,88,255)}),W=new De({color:pe(28,181,140,180)}),U=new De({color:pe(230,88,88,180)}),j=new De({color:pe(229,243,228)}),$=new De({color:pe(232,225,216)}),Y=[pe(193,48,48,255),pe(240,234,60,255),pe(45,191,55,255)],X=[pe(10,19,255,255),pe(15,191,250,255),pe(249,255,2,255),pe(253,133,0,255),pe(255,24,0,255)],Z=[pe(50,99,213),pe(8,179,77),pe(255,246,0),pe(255,126,0),pe(189,36,30)],K=[pe(16,64,176),pe(8,179,77),pe(255,246,0),pe(255,126,0),pe(168,6,0)],q=new De({color:pe(185,198,207,255)}),J=new Ke({stops:[{color:pe(151,190,220,10),offset:0},{color:pe(151,190,220,50),offset:1}]}),Q=W.getColor().setA(255),tt=pe(150,150,150);return Wx({isDark:i,highlightColorOffset:pe(-60,-60,-60,60),highlightColorOffsetAxisOverlay:pe(0,0,0,40),effect:s,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:e,dashboardSplitterFillStyle:h,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:u,axisLabelMinorFillStyle:l,uiTitleFillStyle:c,uiTextFillStyle:f,cursorTextFillStyle:d,axisLineFillStyle:g,axisTickMajorFillStyle:m,axisGridMajorFillStyle:y,axisTickMinorFillStyle:p,axisGridMinorFillStyle:S,cursorGridFillStyle:v,legendBackgroundFillStyle:b,legendBackgroundBorderFillStyle:x,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:_,resultTableBackgroundBorderFillStyle:w,uiBackgroundColor:A,uiBackgroundBorderColor:k,uiStrokeColorContrastHigh:C,uiStrokeColorContrastMedium:T,uiStrokeColorContrastLow:I,dataStrokeColorContrastHigh:F,dataStrokeColorContrastMedium:P,dataStrokeColorContrastLow:D,dataColorPalette:B,dataColorPaletteInverted:[{area:pe(190,50,50,100),border:pe(210,80,80)}],dataHighlightOverlayColor:O,dataColorPositive:L,dataColorNegative:E,overrideThemeProperties:z},{positiveTextFillStyle:V,negativeTextFillStyle:N,positiveFillStyle:G,negativeFillStyle:H,positiveAreaFillStyle:W,negativeAreaFillStyle:U,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:$,badGoodColorPalette:Y,coldHotColorPalette:X,intensityColorPalette:Z,spectrogramColorPalette:K,bollingerFillStyle:J,bollingerBorderFillStyle:q,highlightPointColor:pe(0,0,0),highlightDataGridColor:Q,unfocusedDataColor:tt})})),Qx=br((()=>{const i=!1,s=new Ke({position:{x:.8,y:.8},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.ellipse,stops:[{offset:0,color:pe(255,255,255)},{offset:1,color:pe(255,255,255)}]}),e=new De({color:pe(214,236,216,255)}),h=new Ke({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:pe(233,244,231,70)},{offset:1,color:pe(233,244,231,200)}]}),r=new Ke({position:{x:.5,y:.5},extent:t.GradientExtent.farthestCorner,shape:t.GradientShape.circle,stops:[{offset:0,color:pe(255,255,255,255)},{offset:1,color:pe(255,255,255,255)}]}),n=new De({color:pe(1,61,53)}),o=new De({color:pe(1,61,53)}),a=new De({color:pe(1,61,53)}),u=new De({color:pe(1,61,53,150)}),l=new De({color:pe(1,61,53)}),c=l,f=c,d=new Je({angle:45,stops:[{offset:0,color:pe(225,225,225)},{offset:1,color:pe(225,225,225)}]}),g=new De({color:pe(188,211,186,255)}),m=new De({color:pe(188,211,186,150)}),y=new De({color:pe(188,211,186,50)}),p=new De({color:pe(188,211,186,50)}),S=new De({color:pe(104,148,111,255)}),v=new Je({angle:0,stops:[{offset:0,color:pe(255,255,255,240)},{offset:1,color:pe(255,255,255,240)}]}),b=new De({color:pe(104,148,111)}),x=pe(255,255,200),M=new De({color:pe(255,255,255,240)}),_=new De({color:pe(104,148,111,255)}),w=pe(255,255,255,255),A=pe(179,201,183,255),k=pe(188,211,186,255),C=pe(188,211,186,255),T=pe(188,211,186,255),I=pe(188,211,186,255),F=pe(100,100,100),P=pe(200,200,200),D=[pe(138,195,142,255),pe(193,161,114,255),pe(178,99,99,255),pe(142,156,210,255),pe(154,209,219,255),pe(164,212,199,255),pe(104,156,97,255),pe(196,147,195,255),pe(92,190,187,255),pe(126,100,51,255),pe(136,138,157,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),B=pe(150,150,150,80),O=pe(46,182,84,255),L=pe(232,96,96,255),E=new sh({thickness:2,fillStyle:new De({color:pe(188,211,186,255)})}),R={mapChartFillStyle:new Je({angle:-45,stops:[{color:pe(118,160,121,255),offset:0},{color:pe(174,227,178,255),offset:1}]}),spiderSeriesFillStyle:jx(i,D,.8),pieChartSliceFillStylePalette:$x(i,D,.8),pyramidChartSliceFillStylePalette:Yx(i,D,.5),funnelChartSliceFillStylePalette:Yx(i,D,.5),rectangleSeriesFillStyle:Xx(i,D),gaugeChartGaugeFillStyle:Zx(i,D,.8),chartXYSeriesBackgroundStrokeStyle:E,chart3DSeriesBackgroundStrokeStyle:E,polarChartSeriesBackgroundStrokeStyle:E,spiderChartSeriesBackgroundStrokeStyle:E,dataGridTextFillStyle:new De({color:pe(77,66,21,255)})},z=new De({color:pe(93,151,97,255)}),V=new De({color:pe(178,99,99,255)}),N=new De({color:pe(138,195,142,255)}),G=new De({color:pe(178,99,99,255)}),H=new De({color:pe(138,195,142,180)}),W=new De({color:pe(178,99,99,180)}),U=new De({color:pe(224,240,237)}),j=new De({color:pe(251,227,227)}),$=[pe(178,99,99,255),pe(215,224,111,255),pe(80,186,88,255)],Y=[pe(62,64,142,255),pe(66,131,77,255),pe(250,250,135,255),pe(202,161,78,255),pe(179,53,53,255)],X=[pe(64,86,138),pe(123,192,205),pe(255,252,149),pe(220,155,92),pe(184,78,74)],Z=[pe(64,86,138),pe(123,192,205),pe(255,252,149),pe(220,155,92),pe(132,60,57)],K=new De({color:pe(185,198,207,255)}),q=new Ke({stops:[{color:pe(151,190,220,10),offset:0},{color:pe(151,190,220,50),offset:1}]}),J=H.getColor().setA(255),Q=pe(150,150,150);return Wx({isDark:i,highlightColorOffset:pe(-60,-60,-60,60),highlightColorOffsetAxisOverlay:pe(0,0,0,40),effect:void 0,effectsText:!1,effectsDashboardSplitters:!1,lcjsBackgroundFillStyle:s,dashboardSplitterFillStyle:e,panelBackgroundFillStyle:h,seriesBackgroundFillStyle:r,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:n,axisTitleFillStyle:o,axisLabelMajorFillStyle:a,axisLabelMinorFillStyle:u,uiTitleFillStyle:l,uiTextFillStyle:c,cursorTextFillStyle:f,axisLineFillStyle:d,axisTickMajorFillStyle:g,axisGridMajorFillStyle:m,axisTickMinorFillStyle:y,axisGridMinorFillStyle:p,cursorGridFillStyle:S,legendBackgroundFillStyle:v,legendBackgroundBorderFillStyle:b,legendButtonDefaultColor:x,resultTableBackgroundFillStyle:M,resultTableBackgroundBorderFillStyle:_,uiBackgroundColor:w,uiBackgroundBorderColor:A,uiStrokeColorContrastHigh:k,uiStrokeColorContrastMedium:C,uiStrokeColorContrastLow:T,dataStrokeColorContrastHigh:I,dataStrokeColorContrastMedium:F,dataStrokeColorContrastLow:P,dataColorPalette:D,dataColorPaletteInverted:[{area:pe(210,70,70,100),border:pe(200,110,110)}],dataHighlightOverlayColor:B,dataColorPositive:O,dataColorNegative:L,overrideThemeProperties:R},{positiveTextFillStyle:z,negativeTextFillStyle:V,positiveFillStyle:N,negativeFillStyle:G,positiveAreaFillStyle:H,negativeAreaFillStyle:W,positiveBackgroundFillStyle:U,negativeBackgroundFillStyle:j,badGoodColorPalette:$,coldHotColorPalette:Y,intensityColorPalette:X,spectrogramColorPalette:Z,bollingerFillStyle:q,bollingerBorderFillStyle:K,highlightPointColor:pe(0,0,0),highlightDataGridColor:J,unfocusedDataColor:Q})})),tM=br((()=>{const i=pe(255,255,255),s=new De({color:i}),e=!0,h=new $b({spread:1,blur:9,offset:{x:0,y:0},color:pe(255,255,255,30)}),r=new De({color:pe(6,15,36)}),n=new Ke({stops:[{color:pe(46,13,87,50),offset:0},{color:pe(0,0,0,150),offset:1}]}),o=new De({color:pe(0,5,8,150)}),a=s,u=s,l=s,c=new De({color:pe(255,255,220,130)}),f=s,d=s,g=d,m=new Je({angle:45,stops:[{offset:0,color:pe(241,133,255,255)},{offset:1,color:pe(115,207,238,255)}]}),y=s,p=new De({color:pe(61,94,110,100)}),S=new De({color:pe(61,94,110,255)}),v=new De({color:pe(61,94,110,40)}),b=s,x=new De({color:pe(0,18,23,255)}),M=s,_=pe(115,207,238,255),w=new De({color:pe(0,17,22,240)}),A=s,k=pe(0,38,48,255),C=pe(0,0,0),T=i,I=pe(150,150,150),F=pe(19,57,93),P=pe(50,50,50),D=pe(0,17,48),B=pe(200,200,200),O=[pe(20,211,237,255),pe(98,147,252,255),pe(164,73,250,255),pe(129,117,253,255),pe(95,134,252,255),pe(22,133,212,255),pe(35,200,242,255),pe(104,121,233,255),pe(137,69,232,255),pe(70,72,241,255)].map((t=>({stroke:t,border:t,area:t.setA(100)}))),L=i.setA(50),E=pe(3,217,194,255),R=pe(243,21,110,255),z={mapChartFillStyle:new Je({angle:135,stops:[{color:pe(118,248,231,255),offset:0},{color:pe(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:jx(e,O,.5),pieChartSliceFillStylePalette:$x(e,O,2),funnelChartSliceFillStylePalette:Yx(e,O,1),pyramidChartSliceFillStylePalette:Yx(e,O,1),rectangleSeriesFillStyle:Xx(e,O),gaugeChartGaugeFillStyle:Zx(e,O,1)},V=new De({color:pe(20,211,237,255)}),N=new De({color:pe(253,145,178,255)}),G=new De({color:pe(20,211,237,255)}),H=new De({color:pe(239,68,121,255)}),W=new De({color:pe(20,211,237,120)}),U=new De({color:pe(239,68,121,180)}),j=new De({color:pe(1,53,57,255)}),$=new De({color:pe(94,19,42,255)}),Y=[pe(174,51,132,255),pe(204,107,218,255),pe(189,215,253,255)],X=[pe(0,63,95,255),pe(0,149,255,255),pe(0,225,255,255),pe(255,154,254,255),pe(204,98,170,255),pe(139,39,84,255)],Z=[pe(197,241,255,255),pe(70,210,255,255),pe(0,164,217,255),pe(90,99,222,255),pe(138,75,192,255),pe(151,27,162,255)],K=[pe(13,31,52,255),pe(129,54,130,255),pe(131,108,176,255),pe(7,162,213,255),pe(26,247,255,255)],q=new Ke({stops:[{color:pe(219,42,235,60),offset:0},{color:pe(237,73,252,10),offset:1}]}),J=new De({color:pe(237,73,252,255)}),Q=W.getColor().setA(255),tt=pe(8,70,100);return Wx({isDark:e,highlightColorOffset:pe(60,60,60,60),highlightColorOffsetAxisOverlay:pe(255,255,255,40),effect:h,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:i=>new yy({source:Ux(i,"cyberSpace.jpg"),fitMode:t.ImageFitMode.Fill}),dashboardSplitterFillStyle:r,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:o,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:a,axisTitleFillStyle:u,axisLabelMajorFillStyle:l,axisLabelMinorFillStyle:c,uiTitleFillStyle:f,uiTextFillStyle:d,cursorTextFillStyle:g,axisLineFillStyle:m,axisTickMajorFillStyle:y,axisGridMajorFillStyle:p,axisTickMinorFillStyle:S,axisGridMinorFillStyle:v,cursorGridFillStyle:b,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:_,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:A,uiBackgroundColor:k,uiBackgroundBorderColor:C,uiStrokeColorContrastHigh:T,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:F,dataStrokeColorContrastHigh:P,dataStrokeColorContrastMedium:D,dataStrokeColorContrastLow:B,dataColorPalette:O,dataColorPaletteInverted:[{area:pe(41,130,255,100),border:pe(45,110,240)}],dataHighlightOverlayColor:L,dataColorPositive:E,dataColorNegative:R,overrideThemeProperties:z},{positiveTextFillStyle:V,negativeTextFillStyle:N,positiveFillStyle:G,negativeFillStyle:H,positiveAreaFillStyle:W,negativeAreaFillStyle:U,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:$,badGoodColorPalette:Y,coldHotColorPalette:X,intensityColorPalette:Z,spectrogramColorPalette:K,bollingerFillStyle:q,bollingerBorderFillStyle:J,highlightPointColor:i,highlightDataGridColor:Q,unfocusedDataColor:tt})})),iM={};Object.defineProperty(iM,"darkGold",{get:Kx,enumerable:!0}),Object.defineProperty(iM,"turquoiseHexagon",{get:qx,enumerable:!0}),Object.defineProperty(iM,"light",{get:Jx,enumerable:!0}),Object.defineProperty(iM,"lightNature",{get:Qx,enumerable:!0}),Object.defineProperty(iM,"cyberSpace",{get:tM,enumerable:!0});const sM=iM,eM=sM.darkGold,hM=(t,i,s)=>e=>{const h={theme:eM,...s,...e},r=t(h),n=i?Wb(r):void 0,o=new ky(r.hr,e,r,r.Pt.bind(r),n);return r.Br((()=>o.BD())).Dr((()=>o.Rt())).Ss(),o},rM=(t,i)=>{t.Br((()=>{i.Nl()})).Dr((()=>i.Rt())).Ss()},nM=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||eM},r=t(h),n=i?Wb(r):void 0,o=new bl(r.hr,Gm(r,1).sI(0),rh,r.Pt.bind(r),n);return rM(r,o),o},oM=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||eM},r=t(h),n=i?Wb(r):void 0,o=new Pm(r.hr,Gm(r,1).sI(0),rh,r.Pt.bind(r),n,e);return rM(r,o),o},aM=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||eM},r=t(h),n=i?Wb(r):void 0,o=new Hd(r.hr,Gm(r,1).sI(0),rh,r.Pt.bind(r),n,e);return rM(r,o),o},uM=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||eM},r=t(h),n=i?Wb(r):void 0,o=new Kf(r.hr,Gm(r,1).sI(0),rh,r.Pt.bind(r),n,e);return rM(r,o),o},lM=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||eM},r=t(h),n=i?Wb(r):void 0,o=new(e&&e.type?e.type:jl)(r.hr,Gm(r,1).sI(0),rh,r.Pt.bind(r),n,void 0,e&&e.disableAnimations);return rM(r,o),o},cM=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||eM},r=t(h),n=i?Wb(r):void 0,o=new(e&&e.type?e.type:pd)(r.hr,Gm(r,1).sI(0),rh,r.Pt.bind(r),n,void 0,e&&e.disableAnimations);return rM(r,o),o},fM=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||eM},r=t(h),n=i?Wb(r):void 0,o=new(e&&e.type?e.type:nd)(r.hr,Gm(r,1).sI(0),rh,r.Pt.bind(r),n,void 0,e&&e.disableAnimations);return rM(r,o),o},dM=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||eM},r=t(h),n=i?Wb(r):void 0,o=new(e&&e.type?e.type:Ad)(r.hr,Gm(r,1).sI(0),rh,r.Pt.bind(r),n,void 0,!(!e||!e.disableAnimations));return rM(r,o),o},gM=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||eM},r=t(h),n=i?Wb(r):void 0,o=new tf(r.hr,Gm(r,1).sI(0),rh,r.Pt.bind(r),n,e,void 0);return rM(r,o),o},mM=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||eM},r=t(h),n=i?Wb(r):void 0,o=new Mc(r.hr,Gm(r,1).sI(0),rh,r.Pt.bind(r),n,void 0,e);return rM(r,o),o},yM=(t,i,s)=>e=>{const h={...s,...e,theme:(null==e?void 0:e.theme)||eM},r=t(h),n=i?Wb(r):void 0,o=new py(r.hr,Gm(r,1).sI(0),rh,r.Pt.bind(r),n,void 0);return rM(r,o),o};let pM;const SM={None:pu,Rectangle:wu,Circle:Au,Diamond:ku,Pointer:Cu},vM={Rectangle:wu,Circle:Au,Diamond:ku},bM={XY:Df},xM={XY:Pf,Spider:Gc,Map:Wc,Polar:Gc},MM={None:Su,UIRectangle:wu,UICircle:Au,UIDiamond:ku};return t.Animation=je,t.AnimationEasings=Ue,t.Animator=$e,t.AreaRangeSeries=um,t.AreaSeries=sm,t.AreaSeriesBipolar=nm,t.AreaSeriesMonopolar=em,t.AreaSeriesNegative=rm,t.AreaSeriesPositive=hm,t.AreaSeriesTypes=om,t.AutoCursor2DBuilder=Rc,t.AutoCursorBuilders=xM,t.AutoCursorXYBuilder=If,t.AutoFitStrategies=Ic,t.AutoFitStrategy=kc,t.Axis=dl,t.Axis3D=Jl,t.AxisScrollStrategies=Pn,t.AxisTickStrategies=Dn,t.Band=ou,t.BasicSeries=Uf,t.BorderedPicture=bu,t.BoxAndWhiskers=tg,t.BoxFigure=Qd,t.BoxSeries=Qg,t.BoxSeries3D=oc,t.Button=Uu,t.Chart=Ml,t.Chart3D=Mc,t.ChartComponent=ru,t.ChartMarker=Lf,t.ChartMarker2D=class extends Lf{constructor(t,i,s,e,h,r){super(t,i,s,e.bv(t,i,s,r),h,r)}},t.ChartMarkerXY=Rf,t.ChartWithCursor=Qc,t.ChartWithSeries=mc,t.ChartXY=Pm,t.Color=ye,t.ColorCSS=t=>{try{if(t.startsWith("rgba")){const i=t.substr(5).slice(0,-1),s=JSON.parse(`[${i}]`);return pe(s[0],s[1],s[2],255*s[3])}if(t.startsWith("rgb")){const i=t.substr(4).slice(0,-1),s=JSON.parse(`[${i}]`);return pe(s[0],s[1],s[2])}if(t.startsWith("hsl")){const i=t.substr(4).slice(0,-1).split(",").map(parseFloat),s=((t,i,s)=>{i/=100,s/=100;const e=(1-Math.abs(2*s-1))*i,h=t/60,r=e*(1-Math.abs(h%2-1));let n=[];isNaN(t)?n=[0,0,0]:h<=1?n=[e,r,0]:h<=2?n=[r,e,0]:h<=3?n=[0,e,r]:h<=4?n=[0,r,e]:h<=5?n=[r,0,e]:h<=6&&(n=[e,0,r]);const o=s-.5*e;return[Math.round(255*(n[0]+o)),Math.round(255*(n[1]+o)),Math.round(255*(n[2]+o))]})(i[0],i[1],i[2]);return pe(s[0],s[1],s[2])}return t.startsWith("#")||t.startsWith("0x")?Se(t):Se((t=>{const i=be[t.toLowerCase()];if(i)return i;throw new Error(`Unknown color code: ${t}`)})(t))}catch(t){}return console.warn(`ColorCSS parsing error: ${t}`),Se("#fff")},t.ColorHEX=Se,t.ColorHSV=ve,t.ColorPalettes=zx,t.ColorRGBA=pe,t.ColorShadingStyles=rc,t.ConstantLine=au,t.CursorBuilder=Ec,t.CursorBuilderXY=Tf,t.CustomTick=su,t.CustomizableFigure=qd,t.Dashboard=ky,t.DataGrid=py,t.DateTimeTickStrategy=ux,t.EllipseFigure=Bg,t.EllipseSeries=Og,t.EmptyFill=Te,t.EmptyPointMarker=Su,t.EmptyUIElement=yu,t.Figure=Zd,t.FigureSeries=Kd,t.FontSettings=Xn,t.FormattingFunctions=wn,t.FunnelChart=ed,t.FunnelChartTypes=ad,t.FunnelChartWithLabelsInsideSlices=od,t.FunnelChartWithLabelsOnSides=nd,t.FunnelSlice=Jf,t.GaugeChart=cd,t.GaugeChartTypes=Rx,t.GaugeSlice=dd,t.GenericAxis=Wn,t.GlowEffect=$b,t.HeatmapGridSeries=dm,t.HeatmapGridSeriesIntensityValues=gm,t.HeatmapScrollingGridSeries=mm,t.HeatmapScrollingGridSeriesIntensityValues=ym,t.Highlighter=nu,t.Icon=dy,t.ImageFill=yy,t.IndividualPointFill=Be,t.LUT=ke,t.LegendBoxBuilders=ul,t.LineAndPointSeries3D=ac,t.LineSeries=kg,t.LineSeries3D=uc,t.LinearGradientFill=Je,t.LinearGradientFillPalette=(t,i,s,e)=>{const h=t(i+1,e);return t=>new Je({stops:[{offset:0,color:h(t).getDarker()},{offset:.5,color:h(t)},{offset:1,color:h(t).getDarker()}],angle:s||90})},t.MapChart=tf,t.MapRegions=Ex,t.MapRegionsAfrica=Cx,t.MapRegionsAsia=Tx,t.MapRegionsAustralia=Ix,t.MapRegionsCanada=Fx,t.MapRegionsEurope=Px,t.MapRegionsNorthAmerica=Ox,t.MapRegionsSouthAmerica=Lx,t.MapRegionsUSA=Bx,t.MapRegionsWorld=Dx,t.MapTypes=jc,t.MarkerBuilders=bM,t.NumericTickStrategy=yx,t.OHLCBar=eg,t.OHLCCandleStick=sg,t.OHLCFigure=ig,t.OHLCFigures=hg,t.OHLCSeries=Xg,t.OHLCSeriesTraditional=Zg,t.OHLCSeriesTypes=qg,t.OHLCSeriesWithAutomaticPacking=Kg,t.OnScreenMenu=cm,t.OnScreenMenuAnimationsButton=Ta,t.OnScreenMenuButton=ba,t.OnScreenMenuControlBase=na,t.OnScreenMenuCustomButton=Fa,t.OnScreenMenuOsmToggleButton=Pa,t.OnScreenMenuToggleButton=xa,t.OnScreenMenuZoomInButton=Ma,t.OnScreenMenuZoomInXButton=_a,t.OnScreenMenuZoomInYButton=wa,t.OnScreenMenuZoomOutButton=Aa,t.OnScreenMenuZoomOutXButton=ka,t.OnScreenMenuZoomOutYButton=Ca,t.OnScreenMenuZoomToFitButton=Ia,t.PalettedFill=Le,t.Panel=Sl,t.PhongShadingStyle=ec,t.Picture=vu,t.PieChart=Ol,t.PieChartTypes=Yl,t.PieChartWithLabelsInsideSlices=$l,t.PieChartWithLabelsOnSides=jl,t.PieSlice=Il,t.PixelatedPoints3D=to,t.PointCloudSeries3D=dc,t.PointLineSeries=ug,t.PointLineSeries3D=lc,t.PointMarkers=MM,t.PointSeries=lm,t.PointSeries3D=fc,t.PointSeriesTypes3D=gc,t.PointStyle3D=io,t.PolarAreaSeries=Yf,t.PolarAreaSeriesInterior=Xf,t.PolarAxis=hf,t.PolarAxisAmplitude=nf,t.PolarAxisTick=rf,t.PolarChart=Kf,t.PolarLineSeries=xf,t.PolarPointLineSeries=Mf,t.PolarPointSeries=_f,t.PolarPolygon=wf,t.PolarPolygonSeries=$f,t.PolarSector=cf,t.PolarSeries=df,t.PolygonFigure=Ig,t.PolygonSeries=Fg,t.PyramidChart=Md,t.PyramidChartTypes=Cd,t.PyramidChartWithLabelsInsideSlices=kd,t.PyramidChartWithLabelsOnSides=Ad,t.PyramidSlice=Sd,t.RadialGauge=fd,t.RadialGradientFill=Ke,t.RadialGradientFillPalette=(t,i,s)=>{const e=t(i+1,s);return t=>new Ke({stops:[{offset:0,color:e(t)},{offset:1,color:e(t).getDarker()}]})},t.RangeSeries=tm,t.RectangleFigure=Cg,t.RectangleSeries=Tg,t.SegmentFigure=Pg,t.SegmentSeries=Dg,t.Series2D=ff,t.Series3D=nc,t.SeriesMarkerXY=zf,t.SeriesXY=Vf,t.SimpleFigureSeries=Jd,t.SimpleShadingStyle=ic,t.Slice=Cl,t.SliceLabelFormatters=kl,t.SliceSorters=Al,t.SolidFill=De,t.SolidFillPalette=(t,i,s)=>{const e=t(i,s);return t=>new De({color:e(t)})},t.SolidGauge=pd,t.SolidGaugeSlice=gd,t.SolidLine=sh,t.SpiderAxis=Dd,t.SpiderChart=Hd,t.SpiderSeries=Od,t.SplineSeries=dg,t.StaticCursor2DBuilder=zc,t.StaticCursorXYBuilder=Ff,t.StepSeries=Ag,t.SurfaceGridSeries3D=bc,t.SurfaceScrollingGridSeries3D=xc,t.TableContentBuilder=Fc,t.Themes=sM,t.Tick=ll,t.TickStyle=Xb,t.TimeFormattingFunctions=wx,t.TimeTickStrategy=kx,t.TriangulatedPoints3D=Jn,t.UIBackgrounds=SM,t.UIButtonPictures=vM,t.UICircle=Au,t.UIColumnGrid=class extends Fu{constructor(){super(...arguments),this.yf=[]}addColumn(){return this.addElement(Lu,void 0)}getColumn(t,i=!1){return i&&this.yf.length<=t?(this.addColumn(),this.getColumn(t,!0)):this.yf[t]}},t.UIDiamond=ku,t.UIElementBuilders=al,t.UIElementColumn=Pu,t.UIElementLine=Iu,t.UIElementRow=Fu,t.UIElementWithBackground=tu,t.UIEmptyBackground=pu,t.UILabel=Mu,t.UILayoutBuilders=_c,t.UILayoutGap=Tu,t.UILegendBoxPanel=wc,t.UIObject=Za,t.UIOrigins=Ba,t.UIPanel=bl,t.UIPointer=Cu,t.UIPolygon=xu,t.UIRectangle=wu,t.UIRowGrid=Bu,t.VisibleFill=Pe,t.VisibleTicks=Zb,t.ZoomBandChart=Em,t.defaultOsmBackgroundColor=Ga,t.disableThemeEffects=t=>({...t,effect:void 0}),t.emptyFill=Ie,t.emptyLine=th,t.emptyPoints3D=Kn,t.emptyTick=Kb,t.formatLongitudeLatitude=ef,t.isSolidLine=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"solid"!==t.lineType),t.lightningChart=(t,i)=>{const s="object"==typeof t?t.license:t,e="object"==typeof t?t.licenseInformation:i,h="object"==typeof t?t:void 0,r=new Ib;return r.e=s||"",pM||(pM=(t=>{let i,s,e=!1,h=!1,r=!1,n=!1,o="";try{if(Ab){const i=(t=>{if(!t)return;const i=t.split("-");if(i.length>0)switch(i[0]){case"0001":return"0001";case"0002":return"0002";default:return}})(Ab);if("0001"===i){Tb=new Uint8Array([2]);const i=(t=>{if(!t)return;const i=t.split("-");return 4===i.length?i[1].startsWith("m")?2:1:0})(Ab);1===i?(r=!zb(Ab),e=!0):2===i?(Vb(Ab,t),h=!0):(Fb=!0,Lb(Ab),n=!0)}else{if("0002"!==i)throw new Error(wb(0,0,1,7,1,12,5));{const i=(t=>{if(!t)return;const i=t.split("-");return i.length>=2?Uint8Array.from(atob(i[1]),(t=>t.charCodeAt(0)))[0]:void 0})(Ab);if(104===i)Fb=!0,Lb(Ab),n=!0;else if(189===i)r=!zb(Ab),e=!0;else{if(159!==i)throw new Error(wb(0,0,1,7,1,12,5));Vb(Ab,t),h=!0}}}}else Cb=!0}catch(t){t instanceof Error&&(i=t)}try{n&&(s=_b[wb(-1,34)][wb(-1,35)](wb(-1,39))||void 0)}catch(t){_b.console.error(t)}let a=!1;if(s){const t=s.split("-");if(2===t.length&&Rb(t[0],t[1])){const[i,s]=t[0].split(":").map((t=>Number(t)));Date.now()-s<.95*i*1e3&&(a=!0)}}const u=!(i||Cb||e||h||a),l=(()=>{const t=new(_b[wb(-1,0)]);return t.open(wb(0,26),wb(-2,0)),t.setRequestHeader(wb(-1,24),wb(-1,25)),t.withCredentials=!0,t})();if(u){let t;try{t=parseInt(Ab?Ab.split("-")[1]:Math.floor(1e6*Math.random()).toString(),16)}catch(i){t=Math.floor(1e6*Math.random())}const i=Math.floor(1e6*Math.random());o=(t^i).toString();const s={};let e="",h="",r="";Ab=Ab||"";const n=wb(-4,0);for(let t=0;t<Ab.length;t+=1){const i=Ab.charCodeAt(t)^n.charCodeAt(t);e+=String.fromCharCode(i)}const a=wb(-3,0);for(let t=0;t<a.length;t+=1)h+=String.fromCharCode(a.charCodeAt(t)^n.charCodeAt(t));for(let t=0;t<o.length;t+=1)r+=String.fromCharCode(o.charCodeAt(t)^n.charCodeAt(t));s[wb(-1,3)]=_b.btoa(e),s[wb(-1,4)]=_b.btoa(h),s.h=_b.btoa(r),s.v=3,s.s=_b[wb(-1,34)][wb(-1,35)](wb(-1,33))||void 0,l.send(JSON.stringify(s))}return t=>{if(i)throw Nb(i.message,t),i;const e={er:t=>{const i=`${wb(0,40,1,42,1,43,1,44,1,45,1,46,1,47,1)}${(t=>{switch(t){case 1:return wb(0,48,49);case 0:return wb(0,48,50);case 2:return wb(0,51);case 3:return wb(0,52,48);case 4:return wb(0,53,48);case 5:return wb(0,54,48);case 6:return wb(0,55,48);case 7:return wb(0,56,48);case 8:return wb(0,57,48);case 9:return wb(0,58,48)}return Sr(0,"")})(t)}`;throw Nb(i,h,!1),new Error(i)},...kb},h=new Rv(t,e),n=t=>{if("error"===(null==t?void 0:t.type)&&s){const t=s.split("-");if(2===t.length&&Rb(t[0],t[1])){const[,i]=t[0].split(":").map((t=>Number(t))),s=Date.now();if(i+xb>s)return Fb=!1,void Gb(l,!1,a)}}if(l.readyState===_b[wb(-1,0)].DONE){if(200!==l.status){let i="";try{i=t&&"loadend"!==t.type?wb(0,0,1,23,1,32,1,24,5):JSON.parse(l[wb(-1,23)]).message,Gb(l,!1,a)}catch(t){console.error(t)}throw Nb(i,h),new Error(wb(0,0,1,2,1,7,1,12,5)+i)}{const t=JSON.parse(l[wb(-1,23)]);if(!Rb(o+wb(-3,0),t.h)){const t=wb(0,0,1,27,1,28,1,29,1,30,1,31,5);throw Nb(t,h),new Error(t)}_b[wb(-1,34)][wb(-1,36)](wb(-1,39),t.t),_b[wb(-1,34)][wb(-1,36)](wb(-1,33),t.s),Fb=!1}}},a=t=>{n(t)};return Gb(l,!0,a),u?setTimeout((()=>{if(Fb){let t=!0;if(s){const i=s.split("-");if(2===i.length&&Rb(i[0],i[1])){const[,s]=i[0].split(":").map((t=>Number(t))),e=Date.now();s+xb>e&&(t=!1)}}t&&Nb(wb(0,25,1,23,1,32,1,24,5),h)}}),1e4):Gb(l,!1,a),r?(t=>{let i;Fb=!1;const s=t.xi(),e=()=>{i&&(t.zh(i.Rh()),i=void 0),i=t.tI("deployment test"),i.$e(t.Jt).Ks(wb(0,34,1,33)).Qn({x:s.x/2,y:s.y/2}).jn(50).ie(13).Js(new De({color:pe(128,128,128,100)})).Wn("Arial").Yn(500).setMouseInteractions(!1),t.Oh().Lh()};t.Zr((()=>{e()})),setTimeout(e,0),setInterval((()=>{i&&i.Rh()<t.Lr()-1?e():i||e()}),1e3)})(h):l.readyState===_b[wb(-1,0)].DONE&&n(),h}})(e)),((t,i,s)=>({Dashboard:hM(t,i,s),ChartXY:oM(t,i,s),Spider:aM(t,i,s),Polar:uM(t,i,s),Pie:lM(t,i,s),UIPanel:nM(t,i,s),Gauge:cM(t,i,s),Funnel:fM(t,i,s),Pyramid:dM(t,i,s),Chart3D:mM(t,i,s),Map:gM(t,i,s),DataGrid:yM(t,i,s)}))(pM,r.e,h)},t.onScreenMenuControlBaseHeight=Ea,t.onScreenMenuControlBaseWidth=Ra,t.onScreenMenuControlOpacity=za,t.onScreenMenuDefaultButtonShape=Na,t.onScreenMenuSpriteURL=Va,t.regularColorSteps=(t,i,s,e)=>{if(!s||0===s.length)throw new Error("Invalid use regularColorSteps 'colorPalette' is undefined or empty");const h=null==e?void 0:e.formatLabels,r=null==e?void 0:e.alpha;return s.map(((e,n)=>{const o=t+n/(s.length-1)*(i-t);return{color:void 0!==r?e.setA(r):e,value:o,label:h?h(o):void 0}}))},t.saveToFile=ml,t.synchronizeAxisIntervals=ah,t.translatePoint=oh,t.translatePoint3D=(t,i,s)=>{if("axes"===i.id&&"world"===s.id)return i.chart.Vy.dN(t);if("world"===i.id&&"axes"===s.id)return i.chart.Vy.gN(t);if(i.id===s.id)return t;throw new Error("LC JS translatePoint3D misusage | originCoordinateSystem and targetCoordinateSystem arguments must be either Chart3D.world or Chart3D.axes")},t.transparentFill=Oa,t.transparentLine=La,t.vec3Utils=_r,t.xDimensionStrategy=Wd,t.yDimensionStrategy=Ud,Object.defineProperty(t,"LH",{value:!0}),t}({});
